(()=>{"use strict";var e={994:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(s(752)),a=l(s(920)),i=l(s(463));t.default=class{constructor(){this.processes=[],this.frames=[],this.call_pool=[],this.call_queue=[],this.call_history=[],this.number_of_frames=0,this.number_of_pages=0,this.allocationAlgorithm=null,this.replacementAlgorithm=new i.default,this.total_page_faults=0,this.time=0,this.last_call_caused_fault=!1}init(e,t){this.number_of_pages=null!=e?e:this.number_of_pages,this.number_of_frames=null!=t?t:this.number_of_frames,this.call_queue=[...this.call_pool],this.frames=[],this.call_history=[],this.time=0,this.total_page_faults=0;for(let e=0;e<this.number_of_frames;e++)this.frames.push(new n.default)}addProcess(e){this.processes.push(e)}clearProcesses(){this.processes=[]}generatePageCallPool(){for(let e=0;e<this.processes.length;e++)this.processes[e].generateCalls(),this.addPageCallsToPool(this.processes[e].getCalls(),this.processes[e])}addPageCallToPool(e){this.call_pool.push(e)}addPageCallsToPool(e,t){for(let s=0;s<e.length;s++)this.addPageCallToPool(new a.default(e[s],t))}clearPageCallPool(){this.call_pool=[]}setAlgorithm(e){this.allocationAlgorithm=e}nextTick(){var e,t,s,l,n,a;if(null==this.allocationAlgorithm)throw new Error("No algorithm selected");const i=this.call_queue.shift();if(null==i)return console.warn("Empty page call queue but not finished"),void this.time++;if(this.call_history.push(i),console.log("Page call: "+i.id),i){null===(t=(e=this.allocationAlgorithm).allocateFrames)||void 0===t||t.call(e,this.frames,this.processes);const o=this.frames.filter((e=>null==e.process)).length;o>0&&console.warn(`Not all frames are allocated\nAllocated: ${this.frames.length-o}\nUnallocated: ${o}`),null===(l=(s=this.replacementAlgorithm).onPageCall)||void 0===l||l.call(s,this.getCurrentStateData(i));let r=!0;for(let e=0;e<this.frames.length;e++){if(null==this.frames[e])throw new Error("Frame is null");if(null==this.frames[e].page&&this.frames[e].process==i.process){this.frames[e].page=i,this.total_page_faults++,i.process.page_faults++,this.last_call_caused_fault=!0,r=!1;break}if(null!=this.frames[e].page&&this.frames[e].page.id==i.id){null===(a=(n=this.replacementAlgorithm).onPageAlreadyInMemory)||void 0===a||a.call(n,this.getCurrentStateData(i)),this.last_call_caused_fault=!1,r=!1;break}}if(r){if(console.log("Page fault: "+i.id),null!=this.frames.find((e=>e.process==i.process&&null==e.page)))throw new Error("Initial page fill not handled properly");this.total_page_faults++,i.process.page_faults++,this.last_call_caused_fault=!0;const e=this.replacementAlgorithm.handlePageFault(this.getCurrentStateData(i));-1!=e&&(this.frames[this.getFrameIndexById(e)].page=i)}let h=!1;for(const e of this.frames)if(null!=e.page&&e.page.id==i.id){h=!0;break}if(!h)throw new Error("Page fault not handled properly - page not in memory");i.call(this.time)}this.time++}getCurrentStateData(e){const t=this.frames.filter((t=>t.process==e.process)),s=this.call_history.filter((t=>t.process==e.process));return{page_call:e,current_frames:t,previous_page_calls:s,processes:this.processes}}isFinished(){return 0==this.call_queue.length}getFrameIndexById(e){for(let t=0;t<this.frames.length;t++)if(this.frames[t].id==e)return t;return-1}getResults(){return{total_page_faults:this.total_page_faults,total_page_hits:this.call_history.length-this.total_page_faults,total_calls:this.call_history.length}}simulate(){for(this.init();!this.isFinished();)this.nextTick();return this.getResults()}displayResults(e,t=this.allocationAlgorithm.name){document.getElementById("results_wrapper").style.display="flex",document.getElementById("results").innerHTML=`\n        Algorithm: ${t.toUpperCase()}\n\n        Total page faults: <b style='color: red'>${e.total_page_faults.toFixed(0)}</b>\n        Total page hits: <b style='color: lime'>${e.total_page_hits.toFixed(0)}</b>\n        Total page calls: <b>${e.total_calls.toFixed(0)}</b>\n        `.replace(RegExp("\n","g"),"<br />")}compareAllAndDisplayResults(e){document.getElementById("results_wrapper").style.display="flex";const t=document.getElementById("results");t.innerHTML="";for(let s=0;s<e.length;s++){this.setAlgorithm(e[s]);const l=this.simulate();t.innerHTML+=`\n            Algorithm: ${e[s].name.toUpperCase()}\n            Total page faults: <b style='color: red'>${l.total_page_faults.toFixed(0)}</b>\n            Total page hits: <b style='color: lime'>${l.total_page_hits.toFixed(0)}</b>\n            Total page calls: <b>${l.total_calls.toFixed(0)}</b>\n            `.replace(RegExp("\n","g"),"<br />"),t.innerHTML+="<br />"}}}},498:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.visible=!1,this.playing=!1,this.speed=1,this.GUI=null,this.MENU=null,this.play_pause_button=null,this.step_button=null,this.stop_button=null,this.speed_slider=null,this.info_algorithm=null,this.info_time=null,this.info_is_done=null,this.info_in_queue=null,this.info_finished=null,this.info_total_page_faults=null,this.info_total_page_hits=null,this.frame_rows=[],this.see_code_button=null,this.storedSetInterval=null,this.menu=e}init(){this.GUI=document.getElementById("animation_gui"),this.MENU=document.getElementById("settings"),this.play_pause_button=document.getElementById("animation_play_pause"),this.step_button=document.getElementById("animation_step"),this.stop_button=document.getElementById("animation_stop"),this.speed_slider=document.getElementById("animation_speed_slider"),this.info_algorithm=document.getElementById("animation_info_algorithm_value"),this.info_time=document.getElementById("animation_info_time_value"),this.info_is_done=document.getElementById("animation_is_done"),this.info_in_queue=document.getElementById("calls_in_queue_value"),this.info_finished=document.getElementById("calls_finished_value"),this.info_total_page_faults=document.getElementById("total_page_faults_value"),this.info_total_page_hits=document.getElementById("total_page_hits_value"),this.see_code_button=document.getElementById("code_button"),this.info_is_done.style.display="none",this.play_pause_button.addEventListener("click",(()=>{this.togglePlaying()})),this.step_button.addEventListener("click",(()=>{this.step()})),this.stop_button.addEventListener("click",(()=>{this.toggleVisible(!1)})),this.speed_slider.addEventListener("input",(()=>{this.speed=parseInt(this.speed_slider.value),this.refreshSpeed()})),this.see_code_button.addEventListener("click",(()=>{if(null==this.menu.memory.allocationAlgorithm)return;const e=this.menu.memory.allocationAlgorithm.name;window.open(`https://github.com/brun0ne/scheduling-sim/blob/main/page_replacement_src/classes/algorithms/${e}.ts`,"_blank").focus()})),this.refreshSpeed(),this.initStateTable()}togglePlaying(e){this.playing=null==e?!this.playing:e,this.refreshSpeed(),this.play_pause_button.innerHTML=this.playing?"Pause":"Play"}toggleVisible(e){this.visible=null==e?!this.visible:e,this.visible?(this.GUI.style.display="block",this.MENU.style.display="none",this.menu.display.resizeCallback=()=>{this.drawCurrentState()},this.drawCurrentState()):(this.GUI.style.display="none",this.MENU.style.display="flex",null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.menu.display.resizeCallback=()=>{this.menu.refreshCalls()},this.menu.refreshCalls())}reset(){if(null==this.play_pause_button||null==this.info_is_done||null==this.step_button)throw new Error("call init() first!");this.menu.memory.init(),this.play_pause_button.innerHTML="Play",this.playing=!1,this.info_is_done.style.display="none",this.play_pause_button.disabled=!1,this.step_button.disabled=!1,this.initStateTable()}startAnimation(){this.reset(),this.toggleVisible(!0)}drawCurrentState(){this.refreshInfo(),this.drawCalls()}initStateTable(){const e=document.getElementById("animation_table_time"),t=document.getElementById("animation_table_page_calls"),s=document.getElementById("animation_table_body");e.innerHTML="",t.innerHTML="";{const t=document.createElement("th");t.innerHTML="Time",t.classList.add("header"),e.appendChild(t)}{const e=document.createElement("th");e.innerHTML="Page calls",e.classList.add("header"),t.appendChild(e)}{for(;null!=s.lastChild&&"animation_table_page_calls"!=s.lastChild.id;)s.removeChild(s.lastChild);const e=[];for(let t=0;t<this.menu.memory.number_of_frames;t++){const l=document.createElement("tr"),n=document.createElement("th");n.innerHTML=`Frame ${t}`,l.appendChild(n),e.push(l),s.appendChild(l)}this.frame_rows=e}}drawCalls(e,t,s,l,n){const a=document.getElementById("animation_table_time"),i=document.getElementById("animation_table_page_calls"),o=this.menu.memory.call_history.at(-1);if(null==o)return;{const e=document.createElement("th");e.innerHTML=`${this.menu.memory.time}`,a.appendChild(e)}{const e=document.createElement("th");e.innerHTML=`${o.id}`,i.appendChild(e)}for(let e=0;e<this.menu.memory.number_of_frames;e++){const t=this.frame_rows[e],s=this.menu.memory.frames[e].page,l=document.createElement("th");l.innerHTML=`${null!=s?s.id:""}`,null!=s&&s.id==o.id&&this.menu.memory.last_call_caused_fault&&(l.style.backgroundColor="red"),null!=this.menu.memory.frames[e].process&&(l.innerHTML+=` <span style='color: yellow'>(${this.menu.memory.frames[e].process.id})</span>`),t.appendChild(l)}const r=document.getElementById("animation_call_table");r.scrollLeft=r.scrollWidth}refreshInfo(){const e=this.menu.memory;if(null==e.allocationAlgorithm)throw new Error("call startAnimation() first!");this.info_algorithm.innerHTML=e.allocationAlgorithm.name,this.info_time.innerHTML=e.time.toString(),e.isFinished()?this.info_is_done.style.display="block":this.info_is_done.style.display="none",this.info_total_page_hits.innerHTML=(e.call_history.length-e.total_page_faults).toString(),this.info_total_page_faults.innerHTML=e.total_page_faults.toString(),this.info_in_queue.innerHTML=e.call_queue.length.toString(),this.info_finished.innerHTML=e.call_history.length.toString()}refreshSpeed(){null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.storedSetInterval=setInterval((()=>{this.playing&&this.step()}).bind(this),1e3/this.speed)}step(){this.menu.memory.isFinished()||(this.menu.memory.nextTick(),this.drawCurrentState(),this.menu.memory.isFinished()&&(this.togglePlaying(!1),this.menu.memory.displayResults(this.menu.memory.getResults()),this.afterDone()))}afterDone(){if(null==this.info_is_done||null==this.play_pause_button||null==this.step_button)throw new Error("call init() first!");this.info_is_done.style.display="block",this.play_pause_button.disabled=!0,this.step_button.disabled=!0}}},752:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(){this.page=null,this.process=null,this.id=s.next_id++}}s.next_id=0,t.default=s},463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="LRU"}handlePageFault(e){let t=-1,s=-1;for(let l=0;l<e.current_frames.length;l++){const n=e.current_frames[l];if(n.process!=e.page_call.process&&console.error("Frame is assigned to a different process - this should be ensured not to happen by the caller"),null==n.page)return console.warn("Frame is empty - this should be ensured not to happen by the caller"),l;let a=-1;for(let t=e.previous_page_calls.length-1;t>=0;t--)if(e.previous_page_calls[t].id==n.page.id){a=t;break}if(-1==a)return l;(a<s||-1==s)&&(t=l,s=a)}return-1==t?(console.warn("No frame to replace found by LRU"),-1):e.current_frames[t].id}}},268:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(s(617)),a=l(s(994)),i=l(s(950)),o=l(s(920)),r=l(s(382)),h=l(s(498)),u=l(s(634)),c=l(s(960)),d=l(s(728));t.default=class{constructor(){this.display=new n.default,this.memory=new a.default,this.animationGUI=new h.default(this)}init(){document.getElementById("run_button").addEventListener("click",(()=>{this.run()})),document.getElementById("run_with_animation_button").addEventListener("click",(()=>{this.run(!0)})),document.getElementById("add_button").addEventListener("click",(()=>{this.addProcesses()})),document.getElementById("clear_button").addEventListener("click",(()=>{this.clearProcesses()})),document.getElementById("generate_call_queue_button").addEventListener("click",(()=>{this.addCalls()})),document.getElementById("clear_call_queue_button").addEventListener("click",(()=>{this.clearCalls()})),this.memory.init(5,3),this.display.init("main_canvas"),this.animationGUI.init(),this.display.setResizeCallback((()=>{this.refreshCalls()})),document.getElementById("s_frame_count").addEventListener("change",(e=>{const t=parseInt(e.target.value);isNaN(t)||t<1?alert("Invalid number of frames"):(this.memory.init(this.memory.number_of_pages,t),this.refreshCalls())})),document.getElementById("a_type").addEventListener("change",(e=>{"compare_all"===e.target.value.toLowerCase()?document.getElementById("run_with_animation_button").setAttribute("disabled","true"):document.getElementById("run_with_animation_button").removeAttribute("disabled"),"fault_control"===e.target.value.toLowerCase()?(document.getElementById("s_min_page_faults_all").style.display="block",document.getElementById("s_max_page_faults_all").style.display="block"):(document.getElementById("s_min_page_faults_all").style.display="none",document.getElementById("s_max_page_faults_all").style.display="none")})),document.getElementById("results_close").addEventListener("click",(()=>{document.getElementById("results_wrapper").style.display="none"})),this.refreshCalls()}addProcesses(){const e=parseInt(document.getElementById("c_count").value),t=parseInt(document.getElementById("s_min_range").value),s=parseInt(document.getElementById("s_max_range").value),l=parseInt(document.getElementById("s_min_calls").value),n=parseInt(document.getElementById("s_max_calls").value);let a=0;for(let o=0;o<e;o++){const e=Math.floor(Math.random()*(s-t+1))+t;this.memory.addProcess(new i.default([a,a+e],Math.floor(Math.random()*(n-l+1))+l,o)),this.memory.processes[this.memory.processes.length-1].generateCalls(),a+=e}this.refreshCalls()}clearProcesses(){this.memory.clearProcesses(),this.refreshCalls()}addCalls(){for(let e=0;e<this.memory.processes.length;e++)for(let t=0;t<this.memory.processes[e].getCalls().length;t++)this.memory.call_pool.push(new o.default(this.memory.processes[e].getCalls()[t],this.memory.processes[e]));this.memory.call_pool.sort((()=>Math.random()-.5)),this.refreshCalls()}clearCalls(){this.memory.call_pool=[],this.refreshCalls()}refreshCalls(){document.getElementById("p_current_count").innerHTML=`(${this.memory.processes.length.toString()})`;const e=document.getElementById("generate_call_queue_button");this.memory.processes.length>0&&0==this.memory.call_pool.length?e.removeAttribute("disabled"):e.attributes.setNamedItem(document.createAttribute("disabled"));const t=document.getElementById("all_processes");t.innerHTML="";for(let e=0;e<this.memory.processes.length;e++){const s=this.memory.processes[e],l=document.createElement("span");l.classList.add("process"),l.innerHTML=`<span class="process_name">Calls of process ${e}: </span> <span class="process_calls">${s.getCalls().join(", ")}</span><br />`,t.appendChild(l)}0==this.memory.processes.length&&(t.innerHTML="<span style='color: yellow'>No processes added yet.</span>"),document.getElementById("current_call_count").innerHTML=`(${this.memory.call_pool.length.toString()})`;const s=document.getElementById("main_call_queue");s.innerHTML=this.memory.call_pool.map((e=>e.id)).join(", "),0==this.memory.call_pool.length&&(s.innerHTML="<span style='color: yellow'>No calls in queue.</span>")}run(e){if(this.memory.processes.length>this.memory.frames.length)return void alert("Not enough frames for all processes");let t=!1;switch(document.getElementById("a_type").value.toLowerCase()){case"equal":this.memory.setAlgorithm(new r.default);break;case"proportional":this.memory.setAlgorithm(new u.default);break;case"fault_control":this.memory.setAlgorithm(new c.default);break;case"locality_model":this.memory.setAlgorithm(new d.default);break;case"compare_all":t=!0;break;default:alert("Invalid algorithm")}if(t){const e=[new r.default,new u.default,new c.default];this.memory.compareAllAndDisplayResults(e)}else if(e)this.animationGUI.startAnimation();else{const e=this.memory.simulate();this.memory.displayResults(e)}}}},920:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.last_call_time=0,this.id=e,this.process=t}call(e){this.last_call_time=e,this.process.done_calls++}}},950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,s){this.page_faults=0,this.done_calls=0,this.calls=[],this.range_of_pages=e,this.number_of_calls=t,this.id=s}generateCalls(){this.calls=[];for(let e=0;e<this.number_of_calls;e++)this.calls.push(Math.floor(Math.random()*(this.range_of_pages[1]-this.range_of_pages[0]))+this.range_of_pages[0])}getCalls(){return this.calls}}},382:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Equal"}allocateFrames(e,t){const s=Math.floor(e.length/t.length);console.log(`Allocating ${s} frames per process`),console.log(`data.current_frames.length = ${e.length}, data.processes.length = ${t.length}`);for(let l=0;l<e.length;l++)null==e[l].process&&(e[l].process=t[Math.floor(l/s)])}}},728:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="LocalityModel"}allocateFrames(e,t){throw new Error("Method not implemented.")}}},960:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(s(634));t.default=class{constructor(){this.name="PageFaultControl",this.run_proportional=!0}allocateFrames(e,t){if(this.run_proportional)return this.run_proportional=!1,(new n.default).allocateFrames(e,t);for(let s=0;s<t.length;s++){const l=t[s].page_faults/t[s].done_calls,n=e.filter((e=>e.process==t[s])).length;if(l<3&&n>1)for(let l=0;l<e.length;l++)if(e[l].process==t[s]){e[l].process=null;break}if(l>5)for(let l=0;l<e.length;l++)if(null==e[l].process){e[l].process=t[s];break}}}}},634:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Proportional"}allocateFrames(e,t){const s=t.reduce(((e,t)=>e+t.number_of_calls),0);let l=0;for(let n=0;n<t.length;n++){let a=Math.floor(t[n].number_of_calls/s*e.length)||1;for(let s=0;s<a;s++){if(l>=e.length){console.error("There are not enough frames to allocate all frames.");break}null==e[l].process&&(e[l].process=t[n],l++)}}}}},965:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(s(268));"undefined"!=typeof document&&(new n.default).init()},617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.ctx=null,this.resizeCallback=null}init(e){const t=document.getElementById(e);this.ctx=t.getContext("2d"),window.addEventListener("resize",this.resizeToFit.bind(this)),this.resizeToFit()}resizeToFit(){null!=this.ctx&&(this.ctx.canvas.width=window.innerWidth,this.ctx.canvas.height=window.innerHeight,null!=this.resizeCallback&&this.resizeCallback())}setResizeCallback(e){this.resizeCallback=e}}}},t={};!function s(l){var n=t[l];if(void 0!==n)return n.exports;var a=t[l]={exports:{}};return e[l].call(a.exports,a,a.exports,s),a.exports}(965)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUUsRUFBT0MsV0FBVyxNQUU3QnhHLE9BQU9ULGlCQUFpQixTQUFVckYsS0FBS3VNLFlBQVkvRCxLQUFLeEksT0FFeERBLEtBQUt1TSxhQUNULENBRUFBLGNBQ29CLE1BQVp2TSxLQUFLbU0sTUFJVG5NLEtBQUttTSxJQUFJRSxPQUFPRyxNQUFRMUcsT0FBTzJHLFdBQy9Cek0sS0FBS21NLElBQUlFLE9BQU9LLE9BQVM1RyxPQUFPNkcsWUFFTCxNQUF2QjNNLEtBQUtrRyxnQkFDTGxHLEtBQUtrRyxpQkFFYixDQUVBcUQsa0JBQWtCcUQsR0FDZDVNLEtBQUtrRyxlQUFpQjBHLENBQzFCLEUsR0MvQkFDLEVBQTJCLENBQUMsR0FHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVeEssS0FBSzRLLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNKLEdBR3BFSyxFQUFPRCxPQUNmLENDbkIwQkosQ0FBb0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NsYXNzZXMvQWxsb2NhdGluZ01NVS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL0FuaW1hdGlvbkdVSS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL0ZyYW1lLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvTFJVLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvTWVudS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL1BhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9Qcm9jZXNzLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvYWxnb3JpdGhtcy9FcXVhbC50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvTG9jYWxpdHlNb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvUGFnZUZhdWx0Q29udHJvbC50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvUHJvcG9ydGlvbmFsLnRzIiwid2VicGFjazovLy8uL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4uL3NoYXJlZC9jbGFzc2VzL0Rpc3BsYXkudHMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFsbG9jYXRpb25BbGdvcml0aG0gZnJvbSBcIi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiXG5cbmltcG9ydCBGcmFtZSBmcm9tIFwiLi9GcmFtZVwiXG5pbXBvcnQgUGFnZSBmcm9tIFwiLi9QYWdlXCJcbmltcG9ydCBQcm9jZXNzIGZyb20gXCIuL1Byb2Nlc3NcIlxuXG5pbXBvcnQgUmVwbGFjZW1lbnRBbGdvcml0aG0gZnJvbSBcIi4vUmVwbGFjZW1lbnRBbGdvcml0aG1cIlxuaW1wb3J0IExSVSBmcm9tIFwiLi9MUlVcIlxuXG5leHBvcnQgdHlwZSBNZW1vcnlTdGF0ZURhdGEgPSB7XG4gICAgcGFnZV9jYWxsOiBSZWFkb25seTxQYWdlPixcbiAgICBjdXJyZW50X2ZyYW1lczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxGcmFtZT4+LFxuICAgIHByZXZpb3VzX3BhZ2VfY2FsbHM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8UGFnZT4+LFxuICAgIHByb2Nlc3NlczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxQcm9jZXNzPj5cbn07XG5cbmV4cG9ydCB0eXBlIFJlc3VsdHMgPSB7XG4gICAgdG90YWxfcGFnZV9mYXVsdHM6IG51bWJlcixcbiAgICB0b3RhbF9wYWdlX2hpdHM6IG51bWJlcixcbiAgICB0b3RhbF9jYWxsczogbnVtYmVyXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbGxvY2F0aW5nTU1VIHtcbiAgICBwcm9jZXNzZXM6IEFycmF5PFByb2Nlc3M+ID0gW11cbiAgICBmcmFtZXM6IEFycmF5PEZyYW1lPiA9IFtdXG5cbiAgICBjYWxsX3Bvb2w6IEFycmF5PFBhZ2U+ID0gW11cbiAgICBjYWxsX3F1ZXVlOiBBcnJheTxQYWdlPiA9IFtdXG4gICAgY2FsbF9oaXN0b3J5OiBBcnJheTxQYWdlPiA9IFtdXG5cbiAgICBudW1iZXJfb2ZfZnJhbWVzOiBudW1iZXIgPSAwXG4gICAgbnVtYmVyX29mX3BhZ2VzOiBudW1iZXIgPSAwXG5cbiAgICBhbGxvY2F0aW9uQWxnb3JpdGhtOiBBbGxvY2F0aW9uQWxnb3JpdGhtIHwgbnVsbCA9IG51bGxcbiAgICByZXBsYWNlbWVudEFsZ29yaXRobTogUmVwbGFjZW1lbnRBbGdvcml0aG0gPSBuZXcgTFJVKClcblxuICAgIHRvdGFsX3BhZ2VfZmF1bHRzOiBudW1iZXIgPSAwXG4gICAgdGltZTogbnVtYmVyID0gMFxuXG4gICAgbGFzdF9jYWxsX2NhdXNlZF9mYXVsdDogYm9vbGVhbiA9IGZhbHNlXG5cbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gICAgaW5pdChudW1iZXJfb2ZfcGFnZXM/OiBudW1iZXIsIG51bWJlcl9vZl9mcmFtZXM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5udW1iZXJfb2ZfcGFnZXMgPSBudW1iZXJfb2ZfcGFnZXMgPz8gdGhpcy5udW1iZXJfb2ZfcGFnZXM7XG4gICAgICAgIHRoaXMubnVtYmVyX29mX2ZyYW1lcyA9IG51bWJlcl9vZl9mcmFtZXMgPz8gdGhpcy5udW1iZXJfb2ZfZnJhbWVzO1xuXG4gICAgICAgIHRoaXMuY2FsbF9xdWV1ZSA9IFsuLi50aGlzLmNhbGxfcG9vbF07IC8vIGNvcHkgYXJyYXlcbiAgICAgICAgdGhpcy5mcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5jYWxsX2hpc3RvcnkgPSBbXTtcblxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xuICAgICAgICB0aGlzLnRvdGFsX3BhZ2VfZmF1bHRzID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyX29mX2ZyYW1lczsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lcy5wdXNoKG5ldyBGcmFtZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZFByb2Nlc3MocHJvY2VzczogUHJvY2Vzcyk6IHZvaWQge1xuICAgICAgICB0aGlzLnByb2Nlc3Nlcy5wdXNoKHByb2Nlc3MpO1xuICAgIH1cblxuICAgIGNsZWFyUHJvY2Vzc2VzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnByb2Nlc3NlcyA9IFtdO1xuICAgIH1cblxuICAgIGdlbmVyYXRlUGFnZUNhbGxQb29sKCk6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3Nlc1tpXS5nZW5lcmF0ZUNhbGxzKCk7XG4gICAgICAgICAgICB0aGlzLmFkZFBhZ2VDYWxsc1RvUG9vbCh0aGlzLnByb2Nlc3Nlc1tpXS5nZXRDYWxscygpLCB0aGlzLnByb2Nlc3Nlc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFBhZ2VDYWxsVG9Qb29sKHBhZ2VfY2FsbDogUGFnZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmNhbGxfcG9vbC5wdXNoKHBhZ2VfY2FsbCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRQYWdlQ2FsbHNUb1Bvb2wocGFnZV9jYWxsczogQXJyYXk8bnVtYmVyPiwgcHJvY2VzczogUHJvY2Vzcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VfY2FsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkUGFnZUNhbGxUb1Bvb2wobmV3IFBhZ2UocGFnZV9jYWxsc1tpXSwgcHJvY2VzcykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xlYXJQYWdlQ2FsbFBvb2woKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FsbF9wb29sID0gW107XG4gICAgfVxuXG4gICAgc2V0QWxnb3JpdGhtKGFsZ29yaXRobTogQWxsb2NhdGlvbkFsZ29yaXRobSk6IHZvaWQge1xuICAgICAgICB0aGlzLmFsbG9jYXRpb25BbGdvcml0aG0gPSBhbGdvcml0aG07XG4gICAgfVxuXG4gICAgbmV4dFRpY2soKTogdm9pZCB7XG4gICAgICAgIC8qIGVuc3VyZSB0aGF0IGFuIGFsZ29yaXRobSBpcyBzZWxlY3RlZCAqL1xuICAgICAgICBpZiAodGhpcy5hbGxvY2F0aW9uQWxnb3JpdGhtID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFsZ29yaXRobSBzZWxlY3RlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhZ2VfY2FsbCA9IHRoaXMuY2FsbF9xdWV1ZS5zaGlmdCgpO1xuXG4gICAgICAgIC8qIG5vIHBhZ2UgY2FsbCBhdCB0aGlzIHRpbWUgKi9cbiAgICAgICAgaWYgKHBhZ2VfY2FsbCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFbXB0eSBwYWdlIGNhbGwgcXVldWUgYnV0IG5vdCBmaW5pc2hlZFwiKTtcbiAgICAgICAgICAgIHRoaXMudGltZSsrO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsX2hpc3RvcnkucHVzaChwYWdlX2NhbGwpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlBhZ2UgY2FsbDogXCIgKyBwYWdlX2NhbGwuaWQpO1xuXG4gICAgICAgIGlmIChwYWdlX2NhbGwpIHtcbiAgICAgICAgICAgIC8qIGFsbG9jYXRlIGZyYW1lcyB0byBwcm9jZXNzZXMgKi9cbiAgICAgICAgICAgIHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobS5hbGxvY2F0ZUZyYW1lcz8uKHRoaXMuZnJhbWVzLCB0aGlzLnByb2Nlc3Nlcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHVuYWxsb2NhdGVkRnJhbWVzTGVuZ3RoID0gdGhpcy5mcmFtZXMuZmlsdGVyKGZyYW1lID0+IGZyYW1lLnByb2Nlc3MgPT0gbnVsbCkubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHVuYWxsb2NhdGVkRnJhbWVzTGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgTm90IGFsbCBmcmFtZXMgYXJlIGFsbG9jYXRlZFxcbkFsbG9jYXRlZDogJHt0aGlzLmZyYW1lcy5sZW5ndGggLSB1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aH1cXG5VbmFsbG9jYXRlZDogJHt1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aH1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogZXhlY3V0ZSByZXBsYWNlbWVudCBhbGdvcml0aG0gKi9cbiAgICAgICAgICAgIHRoaXMucmVwbGFjZW1lbnRBbGdvcml0aG0ub25QYWdlQ2FsbD8uKHRoaXMuZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGwpKTtcblxuICAgICAgICAgICAgLyogY2hlY2sgaWYgdGhlcmUgaXMgYSBwYWdlIGZhdWx0ICovXG4gICAgICAgICAgICBsZXQgcGFnZV9mYXVsdCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJhbWVzW2ldID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZyYW1lIGlzIG51bGxcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0ucGFnZSA9PSBudWxsICYmIHRoaXMuZnJhbWVzW2ldLnByb2Nlc3MgPT0gcGFnZV9jYWxsLnByb2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogaW5zZXJ0IGludG8gdGhlIGZpcnN0IGZyZWUgZnJhbWUgYXNzaWduZWQgdG8gdGhlIHByb2Nlc3MgKi9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmFtZXNbaV0ucGFnZSA9IHBhZ2VfY2FsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKiBpbmNyZW1lbnQgcGFnZSBmYXVsdHMgKi9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlX2ZhdWx0cysrO1xuICAgICAgICAgICAgICAgICAgICBwYWdlX2NhbGwucHJvY2Vzcy5wYWdlX2ZhdWx0cysrO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFnZV9mYXVsdCA9IGZhbHNlOyAvLyBwYWdlIGZhdWx0IGFscmVhZHkgaGFuZGxlZFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0ucGFnZSAhPSBudWxsICYmIHRoaXMuZnJhbWVzW2ldLnBhZ2UhLmlkID09IHBhZ2VfY2FsbC5pZCkge1xuICAgICAgICAgICAgICAgICAgICAvKiBwYWdlIGlzIGFscmVhZHkgaW4gbWVtb3J5ICovXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZW1lbnRBbGdvcml0aG0ub25QYWdlQWxyZWFkeUluTWVtb3J5Py4odGhpcy5nZXRDdXJyZW50U3RhdGVEYXRhKHBhZ2VfY2FsbCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBwYWdlX2ZhdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogaGFuZGxlIHBhZ2UgZmF1bHQgKi9cbiAgICAgICAgICAgIGlmIChwYWdlX2ZhdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYWdlIGZhdWx0OiBcIiArIHBhZ2VfY2FsbC5pZCk7XG5cbiAgICAgICAgICAgICAgICAvKiBlbnN1cmUgdGhhdCB0aGVyZSBhcmUgbm8gZnJlZSBmcmFtZXMgYXNzaWduZWQgdG8gdGhlIHByb2Nlc3MgKi9cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXMuZmluZChmcmFtZSA9PiBmcmFtZS5wcm9jZXNzID09IHBhZ2VfY2FsbC5wcm9jZXNzICYmIGZyYW1lLnBhZ2UgPT0gbnVsbCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbml0aWFsIHBhZ2UgZmlsbCBub3QgaGFuZGxlZCBwcm9wZXJseVwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKiBpbmNyZW1lbnQgcGFnZSBmYXVsdHMgKi9cbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VfZmF1bHRzKys7XG4gICAgICAgICAgICAgICAgcGFnZV9jYWxsLnByb2Nlc3MucGFnZV9mYXVsdHMrKztcblxuICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAvKiByZXBsYWNlIGEgcGFnZSAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkX29mX2ZyYW1lX3RvX3JlcGxhY2UgPSB0aGlzLnJlcGxhY2VtZW50QWxnb3JpdGhtLmhhbmRsZVBhZ2VGYXVsdCh0aGlzLmdldEN1cnJlbnRTdGF0ZURhdGEocGFnZV9jYWxsKSk7XG4gICAgICAgICAgICAgICAgaWYgKGlkX29mX2ZyYW1lX3RvX3JlcGxhY2UgIT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVzW3RoaXMuZ2V0RnJhbWVJbmRleEJ5SWQoaWRfb2ZfZnJhbWVfdG9fcmVwbGFjZSldLnBhZ2UgPSBwYWdlX2NhbGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIGVuc3VyZSB0aGF0IHRoZSBwYWdlIGlzIG5vdyBpbiBtZW1vcnkgKi9cbiAgICAgICAgICAgIGxldCBwYWdlX2luX21lbW9yeSA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBmcmFtZSBvZiB0aGlzLmZyYW1lcykge1xuICAgICAgICAgICAgICAgIGlmIChmcmFtZS5wYWdlID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKCg8UGFnZT5mcmFtZS5wYWdlKS5pZCA9PSBwYWdlX2NhbGwuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogcGFnZSBpcyBpbiBtZW1vcnkgKi9cbiAgICAgICAgICAgICAgICAgICAgcGFnZV9pbl9tZW1vcnkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBhZ2VfaW5fbWVtb3J5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFnZSBmYXVsdCBub3QgaGFuZGxlZCBwcm9wZXJseSAtIHBhZ2Ugbm90IGluIG1lbW9yeVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogY2FsbCB0aGUgcGFnZSAqL1xuICAgICAgICAgICAgcGFnZV9jYWxsLmNhbGwodGhpcy50aW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGltZSsrO1xuICAgIH1cblxuICAgIGdldEN1cnJlbnRTdGF0ZURhdGEocGFnZV9jYWxsOiBQYWdlKTogTWVtb3J5U3RhdGVEYXRhIHtcbiAgICAgICAgLyogZ2V0IHRoZSBzdGF0ZSBvZiB0aGUgbWVtb3J5IGFzc2lnbmVkIHRvIHRoZSBwcm9jZXNzICovXG4gICAgICAgIGNvbnN0IHByb2Nlc3NfZnJhbWVzID0gdGhpcy5mcmFtZXMuZmlsdGVyKGZyYW1lID0+IGZyYW1lLnByb2Nlc3MgPT0gcGFnZV9jYWxsLnByb2Nlc3MpO1xuICAgICAgICBjb25zdCBwcm9jZXNzX2NhbGxfaGlzdG9yeSA9IHRoaXMuY2FsbF9oaXN0b3J5LmZpbHRlcihjYWxsID0+IGNhbGwucHJvY2VzcyA9PSBwYWdlX2NhbGwucHJvY2Vzcyk7XG5cbiAgICAgICAgY29uc3QgZGF0YTogTWVtb3J5U3RhdGVEYXRhID0ge1xuICAgICAgICAgICAgcGFnZV9jYWxsOiBwYWdlX2NhbGwsXG4gICAgICAgICAgICBjdXJyZW50X2ZyYW1lczogcHJvY2Vzc19mcmFtZXMsXG4gICAgICAgICAgICBwcmV2aW91c19wYWdlX2NhbGxzOiBwcm9jZXNzX2NhbGxfaGlzdG9yeSxcbiAgICAgICAgICAgIHByb2Nlc3NlczogdGhpcy5wcm9jZXNzZXNcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsX3F1ZXVlLmxlbmd0aCA9PSAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RnJhbWVJbmRleEJ5SWQoaWQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mcmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lc1tpXS5pZCA9PSBpZClcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICBnZXRSZXN1bHRzKCk6IFJlc3VsdHMge1xuICAgICAgICBjb25zdCByZXN1bHRzID0ge1xuICAgICAgICAgICAgdG90YWxfcGFnZV9mYXVsdHM6IHRoaXMudG90YWxfcGFnZV9mYXVsdHMsXG4gICAgICAgICAgICB0b3RhbF9wYWdlX2hpdHM6IHRoaXMuY2FsbF9oaXN0b3J5Lmxlbmd0aCAtIHRoaXMudG90YWxfcGFnZV9mYXVsdHMsXG4gICAgICAgICAgICB0b3RhbF9jYWxsczogdGhpcy5jYWxsX2hpc3RvcnkubGVuZ3RoXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG5cbiAgICBzaW11bGF0ZSgpOiBSZXN1bHRzIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG5cbiAgICAgICAgd2hpbGUgKCF0aGlzLmlzRmluaXNoZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5uZXh0VGljaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzdWx0cygpO1xuICAgIH1cblxuICAgIGRpc3BsYXlSZXN1bHRzKHJlc3VsdHM/OiBSZXN1bHRzLCBhbGdTdHI6IHN0cmluZyA9IHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobSEubmFtZSk6IHZvaWQge1xuICAgICAgICBjb25zdCByZXN1bHRzX3dyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNfd3JhcHBlclwiKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgcmVzdWx0c193cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcblxuICAgICAgICBjb25zdCByZXN1bHRzX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzXCIpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICByZXN1bHRzX2VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgQWxnb3JpdGhtOiAke2FsZ1N0ci50b1VwcGVyQ2FzZSgpfVxuXG4gICAgICAgIFRvdGFsIHBhZ2UgZmF1bHRzOiA8YiBzdHlsZT0nY29sb3I6IHJlZCc+JHtyZXN1bHRzIS50b3RhbF9wYWdlX2ZhdWx0cy50b0ZpeGVkKDApfTwvYj5cbiAgICAgICAgVG90YWwgcGFnZSBoaXRzOiA8YiBzdHlsZT0nY29sb3I6IGxpbWUnPiR7cmVzdWx0cyEudG90YWxfcGFnZV9oaXRzLnRvRml4ZWQoMCl9PC9iPlxuICAgICAgICBUb3RhbCBwYWdlIGNhbGxzOiA8Yj4ke3Jlc3VsdHMhLnRvdGFsX2NhbGxzLnRvRml4ZWQoMCl9PC9iPlxuICAgICAgICBgLnJlcGxhY2UoUmVnRXhwKFwiXFxuXCIsIFwiZ1wiKSwgXCI8YnIgLz5cIik7XG4gICAgfVxuXG4gICAgY29tcGFyZUFsbEFuZERpc3BsYXlSZXN1bHRzKGFsZ29yaXRobXM6IEFycmF5PEFsbG9jYXRpb25BbGdvcml0aG0+KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHNfd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c193cmFwcGVyXCIpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICByZXN1bHRzX3dyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdHNfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNcIikgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHJlc3VsdHNfZWwuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsZ29yaXRobXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QWxnb3JpdGhtKGFsZ29yaXRobXNbaV0pO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0czogUmVzdWx0cyA9IHRoaXMuc2ltdWxhdGUoKTtcblxuICAgICAgICAgICAgcmVzdWx0c19lbC5pbm5lckhUTUwgKz0gYFxuICAgICAgICAgICAgQWxnb3JpdGhtOiAke2FsZ29yaXRobXNbaV0ubmFtZS50b1VwcGVyQ2FzZSgpfVxuICAgICAgICAgICAgVG90YWwgcGFnZSBmYXVsdHM6IDxiIHN0eWxlPSdjb2xvcjogcmVkJz4ke3Jlc3VsdHMudG90YWxfcGFnZV9mYXVsdHMudG9GaXhlZCgwKX08L2I+XG4gICAgICAgICAgICBUb3RhbCBwYWdlIGhpdHM6IDxiIHN0eWxlPSdjb2xvcjogbGltZSc+JHtyZXN1bHRzLnRvdGFsX3BhZ2VfaGl0cy50b0ZpeGVkKDApfTwvYj5cbiAgICAgICAgICAgIFRvdGFsIHBhZ2UgY2FsbHM6IDxiPiR7cmVzdWx0cy50b3RhbF9jYWxscy50b0ZpeGVkKDApfTwvYj5cbiAgICAgICAgICAgIGAucmVwbGFjZShSZWdFeHAoXCJcXG5cIiwgXCJnXCIpLCBcIjxiciAvPlwiKTtcblxuICAgICAgICAgICAgcmVzdWx0c19lbC5pbm5lckhUTUwgKz0gXCI8YnIgLz5cIjtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgSUFuaW1hdGlvbkdVSSBmcm9tIFwiLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvSUFuaW1hdGlvbkdVSVwiO1xyXG5pbXBvcnQgTWVudSBmcm9tIFwiLi9NZW51XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRpb25HVUkgaW1wbGVtZW50cyBJQW5pbWF0aW9uR1VJIHtcclxuICAgIG1lbnU6IE1lbnVcclxuXHJcbiAgICB2aXNpYmxlOiBib29sZWFuID0gZmFsc2VcclxuICAgIHBsYXlpbmc6IGJvb2xlYW4gPSBmYWxzZVxyXG4gICAgc3BlZWQ6IG51bWJlciA9IDFcclxuXHJcbiAgICBHVUk6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIE1FTlU6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBwbGF5X3BhdXNlX2J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgc3RlcF9idXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIHN0b3BfYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBzcGVlZF9zbGlkZXI6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGluZm9fYWxnb3JpdGhtOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBpbmZvX3RpbWU6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9faXNfZG9uZTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGluZm9faW5fcXVldWU6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9fZmluaXNoZWQ6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9fdG90YWxfcGFnZV9mYXVsdHM6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9fdG90YWxfcGFnZV9oaXRzOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgZnJhbWVfcm93czogQXJyYXk8SFRNTFRhYmxlUm93RWxlbWVudD4gPSBbXVxyXG5cclxuICAgIHNlZV9jb2RlX2J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIC8qIHNldEludGVydmFsICovXHJcbiAgICBzdG9yZWRTZXRJbnRlcnZhbDogTm9kZUpTLlRpbWVyIHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihtZW51OiBNZW51KSB7XHJcbiAgICAgICAgdGhpcy5tZW51ID0gbWVudTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuR1VJID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fZ3VpXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuTUVOVSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dGluZ3NcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9wbGF5X3BhdXNlXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuc3RlcF9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9zdGVwXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuc3RvcF9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9zdG9wXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuc3BlZWRfc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fc3BlZWRfc2xpZGVyXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19hbGdvcml0aG0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9pbmZvX2FsZ29yaXRobV92YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICB0aGlzLmluZm9fdGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2luZm9fdGltZV92YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICB0aGlzLmluZm9faXNfZG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2lzX2RvbmVcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19pbl9xdWV1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FsbHNfaW5fcXVldWVfdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5pbmZvX2ZpbmlzaGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYWxsc19maW5pc2hlZF92YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICB0aGlzLmluZm9fdG90YWxfcGFnZV9mYXVsdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsX3BhZ2VfZmF1bHRzX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW5mb190b3RhbF9wYWdlX2hpdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsX3BhZ2VfaGl0c192YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5zZWVfY29kZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvZGVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBoaWRlIGVsZW1lbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEJpbmQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXlpbmcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGVwX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0ZXAoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdG9wX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNwZWVkX3NsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNwZWVkID0gcGFyc2VJbnQodGhpcy5zcGVlZF9zbGlkZXIhLnZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoU3BlZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWVfY29kZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWVudS5tZW1vcnkuYWxsb2NhdGlvbkFsZ29yaXRobSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtTmFtZSA9IHRoaXMubWVudS5tZW1vcnkuYWxsb2NhdGlvbkFsZ29yaXRobS5uYW1lO1xyXG4gICAgICAgICAgICB3aW5kb3cub3BlbihgaHR0cHM6Ly9naXRodWIuY29tL2JydW4wbmUvc2NoZWR1bGluZy1zaW0vYmxvYi9tYWluL3BhZ2VfcmVwbGFjZW1lbnRfc3JjL2NsYXNzZXMvYWxnb3JpdGhtcy8ke2FsZ29yaXRobU5hbWV9LnRzYCwgXCJfYmxhbmtcIikhLmZvY3VzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldEludGVydmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoU3BlZWQoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcHJlcGFyZSBIVE1MIHRhYmxlIG9mIHN0YXRlc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5pdFN0YXRlVGFibGUoKTtcclxuICAgIH1cclxuICAgIHRvZ2dsZVBsYXlpbmcocGxheWluZz86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAocGxheWluZyA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLnBsYXlpbmcgPSAhdGhpcy5wbGF5aW5nO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5wbGF5aW5nID0gcGxheWluZztcclxuXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoU3BlZWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbiEuaW5uZXJIVE1MID0gdGhpcy5wbGF5aW5nID8gXCJQYXVzZVwiIDogXCJQbGF5XCI7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlVmlzaWJsZSh2aXNpYmxlPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICh2aXNpYmxlID09IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9ICF0aGlzLnZpc2libGU7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuR1VJIS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICB0aGlzLk1FTlUhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVudS5kaXNwbGF5LnJlc2l6ZUNhbGxiYWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Q3VycmVudFN0YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kcmF3Q3VycmVudFN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLkdVSSEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICB0aGlzLk1FTlUhLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3JlZFNldEludGVydmFsICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc3RvcmVkU2V0SW50ZXJ2YWwpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW51LmRpc3BsYXkucmVzaXplQ2FsbGJhY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnUucmVmcmVzaENhbGxzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tZW51LnJlZnJlc2hDYWxscygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5wbGF5X3BhdXNlX2J1dHRvbiA9PSBudWxsIHx8IHRoaXMuaW5mb19pc19kb25lID09IG51bGwgfHwgdGhpcy5zdGVwX2J1dHRvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIGluaXQoKSBmaXJzdCFcIik7XHJcblxyXG4gICAgICAgIHRoaXMubWVudS5tZW1vcnkuaW5pdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uLmlubmVySFRNTCA9IFwiUGxheVwiO1xyXG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmluZm9faXNfZG9uZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN0ZXBfYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFN0YXRlVGFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydEFuaW1hdGlvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdDdXJyZW50U3RhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcmVmcmVzaCBpbmZvXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoSW5mbygpO1xyXG5cclxuICAgICAgICB0aGlzLmRyYXdDYWxscygpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRTdGF0ZVRhYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIC8qIGdyYWIgZWxlbWVudHMgKi9cclxuICAgICAgICBjb25zdCB0aW1lX3JvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX3RpbWVcIikgYXMgSFRNTFRhYmxlUm93RWxlbWVudDtcclxuICAgICAgICBjb25zdCBjYWxsc19yb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl90YWJsZV9wYWdlX2NhbGxzXCIpIGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl90YWJsZV9ib2R5XCIpIGFzIEhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O1xyXG5cclxuICAgICAgICAvKiBjbGVhciB0YWJsZSAqL1xyXG4gICAgICAgIHRpbWVfcm93LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgY2FsbHNfcm93LmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgICAgIC8qIHRpbWUgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVfcm93X2hlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgdGltZV9yb3dfaGVhZGVyLmlubmVySFRNTCA9IFwiVGltZVwiO1xyXG4gICAgICAgICAgICB0aW1lX3Jvd19oZWFkZXIuY2xhc3NMaXN0LmFkZChcImhlYWRlclwiKTtcclxuICAgICAgICAgICAgdGltZV9yb3cuYXBwZW5kQ2hpbGQodGltZV9yb3dfaGVhZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGNhbGxzICovXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBjYWxsc19yb3dfaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICBjYWxsc19yb3dfaGVhZGVyLmlubmVySFRNTCA9IFwiUGFnZSBjYWxsc1wiO1xyXG4gICAgICAgICAgICBjYWxsc19yb3dfaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJcIik7XHJcbiAgICAgICAgICAgIGNhbGxzX3Jvdy5hcHBlbmRDaGlsZChjYWxsc19yb3dfaGVhZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGZyYW1lcyAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLyogcmVtb3ZlIG9sZCByb3dzICovXHJcbiAgICAgICAgICAgIHdoaWxlICh0Ym9keS5sYXN0Q2hpbGQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSAodGJvZHkubGFzdENoaWxkIGFzIEhUTUxFbGVtZW50KS5pZDtcclxuICAgICAgICAgICAgICAgIGlmIChpZCA9PSBcImFuaW1hdGlvbl90YWJsZV9wYWdlX2NhbGxzXCIpIC8vIHNraXAgdGhlIHJvdyB3aXRoIHBhZ2UgY2FsbHNcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICB0Ym9keS5yZW1vdmVDaGlsZCh0Ym9keS5sYXN0Q2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBhZGQgYSByb3cgZm9yIGVhY2ggZnJhbWUgKi9cclxuICAgICAgICAgICAgY29uc3QgZnJhbWVfcm93czogQXJyYXk8SFRNTFRhYmxlUm93RWxlbWVudD4gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbnUubWVtb3J5Lm51bWJlcl9vZl9mcmFtZXM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJhbWVfcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lX3Jvd19oZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgICAgICBmcmFtZV9yb3dfaGVhZGVyLmlubmVySFRNTCA9IGBGcmFtZSAke2l9YDtcclxuICAgICAgICAgICAgICAgIGZyYW1lX3Jvdy5hcHBlbmRDaGlsZChmcmFtZV9yb3dfaGVhZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmcmFtZV9yb3dzLnB1c2goZnJhbWVfcm93KTtcclxuICAgICAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKGZyYW1lX3Jvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5mcmFtZV9yb3dzID0gZnJhbWVfcm93cztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0NhbGxzKFNUQVJUX1g/OiBudW1iZXIsIFNUQVJUX1k/OiBudW1iZXIsIFdJRFRIPzogbnVtYmVyLCBIRUlHSFQ/OiBudW1iZXIsIGNhbGxzVG9EcmF3PzogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLyogZ3JhYiBlbGVtZW50cyAqL1xyXG4gICAgICAgIGNvbnN0IHRpbWVfcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfdGltZVwiKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGNhbGxzX3JvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX3BhZ2VfY2FsbHNcIikgYXMgSFRNTFRhYmxlUm93RWxlbWVudDtcclxuXHJcbiAgICAgICAgLyogb25seSBhZGQgb25lIGNvbHVtbiBmb3IgdGhlIG5ldyBzdGF0ZSAqL1xyXG4gICAgICAgIGNvbnN0IG5ld0NhbGwgPSB0aGlzLm1lbnUubWVtb3J5LmNhbGxfaGlzdG9yeS5hdCgtMSk7XHJcbiAgICAgICAgaWYgKG5ld0NhbGwgPT0gbnVsbClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAvKiB0aW1lICovXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lVGlja0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICB0aW1lVGlja0VsLmlubmVySFRNTCA9IGAke3RoaXMubWVudS5tZW1vcnkudGltZX1gO1xyXG4gICAgICAgICAgICB0aW1lX3Jvdy5hcHBlbmRDaGlsZCh0aW1lVGlja0VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGNhbGxzICovXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBjYWxsc1RpY2tFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgY2FsbHNUaWNrRWwuaW5uZXJIVE1MID0gYCR7bmV3Q2FsbC5pZH1gO1xyXG5cclxuICAgICAgICAgICAgY2FsbHNfcm93LmFwcGVuZENoaWxkKGNhbGxzVGlja0VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGZyYW1lcyAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbnUubWVtb3J5Lm51bWJlcl9vZl9mcmFtZXM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJhbWVfcm93ID0gdGhpcy5mcmFtZV9yb3dzW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFnZSA9IHRoaXMubWVudS5tZW1vcnkuZnJhbWVzW2ldLnBhZ2U7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJhbWVUaWNrRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgICAgICBmcmFtZVRpY2tFbC5pbm5lckhUTUwgPSBgJHtwYWdlICE9IG51bGwgPyBwYWdlLmlkIDogXCJcIn1gO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYWdlICE9IG51bGwgJiYgcGFnZS5pZCA9PSBuZXdDYWxsLmlkICYmIHRoaXMubWVudS5tZW1vcnkubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2UgcGFnZSBmYXVsdHMgcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVUaWNrRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tZW51Lm1lbW9yeS5mcmFtZXNbaV0ucHJvY2VzcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVUaWNrRWwuaW5uZXJIVE1MICs9IGAgPHNwYW4gc3R5bGU9J2NvbG9yOiB5ZWxsb3cnPigke3RoaXMubWVudS5tZW1vcnkuZnJhbWVzW2ldLnByb2Nlc3MhLmlkfSk8L3NwYW4+YDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmcmFtZV9yb3cuYXBwZW5kQ2hpbGQoZnJhbWVUaWNrRWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBzY3JvbGwgdG8gdGhlIHJpZ2h0ICovXHJcbiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9jYWxsX3RhYmxlXCIpIGFzIEhUTUxUYWJsZUVsZW1lbnQ7XHJcbiAgICAgICAgdGFibGUuc2Nyb2xsTGVmdCA9IHRhYmxlLnNjcm9sbFdpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hJbmZvKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG1lbW9yeSA9IHRoaXMubWVudS5tZW1vcnk7XHJcbiAgICAgICAgaWYgKG1lbW9yeS5hbGxvY2F0aW9uQWxnb3JpdGhtID09IG51bGwpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbGwgc3RhcnRBbmltYXRpb24oKSBmaXJzdCFcIik7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19hbGdvcml0aG0hLmlubmVySFRNTCA9IG1lbW9yeS5hbGxvY2F0aW9uQWxnb3JpdGhtLm5hbWU7XHJcbiAgICAgICAgdGhpcy5pbmZvX3RpbWUhLmlubmVySFRNTCA9IG1lbW9yeS50aW1lLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIGlmIChtZW1vcnkuaXNGaW5pc2hlZCgpKVxyXG4gICAgICAgICAgICB0aGlzLmluZm9faXNfZG9uZSEuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuaW5mb19pc19kb25lIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb190b3RhbF9wYWdlX2hpdHMhLmlubmVySFRNTCA9IChtZW1vcnkuY2FsbF9oaXN0b3J5Lmxlbmd0aCAtIG1lbW9yeS50b3RhbF9wYWdlX2ZhdWx0cykudG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLmluZm9fdG90YWxfcGFnZV9mYXVsdHMhLmlubmVySFRNTCA9IG1lbW9yeS50b3RhbF9wYWdlX2ZhdWx0cy50b1N0cmluZygpO1xyXG5cclxuICAgICAgICB0aGlzLmluZm9faW5fcXVldWUhLmlubmVySFRNTCA9IG1lbW9yeS5jYWxsX3F1ZXVlLmxlbmd0aC50b1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuaW5mb19maW5pc2hlZCEuaW5uZXJIVE1MID0gbWVtb3J5LmNhbGxfaGlzdG9yeS5sZW5ndGgudG9TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoU3BlZWQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcmVkU2V0SW50ZXJ2YWwgIT0gbnVsbClcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0b3JlZFNldEludGVydmFsKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdG9yZWRTZXRJbnRlcnZhbCA9IHNldEludGVydmFsKCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXlpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RlcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuYmluZCh0aGlzKSwgMTAwMCAvIHRoaXMuc3BlZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0ZXAoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubWVudS5tZW1vcnkuaXNGaW5pc2hlZCgpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMubWVudS5tZW1vcnkubmV4dFRpY2soKTtcclxuICAgICAgICB0aGlzLmRyYXdDdXJyZW50U3RhdGUoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWVudS5tZW1vcnkuaXNGaW5pc2hlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheWluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMubWVudS5tZW1vcnkuZGlzcGxheVJlc3VsdHModGhpcy5tZW51Lm1lbW9yeS5nZXRSZXN1bHRzKCkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hZnRlckRvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWZ0ZXJEb25lKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmluZm9faXNfZG9uZSA9PSBudWxsIHx8IHRoaXMucGxheV9wYXVzZV9idXR0b24gPT0gbnVsbCB8fCB0aGlzLnN0ZXBfYnV0dG9uID09IG51bGwpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbGwgaW5pdCgpIGZpcnN0IVwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zdGVwX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUGFnZSBmcm9tIFwiLi9QYWdlXCI7XG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi9Qcm9jZXNzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZyYW1lIHtcbiAgICBzdGF0aWMgbmV4dF9pZDogbnVtYmVyID0gMFxuXG4gICAgaWQ6IG51bWJlclxuICAgIHBhZ2U6IFBhZ2UgfCBudWxsXG4gICAgcHJvY2VzczogUHJvY2VzcyB8IG51bGxcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBhZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLnByb2Nlc3MgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuaWQgPSBGcmFtZS5uZXh0X2lkKys7XG4gICAgfVxufSIsImltcG9ydCBSZXBsYWNlbWVudEFsZ29yaXRobSBmcm9tIFwiLi9SZXBsYWNlbWVudEFsZ29yaXRobVwiO1xuaW1wb3J0IHsgTWVtb3J5U3RhdGVEYXRhIH0gZnJvbSBcIi4vQWxsb2NhdGluZ01NVVwiO1xuXG4vKipcbiAqIExlYXN0IFJlY2VudGx5IFVzZWQgKExSVSlcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTFJVIGltcGxlbWVudHMgUmVwbGFjZW1lbnRBbGdvcml0aG0ge1xuICAgIG5hbWU6IHN0cmluZyA9IFwiTFJVXCJcblxuICAgIGhhbmRsZVBhZ2VGYXVsdChkYXRhOiBNZW1vcnlTdGF0ZURhdGEpOiBudW1iZXIge1xuICAgICAgICAvKiBmaW5kIHRoZSBwYWdlIHRoYXQgd2FzIHVzZWQgdGhlIGxvbmdlc3QgYWdvICovXG4gICAgICAgIGxldCBmcmFtZV90b19yZXBsYWNlX2luZGV4ID0gLTE7XG4gICAgICAgIGxldCBsZWFzdF9yZWNlbnRseV91c2VkX3BhZ2VfaW5kZXggPSAtMTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuY3VycmVudF9mcmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gZGF0YS5jdXJyZW50X2ZyYW1lc1tpXTtcblxuICAgICAgICAgICAgaWYgKGZyYW1lLnByb2Nlc3MgIT0gZGF0YS5wYWdlX2NhbGwucHJvY2Vzcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGcmFtZSBpcyBhc3NpZ25lZCB0byBhIGRpZmZlcmVudCBwcm9jZXNzIC0gdGhpcyBzaG91bGQgYmUgZW5zdXJlZCBub3QgdG8gaGFwcGVuIGJ5IHRoZSBjYWxsZXJcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmcmFtZS5wYWdlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGcmFtZSBpcyBlbXB0eSAtIHRoaXMgc2hvdWxkIGJlIGVuc3VyZWQgbm90IHRvIGhhcHBlbiBieSB0aGUgY2FsbGVyXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgcGFnZV9pbmRleCA9IC0xO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGRhdGEucHJldmlvdXNfcGFnZV9jYWxscy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzX3BhZ2VfY2FsbCA9IGRhdGEucHJldmlvdXNfcGFnZV9jYWxsc1tqXTtcblxuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c19wYWdlX2NhbGwuaWQgPT0gZnJhbWUucGFnZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICBwYWdlX2luZGV4ID0gajtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGFnZV9pbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIC8qIHBhZ2Ugd2FzIG5ldmVyIHVzZWQgYmVmb3JlICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYWdlX2luZGV4IDwgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4IHx8IGxlYXN0X3JlY2VudGx5X3VzZWRfcGFnZV9pbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIC8qIHBhZ2Ugd2FzIHVzZWQgbG9uZ2VyIGFnbyAqL1xuICAgICAgICAgICAgICAgIGZyYW1lX3RvX3JlcGxhY2VfaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIGxlYXN0X3JlY2VudGx5X3VzZWRfcGFnZV9pbmRleCA9IHBhZ2VfaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJhbWVfdG9fcmVwbGFjZV9pbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gZnJhbWUgdG8gcmVwbGFjZSBmb3VuZCBieSBMUlVcIik7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YS5jdXJyZW50X2ZyYW1lc1tmcmFtZV90b19yZXBsYWNlX2luZGV4XS5pZDtcbiAgICB9XG59XG4iLCJpbXBvcnQgSU1lbnUgZnJvbSBcIi4uLy4uL3NoYXJlZC9pbnRlcmZhY2VzL0lNZW51XCI7XG5pbXBvcnQgRGlzcGxheSBmcm9tIFwiLi4vLi4vc2hhcmVkL2NsYXNzZXMvRGlzcGxheVwiO1xuaW1wb3J0IEFsbG9jYXRpbmdNTVUgZnJvbSBcIi4vQWxsb2NhdGluZ01NVVwiO1xuaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4vUHJvY2Vzc1wiO1xuaW1wb3J0IFBhZ2UgZnJvbSBcIi4vUGFnZVwiO1xuaW1wb3J0IEVxdWFsIGZyb20gXCIuL2FsZ29yaXRobXMvRXF1YWxcIjtcbmltcG9ydCBBbmltYXRpb25HVUkgZnJvbSBcIi4vQW5pbWF0aW9uR1VJXCI7XG5pbXBvcnQgUHJvcG9ydGlvbmFsIGZyb20gXCIuL2FsZ29yaXRobXMvUHJvcG9ydGlvbmFsXCI7XG5pbXBvcnQgUGFnZUZhdWx0Q29udHJvbCBmcm9tIFwiLi9hbGdvcml0aG1zL1BhZ2VGYXVsdENvbnRyb2xcIjtcbmltcG9ydCBMb2NhbGl0eU1vZGVsIGZyb20gXCIuL2FsZ29yaXRobXMvTG9jYWxpdHlNb2RlbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZW51IGltcGxlbWVudHMgSU1lbnUge1xuICAgIGRpc3BsYXk6IERpc3BsYXlcbiAgICBtZW1vcnk6IEFsbG9jYXRpbmdNTVVcbiAgICBhbmltYXRpb25HVUk6IEFuaW1hdGlvbkdVSVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZGlzcGxheSA9IG5ldyBEaXNwbGF5KCk7XG4gICAgICAgIHRoaXMubWVtb3J5ID0gbmV3IEFsbG9jYXRpbmdNTVUoKTtcblxuICAgICAgICB0aGlzLmFuaW1hdGlvbkdVSSA9IG5ldyBBbmltYXRpb25HVUkodGhpcyk7XG4gICAgfVxuXG4gICAgaW5pdCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcnVuX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicnVuX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgcnVuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLnJ1bigpIH0pO1xuXG4gICAgICAgIGNvbnN0IHJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIHJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5ydW4odHJ1ZSkgfSk7XG5cbiAgICAgICAgY29uc3QgYWRkX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgYWRkX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLmFkZFByb2Nlc3NlcygpIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsZWFyX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xlYXJfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBjbGVhcl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5jbGVhclByb2Nlc3NlcygpIH0pO1xuXG4gICAgICAgIGNvbnN0IGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZW5lcmF0ZV9jYWxsX3F1ZXVlX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5hZGRDYWxscygpIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsZWFyX2NhbGxfcXVldWVfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbGVhcl9jYWxsX3F1ZXVlX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgY2xlYXJfY2FsbF9xdWV1ZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5jbGVhckNhbGxzKCkgfSk7XG5cbiAgICAgICAgLypcbiAgICAgICAgICogaW5pdCBcbiAgICAgICAgICogc2V0IGNhbGxiYWNrIGZvciByZXNpemVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWVtb3J5LmluaXQoNSwgMyk7XG4gICAgICAgIHRoaXMuZGlzcGxheS5pbml0KFwibWFpbl9jYW52YXNcIik7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uR1VJLmluaXQoKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5LnNldFJlc2l6ZUNhbGxiYWNrKCgpID0+IHsgdGhpcy5yZWZyZXNoQ2FsbHMoKSB9KTtcblxuICAgICAgICAvKiogXG4gICAgICAgICAqIGJhc2ljIHNldHRpbmdzXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBudW1iZXJfb2ZfZnJhbWVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX2ZyYW1lX2NvdW50XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIG51bWJlcl9vZl9mcmFtZXMuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld192YWwgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZS50YXJnZXQpLnZhbHVlKTtcblxuICAgICAgICAgICAgaWYgKGlzTmFOKG5ld192YWwpIHx8IG5ld192YWwgPCAxKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJJbnZhbGlkIG51bWJlciBvZiBmcmFtZXNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5pbml0KHRoaXMubWVtb3J5Lm51bWJlcl9vZl9wYWdlcywgbmV3X3ZhbCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogYWxnb3JpdGhtIHNlbGVjdFxuICAgICAgICAgKiAtPiBkaXNhYmxlIHJ1bm5pbmcgd2l0aCBhbmltYXRpb24gaWYgY29tcGFyZV9hbGxcbiAgICAgICAgICogLT4gc2hvdyBzcGVjaWFsIG9wdGlvbnMgZm9yIHBhZ2UgZmF1bHQgY29udHJvbFxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgYWxnb3JpdGhtX3NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYV90eXBlXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgICAgICBhbGdvcml0aG1fc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoKDxIVE1MU2VsZWN0RWxlbWVudD5lLnRhcmdldCkudmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gXCJjb21wYXJlX2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgKDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b25cIikpLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICg8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJydW5fd2l0aF9hbmltYXRpb25fYnV0dG9uXCIpKS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCg8SFRNTFNlbGVjdEVsZW1lbnQ+ZS50YXJnZXQpLnZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IFwiZmF1bHRfY29udHJvbFwiKSB7XG4gICAgICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWluX3BhZ2VfZmF1bHRzX2FsbFwiKSkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfcGFnZV9mYXVsdHNfYWxsXCIpKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWluX3BhZ2VfZmF1bHRzX2FsbFwiKSkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICg8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21heF9wYWdlX2ZhdWx0c19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogXG4gICAgICAgICAqIHJlc3VsdHMgYnV0dG9uc1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgcmVzdWx0c19jbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c19jbG9zZVwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgcmVzdWx0c19jbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNfd3JhcHBlclwiKSkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKlxuICAgICAgICAgKiByZWZyZXNoIGNhbGxzIFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcbiAgICB9XG5cbiAgICBhZGRQcm9jZXNzZXMoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NfY291bnQgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjX2NvdW50XCIpKS52YWx1ZSk7XG5cbiAgICAgICAgY29uc3QgcGFnZV9yYW5nZV9taW4gPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21pbl9yYW5nZVwiKSkudmFsdWUpO1xuICAgICAgICBjb25zdCBwYWdlX3JhbmdlX21heCA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWF4X3JhbmdlXCIpKS52YWx1ZSk7XG5cbiAgICAgICAgY29uc3QgY2FsbF9jb3VudF9taW4gPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21pbl9jYWxsc1wiKSkudmFsdWUpO1xuICAgICAgICBjb25zdCBjYWxsX2NvdW50X21heCA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWF4X2NhbGxzXCIpKS52YWx1ZSk7XG5cbiAgICAgICAgbGV0IGN1cnJlbnRfcmFuZ2VfbWluID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2Nlc3NfY291bnQ7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcGFnZV9yYW5nZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChwYWdlX3JhbmdlX21heCAtIHBhZ2VfcmFuZ2VfbWluICsgMSkpICsgcGFnZV9yYW5nZV9taW47XG5cbiAgICAgICAgICAgIHRoaXMubWVtb3J5LmFkZFByb2Nlc3MobmV3IFByb2Nlc3MoXG4gICAgICAgICAgICAgICAgW2N1cnJlbnRfcmFuZ2VfbWluLCBjdXJyZW50X3JhbmdlX21pbiArIHBhZ2VfcmFuZ2VdLFxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChjYWxsX2NvdW50X21heCAtIGNhbGxfY291bnRfbWluICsgMSkpICsgY2FsbF9jb3VudF9taW4sXG4gICAgICAgICAgICAgICAgaVxuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5wcm9jZXNzZXNbdGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aCAtIDFdLmdlbmVyYXRlQ2FsbHMoKTtcblxuICAgICAgICAgICAgY3VycmVudF9yYW5nZV9taW4gKz0gcGFnZV9yYW5nZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XG4gICAgfVxuXG4gICAgY2xlYXJQcm9jZXNzZXMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWVtb3J5LmNsZWFyUHJvY2Vzc2VzKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XG4gICAgfVxuXG4gICAgYWRkQ2FsbHMoKTogdm9pZCB7XG4gICAgICAgIC8qIGNvbWJpbmUgYWxsIHByb2Nlc3MgY2FsbHMgaW50byBvbmUgYXJyYXkgKi9cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5tZW1vcnkucHJvY2Vzc2VzW2ldLmdldENhbGxzKCkubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9yeS5jYWxsX3Bvb2wucHVzaChuZXcgUGFnZSh0aGlzLm1lbW9yeS5wcm9jZXNzZXNbaV0uZ2V0Q2FsbHMoKVtqXSwgdGhpcy5tZW1vcnkucHJvY2Vzc2VzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyogc2h1ZmZsZSBhcnJheSAqL1xuICAgICAgICB0aGlzLm1lbW9yeS5jYWxsX3Bvb2wuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcblxuICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xuICAgIH1cblxuICAgIGNsZWFyQ2FsbHMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWVtb3J5LmNhbGxfcG9vbCA9IFtdO1xuICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xuICAgIH1cblxuICAgIHJlZnJlc2hDYWxscygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY3VycmVudF9jb3VudF9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicF9jdXJyZW50X2NvdW50XCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xuICAgICAgICBjdXJyZW50X2NvdW50X2VsLmlubmVySFRNTCA9IGAoJHt0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoLnRvU3RyaW5nKCl9KWA7XG5cbiAgICAgICAgY29uc3QgZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgICAgIGlmICh0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoID4gMCAmJiB0aGlzLm1lbW9yeS5jYWxsX3Bvb2wubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24uYXR0cmlidXRlcy5zZXROYW1lZEl0ZW0oZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogZGlzcGxheSBpbmRpdmlkdWFsIHByb2Nlc3MgY2FsbHMgKi9cbiAgICAgICAgY29uc3QgYWxsX3Byb2Nlc3Nlc19lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxsX3Byb2Nlc3Nlc1wiKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgYWxsX3Byb2Nlc3Nlc19lbC5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzID0gdGhpcy5tZW1vcnkucHJvY2Vzc2VzW2ldO1xuXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzX2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICBwcm9jZXNzX2VsLmNsYXNzTGlzdC5hZGQoXCJwcm9jZXNzXCIpO1xuXG4gICAgICAgICAgICBwcm9jZXNzX2VsLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInByb2Nlc3NfbmFtZVwiPkNhbGxzIG9mIHByb2Nlc3MgJHtpfTogPC9zcGFuPiA8c3BhbiBjbGFzcz1cInByb2Nlc3NfY2FsbHNcIj4ke3Byb2Nlc3MuZ2V0Q2FsbHMoKS5qb2luKFwiLCBcIil9PC9zcGFuPjxiciAvPmA7XG5cbiAgICAgICAgICAgIGFsbF9wcm9jZXNzZXNfZWwuYXBwZW5kQ2hpbGQocHJvY2Vzc19lbCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBhbGxfcHJvY2Vzc2VzX2VsLmlubmVySFRNTCA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOiB5ZWxsb3cnPk5vIHByb2Nlc3NlcyBhZGRlZCB5ZXQuPC9zcGFuPlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogZGlzcGxheSBjYWxsIHF1ZXVlICovXG4gICAgICAgIGNvbnN0IGNhbGxfY291bnRfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImN1cnJlbnRfY2FsbF9jb3VudFwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcbiAgICAgICAgY2FsbF9jb3VudF9lbC5pbm5lckhUTUwgPSBgKCR7dGhpcy5tZW1vcnkuY2FsbF9wb29sLmxlbmd0aC50b1N0cmluZygpfSlgO1xuXG4gICAgICAgIGNvbnN0IGNhbGxfcXVldWVfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW5fY2FsbF9xdWV1ZVwiKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgY2FsbF9xdWV1ZV9lbC5pbm5lckhUTUwgPSB0aGlzLm1lbW9yeS5jYWxsX3Bvb2wubWFwKChwYWdlKSA9PiB7IHJldHVybiBwYWdlLmlkIH0pLmpvaW4oXCIsIFwiKTtcblxuICAgICAgICBpZiAodGhpcy5tZW1vcnkuY2FsbF9wb29sLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjYWxsX3F1ZXVlX2VsLmlubmVySFRNTCA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOiB5ZWxsb3cnPk5vIGNhbGxzIGluIHF1ZXVlLjwvc3Bhbj5cIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJ1bihhbmltYXRpb24/OiBib29sZWFuIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoID4gdGhpcy5tZW1vcnkuZnJhbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgYWxlcnQoXCJOb3QgZW5vdWdoIGZyYW1lcyBmb3IgYWxsIHByb2Nlc3Nlc1wiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFsZ1N0ciA9ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFfdHlwZVwiKSkudmFsdWU7XG4gICAgICAgIGxldCBjb21wYXJlX2FsbDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgICAgIHN3aXRjaCAoYWxnU3RyLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJlcXVhbFwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBFcXVhbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInByb3BvcnRpb25hbFwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBQcm9wb3J0aW9uYWwoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJmYXVsdF9jb250cm9sXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9yeS5zZXRBbGdvcml0aG0obmV3IFBhZ2VGYXVsdENvbnRyb2woKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJsb2NhbGl0eV9tb2RlbFwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBMb2NhbGl0eU1vZGVsKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiY29tcGFyZV9hbGxcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmVfYWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiSW52YWxpZCBhbGdvcml0aG1cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbXBhcmVfYWxsKSB7XG4gICAgICAgICAgICBjb25zdCBhbGdvcml0aG1zID0gW1xuICAgICAgICAgICAgICAgIG5ldyBFcXVhbCgpLFxuICAgICAgICAgICAgICAgIG5ldyBQcm9wb3J0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBuZXcgUGFnZUZhdWx0Q29udHJvbCgpLFxuICAgICAgICAgICAgICAgIC8vIG5ldyBMb2NhbGl0eU1vZGVsKClcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIHRoaXMubWVtb3J5LmNvbXBhcmVBbGxBbmREaXNwbGF5UmVzdWx0cyhhbGdvcml0aG1zKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhbmltYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uR1VJLnN0YXJ0QW5pbWF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5tZW1vcnkuc2ltdWxhdGUoKTtcbiAgICAgICAgICAgIHRoaXMubWVtb3J5LmRpc3BsYXlSZXN1bHRzKHJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4vUHJvY2Vzc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlIHtcbiAgICBpZDogbnVtYmVyXG4gICAgbGFzdF9jYWxsX3RpbWU6IG51bWJlciA9IDBcbiAgICBwcm9jZXNzOiBQcm9jZXNzXG5cbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwcm9jZXNzOiBQcm9jZXNzKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5wcm9jZXNzID0gcHJvY2VzcztcbiAgICB9XG5cbiAgICBjYWxsKHRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmxhc3RfY2FsbF90aW1lID0gdGltZTtcbiAgICAgICAgdGhpcy5wcm9jZXNzLmRvbmVfY2FsbHMrKztcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvY2VzcyB7XG4gICAgcmFuZ2Vfb2ZfcGFnZXM6IFtudW1iZXIsIG51bWJlcl1cbiAgICBudW1iZXJfb2ZfY2FsbHM6IG51bWJlclxuICAgIGlkOiBudW1iZXJcblxuICAgIHBhZ2VfZmF1bHRzOiBudW1iZXIgPSAwXG4gICAgZG9uZV9jYWxsczogbnVtYmVyID0gMFxuXG4gICAgcHJpdmF0ZSBjYWxsczogQXJyYXk8bnVtYmVyPiA9IFtdXG5cbiAgICBjb25zdHJ1Y3RvcihyYW5nZV9vZl9wYWdlczogW251bWJlciwgbnVtYmVyXSwgbnVtYmVyX29mX2NhbGxzOiBudW1iZXIsIGlkOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5yYW5nZV9vZl9wYWdlcyA9IHJhbmdlX29mX3BhZ2VzO1xuICAgICAgICB0aGlzLm51bWJlcl9vZl9jYWxscyA9IG51bWJlcl9vZl9jYWxscztcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cblxuICAgIGdlbmVyYXRlQ2FsbHMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FsbHMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyX29mX2NhbGxzOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbHMucHVzaChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAodGhpcy5yYW5nZV9vZl9wYWdlc1sxXSAtIHRoaXMucmFuZ2Vfb2ZfcGFnZXNbMF0pKSArIHRoaXMucmFuZ2Vfb2ZfcGFnZXNbMF0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q2FsbHMoKTogQXJyYXk8bnVtYmVyPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxzO1xuICAgIH1cbn1cbiIsImltcG9ydCBBbGxvY2F0aW9uQWxnb3JpdGhtIGZyb20gXCIuLi9BbGxvY2F0aW9uQWxnb3JpdGhtXCI7XG5cbmltcG9ydCBQcm9jZXNzIGZyb20gXCIuLi9Qcm9jZXNzXCI7XG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4uL0ZyYW1lXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVxdWFsIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XG4gICAgbmFtZTogc3RyaW5nID0gXCJFcXVhbFwiXG5cbiAgICBhbGxvY2F0ZUZyYW1lcyhmcmFtZXM6IEFycmF5PEZyYW1lPiwgcHJvY2Vzc2VzOiBSZWFkb25seUFycmF5PFJlYWRvbmx5PFByb2Nlc3M+Pik6IHZvaWQge1xuICAgICAgICBjb25zdCBmcmFtZXNfcGVyX3Byb2Nlc3MgPSBNYXRoLmZsb29yKGZyYW1lcy5sZW5ndGggLyBwcm9jZXNzZXMubGVuZ3RoKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhgQWxsb2NhdGluZyAke2ZyYW1lc19wZXJfcHJvY2Vzc30gZnJhbWVzIHBlciBwcm9jZXNzYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBkYXRhLmN1cnJlbnRfZnJhbWVzLmxlbmd0aCA9ICR7ZnJhbWVzLmxlbmd0aH0sIGRhdGEucHJvY2Vzc2VzLmxlbmd0aCA9ICR7cHJvY2Vzc2VzLmxlbmd0aH1gKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGZyYW1lc1tpXS5wcm9jZXNzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCB0aGlzIGZyYW1lIGlmIGl0J3MgYWxyZWFkeSBhbGxvY2F0ZWRcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnJhbWVzW2ldLnByb2Nlc3MgPSA8UHJvY2Vzcz5wcm9jZXNzZXNbTWF0aC5mbG9vcihpIC8gZnJhbWVzX3Blcl9wcm9jZXNzKV07XG4gICAgICAgIH1cblxuICAgICAgICAvKiB0aGUgcmVtYWluaW5nIGZyYW1lcyBhcmUgbGVmdCB1bmFsbG9jYXRlZCAqL1xuICAgIH1cbn0iLCJpbXBvcnQgQWxsb2NhdGlvbkFsZ29yaXRobSBmcm9tIFwiLi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiO1xuXG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4uL0ZyYW1lXCI7XG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi4vUHJvY2Vzc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbGl0eU1vZGVsIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XG4gICAgbmFtZTogc3RyaW5nID0gXCJMb2NhbGl0eU1vZGVsXCJcblxuICAgIGFsbG9jYXRlRnJhbWVzKGZyYW1lczogQXJyYXk8RnJhbWU+LCBwcm9jZXNzZXM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8UHJvY2Vzcz4+KTogdm9pZCB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbn0iLCJpbXBvcnQgQWxsb2NhdGlvbkFsZ29yaXRobSBmcm9tIFwiLi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiO1xuXG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4uL0ZyYW1lXCI7XG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi4vUHJvY2Vzc1wiO1xuXG5pbXBvcnQgUHJvcG9ydGlvbmFsIGZyb20gXCIuL1Byb3BvcnRpb25hbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlRmF1bHRDb250cm9sIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XG4gICAgbmFtZTogc3RyaW5nID0gXCJQYWdlRmF1bHRDb250cm9sXCJcbiAgICBydW5fcHJvcG9ydGlvbmFsOiBib29sZWFuID0gdHJ1ZVxuXG4gICAgYWxsb2NhdGVGcmFtZXMoZnJhbWVzOiBGcmFtZVtdLCBwcm9jZXNzZXM6IHJlYWRvbmx5IFJlYWRvbmx5PFByb2Nlc3M+W10pOiB2b2lkIHtcbiAgICAgICAgLyogZmlyc3QgcnVuIHByb3BvcnRpb25hbCBhbGxvY2F0aW9uICovXG4gICAgICAgIGlmICh0aGlzLnJ1bl9wcm9wb3J0aW9uYWwpIHtcbiAgICAgICAgICAgIHRoaXMucnVuX3Byb3BvcnRpb25hbCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wb3J0aW9uYWwoKS5hbGxvY2F0ZUZyYW1lcyhmcmFtZXMsIHByb2Nlc3Nlcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiB0aGVuIHJ1biBwYWdlIGZhdWx0IGNvbnRyb2wgKi9cbiAgICAgICAgY29uc3QgTUlOX0ZBVUxUUyA9IDM7XG4gICAgICAgIGNvbnN0IE1BWF9GQVVMVFMgPSA1OyAvLyBmcmVxdWVuY3lcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2Nlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZmF1bHRfZnJlcXVlbmN5ID0gcHJvY2Vzc2VzW2ldLnBhZ2VfZmF1bHRzIC8gcHJvY2Vzc2VzW2ldLmRvbmVfY2FsbHM7XG4gICAgICAgICAgICBjb25zdCBmcmFtZXNfbnVtYmVyID0gZnJhbWVzLmZpbHRlcihmcmFtZSA9PiBmcmFtZS5wcm9jZXNzID09IHByb2Nlc3Nlc1tpXSkubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAoZmF1bHRfZnJlcXVlbmN5IDwgTUlOX0ZBVUxUUyAmJiBmcmFtZXNfbnVtYmVyID4gMSkge1xuICAgICAgICAgICAgICAgIC8qIGRlYWxsb2NhdGUgMSBmcmFtZSAqL1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZnJhbWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZXNbal0ucHJvY2VzcyA9PSBwcm9jZXNzZXNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lc1tqXS5wcm9jZXNzID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmF1bHRfZnJlcXVlbmN5ID4gTUFYX0ZBVUxUUykge1xuICAgICAgICAgICAgICAgIC8qIGFsbG9jYXRlIDEgZnJhbWUgaWYgcG9zc2libGUgKi9cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZyYW1lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJhbWVzW2pdLnByb2Nlc3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVzW2pdLnByb2Nlc3MgPSA8UHJvY2Vzcz5wcm9jZXNzZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgQWxsb2NhdGlvbkFsZ29yaXRobSBmcm9tIFwiLi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiO1xuXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi4vUHJvY2Vzc1wiO1xuaW1wb3J0IEZyYW1lIGZyb20gXCIuLi9GcmFtZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9wb3J0aW9uYWwgaW1wbGVtZW50cyBBbGxvY2F0aW9uQWxnb3JpdGhtIHtcbiAgICBuYW1lOiBzdHJpbmcgPSBcIlByb3BvcnRpb25hbFwiXG5cbiAgICBhbGxvY2F0ZUZyYW1lcyhmcmFtZXM6IEFycmF5PEZyYW1lPiwgcHJvY2Vzc2VzOiBSZWFkb25seUFycmF5PFJlYWRvbmx5PFByb2Nlc3M+Pik6IHZvaWQge1xuICAgICAgICBjb25zdCB0b3RhbF9jYWxscyA9IHByb2Nlc3Nlcy5yZWR1Y2UoKHRvdGFsLCBwcm9jZXNzKSA9PiB0b3RhbCArIHByb2Nlc3MubnVtYmVyX29mX2NhbGxzLCAwKTtcblxuICAgICAgICBsZXQgZnJhbWVzX2FsbG9jYXRlZCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZnJhbWVzX2Zvcl9wcm9jZXNzID0gTWF0aC5mbG9vcihwcm9jZXNzZXNbaV0ubnVtYmVyX29mX2NhbGxzIC8gdG90YWxfY2FsbHMgKiBmcmFtZXMubGVuZ3RoKSB8fCAxO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZyYW1lc19mb3JfcHJvY2VzczsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lc19hbGxvY2F0ZWQgPj0gZnJhbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBUaGVyZSBhcmUgbm90IGVub3VnaCBmcmFtZXMgdG8gYWxsb2NhdGUgYWxsIGZyYW1lcy5gKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lc1tmcmFtZXNfYWxsb2NhdGVkXS5wcm9jZXNzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBmcmFtZSBpZiBpdCdzIGFscmVhZHkgYWxsb2NhdGVkXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnJhbWVzW2ZyYW1lc19hbGxvY2F0ZWRdLnByb2Nlc3MgPSA8UHJvY2Vzcz5wcm9jZXNzZXNbaV07XG4gICAgICAgICAgICAgICAgZnJhbWVzX2FsbG9jYXRlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogdGhlIHJlbWFpbmluZyBmcmFtZXMgYXJlIGxlZnQgdW5hbGxvY2F0ZWQgKi9cbiAgICB9XG59IiwiaW1wb3J0IE1lbnUgZnJvbSBcIi4vY2xhc3Nlcy9NZW51XCI7XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgICAgICAgbWVudS5pbml0KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvKlxuICAgICAgICAqIHJ1biB3aXRoOiB0c2MgJiYgbm9kZSAuXFxkaXN0XFxmcmFtZV9hbGxvY2F0aW9uX3NyY1xcbWFpbi5qc1xuICAgICAgICAqL1xuXG4gICAgfVxufVxuXG5tYWluKCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEaXNwbGF5IHtcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IG51bGwgPSBudWxsXG4gICAgcmVzaXplQ2FsbGJhY2s6ICgoKSA9PiB2b2lkKSB8IG51bGxcblxuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMucmVzaXplQ2FsbGJhY2sgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICBpbml0KGVsZW1faWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtX2lkKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICAgICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemVUb0ZpdC5iaW5kKHRoaXMpKTtcblxuICAgICAgICB0aGlzLnJlc2l6ZVRvRml0KCk7XG4gICAgfVxuXG4gICAgcmVzaXplVG9GaXQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmN0eCA9PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZUNhbGxiYWNrICE9IG51bGwpe1xuICAgICAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0UmVzaXplQ2FsbGJhY2soY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2NSk7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJwcm9jZXNzZXMiLCJmcmFtZXMiLCJjYWxsX3Bvb2wiLCJjYWxsX3F1ZXVlIiwiY2FsbF9oaXN0b3J5IiwibnVtYmVyX29mX2ZyYW1lcyIsIm51bWJlcl9vZl9wYWdlcyIsImFsbG9jYXRpb25BbGdvcml0aG0iLCJyZXBsYWNlbWVudEFsZ29yaXRobSIsInRvdGFsX3BhZ2VfZmF1bHRzIiwidGltZSIsImxhc3RfY2FsbF9jYXVzZWRfZmF1bHQiLCJpbml0IiwidGhpcyIsImkiLCJwdXNoIiwiYWRkUHJvY2VzcyIsInByb2Nlc3MiLCJjbGVhclByb2Nlc3NlcyIsImdlbmVyYXRlUGFnZUNhbGxQb29sIiwibGVuZ3RoIiwiZ2VuZXJhdGVDYWxscyIsImFkZFBhZ2VDYWxsc1RvUG9vbCIsImdldENhbGxzIiwiYWRkUGFnZUNhbGxUb1Bvb2wiLCJwYWdlX2NhbGwiLCJwYWdlX2NhbGxzIiwiY2xlYXJQYWdlQ2FsbFBvb2wiLCJzZXRBbGdvcml0aG0iLCJhbGdvcml0aG0iLCJuZXh0VGljayIsIkVycm9yIiwic2hpZnQiLCJjb25zb2xlIiwid2FybiIsImxvZyIsImlkIiwiYWxsb2NhdGVGcmFtZXMiLCJ1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aCIsImZpbHRlciIsImZyYW1lIiwib25QYWdlQ2FsbCIsImdldEN1cnJlbnRTdGF0ZURhdGEiLCJwYWdlX2ZhdWx0IiwicGFnZSIsInBhZ2VfZmF1bHRzIiwib25QYWdlQWxyZWFkeUluTWVtb3J5IiwiZmluZCIsImlkX29mX2ZyYW1lX3RvX3JlcGxhY2UiLCJoYW5kbGVQYWdlRmF1bHQiLCJnZXRGcmFtZUluZGV4QnlJZCIsInBhZ2VfaW5fbWVtb3J5IiwiY2FsbCIsInByb2Nlc3NfZnJhbWVzIiwicHJvY2Vzc19jYWxsX2hpc3RvcnkiLCJjdXJyZW50X2ZyYW1lcyIsInByZXZpb3VzX3BhZ2VfY2FsbHMiLCJpc0ZpbmlzaGVkIiwiZ2V0UmVzdWx0cyIsInRvdGFsX3BhZ2VfaGl0cyIsInRvdGFsX2NhbGxzIiwic2ltdWxhdGUiLCJkaXNwbGF5UmVzdWx0cyIsInJlc3VsdHMiLCJhbGdTdHIiLCJuYW1lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsImlubmVySFRNTCIsInRvVXBwZXJDYXNlIiwidG9GaXhlZCIsInJlcGxhY2UiLCJSZWdFeHAiLCJjb21wYXJlQWxsQW5kRGlzcGxheVJlc3VsdHMiLCJhbGdvcml0aG1zIiwicmVzdWx0c19lbCIsIm1lbnUiLCJ2aXNpYmxlIiwicGxheWluZyIsInNwZWVkIiwiR1VJIiwiTUVOVSIsInBsYXlfcGF1c2VfYnV0dG9uIiwic3RlcF9idXR0b24iLCJzdG9wX2J1dHRvbiIsInNwZWVkX3NsaWRlciIsImluZm9fYWxnb3JpdGhtIiwiaW5mb190aW1lIiwiaW5mb19pc19kb25lIiwiaW5mb19pbl9xdWV1ZSIsImluZm9fZmluaXNoZWQiLCJpbmZvX3RvdGFsX3BhZ2VfZmF1bHRzIiwiaW5mb190b3RhbF9wYWdlX2hpdHMiLCJmcmFtZV9yb3dzIiwic2VlX2NvZGVfYnV0dG9uIiwic3RvcmVkU2V0SW50ZXJ2YWwiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlUGxheWluZyIsInN0ZXAiLCJ0b2dnbGVWaXNpYmxlIiwicGFyc2VJbnQiLCJ2YWx1ZSIsInJlZnJlc2hTcGVlZCIsIm1lbW9yeSIsImFsZ29yaXRobU5hbWUiLCJ3aW5kb3ciLCJvcGVuIiwiZm9jdXMiLCJpbml0U3RhdGVUYWJsZSIsInJlc2l6ZUNhbGxiYWNrIiwiZHJhd0N1cnJlbnRTdGF0ZSIsImNsZWFySW50ZXJ2YWwiLCJyZWZyZXNoQ2FsbHMiLCJyZXNldCIsImRpc2FibGVkIiwic3RhcnRBbmltYXRpb24iLCJyZWZyZXNoSW5mbyIsImRyYXdDYWxscyIsInRpbWVfcm93IiwiY2FsbHNfcm93IiwidGJvZHkiLCJ0aW1lX3Jvd19oZWFkZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJjYWxsc19yb3dfaGVhZGVyIiwibGFzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJmcmFtZV9yb3ciLCJmcmFtZV9yb3dfaGVhZGVyIiwiU1RBUlRfWCIsIlNUQVJUX1kiLCJXSURUSCIsIkhFSUdIVCIsImNhbGxzVG9EcmF3IiwibmV3Q2FsbCIsImF0IiwidGltZVRpY2tFbCIsImNhbGxzVGlja0VsIiwiZnJhbWVUaWNrRWwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ0YWJsZSIsInNjcm9sbExlZnQiLCJzY3JvbGxXaWR0aCIsInRvU3RyaW5nIiwic2V0SW50ZXJ2YWwiLCJiaW5kIiwiYWZ0ZXJEb25lIiwiRnJhbWUiLCJuZXh0X2lkIiwiZGF0YSIsImZyYW1lX3RvX3JlcGxhY2VfaW5kZXgiLCJsZWFzdF9yZWNlbnRseV91c2VkX3BhZ2VfaW5kZXgiLCJlcnJvciIsInBhZ2VfaW5kZXgiLCJqIiwiYW5pbWF0aW9uR1VJIiwicnVuIiwiYWRkUHJvY2Vzc2VzIiwiYWRkQ2FsbHMiLCJjbGVhckNhbGxzIiwic2V0UmVzaXplQ2FsbGJhY2siLCJlIiwibmV3X3ZhbCIsInRhcmdldCIsImlzTmFOIiwiYWxlcnQiLCJ0b0xvd2VyQ2FzZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInByb2Nlc3NfY291bnQiLCJwYWdlX3JhbmdlX21pbiIsInBhZ2VfcmFuZ2VfbWF4IiwiY2FsbF9jb3VudF9taW4iLCJjYWxsX2NvdW50X21heCIsImN1cnJlbnRfcmFuZ2VfbWluIiwicGFnZV9yYW5nZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNvcnQiLCJnZW5lcmF0ZV9jYWxsX3F1ZXVlX2J1dHRvbiIsImF0dHJpYnV0ZXMiLCJzZXROYW1lZEl0ZW0iLCJjcmVhdGVBdHRyaWJ1dGUiLCJhbGxfcHJvY2Vzc2VzX2VsIiwicHJvY2Vzc19lbCIsImpvaW4iLCJjYWxsX3F1ZXVlX2VsIiwibWFwIiwiYW5pbWF0aW9uIiwiY29tcGFyZV9hbGwiLCJsYXN0X2NhbGxfdGltZSIsImRvbmVfY2FsbHMiLCJyYW5nZV9vZl9wYWdlcyIsIm51bWJlcl9vZl9jYWxscyIsImNhbGxzIiwiZnJhbWVzX3Blcl9wcm9jZXNzIiwicnVuX3Byb3BvcnRpb25hbCIsImZhdWx0X2ZyZXF1ZW5jeSIsImZyYW1lc19udW1iZXIiLCJyZWR1Y2UiLCJ0b3RhbCIsImZyYW1lc19hbGxvY2F0ZWQiLCJmcmFtZXNfZm9yX3Byb2Nlc3MiLCJjdHgiLCJlbGVtX2lkIiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsInJlc2l6ZVRvRml0Iiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjYWxsYmFjayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sInNvdXJjZVJvb3QiOiIifQ==