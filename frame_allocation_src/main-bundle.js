(()=>{"use strict";var e={994:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(s(752)),i=l(s(920)),a=l(s(463));t.default=class{constructor(){this.processes=[],this.frames=[],this.call_pool=[],this.call_queue=[],this.call_history=[],this.number_of_frames=0,this.number_of_pages=0,this.allocationAlgorithm=null,this.replacementAlgorithm=new a.default,this.total_page_faults=0,this.time=0,this.last_call_caused_fault=!1}init(e,t){this.number_of_pages=null!=e?e:this.number_of_pages,this.number_of_frames=null!=t?t:this.number_of_frames,this.call_queue=[...this.call_pool],this.frames=[],this.call_history=[],this.time=0,this.total_page_faults=0;for(let e=0;e<this.number_of_frames;e++)this.frames.push(new n.default)}addProcess(e){this.processes.push(e)}clearProcesses(){this.processes=[]}generatePageCallPool(){for(let e=0;e<this.processes.length;e++)this.processes[e].generateCalls(),this.addPageCallsToPool(this.processes[e].getCalls(),this.processes[e])}addPageCallToPool(e){this.call_pool.push(e)}addPageCallsToPool(e,t){for(let s=0;s<e.length;s++)this.addPageCallToPool(new i.default(e[s],t))}clearPageCallPool(){this.call_pool=[]}setAlgorithm(e){this.allocationAlgorithm=e}nextTick(){var e,t,s,l,n,i;if(null==this.allocationAlgorithm)throw new Error("No algorithm selected");const a=this.call_queue.shift();if(null==a)return console.warn("Empty page call queue but not finished"),void this.time++;if(this.call_history.push(a),console.log("Page call: "+a.id),a){null===(t=(e=this.allocationAlgorithm).allocateFrames)||void 0===t||t.call(e,this.frames,this.processes);const o=this.frames.filter((e=>null==e.process)).length;o>0&&console.warn(`Not all frames are allocated\nAllocated: ${this.frames.length-o}\nUnallocated: ${o}`),null===(l=(s=this.replacementAlgorithm).onPageCall)||void 0===l||l.call(s,this.getCurrentStateData(a));let r=!0;for(let e=0;e<this.frames.length;e++){if(null==this.frames[e])throw new Error("Frame is null");if(null==this.frames[e].page&&this.frames[e].process==a.process){this.frames[e].page=a,this.total_page_faults++,this.last_call_caused_fault=!0,r=!1;break}if(null!=this.frames[e].page&&this.frames[e].page.id==a.id){null===(i=(n=this.replacementAlgorithm).onPageAlreadyInMemory)||void 0===i||i.call(n,this.getCurrentStateData(a)),this.last_call_caused_fault=!1,r=!1;break}}if(r){if(console.log("Page fault: "+a.id),null!=this.frames.find((e=>e.process==a.process&&null==e.page)))throw new Error("Initial page fill not handled properly");this.total_page_faults++,this.last_call_caused_fault=!0;const e=this.replacementAlgorithm.handlePageFault(this.getCurrentStateData(a));this.frames[this.getFrameIndexById(e)].page=a}let h=!1;for(const e of this.frames)if(null!=e.page&&e.page.id==a.id){h=!0;break}if(!h)throw new Error("Page fault not handled properly - page not in memory");a.call(this.time)}this.time++}getCurrentStateData(e){const t=this.frames.filter((t=>t.process==e.process)),s=this.call_history.filter((t=>t.process==e.process));return{page_call:e,current_frames:t,previous_page_calls:s,processes:this.processes}}isFinished(){return 0==this.call_queue.length}getFrameIndexById(e){for(let t=0;t<this.frames.length;t++)if(this.frames[t].id==e)return t;return-1}getResults(){return{total_page_faults:this.total_page_faults,total_page_hits:this.call_history.length-this.total_page_faults,total_calls:this.call_history.length}}simulate(){for(this.init();!this.isFinished();)this.nextTick();return this.getResults()}displayResults(e,t=this.allocationAlgorithm.name){document.getElementById("results_wrapper").style.display="flex",document.getElementById("results").innerHTML=`\n        Algorithm: ${t.toUpperCase()}\n\n        Total page faults: <b style='color: red'>${e.total_page_faults.toFixed(0)}</b>\n        Total page hits: <b style='color: lime'>${e.total_page_hits.toFixed(0)}</b>\n        Total page calls: <b>${e.total_calls.toFixed(0)}</b>\n        `.replace(RegExp("\n","g"),"<br />")}compareAllAndDisplayResults(e){document.getElementById("results_wrapper").style.display="flex";const t=document.getElementById("results");t.innerHTML="";for(let s=0;s<e.length;s++){this.setAlgorithm(e[s]);const l=this.simulate();t.innerHTML+=`\n            Algorithm: ${e[s].name.toUpperCase()}\n            Total page faults: <b style='color: red'>${l.total_page_faults.toFixed(0)}</b>\n            Total page hits: <b style='color: lime'>${l.total_page_hits.toFixed(0)}</b>\n            Total page calls: <b>${l.total_calls.toFixed(0)}</b>\n            `.replace(RegExp("\n","g"),"<br />"),t.innerHTML+="<br />"}}}},498:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.visible=!1,this.playing=!1,this.speed=1,this.GUI=null,this.MENU=null,this.play_pause_button=null,this.step_button=null,this.stop_button=null,this.speed_slider=null,this.info_algorithm=null,this.info_time=null,this.info_is_done=null,this.info_in_queue=null,this.info_finished=null,this.info_total_page_faults=null,this.info_total_page_hits=null,this.frame_rows=[],this.see_code_button=null,this.storedSetInterval=null,this.menu=e}init(){this.GUI=document.getElementById("animation_gui"),this.MENU=document.getElementById("settings"),this.play_pause_button=document.getElementById("animation_play_pause"),this.step_button=document.getElementById("animation_step"),this.stop_button=document.getElementById("animation_stop"),this.speed_slider=document.getElementById("animation_speed_slider"),this.info_algorithm=document.getElementById("animation_info_algorithm_value"),this.info_time=document.getElementById("animation_info_time_value"),this.info_is_done=document.getElementById("animation_is_done"),this.info_in_queue=document.getElementById("calls_in_queue_value"),this.info_finished=document.getElementById("calls_finished_value"),this.info_total_page_faults=document.getElementById("total_page_faults_value"),this.info_total_page_hits=document.getElementById("total_page_hits_value"),this.see_code_button=document.getElementById("code_button"),this.info_is_done.style.display="none",this.play_pause_button.addEventListener("click",(()=>{this.togglePlaying()})),this.step_button.addEventListener("click",(()=>{this.step()})),this.stop_button.addEventListener("click",(()=>{this.toggleVisible(!1)})),this.speed_slider.addEventListener("input",(()=>{this.speed=parseInt(this.speed_slider.value),this.refreshSpeed()})),this.see_code_button.addEventListener("click",(()=>{if(null==this.menu.memory.allocationAlgorithm)return;const e=this.menu.memory.allocationAlgorithm.name;window.open(`https://github.com/brun0ne/scheduling-sim/blob/main/page_replacement_src/classes/algorithms/${e}.ts`,"_blank").focus()})),this.refreshSpeed(),this.initStateTable()}togglePlaying(e){this.playing=null==e?!this.playing:e,this.refreshSpeed(),this.play_pause_button.innerHTML=this.playing?"Pause":"Play"}toggleVisible(e){this.visible=null==e?!this.visible:e,this.visible?(this.GUI.style.display="block",this.MENU.style.display="none",this.menu.display.resizeCallback=()=>{this.drawCurrentState()},this.drawCurrentState()):(this.GUI.style.display="none",this.MENU.style.display="flex",null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.menu.display.resizeCallback=()=>{this.menu.refreshCalls()},this.menu.refreshCalls())}reset(){if(null==this.play_pause_button||null==this.info_is_done||null==this.step_button)throw new Error("call init() first!");this.menu.memory.init(),this.play_pause_button.innerHTML="Play",this.playing=!1,this.info_is_done.style.display="none",this.play_pause_button.disabled=!1,this.step_button.disabled=!1,this.initStateTable()}startAnimation(){this.reset(),this.toggleVisible(!0)}drawCurrentState(){this.refreshInfo(),this.drawCalls()}initStateTable(){const e=document.getElementById("animation_table_time"),t=document.getElementById("animation_table_page_calls"),s=document.getElementById("animation_table_body");e.innerHTML="",t.innerHTML="";{const t=document.createElement("th");t.innerHTML="Time",t.classList.add("header"),e.appendChild(t)}{const e=document.createElement("th");e.innerHTML="Page calls",e.classList.add("header"),t.appendChild(e)}{for(;null!=s.lastChild&&"animation_table_page_calls"!=s.lastChild.id;)s.removeChild(s.lastChild);const e=[];for(let t=0;t<this.menu.memory.number_of_frames;t++){const l=document.createElement("tr"),n=document.createElement("th");n.innerHTML=`Frame ${t}`,l.appendChild(n),e.push(l),s.appendChild(l)}this.frame_rows=e}}drawCalls(e,t,s,l,n){const i=document.getElementById("animation_table_time"),a=document.getElementById("animation_table_page_calls"),o=this.menu.memory.call_history.at(-1);if(null==o)return;{const e=document.createElement("th");e.innerHTML=`${this.menu.memory.time}`,i.appendChild(e)}{const e=document.createElement("th");e.innerHTML=`${o.id}`,a.appendChild(e)}for(let e=0;e<this.menu.memory.number_of_frames;e++){const t=this.frame_rows[e],s=this.menu.memory.frames[e].page,l=document.createElement("th");l.innerHTML=`${null!=s?s.id:""}`,null!=s&&s.id==o.id&&this.menu.memory.last_call_caused_fault&&(l.style.backgroundColor="red"),null!=this.menu.memory.frames[e].process&&(l.innerHTML+=` <span style='color: yellow'>(${this.menu.memory.frames[e].process.id})</span>`),t.appendChild(l)}const r=document.getElementById("animation_call_table");r.scrollLeft=r.scrollWidth}refreshInfo(){const e=this.menu.memory;if(null==e.allocationAlgorithm)throw new Error("call startAnimation() first!");this.info_algorithm.innerHTML=e.allocationAlgorithm.name,this.info_time.innerHTML=e.time.toString(),e.isFinished()?this.info_is_done.style.display="block":this.info_is_done.style.display="none",this.info_total_page_hits.innerHTML=(e.call_history.length-e.total_page_faults).toString(),this.info_total_page_faults.innerHTML=e.total_page_faults.toString(),this.info_in_queue.innerHTML=e.call_queue.length.toString(),this.info_finished.innerHTML=e.call_history.length.toString()}refreshSpeed(){null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.storedSetInterval=setInterval((()=>{this.playing&&this.step()}).bind(this),1e3/this.speed)}step(){this.menu.memory.isFinished()||(this.menu.memory.nextTick(),this.drawCurrentState(),this.menu.memory.isFinished()&&(this.togglePlaying(!1),this.menu.memory.displayResults(this.menu.memory.getResults()),this.afterDone()))}afterDone(){if(null==this.info_is_done||null==this.play_pause_button||null==this.step_button)throw new Error("call init() first!");this.info_is_done.style.display="block",this.play_pause_button.disabled=!0,this.step_button.disabled=!0}}},752:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(){this.page=null,this.process=null,this.id=s.next_id++}}s.next_id=0,t.default=s},463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="LRU"}handlePageFault(e){let t=-1,s=-1;for(let l=0;l<e.current_frames.length;l++){const n=e.current_frames[l];if(n.process!=e.page_call.process&&console.error("Frame is assigned to a different process - this should be ensured not to happen by the caller"),null==n.page)return console.warn("Frame is empty - this should be ensured not to happen by the caller"),l;let i=-1;for(let t=e.previous_page_calls.length-1;t>=0;t--)if(e.previous_page_calls[t].id==n.page.id){i=t;break}if(-1==i)return l;(i<s||-1==s)&&(t=l,s=i)}return e.current_frames[t].id}}},268:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(s(617)),i=l(s(994)),a=l(s(950)),o=l(s(920)),r=l(s(382)),h=l(s(498)),u=l(s(634));t.default=class{constructor(){this.display=new n.default,this.memory=new i.default,this.animationGUI=new h.default(this)}init(){document.getElementById("run_button").addEventListener("click",(()=>{this.run()})),document.getElementById("run_with_animation_button").addEventListener("click",(()=>{this.run(!0)})),document.getElementById("add_button").addEventListener("click",(()=>{this.addProcesses()})),document.getElementById("clear_button").addEventListener("click",(()=>{this.clearProcesses()})),document.getElementById("generate_call_queue_button").addEventListener("click",(()=>{this.addCalls()})),document.getElementById("clear_call_queue_button").addEventListener("click",(()=>{this.clearCalls()})),this.memory.init(5,3),this.display.init("main_canvas"),this.animationGUI.init(),this.display.setResizeCallback((()=>{this.refreshCalls()})),document.getElementById("s_frame_count").addEventListener("change",(e=>{const t=parseInt(e.target.value);isNaN(t)||t<1?alert("Invalid number of frames"):(this.memory.init(this.memory.number_of_pages,t),this.refreshCalls())})),document.getElementById("a_type").addEventListener("change",(e=>{"compare_all"===e.target.value.toLowerCase()?document.getElementById("run_with_animation_button").setAttribute("disabled","true"):document.getElementById("run_with_animation_button").removeAttribute("disabled")})),document.getElementById("results_close").addEventListener("click",(()=>{document.getElementById("results_wrapper").style.display="none"})),this.refreshCalls()}addProcesses(){const e=parseInt(document.getElementById("c_count").value),t=parseInt(document.getElementById("s_min_range").value),s=parseInt(document.getElementById("s_max_range").value),l=parseInt(document.getElementById("s_min_calls").value),n=parseInt(document.getElementById("s_max_calls").value);let i=0;for(let o=0;o<e;o++){const e=Math.floor(Math.random()*(s-t+1))+t;this.memory.addProcess(new a.default([i,i+e],Math.floor(Math.random()*(n-l+1))+l,o)),this.memory.processes[this.memory.processes.length-1].generateCalls(),i+=e}this.refreshCalls()}clearProcesses(){this.memory.clearProcesses(),this.refreshCalls()}addCalls(){for(let e=0;e<this.memory.processes.length;e++)for(let t=0;t<this.memory.processes[e].getCalls().length;t++)this.memory.call_pool.push(new o.default(this.memory.processes[e].getCalls()[t],this.memory.processes[e]));this.memory.call_pool.sort((()=>Math.random()-.5)),this.refreshCalls()}clearCalls(){this.memory.call_pool=[],this.refreshCalls()}refreshCalls(){document.getElementById("p_current_count").innerHTML=`(${this.memory.processes.length.toString()})`;const e=document.getElementById("generate_call_queue_button");this.memory.processes.length>0?e.removeAttribute("disabled"):e.attributes.setNamedItem(document.createAttribute("disabled"));const t=document.getElementById("all_processes");t.innerHTML="";for(let e=0;e<this.memory.processes.length;e++){const s=this.memory.processes[e],l=document.createElement("span");l.classList.add("process"),l.innerHTML=`<span class="process_name">Calls for process ${e}: </span> <span class="process_calls">${s.getCalls().join(", ")}</span><br />`,t.appendChild(l)}0==this.memory.processes.length&&(t.innerHTML="<span style='color: yellow'>No processes added yet.</span>"),document.getElementById("current_call_count").innerHTML=`(${this.memory.call_pool.length.toString()})`;const s=document.getElementById("main_call_queue");s.innerHTML=this.memory.call_pool.map((e=>e.id)).join(", "),0==this.memory.call_pool.length&&(s.innerHTML="<span style='color: yellow'>No calls in queue.</span>")}run(e){if(this.memory.processes.length>this.memory.frames.length)return void alert("Not enough frames for all processes");let t=!1;switch(document.getElementById("a_type").value.toLowerCase()){case"equal":this.memory.setAlgorithm(new r.default);break;case"proportional":this.memory.setAlgorithm(new u.default);break;case"fault_control":case"locality_model":throw new Error("Not implemented");case"compare_all":t=!0;break;default:alert("Invalid algorithm")}if(t){const e=[new r.default,new u.default];this.memory.compareAllAndDisplayResults(e)}else if(e)this.animationGUI.startAnimation();else{const e=this.memory.simulate();this.memory.displayResults(e)}}}},920:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.last_call_time=0,this.id=e,this.process=t}call(e){this.last_call_time=e}}},950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,s){this.calls=[],this.range_of_pages=e,this.number_of_calls=t,this.id=s}generateCalls(){this.calls=[];for(let e=0;e<this.number_of_calls;e++)this.calls.push(Math.floor(Math.random()*(this.range_of_pages[1]-this.range_of_pages[0]))+this.range_of_pages[0])}getCalls(){return this.calls}}},382:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Equal"}allocateFrames(e,t){const s=Math.floor(e.length/t.length);console.log(`Allocating ${s} frames per process`),console.log(`data.current_frames.length = ${e.length}, data.processes.length = ${t.length}`);for(let l=0;l<e.length;l++)null==e[l].process&&(e[l].process=t[Math.floor(l/s)])}}},634:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Proportional"}allocateFrames(e,t){const s=t.reduce(((e,t)=>e+t.number_of_calls),0);let l=0;for(let n=0;n<t.length;n++){let i=Math.floor(t[n].number_of_calls/s*e.length)||1;for(let s=0;s<i;s++){if(l>=e.length){console.error("There are not enough frames to allocate all frames.");break}null==e[l].process&&(e[l].process=t[n],l++)}}}}},965:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(s(268));"undefined"!=typeof document&&(new n.default).init()},617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.ctx=null,this.resizeCallback=null}init(e){const t=document.getElementById(e);this.ctx=t.getContext("2d"),window.addEventListener("resize",this.resizeToFit.bind(this)),this.resizeToFit()}resizeToFit(){null!=this.ctx&&(this.ctx.canvas.width=window.innerWidth,this.ctx.canvas.height=window.innerHeight,null!=this.resizeCallback&&this.resizeCallback())}setResizeCallback(e){this.resizeCallback=e}}}},t={};!function s(l){var n=t[l];if(void 0!==n)return n.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,s),i.exports}(965)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1idW5kbGUuanMiLCJtYXBwaW5ncyI6Im1MQUVBLGtCQUNBLFlBSUEsWUFlQSxnQkFtQklBLGNBbEJBLEtBQUFDLFVBQTRCLEdBQzVCLEtBQUFDLE9BQXVCLEdBRXZCLEtBQUFDLFVBQXlCLEdBQ3pCLEtBQUFDLFdBQTBCLEdBQzFCLEtBQUFDLGFBQTRCLEdBRTVCLEtBQUFDLGlCQUEyQixFQUMzQixLQUFBQyxnQkFBMEIsRUFFMUIsS0FBQUMsb0JBQWtELEtBQ2xELEtBQUFDLHFCQUE2QyxJQUFJLFVBRWpELEtBQUFDLGtCQUE0QixFQUM1QixLQUFBQyxLQUFlLEVBRWYsS0FBQUMsd0JBQWtDLENBRWxCLENBRWhCQyxLQUFLTixFQUEwQkQsR0FDM0JRLEtBQUtQLGdCQUFrQkEsUUFBQUEsRUFBbUJPLEtBQUtQLGdCQUMvQ08sS0FBS1IsaUJBQW1CQSxRQUFBQSxFQUFvQlEsS0FBS1IsaUJBRWpEUSxLQUFLVixXQUFhLElBQUlVLEtBQUtYLFdBQzNCVyxLQUFLWixPQUFTLEdBQ2RZLEtBQUtULGFBQWUsR0FFcEJTLEtBQUtILEtBQU8sRUFDWkcsS0FBS0osa0JBQW9CLEVBRXpCLElBQUssSUFBSUssRUFBSSxFQUFHQSxFQUFJRCxLQUFLUixpQkFBa0JTLElBQ3ZDRCxLQUFLWixPQUFPYyxLQUFLLElBQUksVUFFN0IsQ0FFQUMsV0FBV0MsR0FDUEosS0FBS2IsVUFBVWUsS0FBS0UsRUFDeEIsQ0FFQUMsaUJBQ0lMLEtBQUtiLFVBQVksRUFDckIsQ0FFQW1CLHVCQUNJLElBQUssSUFBSUwsRUFBSSxFQUFHQSxFQUFJRCxLQUFLYixVQUFVb0IsT0FBUU4sSUFDdkNELEtBQUtiLFVBQVVjLEdBQUdPLGdCQUNsQlIsS0FBS1MsbUJBQW1CVCxLQUFLYixVQUFVYyxHQUFHUyxXQUFZVixLQUFLYixVQUFVYyxHQUU3RSxDQUVRVSxrQkFBa0JDLEdBQ3RCWixLQUFLWCxVQUFVYSxLQUFLVSxFQUN4QixDQUVRSCxtQkFBbUJJLEVBQTJCVCxHQUNsRCxJQUFLLElBQUlILEVBQUksRUFBR0EsRUFBSVksRUFBV04sT0FBUU4sSUFDbkNELEtBQUtXLGtCQUFrQixJQUFJLFVBQUtFLEVBQVdaLEdBQUlHLEdBRXZELENBRUFVLG9CQUNJZCxLQUFLWCxVQUFZLEVBQ3JCLENBRUEwQixhQUFhQyxHQUNUaEIsS0FBS04sb0JBQXNCc0IsQ0FDL0IsQ0FFQUMsVyxnQkFFSSxHQUFnQyxNQUE1QmpCLEtBQUtOLG9CQUNMLE1BQU0sSUFBSXdCLE1BQU0seUJBR3BCLE1BQU1OLEVBQVlaLEtBQUtWLFdBQVc2QixRQUdsQyxHQUFpQixNQUFiUCxFQUdBLE9BRkFRLFFBQVFDLEtBQUssK0NBQ2JyQixLQUFLSCxPQU9ULEdBSEFHLEtBQUtULGFBQWFXLEtBQUtVLEdBQ3ZCUSxRQUFRRSxJQUFJLGNBQWdCVixFQUFVVyxJQUVsQ1gsRUFBVyxDQUU0QixRQUF2QyxLQUFBWixLQUFLTixxQkFBb0I4QixzQkFBYyxnQkFBR3hCLEtBQUtaLE9BQVFZLEtBQUtiLFdBRTVELE1BQU1zQyxFQUEwQnpCLEtBQUtaLE9BQU9zQyxRQUFPQyxHQUEwQixNQUFqQkEsRUFBTXZCLFVBQWlCRyxPQUMvRWtCLEVBQTBCLEdBQzFCTCxRQUFRQyxLQUFLLDRDQUE0Q3JCLEtBQUtaLE9BQU9tQixPQUFTa0IsbUJBQXlDQSxLQUl2RixRQUFwQyxLQUFBekIsS0FBS0wsc0JBQXFCaUMsa0JBQVUsZ0JBQUc1QixLQUFLNkIsb0JBQW9CakIsSUFHaEUsSUFBSWtCLEdBQWEsRUFDakIsSUFBSyxJQUFJN0IsRUFBSSxFQUFHQSxFQUFJRCxLQUFLWixPQUFPbUIsT0FBUU4sSUFBSyxDQUN6QyxHQUFzQixNQUFsQkQsS0FBS1osT0FBT2EsR0FDWixNQUFNLElBQUlpQixNQUFNLGlCQUVwQixHQUEyQixNQUF2QmxCLEtBQUtaLE9BQU9hLEdBQUc4QixNQUFnQi9CLEtBQUtaLE9BQU9hLEdBQUdHLFNBQVdRLEVBQVVSLFFBQVMsQ0FFNUVKLEtBQUtaLE9BQU9hLEdBQUc4QixLQUFPbkIsRUFHdEJaLEtBQUtKLG9CQUNMSSxLQUFLRix3QkFBeUIsRUFFOUJnQyxHQUFhLEVBQ2IsSyxDQUdKLEdBQTJCLE1BQXZCOUIsS0FBS1osT0FBT2EsR0FBRzhCLE1BQWdCL0IsS0FBS1osT0FBT2EsR0FBRzhCLEtBQU1SLElBQU1YLEVBQVVXLEdBQUksQ0FFekIsUUFBL0MsS0FBQXZCLEtBQUtMLHNCQUFxQnFDLDZCQUFxQixnQkFBR2hDLEtBQUs2QixvQkFBb0JqQixJQUUzRVosS0FBS0Ysd0JBQXlCLEVBQzlCZ0MsR0FBYSxFQUNiLEssRUFLUixHQUFJQSxFQUFZLENBSVosR0FIQVYsUUFBUUUsSUFBSSxlQUFpQlYsRUFBVVcsSUFHb0QsTUFBdkZ2QixLQUFLWixPQUFPNkMsTUFBS04sR0FBU0EsRUFBTXZCLFNBQVdRLEVBQVVSLFNBQXlCLE1BQWR1QixFQUFNSSxPQUN0RSxNQUFNLElBQUliLE1BQU0sMENBSXBCbEIsS0FBS0osb0JBQ0xJLEtBQUtGLHdCQUF5QixFQUc5QixNQUFNb0MsRUFBeUJsQyxLQUFLTCxxQkFBcUJ3QyxnQkFBZ0JuQyxLQUFLNkIsb0JBQW9CakIsSUFDbEdaLEtBQUtaLE9BQU9ZLEtBQUtvQyxrQkFBa0JGLElBQXlCSCxLQUFPbkIsQyxDQUl2RSxJQUFJeUIsR0FBaUIsRUFDckIsSUFBSyxNQUFNVixLQUFTM0IsS0FBS1osT0FDckIsR0FBa0IsTUFBZHVDLEVBQU1JLE1BR0NKLEVBQU1JLEtBQU1SLElBQU1YLEVBQVVXLEdBQUksQ0FFdkNjLEdBQWlCLEVBQ2pCLEssQ0FHUixJQUFLQSxFQUNELE1BQU0sSUFBSW5CLE1BQU0sd0RBSXBCTixFQUFVMEIsS0FBS3RDLEtBQUtILEssQ0FHeEJHLEtBQUtILE1BQ1QsQ0FFQWdDLG9CQUFvQmpCLEdBRWhCLE1BQU0yQixFQUFpQnZDLEtBQUtaLE9BQU9zQyxRQUFPQyxHQUFTQSxFQUFNdkIsU0FBV1EsRUFBVVIsVUFDeEVvQyxFQUF1QnhDLEtBQUtULGFBQWFtQyxRQUFPWSxHQUFRQSxFQUFLbEMsU0FBV1EsRUFBVVIsVUFTeEYsTUFQOEIsQ0FDMUJRLFVBQVdBLEVBQ1g2QixlQUFnQkYsRUFDaEJHLG9CQUFxQkYsRUFDckJyRCxVQUFXYSxLQUFLYixVQUl4QixDQUVBd0QsYUFDSSxPQUFpQyxHQUExQjNDLEtBQUtWLFdBQVdpQixNQUMzQixDQUVRNkIsa0JBQWtCYixHQUN0QixJQUFLLElBQUl0QixFQUFJLEVBQUdBLEVBQUlELEtBQUtaLE9BQU9tQixPQUFRTixJQUNwQyxHQUFJRCxLQUFLWixPQUFPYSxHQUFHc0IsSUFBTUEsRUFDckIsT0FBT3RCLEVBR2YsT0FBUSxDQUNaLENBRUEyQyxhQU9JLE1BTmdCLENBQ1poRCxrQkFBbUJJLEtBQUtKLGtCQUN4QmlELGdCQUFpQjdDLEtBQUtULGFBQWFnQixPQUFTUCxLQUFLSixrQkFDakRrRCxZQUFhOUMsS0FBS1QsYUFBYWdCLE9BSXZDLENBRUF3QyxXQUdJLElBRkEvQyxLQUFLRCxRQUVHQyxLQUFLMkMsY0FDVDNDLEtBQUtpQixXQUdULE9BQU9qQixLQUFLNEMsWUFDaEIsQ0FFQUksZUFBZUMsRUFBbUJDLEVBQWlCbEQsS0FBS04sb0JBQXFCeUQsTUFDakRDLFNBQVNDLGVBQWUsbUJBQ2hDQyxNQUFNQyxRQUFVLE9BRWJILFNBQVNDLGVBQWUsV0FDaENHLFVBQVksd0JBQ1ZOLEVBQU9PLHFFQUV1QlIsRUFBU3JELGtCQUFrQjhELFFBQVEsMkRBQ3BDVCxFQUFTSixnQkFBZ0JhLFFBQVEsd0NBQ3BEVCxFQUFTSCxZQUFZWSxRQUFRLG1CQUNsREMsUUFBUUMsT0FBTyxLQUFNLEtBQU0sU0FDakMsQ0FFQUMsNEJBQTRCQyxHQUNBVixTQUFTQyxlQUFlLG1CQUNoQ0MsTUFBTUMsUUFBVSxPQUVoQyxNQUFNUSxFQUFhWCxTQUFTQyxlQUFlLFdBQzNDVSxFQUFXUCxVQUFZLEdBRXZCLElBQUssSUFBSXZELEVBQUksRUFBR0EsRUFBSTZELEVBQVd2RCxPQUFRTixJQUFLLENBQ3hDRCxLQUFLZSxhQUFhK0MsRUFBVzdELElBQzdCLE1BQU1nRCxFQUFtQmpELEtBQUsrQyxXQUU5QmdCLEVBQVdQLFdBQWEsNEJBQ1hNLEVBQVc3RCxHQUFHa0QsS0FBS00sdUVBQ1dSLEVBQVFyRCxrQkFBa0I4RCxRQUFRLCtEQUNuQ1QsRUFBUUosZ0JBQWdCYSxRQUFRLDRDQUNuRFQsRUFBUUgsWUFBWVksUUFBUSx1QkFDakRDLFFBQVFDLE9BQU8sS0FBTSxLQUFNLFVBRTdCRyxFQUFXUCxXQUFhLFEsQ0FFaEMsRSwrREM5UUosZ0JBK0JJdEUsWUFBWThFLEdBNUJaLEtBQUFDLFNBQW1CLEVBQ25CLEtBQUFDLFNBQW1CLEVBQ25CLEtBQUFDLE1BQWdCLEVBRWhCLEtBQUFDLElBQTZCLEtBQzdCLEtBQUFDLEtBQThCLEtBRTlCLEtBQUFDLGtCQUE4QyxLQUM5QyxLQUFBQyxZQUF3QyxLQUN4QyxLQUFBQyxZQUF3QyxLQUN4QyxLQUFBQyxhQUF3QyxLQUV4QyxLQUFBQyxlQUE4QyxLQUM5QyxLQUFBQyxVQUF5QyxLQUN6QyxLQUFBQyxhQUFzQyxLQUV0QyxLQUFBQyxjQUE2QyxLQUM3QyxLQUFBQyxjQUE2QyxLQUM3QyxLQUFBQyx1QkFBc0QsS0FDdEQsS0FBQUMscUJBQW9ELEtBRXBELEtBQUFDLFdBQXlDLEdBRXpDLEtBQUFDLGdCQUE0QyxLQUc1QyxLQUFBQyxrQkFBeUMsS0FHckNuRixLQUFLZ0UsS0FBT0EsQ0FDaEIsQ0FFQWpFLE9BQ0lDLEtBQUtvRSxJQUFNaEIsU0FBU0MsZUFBZSxpQkFDbkNyRCxLQUFLcUUsS0FBT2pCLFNBQVNDLGVBQWUsWUFFcENyRCxLQUFLc0Usa0JBQW9CbEIsU0FBU0MsZUFBZSx3QkFDakRyRCxLQUFLdUUsWUFBY25CLFNBQVNDLGVBQWUsa0JBQzNDckQsS0FBS3dFLFlBQWNwQixTQUFTQyxlQUFlLGtCQUMzQ3JELEtBQUt5RSxhQUFlckIsU0FBU0MsZUFBZSwwQkFFNUNyRCxLQUFLMEUsZUFBaUJ0QixTQUFTQyxlQUFlLGtDQUM5Q3JELEtBQUsyRSxVQUFZdkIsU0FBU0MsZUFBZSw2QkFDekNyRCxLQUFLNEUsYUFBZXhCLFNBQVNDLGVBQWUscUJBRTVDckQsS0FBSzZFLGNBQWdCekIsU0FBU0MsZUFBZSx3QkFDN0NyRCxLQUFLOEUsY0FBZ0IxQixTQUFTQyxlQUFlLHdCQUM3Q3JELEtBQUsrRSx1QkFBeUIzQixTQUFTQyxlQUFlLDJCQUN0RHJELEtBQUtnRixxQkFBdUI1QixTQUFTQyxlQUFlLHlCQUVwRHJELEtBQUtrRixnQkFBa0I5QixTQUFTQyxlQUFlLGVBSy9DckQsS0FBSzRFLGFBQWF0QixNQUFNQyxRQUFVLE9BS2xDdkQsS0FBS3NFLGtCQUFrQmMsaUJBQWlCLFNBQVMsS0FDN0NwRixLQUFLcUYsZUFBZSxJQUd4QnJGLEtBQUt1RSxZQUFZYSxpQkFBaUIsU0FBUyxLQUN2Q3BGLEtBQUtzRixNQUFNLElBR2Z0RixLQUFLd0UsWUFBWVksaUJBQWlCLFNBQVMsS0FDdkNwRixLQUFLdUYsZUFBYyxFQUFNLElBRzdCdkYsS0FBS3lFLGFBQWFXLGlCQUFpQixTQUFTLEtBQ3hDcEYsS0FBS21FLE1BQVFxQixTQUFTeEYsS0FBS3lFLGFBQWNnQixPQUN6Q3pGLEtBQUswRixjQUFjLElBR3ZCMUYsS0FBS2tGLGdCQUFnQkUsaUJBQWlCLFNBQVMsS0FDM0MsR0FBNEMsTUFBeENwRixLQUFLZ0UsS0FBSzJCLE9BQU9qRyxvQkFDakIsT0FFSixNQUFNa0csRUFBZ0I1RixLQUFLZ0UsS0FBSzJCLE9BQU9qRyxvQkFBb0J5RCxLQUMzRDBDLE9BQU9DLEtBQUssK0ZBQStGRixPQUFvQixVQUFXRyxPQUFPLElBTXJKL0YsS0FBSzBGLGVBS0wxRixLQUFLZ0csZ0JBQ1QsQ0FDQVgsY0FBY25CLEdBRU5sRSxLQUFLa0UsUUFETSxNQUFYQSxHQUNnQmxFLEtBQUtrRSxRQUVOQSxFQUVuQmxFLEtBQUswRixlQUVMMUYsS0FBS3NFLGtCQUFtQmQsVUFBWXhELEtBQUtrRSxRQUFVLFFBQVUsTUFDakUsQ0FFQXFCLGNBQWN0QixHQUVOakUsS0FBS2lFLFFBRE0sTUFBWEEsR0FDZ0JqRSxLQUFLaUUsUUFFTkEsRUFFZmpFLEtBQUtpRSxTQUNMakUsS0FBS29FLElBQUtkLE1BQU1DLFFBQVUsUUFDMUJ2RCxLQUFLcUUsS0FBTWYsTUFBTUMsUUFBVSxPQUUzQnZELEtBQUtnRSxLQUFLVCxRQUFRMEMsZUFBaUIsS0FDL0JqRyxLQUFLa0csa0JBQWtCLEVBRTNCbEcsS0FBS2tHLHFCQUdMbEcsS0FBS29FLElBQUtkLE1BQU1DLFFBQVUsT0FDMUJ2RCxLQUFLcUUsS0FBTWYsTUFBTUMsUUFBVSxPQUVHLE1BQTFCdkQsS0FBS21GLG1CQUNMZ0IsY0FBY25HLEtBQUttRixtQkFFdkJuRixLQUFLZ0UsS0FBS1QsUUFBUTBDLGVBQWlCLEtBQy9CakcsS0FBS2dFLEtBQUtvQyxjQUFjLEVBRTVCcEcsS0FBS2dFLEtBQUtvQyxlQUVsQixDQUVBQyxRQUNJLEdBQThCLE1BQTFCckcsS0FBS3NFLG1CQUFrRCxNQUFyQnRFLEtBQUs0RSxjQUE0QyxNQUFwQjVFLEtBQUt1RSxZQUNwRSxNQUFNLElBQUlyRCxNQUFNLHNCQUVwQmxCLEtBQUtnRSxLQUFLMkIsT0FBTzVGLE9BRWpCQyxLQUFLc0Usa0JBQWtCZCxVQUFZLE9BQ25DeEQsS0FBS2tFLFNBQVUsRUFFZmxFLEtBQUs0RSxhQUFhdEIsTUFBTUMsUUFBVSxPQUVsQ3ZELEtBQUtzRSxrQkFBa0JnQyxVQUFXLEVBQ2xDdEcsS0FBS3VFLFlBQVkrQixVQUFXLEVBRTVCdEcsS0FBS2dHLGdCQUNULENBRUFPLGlCQUNJdkcsS0FBS3FHLFFBQ0xyRyxLQUFLdUYsZUFBYyxFQUN2QixDQUVBVyxtQkFJSWxHLEtBQUt3RyxjQUVMeEcsS0FBS3lHLFdBQ1QsQ0FFQVQsaUJBRUksTUFBTVUsRUFBV3RELFNBQVNDLGVBQWUsd0JBQ25Dc0QsRUFBWXZELFNBQVNDLGVBQWUsOEJBQ3BDdUQsRUFBUXhELFNBQVNDLGVBQWUsd0JBR3RDcUQsRUFBU2xELFVBQVksR0FDckJtRCxFQUFVbkQsVUFBWSxHQUd0QixDQUNJLE1BQU1xRCxFQUFrQnpELFNBQVMwRCxjQUFjLE1BQy9DRCxFQUFnQnJELFVBQVksT0FDNUJxRCxFQUFnQkUsVUFBVUMsSUFBSSxVQUM5Qk4sRUFBU08sWUFBWUosRSxDQUl6QixDQUNJLE1BQU1LLEVBQW1COUQsU0FBUzBELGNBQWMsTUFDaERJLEVBQWlCMUQsVUFBWSxhQUM3QjBELEVBQWlCSCxVQUFVQyxJQUFJLFVBQy9CTCxFQUFVTSxZQUFZQyxFLENBSTFCLENBRUksS0FBMEIsTUFBbkJOLEVBQU1PLFdBRUMsOEJBREVQLEVBQU1PLFVBQTBCNUYsSUFJNUNxRixFQUFNUSxZQUFZUixFQUFNTyxXQUk1QixNQUFNbEMsRUFBeUMsR0FDL0MsSUFBSyxJQUFJaEYsRUFBSSxFQUFHQSxFQUFJRCxLQUFLZ0UsS0FBSzJCLE9BQU9uRyxpQkFBa0JTLElBQUssQ0FDeEQsTUFBTW9ILEVBQVlqRSxTQUFTMEQsY0FBYyxNQUVuQ1EsRUFBbUJsRSxTQUFTMEQsY0FBYyxNQUNoRFEsRUFBaUI5RCxVQUFZLFNBQVN2RCxJQUN0Q29ILEVBQVVKLFlBQVlLLEdBRXRCckMsRUFBVy9FLEtBQUttSCxHQUNoQlQsRUFBTUssWUFBWUksRSxDQUV0QnJILEtBQUtpRixXQUFhQSxDLENBRTFCLENBRUF3QixVQUFVYyxFQUFrQkMsRUFBa0JDLEVBQWdCQyxFQUFpQkMsR0FFM0UsTUFBTWpCLEVBQVd0RCxTQUFTQyxlQUFlLHdCQUNuQ3NELEVBQVl2RCxTQUFTQyxlQUFlLDhCQUdwQ3VFLEVBQVU1SCxLQUFLZ0UsS0FBSzJCLE9BQU9wRyxhQUFhc0ksSUFBSSxHQUNsRCxHQUFlLE1BQVhELEVBQ0EsT0FHSixDQUNJLE1BQU1FLEVBQWExRSxTQUFTMEQsY0FBYyxNQUMxQ2dCLEVBQVd0RSxVQUFZLEdBQUd4RCxLQUFLZ0UsS0FBSzJCLE9BQU85RixPQUMzQzZHLEVBQVNPLFlBQVlhLEUsQ0FJekIsQ0FDSSxNQUFNQyxFQUFjM0UsU0FBUzBELGNBQWMsTUFDM0NpQixFQUFZdkUsVUFBWSxHQUFHb0UsRUFBUXJHLEtBRW5Db0YsRUFBVU0sWUFBWWMsRSxDQUt0QixJQUFLLElBQUk5SCxFQUFJLEVBQUdBLEVBQUlELEtBQUtnRSxLQUFLMkIsT0FBT25HLGlCQUFrQlMsSUFBSyxDQUN4RCxNQUFNb0gsRUFBWXJILEtBQUtpRixXQUFXaEYsR0FDNUI4QixFQUFPL0IsS0FBS2dFLEtBQUsyQixPQUFPdkcsT0FBT2EsR0FBRzhCLEtBRWxDaUcsRUFBYzVFLFNBQVMwRCxjQUFjLE1BQzNDa0IsRUFBWXhFLFVBQVksR0FBVyxNQUFSekIsRUFBZUEsRUFBS1IsR0FBSyxLQUV4QyxNQUFSUSxHQUFnQkEsRUFBS1IsSUFBTXFHLEVBQVFyRyxJQUFNdkIsS0FBS2dFLEtBQUsyQixPQUFPN0YseUJBRTFEa0ksRUFBWTFFLE1BQU0yRSxnQkFBa0IsT0FHRSxNQUF0Q2pJLEtBQUtnRSxLQUFLMkIsT0FBT3ZHLE9BQU9hLEdBQUdHLFVBQzNCNEgsRUFBWXhFLFdBQWEsaUNBQWlDeEQsS0FBS2dFLEtBQUsyQixPQUFPdkcsT0FBT2EsR0FBR0csUUFBU21CLGNBR2xHOEYsRUFBVUosWUFBWWUsRSxDQUs5QixNQUFNRSxFQUFROUUsU0FBU0MsZUFBZSx3QkFDdEM2RSxFQUFNQyxXQUFhRCxFQUFNRSxXQUM3QixDQUVBNUIsY0FDSSxNQUFNYixFQUFTM0YsS0FBS2dFLEtBQUsyQixPQUN6QixHQUFrQyxNQUE5QkEsRUFBT2pHLG9CQUNQLE1BQU0sSUFBSXdCLE1BQU0sZ0NBRXBCbEIsS0FBSzBFLGVBQWdCbEIsVUFBWW1DLEVBQU9qRyxvQkFBb0J5RCxLQUM1RG5ELEtBQUsyRSxVQUFXbkIsVUFBWW1DLEVBQU85RixLQUFLd0ksV0FFcEMxQyxFQUFPaEQsYUFDUDNDLEtBQUs0RSxhQUFjdEIsTUFBTUMsUUFBVSxRQUVuQ3ZELEtBQUs0RSxhQUFjdEIsTUFBTUMsUUFBVSxPQUV2Q3ZELEtBQUtnRixxQkFBc0J4QixXQUFhbUMsRUFBT3BHLGFBQWFnQixPQUFTb0YsRUFBTy9GLG1CQUFtQnlJLFdBQy9GckksS0FBSytFLHVCQUF3QnZCLFVBQVltQyxFQUFPL0Ysa0JBQWtCeUksV0FFbEVySSxLQUFLNkUsY0FBZXJCLFVBQVltQyxFQUFPckcsV0FBV2lCLE9BQU84SCxXQUN6RHJJLEtBQUs4RSxjQUFldEIsVUFBWW1DLEVBQU9wRyxhQUFhZ0IsT0FBTzhILFVBQy9ELENBRUEzQyxlQUNrQyxNQUExQjFGLEtBQUttRixtQkFDTGdCLGNBQWNuRyxLQUFLbUYsbUJBRXZCbkYsS0FBS21GLGtCQUFvQm1ELGFBQVksS0FDN0J0SSxLQUFLa0UsU0FDTGxFLEtBQUtzRixNQUVaLEdBQUVpRCxLQUFLdkksTUFBTyxJQUFPQSxLQUFLbUUsTUFDL0IsQ0FFQW1CLE9BQ1F0RixLQUFLZ0UsS0FBSzJCLE9BQU9oRCxlQUdyQjNDLEtBQUtnRSxLQUFLMkIsT0FBTzFFLFdBQ2pCakIsS0FBS2tHLG1CQUVEbEcsS0FBS2dFLEtBQUsyQixPQUFPaEQsZUFDakIzQyxLQUFLcUYsZUFBYyxHQUNuQnJGLEtBQUtnRSxLQUFLMkIsT0FBTzNDLGVBQWVoRCxLQUFLZ0UsS0FBSzJCLE9BQU8vQyxjQUVqRDVDLEtBQUt3SSxhQUViLENBRUFBLFlBQ0ksR0FBeUIsTUFBckJ4SSxLQUFLNEUsY0FBa0QsTUFBMUI1RSxLQUFLc0UsbUJBQWlELE1BQXBCdEUsS0FBS3VFLFlBQ3BFLE1BQU0sSUFBSXJELE1BQU0sc0JBRXBCbEIsS0FBSzRFLGFBQWF0QixNQUFNQyxRQUFVLFFBRWxDdkQsS0FBS3NFLGtCQUFrQmdDLFVBQVcsRUFDbEN0RyxLQUFLdUUsWUFBWStCLFVBQVcsQ0FDaEMsRSwrREN4VUosTUFBcUJtQyxFQU9qQnZKLGNBQ0ljLEtBQUsrQixLQUFPLEtBQ1ovQixLQUFLSSxRQUFVLEtBRWZKLEtBQUt1QixHQUFLa0gsRUFBTUMsU0FDcEIsRUFYTyxFQUFBQSxRQUFrQixFLFVBRFJELEMsK0RDR3JCLDhCQUNJLEtBQUF0RixLQUFlLEtBMkNuQixDQXpDSWhCLGdCQUFnQndHLEdBRVosSUFBSUMsR0FBMEIsRUFDMUJDLEdBQWtDLEVBRXRDLElBQUssSUFBSTVJLEVBQUksRUFBR0EsRUFBSTBJLEVBQUtsRyxlQUFlbEMsT0FBUU4sSUFBSyxDQUNqRCxNQUFNMEIsRUFBUWdILEVBQUtsRyxlQUFleEMsR0FNbEMsR0FKSTBCLEVBQU12QixTQUFXdUksRUFBSy9ILFVBQVVSLFNBQ2hDZ0IsUUFBUTBILE1BQU0saUdBR0EsTUFBZG5ILEVBQU1JLEtBRU4sT0FEQVgsUUFBUUMsS0FBSyx1RUFDTnBCLEVBR1gsSUFBSThJLEdBQWMsRUFDbEIsSUFBSyxJQUFJQyxFQUFJTCxFQUFLakcsb0JBQW9CbkMsT0FBUyxFQUFHeUksR0FBSyxFQUFHQSxJQUd0RCxHQUYyQkwsRUFBS2pHLG9CQUFvQnNHLEdBRTdCekgsSUFBTUksRUFBTUksS0FBS1IsR0FBSSxDQUN4Q3dILEVBQWFDLEVBQ2IsSyxDQUlSLElBQW1CLEdBQWZELEVBRUEsT0FBTzlJLEdBR1A4SSxFQUFhRixJQUFxRSxHQUFuQ0EsS0FFL0NELEVBQXlCM0ksRUFDekI0SSxFQUFpQ0UsRSxDQUl6QyxPQUFPSixFQUFLbEcsZUFBZW1HLEdBQXdCckgsRUFDdkQsRSwySkNoREosa0JBQ0EsWUFDQSxZQUNBLFlBQ0EsWUFDQSxZQUNBLFlBRUEsZ0JBS0lyQyxjQUNJYyxLQUFLdUQsUUFBVSxJQUFJLFVBQ25CdkQsS0FBSzJGLE9BQVMsSUFBSSxVQUVsQjNGLEtBQUtpSixhQUFlLElBQUksVUFBYWpKLEtBQ3pDLENBRUFELE9BQ3VCcUQsU0FBU0MsZUFBZSxjQUNoQytCLGlCQUFpQixTQUFTLEtBQVFwRixLQUFLa0osS0FBSyxJQUVyQjlGLFNBQVNDLGVBQWUsNkJBQ2hDK0IsaUJBQWlCLFNBQVMsS0FBUXBGLEtBQUtrSixLQUFJLEVBQUssSUFFdkQ5RixTQUFTQyxlQUFlLGNBQ2hDK0IsaUJBQWlCLFNBQVMsS0FBUXBGLEtBQUttSixjQUFjLElBRTNDL0YsU0FBU0MsZUFBZSxnQkFDaEMrQixpQkFBaUIsU0FBUyxLQUFRcEYsS0FBS0ssZ0JBQWdCLElBRWpDK0MsU0FBU0MsZUFBZSw4QkFDaEMrQixpQkFBaUIsU0FBUyxLQUFRcEYsS0FBS29KLFVBQVUsSUFFNUNoRyxTQUFTQyxlQUFlLDJCQUNoQytCLGlCQUFpQixTQUFTLEtBQVFwRixLQUFLcUosWUFBWSxJQU0zRXJKLEtBQUsyRixPQUFPNUYsS0FBSyxFQUFHLEdBQ3BCQyxLQUFLdUQsUUFBUXhELEtBQUssZUFDbEJDLEtBQUtpSixhQUFhbEosT0FDbEJDLEtBQUt1RCxRQUFRK0YsbUJBQWtCLEtBQVF0SixLQUFLb0csY0FBYyxJQUtqQ2hELFNBQVNDLGVBQWUsaUJBQ2hDK0IsaUJBQWlCLFVBQVdtRSxJQUN6QyxNQUFNQyxFQUFVaEUsU0FBNEIrRCxFQUFFRSxPQUFRaEUsT0FFbERpRSxNQUFNRixJQUFZQSxFQUFVLEVBQzVCRyxNQUFNLDZCQUlWM0osS0FBSzJGLE9BQU81RixLQUFLQyxLQUFLMkYsT0FBT2xHLGdCQUFpQitKLEdBQzlDeEosS0FBS29HLGVBQWMsSUFPRWhELFNBQVNDLGVBQWUsVUFDaEMrQixpQkFBaUIsVUFBV21FLElBQ2lCLGdCQUFsQ0EsRUFBRUUsT0FBUWhFLE1BQU1tRSxjQUNoQnhHLFNBQVNDLGVBQWUsNkJBQThCd0csYUFBYSxXQUFZLFFBRy9FekcsU0FBU0MsZUFBZSw2QkFBOEJ5RyxnQkFBZ0IsVyxJQU81RTFHLFNBQVNDLGVBQWUsaUJBQ2hDK0IsaUJBQWlCLFNBQVMsS0FDbkJoQyxTQUFTQyxlQUFlLG1CQUFvQkMsTUFBTUMsUUFBVSxNQUFNLElBTXZGdkQsS0FBS29HLGNBQ1QsQ0FFQStDLGVBQ0ksTUFBTVksRUFBZ0J2RSxTQUE0QnBDLFNBQVNDLGVBQWUsV0FBWW9DLE9BRWhGdUUsRUFBaUJ4RSxTQUE0QnBDLFNBQVNDLGVBQWUsZUFBZ0JvQyxPQUNyRndFLEVBQWlCekUsU0FBNEJwQyxTQUFTQyxlQUFlLGVBQWdCb0MsT0FFckZ5RSxFQUFpQjFFLFNBQTRCcEMsU0FBU0MsZUFBZSxlQUFnQm9DLE9BQ3JGMEUsRUFBaUIzRSxTQUE0QnBDLFNBQVNDLGVBQWUsZUFBZ0JvQyxPQUUzRixJQUFJMkUsRUFBb0IsRUFFeEIsSUFBSyxJQUFJbkssRUFBSSxFQUFHQSxFQUFJOEosRUFBZTlKLElBQUssQ0FDcEMsTUFBTW9LLEVBQWFDLEtBQUtDLE1BQU1ELEtBQUtFLFVBQVlQLEVBQWlCRCxFQUFpQixJQUFNQSxFQUV2RmhLLEtBQUsyRixPQUFPeEYsV0FBVyxJQUFJLFVBQ3ZCLENBQUNpSyxFQUFtQkEsRUFBb0JDLEdBQ3hDQyxLQUFLQyxNQUFNRCxLQUFLRSxVQUFZTCxFQUFpQkQsRUFBaUIsSUFBTUEsRUFDcEVqSyxJQUVKRCxLQUFLMkYsT0FBT3hHLFVBQVVhLEtBQUsyRixPQUFPeEcsVUFBVW9CLE9BQVMsR0FBR0MsZ0JBRXhENEosR0FBcUJDLEMsQ0FHekJySyxLQUFLb0csY0FDVCxDQUVBL0YsaUJBQ0lMLEtBQUsyRixPQUFPdEYsaUJBQ1pMLEtBQUtvRyxjQUNULENBRUFnRCxXQUVJLElBQUssSUFBSW5KLEVBQUksRUFBR0EsRUFBSUQsS0FBSzJGLE9BQU94RyxVQUFVb0IsT0FBUU4sSUFDOUMsSUFBSyxJQUFJK0ksRUFBSSxFQUFHQSxFQUFJaEosS0FBSzJGLE9BQU94RyxVQUFVYyxHQUFHUyxXQUFXSCxPQUFReUksSUFDNURoSixLQUFLMkYsT0FBT3RHLFVBQVVhLEtBQUssSUFBSSxVQUFLRixLQUFLMkYsT0FBT3hHLFVBQVVjLEdBQUdTLFdBQVdzSSxHQUFJaEosS0FBSzJGLE9BQU94RyxVQUFVYyxLQUkxR0QsS0FBSzJGLE9BQU90RyxVQUFVb0wsTUFBSyxJQUFNSCxLQUFLRSxTQUFXLEtBRWpEeEssS0FBS29HLGNBQ1QsQ0FFQWlELGFBQ0lySixLQUFLMkYsT0FBT3RHLFVBQVksR0FDeEJXLEtBQUtvRyxjQUNULENBRUFBLGVBQzZCaEQsU0FBU0MsZUFBZSxtQkFDaENHLFVBQVksSUFBSXhELEtBQUsyRixPQUFPeEcsVUFBVW9CLE9BQU84SCxjQUU5RCxNQUFNcUMsRUFBNkJ0SCxTQUFTQyxlQUFlLDhCQUV2RHJELEtBQUsyRixPQUFPeEcsVUFBVW9CLE9BQVMsRUFDL0JtSyxFQUEyQlosZ0JBQWdCLFlBRzNDWSxFQUEyQkMsV0FBV0MsYUFBYXhILFNBQVN5SCxnQkFBZ0IsYUFJaEYsTUFBTUMsRUFBbUIxSCxTQUFTQyxlQUFlLGlCQUNqRHlILEVBQWlCdEgsVUFBWSxHQUU3QixJQUFLLElBQUl2RCxFQUFJLEVBQUdBLEVBQUlELEtBQUsyRixPQUFPeEcsVUFBVW9CLE9BQVFOLElBQUssQ0FDbkQsTUFBTUcsRUFBVUosS0FBSzJGLE9BQU94RyxVQUFVYyxHQUVoQzhLLEVBQWEzSCxTQUFTMEQsY0FBYyxRQUMxQ2lFLEVBQVdoRSxVQUFVQyxJQUFJLFdBRXpCK0QsRUFBV3ZILFVBQVksZ0RBQWdEdkQsMENBQTBDRyxFQUFRTSxXQUFXc0ssS0FBSyxxQkFFeklGLEVBQWlCN0QsWUFBWThELEUsQ0FHRyxHQUFoQy9LLEtBQUsyRixPQUFPeEcsVUFBVW9CLFNBQ3RCdUssRUFBaUJ0SCxVQUFZLDhEQUlYSixTQUFTQyxlQUFlLHNCQUNoQ0csVUFBWSxJQUFJeEQsS0FBSzJGLE9BQU90RyxVQUFVa0IsT0FBTzhILGNBRTNELE1BQU00QyxFQUFnQjdILFNBQVNDLGVBQWUsbUJBQzlDNEgsRUFBY3pILFVBQVl4RCxLQUFLMkYsT0FBT3RHLFVBQVU2TCxLQUFLbkosR0FBa0JBLEVBQUtSLEtBQU15SixLQUFLLE1BRW5ELEdBQWhDaEwsS0FBSzJGLE9BQU90RyxVQUFVa0IsU0FDdEIwSyxFQUFjekgsVUFBWSx3REFFbEMsQ0FFQTBGLElBQUlpQyxHQUNBLEdBQUluTCxLQUFLMkYsT0FBT3hHLFVBQVVvQixPQUFTUCxLQUFLMkYsT0FBT3ZHLE9BQU9tQixPQUVsRCxZQURBb0osTUFBTSx1Q0FLVixJQUFJeUIsR0FBdUIsRUFFM0IsT0FIa0NoSSxTQUFTQyxlQUFlLFVBQVdvQyxNQUd0RG1FLGVBQ1gsSUFBSyxRQUVHNUosS0FBSzJGLE9BQU81RSxhQUFhLElBQUksV0FDN0IsTUFFUixJQUFLLGVBRUdmLEtBQUsyRixPQUFPNUUsYUFBYSxJQUFJLFdBQzdCLE1BRVIsSUFBSyxnQkFLTCxJQUFLLGlCQUVHLE1BQU0sSUFBSUcsTUFBTSxtQkFHeEIsSUFBSyxjQUVHa0ssR0FBYyxFQUNkLE1BRVIsUUFFUXpCLE1BQU0scUJBSWxCLEdBQUl5QixFQUFKLENBQ0ksTUFBTXRILEVBQWEsQ0FDZixJQUFJLFVBQ0osSUFBSSxXQUdSOUQsS0FBSzJGLE9BQU85Qiw0QkFBNEJDLEUsTUFJNUMsR0FBSXFILEVBQ0FuTCxLQUFLaUosYUFBYTFDLHFCQUVqQixDQUNELE1BQU10RCxFQUFVakQsS0FBSzJGLE9BQU81QyxXQUM1Qi9DLEtBQUsyRixPQUFPM0MsZUFBZUMsRSxDQUVuQyxFLCtEQ25QSixnQkFLSS9ELFlBQVlxQyxFQUFZbkIsR0FIeEIsS0FBQWlMLGVBQXlCLEVBSXJCckwsS0FBS3VCLEdBQUtBLEVBQ1Z2QixLQUFLSSxRQUFVQSxDQUNuQixDQUVBa0MsS0FBS3pDLEdBQ0RHLEtBQUtxTCxlQUFpQnhMLENBQzFCLEUsK0RDZEosZ0JBT0lYLFlBQVlvTSxFQUFrQ0MsRUFBeUJoSyxHQUYvRCxLQUFBaUssTUFBdUIsR0FHM0J4TCxLQUFLc0wsZUFBaUJBLEVBQ3RCdEwsS0FBS3VMLGdCQUFrQkEsRUFDdkJ2TCxLQUFLdUIsR0FBS0EsQ0FDZCxDQUVBZixnQkFDSVIsS0FBS3dMLE1BQVEsR0FFYixJQUFLLElBQUl2TCxFQUFJLEVBQUdBLEVBQUlELEtBQUt1TCxnQkFBaUJ0TCxJQUN0Q0QsS0FBS3dMLE1BQU10TCxLQUFLb0ssS0FBS0MsTUFBTUQsS0FBS0UsVUFBWXhLLEtBQUtzTCxlQUFlLEdBQUt0TCxLQUFLc0wsZUFBZSxLQUFPdEwsS0FBS3NMLGVBQWUsR0FFNUgsQ0FFQTVLLFdBQ0ksT0FBT1YsS0FBS3dMLEtBQ2hCLEUsK0RDbEJKLDhCQUNJLEtBQUFySSxLQUFlLE9Ba0JuQixDQWhCSTNCLGVBQWVwQyxFQUFzQkQsR0FDakMsTUFBTXNNLEVBQXFCbkIsS0FBS0MsTUFBTW5MLEVBQU9tQixPQUFTcEIsRUFBVW9CLFFBRWhFYSxRQUFRRSxJQUFJLGNBQWNtSyx3QkFDMUJySyxRQUFRRSxJQUFJLGdDQUFnQ2xDLEVBQU9tQixtQ0FBbUNwQixFQUFVb0IsVUFFaEcsSUFBSyxJQUFJTixFQUFJLEVBQUdBLEVBQUliLEVBQU9tQixPQUFRTixJQUNOLE1BQXJCYixFQUFPYSxHQUFHRyxVQUlkaEIsRUFBT2EsR0FBR0csUUFBbUJqQixFQUFVbUwsS0FBS0MsTUFBTXRLLEVBQUl3TCxJQUk5RCxFLCtEQ2xCSiw4QkFDSSxLQUFBdEksS0FBZSxjQTBCbkIsQ0F4QkkzQixlQUFlcEMsRUFBc0JELEdBQ2pDLE1BQU0yRCxFQUFjM0QsRUFBVXVNLFFBQU8sQ0FBQ0MsRUFBT3ZMLElBQVl1TCxFQUFRdkwsRUFBUW1MLGlCQUFpQixHQUUxRixJQUFJSyxFQUFtQixFQUN2QixJQUFLLElBQUkzTCxFQUFJLEVBQUdBLEVBQUlkLEVBQVVvQixPQUFRTixJQUFLLENBQ3ZDLElBQUk0TCxFQUFxQnZCLEtBQUtDLE1BQU1wTCxFQUFVYyxHQUFHc0wsZ0JBQWtCekksRUFBYzFELEVBQU9tQixTQUFXLEVBRW5HLElBQUssSUFBSXlJLEVBQUksRUFBR0EsRUFBSTZDLEVBQW9CN0MsSUFBSyxDQUN6QyxHQUFJNEMsR0FBb0J4TSxFQUFPbUIsT0FBUSxDQUNuQ2EsUUFBUTBILE1BQU0sdURBQ2QsSyxDQUdvQyxNQUFwQzFKLEVBQU93TSxHQUFrQnhMLFVBSTdCaEIsRUFBT3dNLEdBQWtCeEwsUUFBbUJqQixFQUFVYyxHQUN0RDJMLEksRUFLWixFLDJKQy9CSixrQkFHNEIsb0JBQWJ4SSxXQUNNLElBQUksV0FDWnJELE0sK0RDTGIsZ0JBSUliLGNBSEEsS0FBQTRNLElBQXVDLEtBSW5DOUwsS0FBS2lHLGVBQWlCLElBQzFCLENBRUFsRyxLQUFLZ00sR0FDRCxNQUFNQyxFQUFTNUksU0FBU0MsZUFBZTBJLEdBQ3ZDL0wsS0FBSzhMLElBQU1FLEVBQU9DLFdBQVcsTUFFN0JwRyxPQUFPVCxpQkFBaUIsU0FBVXBGLEtBQUtrTSxZQUFZM0QsS0FBS3ZJLE9BRXhEQSxLQUFLa00sYUFDVCxDQUVBQSxjQUNvQixNQUFabE0sS0FBSzhMLE1BSVQ5TCxLQUFLOEwsSUFBSUUsT0FBT0csTUFBUXRHLE9BQU91RyxXQUMvQnBNLEtBQUs4TCxJQUFJRSxPQUFPSyxPQUFTeEcsT0FBT3lHLFlBRUwsTUFBdkJ0TSxLQUFLaUcsZ0JBQ0xqRyxLQUFLaUcsaUJBRWIsQ0FFQXFELGtCQUFrQmlELEdBQ2R2TSxLQUFLaUcsZUFBaUJzRyxDQUMxQixFLEdDL0JBQyxFQUEyQixDQUFDLEdBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkwsR0FBVXBLLEtBQUt3SyxFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSixHQUdwRUssRUFBT0QsT0FDZixDQ25CMEJKLENBQW9CLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jbGFzc2VzL0FsbG9jYXRpbmdNTVUudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9BbmltYXRpb25HVUkudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9GcmFtZS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL0xSVS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL01lbnUudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9QYWdlLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvUHJvY2Vzcy50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvRXF1YWwudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9hbGdvcml0aG1zL1Byb3BvcnRpb25hbC50cyIsIndlYnBhY2s6Ly8vLi9tYWluLnRzIiwid2VicGFjazovLy8uLi9zaGFyZWQvY2xhc3Nlcy9EaXNwbGF5LnRzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBbGxvY2F0aW9uQWxnb3JpdGhtIGZyb20gXCIuL0FsbG9jYXRpb25BbGdvcml0aG1cIlxuXG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4vRnJhbWVcIlxuaW1wb3J0IFBhZ2UgZnJvbSBcIi4vUGFnZVwiXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi9Qcm9jZXNzXCJcblxuaW1wb3J0IFJlcGxhY2VtZW50QWxnb3JpdGhtIGZyb20gXCIuL1JlcGxhY2VtZW50QWxnb3JpdGhtXCJcbmltcG9ydCBMUlUgZnJvbSBcIi4vTFJVXCJcblxuZXhwb3J0IHR5cGUgTWVtb3J5U3RhdGVEYXRhID0ge1xuICAgIHBhZ2VfY2FsbDogUmVhZG9ubHk8UGFnZT4sXG4gICAgY3VycmVudF9mcmFtZXM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8RnJhbWU+PixcbiAgICBwcmV2aW91c19wYWdlX2NhbGxzOiBSZWFkb25seUFycmF5PFJlYWRvbmx5PFBhZ2U+PixcbiAgICBwcm9jZXNzZXM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8UHJvY2Vzcz4+XG59O1xuXG5leHBvcnQgdHlwZSBSZXN1bHRzID0ge1xuICAgIHRvdGFsX3BhZ2VfZmF1bHRzOiBudW1iZXIsXG4gICAgdG90YWxfcGFnZV9oaXRzOiBudW1iZXIsXG4gICAgdG90YWxfY2FsbHM6IG51bWJlclxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWxsb2NhdGluZ01NVSB7XG4gICAgcHJvY2Vzc2VzOiBBcnJheTxQcm9jZXNzPiA9IFtdXG4gICAgZnJhbWVzOiBBcnJheTxGcmFtZT4gPSBbXVxuXG4gICAgY2FsbF9wb29sOiBBcnJheTxQYWdlPiA9IFtdXG4gICAgY2FsbF9xdWV1ZTogQXJyYXk8UGFnZT4gPSBbXVxuICAgIGNhbGxfaGlzdG9yeTogQXJyYXk8UGFnZT4gPSBbXVxuXG4gICAgbnVtYmVyX29mX2ZyYW1lczogbnVtYmVyID0gMFxuICAgIG51bWJlcl9vZl9wYWdlczogbnVtYmVyID0gMFxuXG4gICAgYWxsb2NhdGlvbkFsZ29yaXRobTogQWxsb2NhdGlvbkFsZ29yaXRobSB8IG51bGwgPSBudWxsXG4gICAgcmVwbGFjZW1lbnRBbGdvcml0aG06IFJlcGxhY2VtZW50QWxnb3JpdGhtID0gbmV3IExSVSgpXG5cbiAgICB0b3RhbF9wYWdlX2ZhdWx0czogbnVtYmVyID0gMFxuICAgIHRpbWU6IG51bWJlciA9IDBcblxuICAgIGxhc3RfY2FsbF9jYXVzZWRfZmF1bHQ6IGJvb2xlYW4gPSBmYWxzZVxuXG4gICAgY29uc3RydWN0b3IoKSB7IH1cblxuICAgIGluaXQobnVtYmVyX29mX3BhZ2VzPzogbnVtYmVyLCBudW1iZXJfb2ZfZnJhbWVzPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMubnVtYmVyX29mX3BhZ2VzID0gbnVtYmVyX29mX3BhZ2VzID8/IHRoaXMubnVtYmVyX29mX3BhZ2VzO1xuICAgICAgICB0aGlzLm51bWJlcl9vZl9mcmFtZXMgPSBudW1iZXJfb2ZfZnJhbWVzID8/IHRoaXMubnVtYmVyX29mX2ZyYW1lcztcblxuICAgICAgICB0aGlzLmNhbGxfcXVldWUgPSBbLi4udGhpcy5jYWxsX3Bvb2xdOyAvLyBjb3B5IGFycmF5XG4gICAgICAgIHRoaXMuZnJhbWVzID0gW107XG4gICAgICAgIHRoaXMuY2FsbF9oaXN0b3J5ID0gW107XG5cbiAgICAgICAgdGhpcy50aW1lID0gMDtcbiAgICAgICAgdGhpcy50b3RhbF9wYWdlX2ZhdWx0cyA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bWJlcl9vZl9mcmFtZXM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5mcmFtZXMucHVzaChuZXcgRnJhbWUoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRQcm9jZXNzKHByb2Nlc3M6IFByb2Nlc3MpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzZXMucHVzaChwcm9jZXNzKTtcbiAgICB9XG5cbiAgICBjbGVhclByb2Nlc3NlcygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzZXMgPSBbXTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZVBhZ2VDYWxsUG9vbCgpOiB2b2lkIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnByb2Nlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzZXNbaV0uZ2VuZXJhdGVDYWxscygpO1xuICAgICAgICAgICAgdGhpcy5hZGRQYWdlQ2FsbHNUb1Bvb2wodGhpcy5wcm9jZXNzZXNbaV0uZ2V0Q2FsbHMoKSwgdGhpcy5wcm9jZXNzZXNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRQYWdlQ2FsbFRvUG9vbChwYWdlX2NhbGw6IFBhZ2UpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jYWxsX3Bvb2wucHVzaChwYWdlX2NhbGwpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkUGFnZUNhbGxzVG9Qb29sKHBhZ2VfY2FsbHM6IEFycmF5PG51bWJlcj4sIHByb2Nlc3M6IFByb2Nlc3MpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlX2NhbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFBhZ2VDYWxsVG9Qb29sKG5ldyBQYWdlKHBhZ2VfY2FsbHNbaV0sIHByb2Nlc3MpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFyUGFnZUNhbGxQb29sKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNhbGxfcG9vbCA9IFtdO1xuICAgIH1cblxuICAgIHNldEFsZ29yaXRobShhbGdvcml0aG06IEFsbG9jYXRpb25BbGdvcml0aG0pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hbGxvY2F0aW9uQWxnb3JpdGhtID0gYWxnb3JpdGhtO1xuICAgIH1cblxuICAgIG5leHRUaWNrKCk6IHZvaWQge1xuICAgICAgICAvKiBlbnN1cmUgdGhhdCBhbiBhbGdvcml0aG0gaXMgc2VsZWN0ZWQgKi9cbiAgICAgICAgaWYgKHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhbGdvcml0aG0gc2VsZWN0ZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYWdlX2NhbGwgPSB0aGlzLmNhbGxfcXVldWUuc2hpZnQoKTtcblxuICAgICAgICAvKiBubyBwYWdlIGNhbGwgYXQgdGhpcyB0aW1lICovXG4gICAgICAgIGlmIChwYWdlX2NhbGwgPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRW1wdHkgcGFnZSBjYWxsIHF1ZXVlIGJ1dCBub3QgZmluaXNoZWRcIik7XG4gICAgICAgICAgICB0aGlzLnRpbWUrKztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbF9oaXN0b3J5LnB1c2gocGFnZV9jYWxsKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJQYWdlIGNhbGw6IFwiICsgcGFnZV9jYWxsLmlkKTtcblxuICAgICAgICBpZiAocGFnZV9jYWxsKSB7XG4gICAgICAgICAgICAvKiBhbGxvY2F0ZSBmcmFtZXMgdG8gcHJvY2Vzc2VzICovXG4gICAgICAgICAgICB0aGlzLmFsbG9jYXRpb25BbGdvcml0aG0uYWxsb2NhdGVGcmFtZXM/Lih0aGlzLmZyYW1lcywgdGhpcy5wcm9jZXNzZXMpO1xuXG4gICAgICAgICAgICBjb25zdCB1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aCA9IHRoaXMuZnJhbWVzLmZpbHRlcihmcmFtZSA9PiBmcmFtZS5wcm9jZXNzID09IG51bGwpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYE5vdCBhbGwgZnJhbWVzIGFyZSBhbGxvY2F0ZWRcXG5BbGxvY2F0ZWQ6ICR7dGhpcy5mcmFtZXMubGVuZ3RoIC0gdW5hbGxvY2F0ZWRGcmFtZXNMZW5ndGh9XFxuVW5hbGxvY2F0ZWQ6ICR7dW5hbGxvY2F0ZWRGcmFtZXNMZW5ndGh9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIGV4ZWN1dGUgcmVwbGFjZW1lbnQgYWxnb3JpdGhtICovXG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VtZW50QWxnb3JpdGhtLm9uUGFnZUNhbGw/Lih0aGlzLmdldEN1cnJlbnRTdGF0ZURhdGEocGFnZV9jYWxsKSk7XG5cbiAgICAgICAgICAgIC8qIGNoZWNrIGlmIHRoZXJlIGlzIGEgcGFnZSBmYXVsdCAqL1xuICAgICAgICAgICAgbGV0IHBhZ2VfZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZyYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lc1tpXSA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGcmFtZSBpcyBudWxsXCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJhbWVzW2ldLnBhZ2UgPT0gbnVsbCAmJiB0aGlzLmZyYW1lc1tpXS5wcm9jZXNzID09IHBhZ2VfY2FsbC5wcm9jZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIGluc2VydCBpbnRvIHRoZSBmaXJzdCBmcmVlIGZyYW1lIGFzc2lnbmVkIHRvIHRoZSBwcm9jZXNzICovXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVzW2ldLnBhZ2UgPSBwYWdlX2NhbGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyogaW5jcmVtZW50IHRoZSB0b3RhbCBwYWdlIGZhdWx0cyAqL1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VfZmF1bHRzKys7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFnZV9mYXVsdCA9IGZhbHNlOyAvLyBwYWdlIGZhdWx0IGFscmVhZHkgaGFuZGxlZFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0ucGFnZSAhPSBudWxsICYmIHRoaXMuZnJhbWVzW2ldLnBhZ2UhLmlkID09IHBhZ2VfY2FsbC5pZCkge1xuICAgICAgICAgICAgICAgICAgICAvKiBwYWdlIGlzIGFscmVhZHkgaW4gbWVtb3J5ICovXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZW1lbnRBbGdvcml0aG0ub25QYWdlQWxyZWFkeUluTWVtb3J5Py4odGhpcy5nZXRDdXJyZW50U3RhdGVEYXRhKHBhZ2VfY2FsbCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBwYWdlX2ZhdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogaGFuZGxlIHBhZ2UgZmF1bHQgKi9cbiAgICAgICAgICAgIGlmIChwYWdlX2ZhdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYWdlIGZhdWx0OiBcIiArIHBhZ2VfY2FsbC5pZCk7XG5cbiAgICAgICAgICAgICAgICAvKiBlbnN1cmUgdGhhdCB0aGVyZSBhcmUgbm8gZnJlZSBmcmFtZXMgYXNzaWduZWQgdG8gdGhlIHByb2Nlc3MgKi9cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXMuZmluZChmcmFtZSA9PiBmcmFtZS5wcm9jZXNzID09IHBhZ2VfY2FsbC5wcm9jZXNzICYmIGZyYW1lLnBhZ2UgPT0gbnVsbCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbml0aWFsIHBhZ2UgZmlsbCBub3QgaGFuZGxlZCBwcm9wZXJseVwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKiBpbmNyZW1lbnQgdGhlIHRvdGFsIHBhZ2UgZmF1bHRzICovXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlX2ZhdWx0cysrO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAvKiByZXBsYWNlIGEgcGFnZSAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkX29mX2ZyYW1lX3RvX3JlcGxhY2UgPSB0aGlzLnJlcGxhY2VtZW50QWxnb3JpdGhtLmhhbmRsZVBhZ2VGYXVsdCh0aGlzLmdldEN1cnJlbnRTdGF0ZURhdGEocGFnZV9jYWxsKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZXNbdGhpcy5nZXRGcmFtZUluZGV4QnlJZChpZF9vZl9mcmFtZV90b19yZXBsYWNlKV0ucGFnZSA9IHBhZ2VfY2FsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogZW5zdXJlIHRoYXQgdGhlIHBhZ2UgaXMgbm93IGluIG1lbW9yeSAqL1xuICAgICAgICAgICAgbGV0IHBhZ2VfaW5fbWVtb3J5ID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZyYW1lIG9mIHRoaXMuZnJhbWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lLnBhZ2UgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBpZiAoKDxQYWdlPmZyYW1lLnBhZ2UpLmlkID09IHBhZ2VfY2FsbC5pZCkge1xuICAgICAgICAgICAgICAgICAgICAvKiBwYWdlIGlzIGluIG1lbW9yeSAqL1xuICAgICAgICAgICAgICAgICAgICBwYWdlX2luX21lbW9yeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcGFnZV9pbl9tZW1vcnkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYWdlIGZhdWx0IG5vdCBoYW5kbGVkIHByb3Blcmx5IC0gcGFnZSBub3QgaW4gbWVtb3J5XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBjYWxsIHRoZSBwYWdlICovXG4gICAgICAgICAgICBwYWdlX2NhbGwuY2FsbCh0aGlzLnRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50aW1lKys7XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGw6IFBhZ2UpOiBNZW1vcnlTdGF0ZURhdGEge1xuICAgICAgICAvKiBnZXQgdGhlIHN0YXRlIG9mIHRoZSBtZW1vcnkgYXNzaWduZWQgdG8gdGhlIHByb2Nlc3MgKi9cbiAgICAgICAgY29uc3QgcHJvY2Vzc19mcmFtZXMgPSB0aGlzLmZyYW1lcy5maWx0ZXIoZnJhbWUgPT4gZnJhbWUucHJvY2VzcyA9PSBwYWdlX2NhbGwucHJvY2Vzcyk7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NfY2FsbF9oaXN0b3J5ID0gdGhpcy5jYWxsX2hpc3RvcnkuZmlsdGVyKGNhbGwgPT4gY2FsbC5wcm9jZXNzID09IHBhZ2VfY2FsbC5wcm9jZXNzKTtcblxuICAgICAgICBjb25zdCBkYXRhOiBNZW1vcnlTdGF0ZURhdGEgPSB7XG4gICAgICAgICAgICBwYWdlX2NhbGw6IHBhZ2VfY2FsbCxcbiAgICAgICAgICAgIGN1cnJlbnRfZnJhbWVzOiBwcm9jZXNzX2ZyYW1lcyxcbiAgICAgICAgICAgIHByZXZpb3VzX3BhZ2VfY2FsbHM6IHByb2Nlc3NfY2FsbF9oaXN0b3J5LFxuICAgICAgICAgICAgcHJvY2Vzc2VzOiB0aGlzLnByb2Nlc3Nlc1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxfcXVldWUubGVuZ3RoID09IDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRGcmFtZUluZGV4QnlJZChpZDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZyYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZnJhbWVzW2ldLmlkID09IGlkKVxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIGdldFJlc3VsdHMoKTogUmVzdWx0cyB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB7XG4gICAgICAgICAgICB0b3RhbF9wYWdlX2ZhdWx0czogdGhpcy50b3RhbF9wYWdlX2ZhdWx0cyxcbiAgICAgICAgICAgIHRvdGFsX3BhZ2VfaGl0czogdGhpcy5jYWxsX2hpc3RvcnkubGVuZ3RoIC0gdGhpcy50b3RhbF9wYWdlX2ZhdWx0cyxcbiAgICAgICAgICAgIHRvdGFsX2NhbGxzOiB0aGlzLmNhbGxfaGlzdG9yeS5sZW5ndGhcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIHNpbXVsYXRlKCk6IFJlc3VsdHMge1xuICAgICAgICB0aGlzLmluaXQoKTtcblxuICAgICAgICB3aGlsZSAoIXRoaXMuaXNGaW5pc2hlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRUaWNrKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXN1bHRzKCk7XG4gICAgfVxuXG4gICAgZGlzcGxheVJlc3VsdHMocmVzdWx0cz86IFJlc3VsdHMsIGFsZ1N0cjogc3RyaW5nID0gdGhpcy5hbGxvY2F0aW9uQWxnb3JpdGhtIS5uYW1lKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHNfd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c193cmFwcGVyXCIpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICByZXN1bHRzX3dyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdHNfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNcIikgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHJlc3VsdHNfZWwuaW5uZXJIVE1MID0gYFxuICAgICAgICBBbGdvcml0aG06ICR7YWxnU3RyLnRvVXBwZXJDYXNlKCl9XG5cbiAgICAgICAgVG90YWwgcGFnZSBmYXVsdHM6IDxiIHN0eWxlPSdjb2xvcjogcmVkJz4ke3Jlc3VsdHMhLnRvdGFsX3BhZ2VfZmF1bHRzLnRvRml4ZWQoMCl9PC9iPlxuICAgICAgICBUb3RhbCBwYWdlIGhpdHM6IDxiIHN0eWxlPSdjb2xvcjogbGltZSc+JHtyZXN1bHRzIS50b3RhbF9wYWdlX2hpdHMudG9GaXhlZCgwKX08L2I+XG4gICAgICAgIFRvdGFsIHBhZ2UgY2FsbHM6IDxiPiR7cmVzdWx0cyEudG90YWxfY2FsbHMudG9GaXhlZCgwKX08L2I+XG4gICAgICAgIGAucmVwbGFjZShSZWdFeHAoXCJcXG5cIiwgXCJnXCIpLCBcIjxiciAvPlwiKTtcbiAgICB9XG5cbiAgICBjb21wYXJlQWxsQW5kRGlzcGxheVJlc3VsdHMoYWxnb3JpdGhtczogQXJyYXk8QWxsb2NhdGlvbkFsZ29yaXRobT4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcmVzdWx0c193cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzX3dyYXBwZXJcIikgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHJlc3VsdHNfd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0c19lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c1wiKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgcmVzdWx0c19lbC5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxnb3JpdGhtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5zZXRBbGdvcml0aG0oYWxnb3JpdGhtc1tpXSk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzOiBSZXN1bHRzID0gdGhpcy5zaW11bGF0ZSgpO1xuXG4gICAgICAgICAgICByZXN1bHRzX2VsLmlubmVySFRNTCArPSBgXG4gICAgICAgICAgICBBbGdvcml0aG06ICR7YWxnb3JpdGhtc1tpXS5uYW1lLnRvVXBwZXJDYXNlKCl9XG4gICAgICAgICAgICBUb3RhbCBwYWdlIGZhdWx0czogPGIgc3R5bGU9J2NvbG9yOiByZWQnPiR7cmVzdWx0cy50b3RhbF9wYWdlX2ZhdWx0cy50b0ZpeGVkKDApfTwvYj5cbiAgICAgICAgICAgIFRvdGFsIHBhZ2UgaGl0czogPGIgc3R5bGU9J2NvbG9yOiBsaW1lJz4ke3Jlc3VsdHMudG90YWxfcGFnZV9oaXRzLnRvRml4ZWQoMCl9PC9iPlxuICAgICAgICAgICAgVG90YWwgcGFnZSBjYWxsczogPGI+JHtyZXN1bHRzLnRvdGFsX2NhbGxzLnRvRml4ZWQoMCl9PC9iPlxuICAgICAgICAgICAgYC5yZXBsYWNlKFJlZ0V4cChcIlxcblwiLCBcImdcIiksIFwiPGJyIC8+XCIpO1xuXG4gICAgICAgICAgICByZXN1bHRzX2VsLmlubmVySFRNTCArPSBcIjxiciAvPlwiO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBJQW5pbWF0aW9uR1VJIGZyb20gXCIuLi8uLi9zaGFyZWQvaW50ZXJmYWNlcy9JQW5pbWF0aW9uR1VJXCI7XHJcbmltcG9ydCBNZW51IGZyb20gXCIuL01lbnVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFuaW1hdGlvbkdVSSBpbXBsZW1lbnRzIElBbmltYXRpb25HVUkge1xyXG4gICAgbWVudTogTWVudVxyXG5cclxuICAgIHZpc2libGU6IGJvb2xlYW4gPSBmYWxzZVxyXG4gICAgcGxheWluZzogYm9vbGVhbiA9IGZhbHNlXHJcbiAgICBzcGVlZDogbnVtYmVyID0gMVxyXG5cclxuICAgIEdVSTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgTUVOVTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIHBsYXlfcGF1c2VfYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBzdGVwX2J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgc3RvcF9idXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIHNwZWVkX3NsaWRlcjogSFRNTElucHV0RWxlbWVudCB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgaW5mb19hbGdvcml0aG06IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9fdGltZTogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgaW5mb19pc19kb25lOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgaW5mb19pbl9xdWV1ZTogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgaW5mb19maW5pc2hlZDogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgaW5mb190b3RhbF9wYWdlX2ZhdWx0czogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgaW5mb190b3RhbF9wYWdlX2hpdHM6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBmcmFtZV9yb3dzOiBBcnJheTxIVE1MVGFibGVSb3dFbGVtZW50PiA9IFtdXHJcblxyXG4gICAgc2VlX2NvZGVfYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgLyogc2V0SW50ZXJ2YWwgKi9cclxuICAgIHN0b3JlZFNldEludGVydmFsOiBOb2RlSlMuVGltZXIgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1lbnU6IE1lbnUpIHtcclxuICAgICAgICB0aGlzLm1lbnUgPSBtZW51O1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5HVUkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9ndWlcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5NRU5VID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR0aW5nc1wiKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3BsYXlfcGF1c2VcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5zdGVwX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3N0ZXBcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5zdG9wX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3N0b3BcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5zcGVlZF9zbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9zcGVlZF9zbGlkZXJcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2FsZ29yaXRobSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2luZm9fYWxnb3JpdGhtX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW5mb190aW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25faW5mb190aW1lX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW5mb19pc19kb25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25faXNfZG9uZVwiKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2luX3F1ZXVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYWxsc19pbl9xdWV1ZV92YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICB0aGlzLmluZm9fZmluaXNoZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGxzX2ZpbmlzaGVkX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW5mb190b3RhbF9wYWdlX2ZhdWx0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxfcGFnZV9mYXVsdHNfdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5pbmZvX3RvdGFsX3BhZ2VfaGl0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxfcGFnZV9oaXRzX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG5cclxuICAgICAgICB0aGlzLnNlZV9jb2RlX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29kZV9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGhpZGUgZWxlbWVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluZm9faXNfZG9uZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogQmluZCBldmVudCBsaXN0ZW5lcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheWluZygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN0ZXBfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RlcCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3BfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3BlZWRfc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlZWQgPSBwYXJzZUludCh0aGlzLnNwZWVkX3NsaWRlciEudmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hTcGVlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNlZV9jb2RlX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tZW51Lm1lbW9yeS5hbGxvY2F0aW9uQWxnb3JpdGhtID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbGdvcml0aG1OYW1lID0gdGhpcy5tZW51Lm1lbW9yeS5hbGxvY2F0aW9uQWxnb3JpdGhtLm5hbWU7XHJcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGBodHRwczovL2dpdGh1Yi5jb20vYnJ1bjBuZS9zY2hlZHVsaW5nLXNpbS9ibG9iL21haW4vcGFnZV9yZXBsYWNlbWVudF9zcmMvY2xhc3Nlcy9hbGdvcml0aG1zLyR7YWxnb3JpdGhtTmFtZX0udHNgLCBcIl9ibGFua1wiKSEuZm9jdXMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0SW50ZXJ2YWxcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJlZnJlc2hTcGVlZCgpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwcmVwYXJlIEhUTUwgdGFibGUgb2Ygc3RhdGVzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbml0U3RhdGVUYWJsZSgpO1xyXG4gICAgfVxyXG4gICAgdG9nZ2xlUGxheWluZyhwbGF5aW5nPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmIChwbGF5aW5nID09IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMucGxheWluZyA9ICF0aGlzLnBsYXlpbmc7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnBsYXlpbmcgPSBwbGF5aW5nO1xyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hTcGVlZCgpO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uIS5pbm5lckhUTUwgPSB0aGlzLnBsYXlpbmcgPyBcIlBhdXNlXCIgOiBcIlBsYXlcIjtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVWaXNpYmxlKHZpc2libGU/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHZpc2libGUgPT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gIXRoaXMudmlzaWJsZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5HVUkhLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIHRoaXMuTUVOVSEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW51LmRpc3BsYXkucmVzaXplQ2FsbGJhY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdDdXJyZW50U3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRyYXdDdXJyZW50U3RhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuR1VJIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIHRoaXMuTUVOVSEuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcmVkU2V0SW50ZXJ2YWwgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zdG9yZWRTZXRJbnRlcnZhbCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbnUuZGlzcGxheS5yZXNpemVDYWxsYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVudS5yZWZyZXNoQ2FsbHMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1lbnUucmVmcmVzaENhbGxzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnBsYXlfcGF1c2VfYnV0dG9uID09IG51bGwgfHwgdGhpcy5pbmZvX2lzX2RvbmUgPT0gbnVsbCB8fCB0aGlzLnN0ZXBfYnV0dG9uID09IG51bGwpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbGwgaW5pdCgpIGZpcnN0IVwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5tZW51Lm1lbW9yeS5pbml0KCk7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24uaW5uZXJIVE1MID0gXCJQbGF5XCI7XHJcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19pc19kb25lLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3RlcF9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0U3RhdGVUYWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0QW5pbWF0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0N1cnJlbnRTdGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiByZWZyZXNoIGluZm9cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJlZnJlc2hJbmZvKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd0NhbGxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFN0YXRlVGFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgLyogZ3JhYiBlbGVtZW50cyAqL1xyXG4gICAgICAgIGNvbnN0IHRpbWVfcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfdGltZVwiKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGNhbGxzX3JvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX3BhZ2VfY2FsbHNcIikgYXMgSFRNTFRhYmxlUm93RWxlbWVudDtcclxuICAgICAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX2JvZHlcIikgYXMgSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIC8qIGNsZWFyIHRhYmxlICovXHJcbiAgICAgICAgdGltZV9yb3cuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBjYWxsc19yb3cuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgLyogdGltZSAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZV9yb3dfaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICB0aW1lX3Jvd19oZWFkZXIuaW5uZXJIVE1MID0gXCJUaW1lXCI7XHJcbiAgICAgICAgICAgIHRpbWVfcm93X2hlYWRlci5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyXCIpO1xyXG4gICAgICAgICAgICB0aW1lX3Jvdy5hcHBlbmRDaGlsZCh0aW1lX3Jvd19oZWFkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogY2FsbHMgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGxzX3Jvd19oZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgIGNhbGxzX3Jvd19oZWFkZXIuaW5uZXJIVE1MID0gXCJQYWdlIGNhbGxzXCI7XHJcbiAgICAgICAgICAgIGNhbGxzX3Jvd19oZWFkZXIuY2xhc3NMaXN0LmFkZChcImhlYWRlclwiKTtcclxuICAgICAgICAgICAgY2FsbHNfcm93LmFwcGVuZENoaWxkKGNhbGxzX3Jvd19oZWFkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogZnJhbWVzICovXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvKiByZW1vdmUgb2xkIHJvd3MgKi9cclxuICAgICAgICAgICAgd2hpbGUgKHRib2R5Lmxhc3RDaGlsZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9ICh0Ym9keS5sYXN0Q2hpbGQgYXMgSFRNTEVsZW1lbnQpLmlkO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkID09IFwiYW5pbWF0aW9uX3RhYmxlX3BhZ2VfY2FsbHNcIikgLy8gc2tpcCB0aGUgcm93IHdpdGggcGFnZSBjYWxsc1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHRib2R5LnJlbW92ZUNoaWxkKHRib2R5Lmxhc3RDaGlsZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIGFkZCBhIHJvdyBmb3IgZWFjaCBmcmFtZSAqL1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZV9yb3dzOiBBcnJheTxIVE1MVGFibGVSb3dFbGVtZW50PiA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVudS5tZW1vcnkubnVtYmVyX29mX2ZyYW1lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFtZV9yb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJhbWVfcm93X2hlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgICAgIGZyYW1lX3Jvd19oZWFkZXIuaW5uZXJIVE1MID0gYEZyYW1lICR7aX1gO1xyXG4gICAgICAgICAgICAgICAgZnJhbWVfcm93LmFwcGVuZENoaWxkKGZyYW1lX3Jvd19oZWFkZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZyYW1lX3Jvd3MucHVzaChmcmFtZV9yb3cpO1xyXG4gICAgICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoZnJhbWVfcm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmZyYW1lX3Jvd3MgPSBmcmFtZV9yb3dzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3Q2FsbHMoU1RBUlRfWD86IG51bWJlciwgU1RBUlRfWT86IG51bWJlciwgV0lEVEg/OiBudW1iZXIsIEhFSUdIVD86IG51bWJlciwgY2FsbHNUb0RyYXc/OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvKiBncmFiIGVsZW1lbnRzICovXHJcbiAgICAgICAgY29uc3QgdGltZV9yb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl90YWJsZV90aW1lXCIpIGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgY2FsbHNfcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfcGFnZV9jYWxsc1wiKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50O1xyXG5cclxuICAgICAgICAvKiBvbmx5IGFkZCBvbmUgY29sdW1uIGZvciB0aGUgbmV3IHN0YXRlICovXHJcbiAgICAgICAgY29uc3QgbmV3Q2FsbCA9IHRoaXMubWVudS5tZW1vcnkuY2FsbF9oaXN0b3J5LmF0KC0xKTtcclxuICAgICAgICBpZiAobmV3Q2FsbCA9PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIC8qIHRpbWUgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVUaWNrRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgIHRpbWVUaWNrRWwuaW5uZXJIVE1MID0gYCR7dGhpcy5tZW51Lm1lbW9yeS50aW1lfWA7XHJcbiAgICAgICAgICAgIHRpbWVfcm93LmFwcGVuZENoaWxkKHRpbWVUaWNrRWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogY2FsbHMgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGxzVGlja0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICBjYWxsc1RpY2tFbC5pbm5lckhUTUwgPSBgJHtuZXdDYWxsLmlkfWA7XHJcblxyXG4gICAgICAgICAgICBjYWxsc19yb3cuYXBwZW5kQ2hpbGQoY2FsbHNUaWNrRWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogZnJhbWVzICovXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVudS5tZW1vcnkubnVtYmVyX29mX2ZyYW1lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFtZV9yb3cgPSB0aGlzLmZyYW1lX3Jvd3NbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYWdlID0gdGhpcy5tZW51Lm1lbW9yeS5mcmFtZXNbaV0ucGFnZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFtZVRpY2tFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgICAgIGZyYW1lVGlja0VsLmlubmVySFRNTCA9IGAke3BhZ2UgIT0gbnVsbCA/IHBhZ2UuaWQgOiBcIlwifWA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBhZ2UgIT0gbnVsbCAmJiBwYWdlLmlkID09IG5ld0NhbGwuaWQgJiYgdGhpcy5tZW51Lm1lbW9yeS5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBwYWdlIGZhdWx0cyByZWRcclxuICAgICAgICAgICAgICAgICAgICBmcmFtZVRpY2tFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lbnUubWVtb3J5LmZyYW1lc1tpXS5wcm9jZXNzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBmcmFtZVRpY2tFbC5pbm5lckhUTUwgKz0gYCA8c3BhbiBzdHlsZT0nY29sb3I6IHllbGxvdyc+KCR7dGhpcy5tZW51Lm1lbW9yeS5mcmFtZXNbaV0ucHJvY2VzcyEuaWR9KTwvc3Bhbj5gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZyYW1lX3Jvdy5hcHBlbmRDaGlsZChmcmFtZVRpY2tFbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIHNjcm9sbCB0byB0aGUgcmlnaHQgKi9cclxuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2NhbGxfdGFibGVcIikgYXMgSFRNTFRhYmxlRWxlbWVudDtcclxuICAgICAgICB0YWJsZS5zY3JvbGxMZWZ0ID0gdGFibGUuc2Nyb2xsV2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgcmVmcmVzaEluZm8oKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbWVtb3J5ID0gdGhpcy5tZW51Lm1lbW9yeTtcclxuICAgICAgICBpZiAobWVtb3J5LmFsbG9jYXRpb25BbGdvcml0aG0gPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FsbCBzdGFydEFuaW1hdGlvbigpIGZpcnN0IVwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2FsZ29yaXRobSEuaW5uZXJIVE1MID0gbWVtb3J5LmFsbG9jYXRpb25BbGdvcml0aG0ubmFtZTtcclxuICAgICAgICB0aGlzLmluZm9fdGltZSEuaW5uZXJIVE1MID0gbWVtb3J5LnRpbWUudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgaWYgKG1lbW9yeS5pc0ZpbmlzaGVkKCkpXHJcbiAgICAgICAgICAgIHRoaXMuaW5mb19pc19kb25lIS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX3RvdGFsX3BhZ2VfaGl0cyEuaW5uZXJIVE1MID0gKG1lbW9yeS5jYWxsX2hpc3RvcnkubGVuZ3RoIC0gbWVtb3J5LnRvdGFsX3BhZ2VfZmF1bHRzKS50b1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuaW5mb190b3RhbF9wYWdlX2ZhdWx0cyEuaW5uZXJIVE1MID0gbWVtb3J5LnRvdGFsX3BhZ2VfZmF1bHRzLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19pbl9xdWV1ZSEuaW5uZXJIVE1MID0gbWVtb3J5LmNhbGxfcXVldWUubGVuZ3RoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5pbmZvX2ZpbmlzaGVkIS5pbm5lckhUTUwgPSBtZW1vcnkuY2FsbF9oaXN0b3J5Lmxlbmd0aC50b1N0cmluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hTcGVlZCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zdG9yZWRTZXRJbnRlcnZhbCAhPSBudWxsKVxyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc3RvcmVkU2V0SW50ZXJ2YWwpO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3JlZFNldEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5iaW5kKHRoaXMpLCAxMDAwIC8gdGhpcy5zcGVlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RlcCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tZW51Lm1lbW9yeS5pc0ZpbmlzaGVkKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5tZW51Lm1lbW9yeS5uZXh0VGljaygpO1xyXG4gICAgICAgIHRoaXMuZHJhd0N1cnJlbnRTdGF0ZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tZW51Lm1lbW9yeS5pc0ZpbmlzaGVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5aW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5tZW51Lm1lbW9yeS5kaXNwbGF5UmVzdWx0cyh0aGlzLm1lbnUubWVtb3J5LmdldFJlc3VsdHMoKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFmdGVyRG9uZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZnRlckRvbmUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5mb19pc19kb25lID09IG51bGwgfHwgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbiA9PSBudWxsIHx8IHRoaXMuc3RlcF9idXR0b24gPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FsbCBpbml0KCkgZmlyc3QhXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmluZm9faXNfZG9uZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnN0ZXBfYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH1cclxufSIsImltcG9ydCBQYWdlIGZyb20gXCIuL1BhZ2VcIjtcbmltcG9ydCBQcm9jZXNzIGZyb20gXCIuL1Byb2Nlc3NcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJhbWUge1xuICAgIHN0YXRpYyBuZXh0X2lkOiBudW1iZXIgPSAwXG5cbiAgICBpZDogbnVtYmVyXG4gICAgcGFnZTogUGFnZSB8IG51bGxcbiAgICBwcm9jZXNzOiBQcm9jZXNzIHwgbnVsbFxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucGFnZSA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvY2VzcyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5pZCA9IEZyYW1lLm5leHRfaWQrKztcbiAgICB9XG59IiwiaW1wb3J0IFJlcGxhY2VtZW50QWxnb3JpdGhtIGZyb20gXCIuL1JlcGxhY2VtZW50QWxnb3JpdGhtXCI7XG5pbXBvcnQgeyBNZW1vcnlTdGF0ZURhdGEgfSBmcm9tIFwiLi9BbGxvY2F0aW5nTU1VXCI7XG5cbi8qKlxuICogTGVhc3QgUmVjZW50bHkgVXNlZCAoTFJVKVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMUlUgaW1wbGVtZW50cyBSZXBsYWNlbWVudEFsZ29yaXRobSB7XG4gICAgbmFtZTogc3RyaW5nID0gXCJMUlVcIlxuXG4gICAgaGFuZGxlUGFnZUZhdWx0KGRhdGE6IE1lbW9yeVN0YXRlRGF0YSk6IG51bWJlciB7XG4gICAgICAgIC8qIGZpbmQgdGhlIHBhZ2UgdGhhdCB3YXMgdXNlZCB0aGUgbG9uZ2VzdCBhZ28gKi9cbiAgICAgICAgbGV0IGZyYW1lX3RvX3JlcGxhY2VfaW5kZXggPSAtMTtcbiAgICAgICAgbGV0IGxlYXN0X3JlY2VudGx5X3VzZWRfcGFnZV9pbmRleCA9IC0xO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jdXJyZW50X2ZyYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZnJhbWUgPSBkYXRhLmN1cnJlbnRfZnJhbWVzW2ldO1xuXG4gICAgICAgICAgICBpZiAoZnJhbWUucHJvY2VzcyAhPSBkYXRhLnBhZ2VfY2FsbC5wcm9jZXNzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZyYW1lIGlzIGFzc2lnbmVkIHRvIGEgZGlmZmVyZW50IHByb2Nlc3MgLSB0aGlzIHNob3VsZCBiZSBlbnN1cmVkIG5vdCB0byBoYXBwZW4gYnkgdGhlIGNhbGxlclwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZyYW1lLnBhZ2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZyYW1lIGlzIGVtcHR5IC0gdGhpcyBzaG91bGQgYmUgZW5zdXJlZCBub3QgdG8gaGFwcGVuIGJ5IHRoZSBjYWxsZXJcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwYWdlX2luZGV4ID0gLTE7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gZGF0YS5wcmV2aW91c19wYWdlX2NhbGxzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNfcGFnZV9jYWxsID0gZGF0YS5wcmV2aW91c19wYWdlX2NhbGxzW2pdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzX3BhZ2VfY2FsbC5pZCA9PSBmcmFtZS5wYWdlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VfaW5kZXggPSBqO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYWdlX2luZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgLyogcGFnZSB3YXMgbmV2ZXIgdXNlZCBiZWZvcmUgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhZ2VfaW5kZXggPCBsZWFzdF9yZWNlbnRseV91c2VkX3BhZ2VfaW5kZXggfHwgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgLyogcGFnZSB3YXMgdXNlZCBsb25nZXIgYWdvICovXG4gICAgICAgICAgICAgICAgZnJhbWVfdG9fcmVwbGFjZV9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID0gcGFnZV9pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhLmN1cnJlbnRfZnJhbWVzW2ZyYW1lX3RvX3JlcGxhY2VfaW5kZXhdLmlkO1xuICAgIH1cbn1cbiIsImltcG9ydCBJTWVudSBmcm9tIFwiLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvSU1lbnVcIjtcbmltcG9ydCBEaXNwbGF5IGZyb20gXCIuLi8uLi9zaGFyZWQvY2xhc3Nlcy9EaXNwbGF5XCI7XG5pbXBvcnQgQWxsb2NhdGluZ01NVSBmcm9tIFwiLi9BbGxvY2F0aW5nTU1VXCI7XG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi9Qcm9jZXNzXCI7XG5pbXBvcnQgUGFnZSBmcm9tIFwiLi9QYWdlXCI7XG5pbXBvcnQgRXF1YWwgZnJvbSBcIi4vYWxnb3JpdGhtcy9FcXVhbFwiO1xuaW1wb3J0IEFuaW1hdGlvbkdVSSBmcm9tIFwiLi9BbmltYXRpb25HVUlcIjtcbmltcG9ydCBQcm9wb3J0aW9uYWwgZnJvbSBcIi4vYWxnb3JpdGhtcy9Qcm9wb3J0aW9uYWxcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVudSBpbXBsZW1lbnRzIElNZW51IHtcbiAgICBkaXNwbGF5OiBEaXNwbGF5XG4gICAgbWVtb3J5OiBBbGxvY2F0aW5nTU1VXG4gICAgYW5pbWF0aW9uR1VJOiBBbmltYXRpb25HVUlcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheSgpO1xuICAgICAgICB0aGlzLm1lbW9yeSA9IG5ldyBBbGxvY2F0aW5nTU1VKCk7XG5cbiAgICAgICAgdGhpcy5hbmltYXRpb25HVUkgPSBuZXcgQW5pbWF0aW9uR1VJKHRoaXMpO1xuICAgIH1cblxuICAgIGluaXQoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHJ1bl9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJ1bl9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIHJ1bl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5ydW4oKSB9KTtcblxuICAgICAgICBjb25zdCBydW5fd2l0aF9hbmltYXRpb25fYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJydW5fd2l0aF9hbmltYXRpb25fYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBydW5fd2l0aF9hbmltYXRpb25fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMucnVuKHRydWUpIH0pO1xuXG4gICAgICAgIGNvbnN0IGFkZF9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZF9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIGFkZF9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5hZGRQcm9jZXNzZXMoKSB9KTtcblxuICAgICAgICBjb25zdCBjbGVhcl9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsZWFyX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgY2xlYXJfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuY2xlYXJQcm9jZXNzZXMoKSB9KTtcblxuICAgICAgICBjb25zdCBnZW5lcmF0ZV9jYWxsX3F1ZXVlX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuYWRkQ2FsbHMoKSB9KTtcblxuICAgICAgICBjb25zdCBjbGVhcl9jYWxsX3F1ZXVlX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xlYXJfY2FsbF9xdWV1ZV9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIGNsZWFyX2NhbGxfcXVldWVfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuY2xlYXJDYWxscygpIH0pO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIGluaXQgXG4gICAgICAgICAqIHNldCBjYWxsYmFjayBmb3IgcmVzaXplXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1lbW9yeS5pbml0KDUsIDMpO1xuICAgICAgICB0aGlzLmRpc3BsYXkuaW5pdChcIm1haW5fY2FudmFzXCIpO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkdVSS5pbml0KCk7XG4gICAgICAgIHRoaXMuZGlzcGxheS5zZXRSZXNpemVDYWxsYmFjaygoKSA9PiB7IHRoaXMucmVmcmVzaENhbGxzKCkgfSk7XG5cbiAgICAgICAgLyoqIFxuICAgICAgICAgKiBiYXNpYyBzZXR0aW5nc1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgbnVtYmVyX29mX2ZyYW1lcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19mcmFtZV9jb3VudFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBudW1iZXJfb2ZfZnJhbWVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdfdmFsID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmUudGFyZ2V0KS52YWx1ZSk7XG5cbiAgICAgICAgICAgIGlmIChpc05hTihuZXdfdmFsKSB8fCBuZXdfdmFsIDwgMSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiSW52YWxpZCBudW1iZXIgb2YgZnJhbWVzXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuaW5pdCh0aGlzLm1lbW9yeS5udW1iZXJfb2ZfcGFnZXMsIG5ld192YWwpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFsZ29yaXRobSBzZWxlY3RcbiAgICAgICAgICogLT4gZGlzYWJsZSBydW5uaW5nIHdpdGggYW5pbWF0aW9uIGlmIGNvbXBhcmVfYWxsXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBhbGdvcml0aG1fc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhX3R5cGVcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgICAgIGFsZ29yaXRobV9zZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICgoPEhUTUxTZWxlY3RFbGVtZW50PmUudGFyZ2V0KS52YWx1ZS50b0xvd2VyQ2FzZSgpID09PSBcImNvbXBhcmVfYWxsXCIpIHtcbiAgICAgICAgICAgICAgICAoPEhUTUxCdXR0b25FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvblwiKSkuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgKDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b25cIikpLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKiBcbiAgICAgICAgICogcmVzdWx0cyBidXR0b25zXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCByZXN1bHRzX2Nsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzX2Nsb3NlXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICByZXN1bHRzX2Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c193cmFwcGVyXCIpKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIHJlZnJlc2ggY2FsbHMgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xuICAgIH1cblxuICAgIGFkZFByb2Nlc3NlcygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcHJvY2Vzc19jb3VudCA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNfY291bnRcIikpLnZhbHVlKTtcblxuICAgICAgICBjb25zdCBwYWdlX3JhbmdlX21pbiA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWluX3JhbmdlXCIpKS52YWx1ZSk7XG4gICAgICAgIGNvbnN0IHBhZ2VfcmFuZ2VfbWF4ID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfcmFuZ2VcIikpLnZhbHVlKTtcblxuICAgICAgICBjb25zdCBjYWxsX2NvdW50X21pbiA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWluX2NhbGxzXCIpKS52YWx1ZSk7XG4gICAgICAgIGNvbnN0IGNhbGxfY291bnRfbWF4ID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfY2FsbHNcIikpLnZhbHVlKTtcblxuICAgICAgICBsZXQgY3VycmVudF9yYW5nZV9taW4gPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvY2Vzc19jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwYWdlX3JhbmdlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHBhZ2VfcmFuZ2VfbWF4IC0gcGFnZV9yYW5nZV9taW4gKyAxKSkgKyBwYWdlX3JhbmdlX21pbjtcblxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuYWRkUHJvY2VzcyhuZXcgUHJvY2VzcyhcbiAgICAgICAgICAgICAgICBbY3VycmVudF9yYW5nZV9taW4sIGN1cnJlbnRfcmFuZ2VfbWluICsgcGFnZV9yYW5nZV0sXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGNhbGxfY291bnRfbWF4IC0gY2FsbF9jb3VudF9taW4gKyAxKSkgKyBjYWxsX2NvdW50X21pbixcbiAgICAgICAgICAgICAgICBpXG4gICAgICAgICAgICApKTtcbiAgICAgICAgICAgIHRoaXMubWVtb3J5LnByb2Nlc3Nlc1t0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoIC0gMV0uZ2VuZXJhdGVDYWxscygpO1xuXG4gICAgICAgICAgICBjdXJyZW50X3JhbmdlX21pbiArPSBwYWdlX3JhbmdlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcbiAgICB9XG5cbiAgICBjbGVhclByb2Nlc3NlcygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tZW1vcnkuY2xlYXJQcm9jZXNzZXMoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcbiAgICB9XG5cbiAgICBhZGRDYWxscygpOiB2b2lkIHtcbiAgICAgICAgLyogY29tYmluZSBhbGwgcHJvY2VzcyBjYWxscyBpbnRvIG9uZSBhcnJheSAqL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLm1lbW9yeS5wcm9jZXNzZXNbaV0uZ2V0Q2FsbHMoKS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHRoaXMubWVtb3J5LmNhbGxfcG9vbC5wdXNoKG5ldyBQYWdlKHRoaXMubWVtb3J5LnByb2Nlc3Nlc1tpXS5nZXRDYWxscygpW2pdLCB0aGlzLm1lbW9yeS5wcm9jZXNzZXNbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiBzaHVmZmxlIGFycmF5ICovXG4gICAgICAgIHRoaXMubWVtb3J5LmNhbGxfcG9vbC5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpO1xuXG4gICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XG4gICAgfVxuXG4gICAgY2xlYXJDYWxscygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tZW1vcnkuY2FsbF9wb29sID0gW107XG4gICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaENhbGxzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBjdXJyZW50X2NvdW50X2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwX2N1cnJlbnRfY291bnRcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XG4gICAgICAgIGN1cnJlbnRfY291bnRfZWwuaW5uZXJIVE1MID0gYCgke3RoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGgudG9TdHJpbmcoKX0pYDtcblxuICAgICAgICBjb25zdCBnZW5lcmF0ZV9jYWxsX3F1ZXVlX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKHRoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBnZW5lcmF0ZV9jYWxsX3F1ZXVlX2J1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uLmF0dHJpYnV0ZXMuc2V0TmFtZWRJdGVtKGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGRpc3BsYXkgaW5kaXZpZHVhbCBwcm9jZXNzIGNhbGxzICovXG4gICAgICAgIGNvbnN0IGFsbF9wcm9jZXNzZXNfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsbF9wcm9jZXNzZXNcIikgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgIGFsbF9wcm9jZXNzZXNfZWwuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcHJvY2VzcyA9IHRoaXMubWVtb3J5LnByb2Nlc3Nlc1tpXTtcblxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc19lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgcHJvY2Vzc19lbC5jbGFzc0xpc3QuYWRkKFwicHJvY2Vzc1wiKTtcblxuICAgICAgICAgICAgcHJvY2Vzc19lbC5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJwcm9jZXNzX25hbWVcIj5DYWxscyBmb3IgcHJvY2VzcyAke2l9OiA8L3NwYW4+IDxzcGFuIGNsYXNzPVwicHJvY2Vzc19jYWxsc1wiPiR7cHJvY2Vzcy5nZXRDYWxscygpLmpvaW4oXCIsIFwiKX08L3NwYW4+PGJyIC8+YDtcblxuICAgICAgICAgICAgYWxsX3Byb2Nlc3Nlc19lbC5hcHBlbmRDaGlsZChwcm9jZXNzX2VsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGFsbF9wcm9jZXNzZXNfZWwuaW5uZXJIVE1MID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6IHllbGxvdyc+Tm8gcHJvY2Vzc2VzIGFkZGVkIHlldC48L3NwYW4+XCI7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBkaXNwbGF5IGNhbGwgcXVldWUgKi9cbiAgICAgICAgY29uc3QgY2FsbF9jb3VudF9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VycmVudF9jYWxsX2NvdW50XCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xuICAgICAgICBjYWxsX2NvdW50X2VsLmlubmVySFRNTCA9IGAoJHt0aGlzLm1lbW9yeS5jYWxsX3Bvb2wubGVuZ3RoLnRvU3RyaW5nKCl9KWA7XG5cbiAgICAgICAgY29uc3QgY2FsbF9xdWV1ZV9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbl9jYWxsX3F1ZXVlXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBjYWxsX3F1ZXVlX2VsLmlubmVySFRNTCA9IHRoaXMubWVtb3J5LmNhbGxfcG9vbC5tYXAoKHBhZ2UpID0+IHsgcmV0dXJuIHBhZ2UuaWQgfSkuam9pbihcIiwgXCIpO1xuXG4gICAgICAgIGlmICh0aGlzLm1lbW9yeS5jYWxsX3Bvb2wubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGNhbGxfcXVldWVfZWwuaW5uZXJIVE1MID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6IHllbGxvdyc+Tm8gY2FsbHMgaW4gcXVldWUuPC9zcGFuPlwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcnVuKGFuaW1hdGlvbj86IGJvb2xlYW4gfCB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGggPiB0aGlzLm1lbW9yeS5mcmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhbGVydChcIk5vdCBlbm91Z2ggZnJhbWVzIGZvciBhbGwgcHJvY2Vzc2VzXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWxnU3RyID0gKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYV90eXBlXCIpKS52YWx1ZTtcbiAgICAgICAgbGV0IGNvbXBhcmVfYWxsOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAgICAgc3dpdGNoIChhbGdTdHIudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBcImVxdWFsXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9yeS5zZXRBbGdvcml0aG0obmV3IEVxdWFsKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwicHJvcG9ydGlvbmFsXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9yeS5zZXRBbGdvcml0aG0obmV3IFByb3BvcnRpb25hbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImZhdWx0X2NvbnRyb2xcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImxvY2FsaXR5X21vZGVsXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJjb21wYXJlX2FsbFwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyZV9hbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJJbnZhbGlkIGFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29tcGFyZV9hbGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFsZ29yaXRobXMgPSBbXG4gICAgICAgICAgICAgICAgbmV3IEVxdWFsKCksXG4gICAgICAgICAgICAgICAgbmV3IFByb3BvcnRpb25hbCgpLFxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuY29tcGFyZUFsbEFuZERpc3BsYXlSZXN1bHRzKGFsZ29yaXRobXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFuaW1hdGlvbikge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25HVUkuc3RhcnRBbmltYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLm1lbW9yeS5zaW11bGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5tZW1vcnkuZGlzcGxheVJlc3VsdHMocmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi9Qcm9jZXNzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZ2Uge1xuICAgIGlkOiBudW1iZXJcbiAgICBsYXN0X2NhbGxfdGltZTogbnVtYmVyID0gMFxuICAgIHByb2Nlc3M6IFByb2Nlc3NcblxuICAgIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIHByb2Nlc3M6IFByb2Nlc3MpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnByb2Nlc3MgPSBwcm9jZXNzO1xuICAgIH1cblxuICAgIGNhbGwodGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGFzdF9jYWxsX3RpbWUgPSB0aW1lO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9jZXNzIHtcbiAgICByYW5nZV9vZl9wYWdlczogW251bWJlciwgbnVtYmVyXVxuICAgIG51bWJlcl9vZl9jYWxsczogbnVtYmVyXG4gICAgaWQ6IG51bWJlclxuXG4gICAgcHJpdmF0ZSBjYWxsczogQXJyYXk8bnVtYmVyPiA9IFtdXG5cbiAgICBjb25zdHJ1Y3RvcihyYW5nZV9vZl9wYWdlczogW251bWJlciwgbnVtYmVyXSwgbnVtYmVyX29mX2NhbGxzOiBudW1iZXIsIGlkOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5yYW5nZV9vZl9wYWdlcyA9IHJhbmdlX29mX3BhZ2VzO1xuICAgICAgICB0aGlzLm51bWJlcl9vZl9jYWxscyA9IG51bWJlcl9vZl9jYWxscztcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cblxuICAgIGdlbmVyYXRlQ2FsbHMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FsbHMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyX29mX2NhbGxzOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbHMucHVzaChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAodGhpcy5yYW5nZV9vZl9wYWdlc1sxXSAtIHRoaXMucmFuZ2Vfb2ZfcGFnZXNbMF0pKSArIHRoaXMucmFuZ2Vfb2ZfcGFnZXNbMF0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q2FsbHMoKTogQXJyYXk8bnVtYmVyPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxzO1xuICAgIH1cbn1cbiIsImltcG9ydCBBbGxvY2F0aW9uQWxnb3JpdGhtIGZyb20gXCIuLi9BbGxvY2F0aW9uQWxnb3JpdGhtXCI7XG5cbmltcG9ydCBQcm9jZXNzIGZyb20gXCIuLi9Qcm9jZXNzXCI7XG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4uL0ZyYW1lXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVxdWFsIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XG4gICAgbmFtZTogc3RyaW5nID0gXCJFcXVhbFwiXG5cbiAgICBhbGxvY2F0ZUZyYW1lcyhmcmFtZXM6IEFycmF5PEZyYW1lPiwgcHJvY2Vzc2VzOiBSZWFkb25seUFycmF5PFJlYWRvbmx5PFByb2Nlc3M+Pik6IHZvaWQge1xuICAgICAgICBjb25zdCBmcmFtZXNfcGVyX3Byb2Nlc3MgPSBNYXRoLmZsb29yKGZyYW1lcy5sZW5ndGggLyBwcm9jZXNzZXMubGVuZ3RoKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhgQWxsb2NhdGluZyAke2ZyYW1lc19wZXJfcHJvY2Vzc30gZnJhbWVzIHBlciBwcm9jZXNzYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBkYXRhLmN1cnJlbnRfZnJhbWVzLmxlbmd0aCA9ICR7ZnJhbWVzLmxlbmd0aH0sIGRhdGEucHJvY2Vzc2VzLmxlbmd0aCA9ICR7cHJvY2Vzc2VzLmxlbmd0aH1gKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGZyYW1lc1tpXS5wcm9jZXNzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCB0aGlzIGZyYW1lIGlmIGl0J3MgYWxyZWFkeSBhbGxvY2F0ZWRcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnJhbWVzW2ldLnByb2Nlc3MgPSA8UHJvY2Vzcz5wcm9jZXNzZXNbTWF0aC5mbG9vcihpIC8gZnJhbWVzX3Blcl9wcm9jZXNzKV07XG4gICAgICAgIH1cblxuICAgICAgICAvKiB0aGUgcmVtYWluaW5nIGZyYW1lcyBhcmUgbGVmdCB1bmFsbG9jYXRlZCAqL1xuICAgIH1cbn0iLCJpbXBvcnQgQWxsb2NhdGlvbkFsZ29yaXRobSBmcm9tIFwiLi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiO1xuXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi4vUHJvY2Vzc1wiO1xuaW1wb3J0IEZyYW1lIGZyb20gXCIuLi9GcmFtZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9wb3J0aW9uYWwgaW1wbGVtZW50cyBBbGxvY2F0aW9uQWxnb3JpdGhtIHtcbiAgICBuYW1lOiBzdHJpbmcgPSBcIlByb3BvcnRpb25hbFwiXG5cbiAgICBhbGxvY2F0ZUZyYW1lcyhmcmFtZXM6IEFycmF5PEZyYW1lPiwgcHJvY2Vzc2VzOiBSZWFkb25seUFycmF5PFJlYWRvbmx5PFByb2Nlc3M+Pik6IHZvaWQge1xuICAgICAgICBjb25zdCB0b3RhbF9jYWxscyA9IHByb2Nlc3Nlcy5yZWR1Y2UoKHRvdGFsLCBwcm9jZXNzKSA9PiB0b3RhbCArIHByb2Nlc3MubnVtYmVyX29mX2NhbGxzLCAwKTtcblxuICAgICAgICBsZXQgZnJhbWVzX2FsbG9jYXRlZCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZnJhbWVzX2Zvcl9wcm9jZXNzID0gTWF0aC5mbG9vcihwcm9jZXNzZXNbaV0ubnVtYmVyX29mX2NhbGxzIC8gdG90YWxfY2FsbHMgKiBmcmFtZXMubGVuZ3RoKSB8fCAxO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZyYW1lc19mb3JfcHJvY2VzczsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lc19hbGxvY2F0ZWQgPj0gZnJhbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBUaGVyZSBhcmUgbm90IGVub3VnaCBmcmFtZXMgdG8gYWxsb2NhdGUgYWxsIGZyYW1lcy5gKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lc1tmcmFtZXNfYWxsb2NhdGVkXS5wcm9jZXNzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBmcmFtZSBpZiBpdCdzIGFscmVhZHkgYWxsb2NhdGVkXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnJhbWVzW2ZyYW1lc19hbGxvY2F0ZWRdLnByb2Nlc3MgPSA8UHJvY2Vzcz5wcm9jZXNzZXNbaV07XG4gICAgICAgICAgICAgICAgZnJhbWVzX2FsbG9jYXRlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogdGhlIHJlbWFpbmluZyBmcmFtZXMgYXJlIGxlZnQgdW5hbGxvY2F0ZWQgKi9cbiAgICB9XG59IiwiaW1wb3J0IE1lbnUgZnJvbSBcIi4vY2xhc3Nlcy9NZW51XCI7XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgICAgICAgbWVudS5pbml0KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvKlxuICAgICAgICAqIHJ1biB3aXRoOiB0c2MgJiYgbm9kZSAuXFxkaXN0XFxmcmFtZV9hbGxvY2F0aW9uX3NyY1xcbWFpbi5qc1xuICAgICAgICAqL1xuXG4gICAgfVxufVxuXG5tYWluKCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEaXNwbGF5IHtcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IG51bGwgPSBudWxsXG4gICAgcmVzaXplQ2FsbGJhY2s6ICgoKSA9PiB2b2lkKSB8IG51bGxcblxuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMucmVzaXplQ2FsbGJhY2sgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICBpbml0KGVsZW1faWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtX2lkKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICAgICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemVUb0ZpdC5iaW5kKHRoaXMpKTtcblxuICAgICAgICB0aGlzLnJlc2l6ZVRvRml0KCk7XG4gICAgfVxuXG4gICAgcmVzaXplVG9GaXQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmN0eCA9PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZUNhbGxiYWNrICE9IG51bGwpe1xuICAgICAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0UmVzaXplQ2FsbGJhY2soY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2NSk7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJwcm9jZXNzZXMiLCJmcmFtZXMiLCJjYWxsX3Bvb2wiLCJjYWxsX3F1ZXVlIiwiY2FsbF9oaXN0b3J5IiwibnVtYmVyX29mX2ZyYW1lcyIsIm51bWJlcl9vZl9wYWdlcyIsImFsbG9jYXRpb25BbGdvcml0aG0iLCJyZXBsYWNlbWVudEFsZ29yaXRobSIsInRvdGFsX3BhZ2VfZmF1bHRzIiwidGltZSIsImxhc3RfY2FsbF9jYXVzZWRfZmF1bHQiLCJpbml0IiwidGhpcyIsImkiLCJwdXNoIiwiYWRkUHJvY2VzcyIsInByb2Nlc3MiLCJjbGVhclByb2Nlc3NlcyIsImdlbmVyYXRlUGFnZUNhbGxQb29sIiwibGVuZ3RoIiwiZ2VuZXJhdGVDYWxscyIsImFkZFBhZ2VDYWxsc1RvUG9vbCIsImdldENhbGxzIiwiYWRkUGFnZUNhbGxUb1Bvb2wiLCJwYWdlX2NhbGwiLCJwYWdlX2NhbGxzIiwiY2xlYXJQYWdlQ2FsbFBvb2wiLCJzZXRBbGdvcml0aG0iLCJhbGdvcml0aG0iLCJuZXh0VGljayIsIkVycm9yIiwic2hpZnQiLCJjb25zb2xlIiwid2FybiIsImxvZyIsImlkIiwiYWxsb2NhdGVGcmFtZXMiLCJ1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aCIsImZpbHRlciIsImZyYW1lIiwib25QYWdlQ2FsbCIsImdldEN1cnJlbnRTdGF0ZURhdGEiLCJwYWdlX2ZhdWx0IiwicGFnZSIsIm9uUGFnZUFscmVhZHlJbk1lbW9yeSIsImZpbmQiLCJpZF9vZl9mcmFtZV90b19yZXBsYWNlIiwiaGFuZGxlUGFnZUZhdWx0IiwiZ2V0RnJhbWVJbmRleEJ5SWQiLCJwYWdlX2luX21lbW9yeSIsImNhbGwiLCJwcm9jZXNzX2ZyYW1lcyIsInByb2Nlc3NfY2FsbF9oaXN0b3J5IiwiY3VycmVudF9mcmFtZXMiLCJwcmV2aW91c19wYWdlX2NhbGxzIiwiaXNGaW5pc2hlZCIsImdldFJlc3VsdHMiLCJ0b3RhbF9wYWdlX2hpdHMiLCJ0b3RhbF9jYWxscyIsInNpbXVsYXRlIiwiZGlzcGxheVJlc3VsdHMiLCJyZXN1bHRzIiwiYWxnU3RyIiwibmFtZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJpbm5lckhUTUwiLCJ0b1VwcGVyQ2FzZSIsInRvRml4ZWQiLCJyZXBsYWNlIiwiUmVnRXhwIiwiY29tcGFyZUFsbEFuZERpc3BsYXlSZXN1bHRzIiwiYWxnb3JpdGhtcyIsInJlc3VsdHNfZWwiLCJtZW51IiwidmlzaWJsZSIsInBsYXlpbmciLCJzcGVlZCIsIkdVSSIsIk1FTlUiLCJwbGF5X3BhdXNlX2J1dHRvbiIsInN0ZXBfYnV0dG9uIiwic3RvcF9idXR0b24iLCJzcGVlZF9zbGlkZXIiLCJpbmZvX2FsZ29yaXRobSIsImluZm9fdGltZSIsImluZm9faXNfZG9uZSIsImluZm9faW5fcXVldWUiLCJpbmZvX2ZpbmlzaGVkIiwiaW5mb190b3RhbF9wYWdlX2ZhdWx0cyIsImluZm9fdG90YWxfcGFnZV9oaXRzIiwiZnJhbWVfcm93cyIsInNlZV9jb2RlX2J1dHRvbiIsInN0b3JlZFNldEludGVydmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZVBsYXlpbmciLCJzdGVwIiwidG9nZ2xlVmlzaWJsZSIsInBhcnNlSW50IiwidmFsdWUiLCJyZWZyZXNoU3BlZWQiLCJtZW1vcnkiLCJhbGdvcml0aG1OYW1lIiwid2luZG93Iiwib3BlbiIsImZvY3VzIiwiaW5pdFN0YXRlVGFibGUiLCJyZXNpemVDYWxsYmFjayIsImRyYXdDdXJyZW50U3RhdGUiLCJjbGVhckludGVydmFsIiwicmVmcmVzaENhbGxzIiwicmVzZXQiLCJkaXNhYmxlZCIsInN0YXJ0QW5pbWF0aW9uIiwicmVmcmVzaEluZm8iLCJkcmF3Q2FsbHMiLCJ0aW1lX3JvdyIsImNhbGxzX3JvdyIsInRib2R5IiwidGltZV9yb3dfaGVhZGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiY2FsbHNfcm93X2hlYWRlciIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZnJhbWVfcm93IiwiZnJhbWVfcm93X2hlYWRlciIsIlNUQVJUX1giLCJTVEFSVF9ZIiwiV0lEVEgiLCJIRUlHSFQiLCJjYWxsc1RvRHJhdyIsIm5ld0NhbGwiLCJhdCIsInRpbWVUaWNrRWwiLCJjYWxsc1RpY2tFbCIsImZyYW1lVGlja0VsIiwiYmFja2dyb3VuZENvbG9yIiwidGFibGUiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsV2lkdGgiLCJ0b1N0cmluZyIsInNldEludGVydmFsIiwiYmluZCIsImFmdGVyRG9uZSIsIkZyYW1lIiwibmV4dF9pZCIsImRhdGEiLCJmcmFtZV90b19yZXBsYWNlX2luZGV4IiwibGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4IiwiZXJyb3IiLCJwYWdlX2luZGV4IiwiaiIsImFuaW1hdGlvbkdVSSIsInJ1biIsImFkZFByb2Nlc3NlcyIsImFkZENhbGxzIiwiY2xlYXJDYWxscyIsInNldFJlc2l6ZUNhbGxiYWNrIiwiZSIsIm5ld192YWwiLCJ0YXJnZXQiLCJpc05hTiIsImFsZXJ0IiwidG9Mb3dlckNhc2UiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwcm9jZXNzX2NvdW50IiwicGFnZV9yYW5nZV9taW4iLCJwYWdlX3JhbmdlX21heCIsImNhbGxfY291bnRfbWluIiwiY2FsbF9jb3VudF9tYXgiLCJjdXJyZW50X3JhbmdlX21pbiIsInBhZ2VfcmFuZ2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzb3J0IiwiZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24iLCJhdHRyaWJ1dGVzIiwic2V0TmFtZWRJdGVtIiwiY3JlYXRlQXR0cmlidXRlIiwiYWxsX3Byb2Nlc3Nlc19lbCIsInByb2Nlc3NfZWwiLCJqb2luIiwiY2FsbF9xdWV1ZV9lbCIsIm1hcCIsImFuaW1hdGlvbiIsImNvbXBhcmVfYWxsIiwibGFzdF9jYWxsX3RpbWUiLCJyYW5nZV9vZl9wYWdlcyIsIm51bWJlcl9vZl9jYWxscyIsImNhbGxzIiwiZnJhbWVzX3Blcl9wcm9jZXNzIiwicmVkdWNlIiwidG90YWwiLCJmcmFtZXNfYWxsb2NhdGVkIiwiZnJhbWVzX2Zvcl9wcm9jZXNzIiwiY3R4IiwiZWxlbV9pZCIsImNhbnZhcyIsImdldENvbnRleHQiLCJyZXNpemVUb0ZpdCIsIndpZHRoIiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiY2FsbGJhY2siLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyJdLCJzb3VyY2VSb290IjoiIn0=