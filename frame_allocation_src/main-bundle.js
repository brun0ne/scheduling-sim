(()=>{"use strict";var e={994:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=l(s(752)),n=l(s(920)),i=l(s(463));t.default=class{constructor(){this.processes=[],this.frames=[],this.call_pool=[],this.call_queue=[],this.call_history=[],this.number_of_frames=0,this.number_of_pages=0,this.allocationAlgorithm=null,this.replacementAlgorithm=new i.default,this.total_page_faults=0,this.time=0,this.last_call_caused_fault=!1}init(e,t){this.number_of_pages=null!=e?e:this.number_of_pages,this.number_of_frames=null!=t?t:this.number_of_frames,this.call_queue=[...this.call_pool],this.frames=[],this.call_history=[],this.time=0,this.total_page_faults=0;for(let e=0;e<this.number_of_frames;e++)this.frames.push(new a.default(e));for(const e of this.processes)e.reset()}addProcess(e){this.processes.push(e)}clearProcesses(){this.processes=[]}generatePageCallPool(){for(let e=0;e<this.processes.length;e++)this.processes[e].generateCalls(),this.addPageCallsToPool(this.processes[e].getCalls(),this.processes[e])}addPageCallToPool(e){this.call_pool.push(e)}addPageCallsToPool(e,t){for(let s=0;s<e.length;s++)this.addPageCallToPool(new n.default(e[s],t))}clearPageCallPool(){this.call_pool=[]}setAlgorithm(e){this.allocationAlgorithm=e}nextTick(){var e,t,s,l,a,n;if(null==this.allocationAlgorithm)throw new Error("No algorithm selected");for(const e of this.processes)e.updateRunningStatus(this.frames);this.frames.forEach((e=>{null==e.process||e.process.running||(e.process=null)})),null===(t=(e=this.allocationAlgorithm).allocateFrames)||void 0===t||t.call(e,this.frames,this.processes),this.frames.forEach((e=>{null==e.process&&null!=e.page&&(e.page=null)}));const i=this.frames.filter((e=>null==e.process)).length;i>0&&console.warn(`Not all frames are allocated\nAllocated: ${this.frames.length-i}\nUnallocated: ${i}`);let o=null;for(let e=0;e<this.call_queue.length;e++)if(this.call_queue[e].process.running){o=this.call_queue[e],this.call_queue.splice(e,1);break}if(null==o)return console.warn("Empty page call queue or no processes running"),void this.time++;if(this.call_history.push(o),console.log("Page call: "+o.id),o){null===(l=(s=this.replacementAlgorithm).onPageCall)||void 0===l||l.call(s,this.getCurrentStateData(o));let e=!0;for(let t=0;t<this.frames.length;t++){if(null==this.frames[t])throw new Error("Frame is null");if(null==this.frames[t].page&&this.frames[t].process==o.process){this.frames[t].page=o,this.total_page_faults++,o.process.page_faults++,this.last_call_caused_fault=!0,e=!1;break}if(null!=this.frames[t].page&&this.frames[t].page.id==o.id){null===(n=(a=this.replacementAlgorithm).onPageAlreadyInMemory)||void 0===n||n.call(a,this.getCurrentStateData(o)),this.last_call_caused_fault=!1,e=!1;break}}if(e){if(console.log("Page fault: "+o.id),null!=this.frames.find((e=>e.process==o.process&&null==e.page)))throw new Error("Initial page fill not handled properly");this.total_page_faults++,o.process.page_faults++,this.last_call_caused_fault=!0;const e=this.replacementAlgorithm.handlePageFault(this.getCurrentStateData(o));-1!=e&&(this.frames[this.getFrameIndexById(e)].page=o)}let t=!1;for(const e of this.frames)if(null!=e.page&&e.page.id==o.id){t=!0;break}if(!t)throw new Error("Page fault not handled properly - page not in memory");o.call(this.time,this.last_call_caused_fault)}this.time++}getCurrentStateData(e){const t=this.frames.filter((t=>t.process==e.process)),s=this.call_history.filter((t=>t.process==e.process));return{page_call:e,current_frames:t,previous_page_calls:s,processes:this.processes}}isFinished(){return 0==this.call_queue.length}getFrameIndexById(e){for(let t=0;t<this.frames.length;t++)if(this.frames[t].id==e)return t;return-1}getResults(){return{total_page_faults:this.total_page_faults,total_page_hits:this.call_history.length-this.total_page_faults,total_calls:this.call_history.length}}simulate(){var e,t;if(this.init(),null==this.allocationAlgorithm)throw new Error("No algorithm selected");for(null===(t=(e=this.allocationAlgorithm).allocateFrames)||void 0===t||t.call(e,this.frames,this.processes);!this.isFinished();){this.nextTick();const e=200;if(this.time>e){console.warn("Simulation timed out");break}}return this.getResults()}displayResults(e,t=this.allocationAlgorithm.name){document.getElementById("results_wrapper").style.display="flex",document.getElementById("results").innerHTML=`\n        Algorithm: ${t.toUpperCase()}\n\n        Total page faults: <b style='color: red'>${e.total_page_faults.toFixed(0)}</b>\n        Total page hits: <b style='color: lime'>${e.total_page_hits.toFixed(0)}</b>\n        Total page calls: <b>${e.total_calls.toFixed(0)}</b>\n        `.replace(RegExp("\n","g"),"<br />")}compareAllAndDisplayResults(e){document.getElementById("results_wrapper").style.display="flex";const t=document.getElementById("results");t.innerHTML="";for(let s=0;s<e.length;s++){this.setAlgorithm(e[s]);const l=this.simulate();t.innerHTML+=`\n            Algorithm: ${e[s].name.toUpperCase()}\n            Total page faults: <b style='color: red'>${l.total_page_faults.toFixed(0)}</b>\n            Total page hits: <b style='color: lime'>${l.total_page_hits.toFixed(0)}</b>\n            Total page calls: <b>${l.total_calls.toFixed(0)}</b>\n            `.replace(RegExp("\n","g"),"<br />"),t.innerHTML+="<br />"}}}},498:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.visible=!1,this.playing=!1,this.speed=1,this.GUI=null,this.MENU=null,this.play_pause_button=null,this.step_button=null,this.stop_button=null,this.speed_slider=null,this.info_algorithm=null,this.info_time=null,this.info_is_done=null,this.info_in_queue=null,this.info_finished=null,this.info_total_page_faults=null,this.info_total_page_hits=null,this.frame_rows=[],this.see_code_button=null,this.storedSetInterval=null,this.menu=e}init(){this.GUI=document.getElementById("animation_gui"),this.MENU=document.getElementById("settings"),this.play_pause_button=document.getElementById("animation_play_pause"),this.step_button=document.getElementById("animation_step"),this.stop_button=document.getElementById("animation_stop"),this.speed_slider=document.getElementById("animation_speed_slider"),this.info_algorithm=document.getElementById("animation_info_algorithm_value"),this.info_time=document.getElementById("animation_info_time_value"),this.info_is_done=document.getElementById("animation_is_done"),this.info_in_queue=document.getElementById("calls_in_queue_value"),this.info_finished=document.getElementById("calls_finished_value"),this.info_total_page_faults=document.getElementById("total_page_faults_value"),this.info_total_page_hits=document.getElementById("total_page_hits_value"),this.see_code_button=document.getElementById("code_button"),this.info_is_done.style.display="none",this.play_pause_button.addEventListener("click",(()=>{this.togglePlaying()})),this.step_button.addEventListener("click",(()=>{this.step()})),this.stop_button.addEventListener("click",(()=>{this.toggleVisible(!1)})),this.speed_slider.addEventListener("input",(()=>{this.speed=parseInt(this.speed_slider.value),this.refreshSpeed()})),this.see_code_button.addEventListener("click",(()=>{if(null==this.menu.memory.allocationAlgorithm)return;const e=this.menu.memory.allocationAlgorithm.name;window.open(`https://github.com/brun0ne/scheduling-sim/blob/main/page_replacement_src/classes/algorithms/${e}.ts`,"_blank").focus()})),this.refreshSpeed(),this.initStateTable()}togglePlaying(e){this.playing=null==e?!this.playing:e,this.refreshSpeed(),this.play_pause_button.innerHTML=this.playing?"Pause":"Play"}toggleVisible(e){this.visible=null==e?!this.visible:e,this.visible?(this.GUI.style.display="block",this.MENU.style.display="none",this.menu.display.resizeCallback=()=>{this.drawCurrentState()},this.drawCurrentState()):(this.GUI.style.display="none",this.MENU.style.display="flex",null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.menu.display.resizeCallback=()=>{this.menu.refreshCalls()},this.menu.refreshCalls())}reset(){if(null==this.play_pause_button||null==this.info_is_done||null==this.step_button)throw new Error("call init() first!");this.menu.memory.init(),this.play_pause_button.innerHTML="Play",this.playing=!1,this.info_is_done.style.display="none",this.play_pause_button.disabled=!1,this.step_button.disabled=!1,this.initStateTable()}startAnimation(){this.reset(),this.toggleVisible(!0)}drawCurrentState(){this.refreshInfo(),this.drawCalls()}initStateTable(){const e=document.getElementById("animation_table_time"),t=document.getElementById("animation_table_page_calls"),s=document.getElementById("animation_table_body");e.innerHTML="",t.innerHTML="";{const t=document.createElement("th");t.innerHTML="Time",t.classList.add("header"),e.appendChild(t)}{const e=document.createElement("th");e.innerHTML="Page calls",e.classList.add("header"),t.appendChild(e)}{for(;null!=s.lastChild&&"animation_table_page_calls"!=s.lastChild.id;)s.removeChild(s.lastChild);const e=[];for(let t=0;t<this.menu.memory.number_of_frames;t++){const l=document.createElement("tr"),a=document.createElement("th");a.innerHTML=`Frame ${t}`,l.appendChild(a),e.push(l),s.appendChild(l)}this.frame_rows=e}}drawCalls(e,t,s,l,a){const n=document.getElementById("animation_table_time"),i=document.getElementById("animation_table_page_calls"),o=this.menu.memory.call_history.at(-1);if(null==o)return;{const e=document.createElement("th");e.innerHTML=`${this.menu.memory.time}`,n.appendChild(e)}{const e=document.createElement("th");e.innerHTML=`${o.id}`,i.appendChild(e)}for(let e=0;e<this.menu.memory.number_of_frames;e++){const t=this.frame_rows[e],s=this.menu.memory.frames[e].page,l=document.createElement("th");l.innerHTML=`${null!=s?s.id:""}`,null!=s&&s.id==o.id&&this.menu.memory.last_call_caused_fault&&(l.style.backgroundColor="red"),null!=this.menu.memory.frames[e].process&&(l.innerHTML+=` <span style='color: yellow'>(${this.menu.memory.frames[e].process.id})</span>`),t.appendChild(l)}const r=document.getElementById("animation_call_table");r.scrollLeft=r.scrollWidth}refreshInfo(){const e=this.menu.memory;if(null==e.allocationAlgorithm)throw new Error("call startAnimation() first!");this.info_algorithm.innerHTML=e.allocationAlgorithm.name,this.info_time.innerHTML=e.time.toString(),e.isFinished()?this.info_is_done.style.display="block":this.info_is_done.style.display="none",this.info_total_page_hits.innerHTML=(e.call_history.length-e.total_page_faults).toString(),this.info_total_page_faults.innerHTML=e.total_page_faults.toString(),this.info_in_queue.innerHTML=e.call_queue.length.toString(),this.info_finished.innerHTML=e.call_history.length.toString()}refreshSpeed(){null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.storedSetInterval=setInterval((()=>{this.playing&&this.step()}).bind(this),1e3/this.speed)}step(){this.menu.memory.isFinished()||(this.menu.memory.nextTick(),this.drawCurrentState(),this.menu.memory.isFinished()&&(this.togglePlaying(!1),this.menu.memory.displayResults(this.menu.memory.getResults()),this.afterDone()))}afterDone(){if(null==this.info_is_done||null==this.play_pause_button||null==this.step_button)throw new Error("call init() first!");this.info_is_done.style.display="block",this.play_pause_button.disabled=!0,this.step_button.disabled=!0}}},752:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.page=null,this.process=null,this.id=e}}},463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="LRU"}handlePageFault(e){let t=-1,s=-1;for(let l=0;l<e.current_frames.length;l++){const a=e.current_frames[l];if(a.process!=e.page_call.process&&console.error("Frame is assigned to a different process - this should be ensured not to happen by the caller"),null==a.page)return console.warn("Frame is empty - this should be ensured not to happen by the caller"),l;let n=-1;for(let t=e.previous_page_calls.length-1;t>=0;t--)if(e.previous_page_calls[t].id==a.page.id){n=t;break}if(-1==n)return l;(n<s||-1==s)&&(t=l,s=n)}return-1==t?(console.warn("No frame to replace found by LRU"),-1):e.current_frames[t].id}}},268:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=l(s(617)),n=l(s(994)),i=l(s(950)),o=l(s(920)),r=l(s(382)),h=l(s(498)),u=l(s(634)),c=l(s(960)),m=l(s(728));t.default=class{constructor(){this.display=new a.default,this.memory=new n.default,this.animationGUI=new h.default(this)}init(){document.getElementById("run_button").addEventListener("click",(()=>{this.run()})),document.getElementById("run_with_animation_button").addEventListener("click",(()=>{this.run(!0)})),document.getElementById("add_button").addEventListener("click",(()=>{this.addProcesses()})),document.getElementById("clear_button").addEventListener("click",(()=>{this.clearProcesses()})),document.getElementById("generate_call_queue_button").addEventListener("click",(()=>{this.addCalls()})),document.getElementById("clear_call_queue_button").addEventListener("click",(()=>{this.clearCalls()})),this.memory.init(5,3),this.display.init("main_canvas"),this.animationGUI.init(),this.display.setResizeCallback((()=>{this.refreshCalls()})),document.getElementById("s_frame_count").addEventListener("change",(e=>{const t=parseInt(e.target.value);isNaN(t)||t<1?alert("Invalid number of frames"):(this.memory.init(this.memory.number_of_pages,t),this.refreshCalls())})),document.getElementById("a_type").addEventListener("change",(e=>{"compare_all"===e.target.value.toLowerCase()?document.getElementById("run_with_animation_button").setAttribute("disabled","true"):document.getElementById("run_with_animation_button").removeAttribute("disabled"),"fault_control"===e.target.value.toLowerCase()||"compare_all"===e.target.value.toLowerCase()?(document.getElementById("s_min_page_faults_all").style.display="block",document.getElementById("s_max_page_faults_all").style.display="block",document.getElementById("s_time_window_all").style.display="block"):(document.getElementById("s_min_page_faults_all").style.display="none",document.getElementById("s_max_page_faults_all").style.display="none",document.getElementById("s_time_window_all").style.display="none")})),document.getElementById("results_close").addEventListener("click",(()=>{document.getElementById("results_wrapper").style.display="none"})),this.refreshCalls()}addProcesses(){const e=parseInt(document.getElementById("c_count").value),t=parseInt(document.getElementById("s_min_range").value),s=parseInt(document.getElementById("s_max_range").value),l=parseInt(document.getElementById("s_min_calls").value),a=parseInt(document.getElementById("s_max_calls").value);let n=0;for(let o=0;o<e;o++){const e=Math.floor(Math.random()*(s-t+1))+t;this.memory.addProcess(new i.default([n,n+e],Math.floor(Math.random()*(a-l+1))+l,o)),this.memory.processes[this.memory.processes.length-1].generateCalls(),n+=e}this.refreshCalls()}clearProcesses(){this.memory.clearProcesses(),this.memory.clearPageCallPool(),this.refreshCalls()}addCalls(){for(let e=0;e<this.memory.processes.length;e++)for(let t=0;t<this.memory.processes[e].getCalls().length;t++)this.memory.call_pool.push(new o.default(this.memory.processes[e].getCalls()[t],this.memory.processes[e]));this.memory.call_pool.sort((()=>Math.random()-.5)),this.refreshCalls()}clearCalls(){this.memory.call_pool=[],this.refreshCalls()}refreshCalls(){document.getElementById("p_current_count").innerHTML=`(${this.memory.processes.length.toString()})`;const e=document.getElementById("generate_call_queue_button");this.memory.processes.length>0&&0==this.memory.call_pool.length?e.removeAttribute("disabled"):e.attributes.setNamedItem(document.createAttribute("disabled"));const t=document.getElementById("all_processes");t.innerHTML="";for(let e=0;e<this.memory.processes.length;e++){const s=this.memory.processes[e],l=document.createElement("span");l.classList.add("process"),l.innerHTML=`<span class="process_name">Calls of process ${e}: </span> <span class="process_calls">${s.getCalls().join(", ")}</span><br />`,t.appendChild(l)}0==this.memory.processes.length&&(t.innerHTML="<span style='color: yellow'>No processes added yet.</span>"),document.getElementById("current_call_count").innerHTML=`(${this.memory.call_pool.length.toString()})`;const s=document.getElementById("main_call_queue");s.innerHTML=this.memory.call_pool.map((e=>e.id)).join(", "),0==this.memory.call_pool.length&&(s.innerHTML="<span style='color: yellow'>No calls in queue.</span>")}run(e){if(this.memory.processes.length>this.memory.frames.length)return void alert("Not enough frames for all processes");const t=document.getElementById("a_type").value;let s=!1;const l=parseFloat(document.getElementById("s_min_page_faults").value),a=parseFloat(document.getElementById("s_max_page_faults").value),n=parseFloat(document.getElementById("s_time_window").value);switch(t.toLowerCase()){case"equal":this.memory.setAlgorithm(new r.default);break;case"proportional":this.memory.setAlgorithm(new u.default);break;case"fault_control":if(l>=a)return void alert("Minimum frequency has to be smaller than the maximum");this.memory.setAlgorithm(new c.default(l,a,n));break;case"locality_model":this.memory.setAlgorithm(new m.default);break;case"compare_all":s=!0;break;default:alert("Invalid algorithm")}if(s){if(l>=a)return void alert("Minimum frequency has to be smaller than the maximum");const e=[new r.default,new u.default,new c.default(l,a,n)];this.memory.compareAllAndDisplayResults(e)}else if(e)this.animationGUI.startAnimation();else{const e=this.memory.simulate();this.memory.displayResults(e)}}}},920:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.last_call_time=0,this.id=e,this.process=t}call(e,t){this.last_call_time=e,this.process.done_calls++,this.process.addToFaultLog(t)}}},950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,s){this.page_faults=0,this.done_calls=0,this.running=!0,this.assignedFrames=0,this.calls=[],this.fault_log=[],this.range_of_pages=e,this.number_of_calls=t,this.id=s}reset(){this.page_faults=0,this.done_calls=0,this.running=!0,this.assignedFrames=0,this.fault_log=[]}generateCalls(){this.calls=[];for(let e=0;e<this.number_of_calls;e++)this.calls.push(Math.floor(Math.random()*(this.range_of_pages[1]-this.range_of_pages[0]))+this.range_of_pages[0])}getCalls(){return this.calls}addToFaultLog(e){if(this.fault_log.push(e),this.fault_log.length!=this.done_calls)throw new Error("Fault log length does not match done calls")}updateRunningStatus(e){let t=0;for(const s of e)s.process==this&&t++;if(this.running=t>0,this.done_calls==this.number_of_calls)this.running=!1;else if(this.done_calls>=this.number_of_calls)throw new Error("Process done calls exceeded number of calls");this.assignedFrames=t}getFaultsInLastN(e){return this.fault_log.slice(this.fault_log.length-e,this.fault_log.length).filter((e=>e)).length}}},382:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Equal"}allocateFrames(e,t){const s=Math.floor(e.length/t.length);console.log(`Allocating ${s} frames per process`);for(let l=0;l<e.length;l++)null==e[l].process&&(e[l].process=t[Math.floor(l/s)])}}},728:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="LocalityModel"}allocateFrames(e,t){throw new Error("Method not implemented.")}}},960:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=l(s(634));t.default=class{constructor(e,t,s=5){this.name="PageFaultControl",this.run_proportional=!0,this.min_fault_freq=e,this.max_faults_freq=t,this.time_window=s}allocateFrames(e,t){if(this.run_proportional)return this.run_proportional=!1,(new a.default).allocateFrames(e,t);const s=this.min_fault_freq,l=this.max_faults_freq;for(let a=0;a<t.length;a++){const n=t[a].getFaultsInLastN(this.time_window);let i=this.time_window;i>t[a].fault_log.length&&(i=t[a].fault_log.length);let o=n/i,r=e.filter((e=>e.process==t[a])).length;if(0==i&&(o=(this.min_fault_freq+this.max_faults_freq)/2),console.log(`Process ${t[a].id} fault frequency: ${o} (${n} / ${i})`),o<s&&r>1)for(let s=0;s<e.length;s++)if(e[s].process==t[a])return e[s].process=null,this.allocateFrames(e,t);if(o>l)for(let s=0;s<e.length;s++)if(null==e[s].process){e[s].process=t[a];break}}}}},634:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Proportional"}allocateFrames(e,t){const s=t.reduce(((e,t)=>e+t.number_of_calls),0);let l=0;for(let a=0;a<t.length;a++){let n=Math.floor(t[a].number_of_calls/s*e.length);n<1&&(n=1);for(let s=0;s<n;s++){if(l>=e.length){console.error("There are not enough frames to allocate all frames.");break}null==e[l].process&&(e[l].process=t[a],l++)}}}}},965:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=l(s(268));"undefined"!=typeof document&&(new a.default).init()},617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.ctx=null,this.resizeCallback=null}init(e){const t=document.getElementById(e);this.ctx=t.getContext("2d"),window.addEventListener("resize",this.resizeToFit.bind(this)),this.resizeToFit()}resizeToFit(){null!=this.ctx&&(this.ctx.canvas.width=window.innerWidth,this.ctx.canvas.height=window.innerHeight,null!=this.resizeCallback&&this.resizeCallback())}setResizeCallback(e){this.resizeCallback=e}}}},t={};!function s(l){var a=t[l];if(void 0!==a)return a.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,s),n.exports}(965)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T29CLE9BQVEsQ0FDbkNvQixRQUFRcUgsTUFBTSx1REFDZCxLLENBR29DLE1BQXBDN0osRUFBT2lPLEdBQWtCbE4sVUFJN0JmLEVBQU9pTyxHQUFrQmxOLFFBQW1CaEIsRUFBVWMsR0FDdERvTixJLEVBS1osRSwySkNuQ0osa0JBRzRCLG9CQUFiM0osV0FDTSxJQUFJLFdBQ1ozRCxNLCtEQ0xiLGdCQUlJYixjQUhBLEtBQUFxTyxJQUF1QyxLQUluQ3ZOLEtBQUt1RyxlQUFpQixJQUMxQixDQUVBeEcsS0FBS3lOLEdBQ0QsTUFBTUMsRUFBUy9KLFNBQVNDLGVBQWU2SixHQUN2Q3hOLEtBQUt1TixJQUFNRSxFQUFPQyxXQUFXLE1BRTdCdkgsT0FBT1QsaUJBQWlCLFNBQVUxRixLQUFLMk4sWUFBWS9FLEtBQUs1SSxPQUV4REEsS0FBSzJOLGFBQ1QsQ0FFQUEsY0FDb0IsTUFBWjNOLEtBQUt1TixNQUlUdk4sS0FBS3VOLElBQUlFLE9BQU9HLE1BQVF6SCxPQUFPMEgsV0FDL0I3TixLQUFLdU4sSUFBSUUsT0FBT0ssT0FBUzNILE9BQU80SCxZQUVMLE1BQXZCL04sS0FBS3VHLGdCQUNMdkcsS0FBS3VHLGlCQUViLENBRUFrRCxrQkFBa0J1RSxHQUNkaE8sS0FBS3VHLGVBQWlCeUgsQ0FDMUIsRSxHQy9CQUMsRUFBMkIsQ0FBQyxHQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhRSxRQUdyQixJQUFJQyxFQUFTTixFQUF5QkUsR0FBWSxDQUdqREcsUUFBUyxDQUFDLEdBT1gsT0FIQUUsRUFBb0JMLEdBQVV4TCxLQUFLNEwsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELE9BQ2YsQ0NuQjBCSixDQUFvQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9BbGxvY2F0aW5nTU1VLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvQW5pbWF0aW9uR1VJLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvRnJhbWUudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9MUlUudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9NZW51LnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvUGFnZS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL1Byb2Nlc3MudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9hbGdvcml0aG1zL0VxdWFsLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvYWxnb3JpdGhtcy9Mb2NhbGl0eU1vZGVsLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvYWxnb3JpdGhtcy9QYWdlRmF1bHRDb250cm9sLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvYWxnb3JpdGhtcy9Qcm9wb3J0aW9uYWwudHMiLCJ3ZWJwYWNrOi8vLy4vbWFpbi50cyIsIndlYnBhY2s6Ly8vLi4vc2hhcmVkL2NsYXNzZXMvRGlzcGxheS50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWxsb2NhdGlvbkFsZ29yaXRobSBmcm9tIFwiLi9BbGxvY2F0aW9uQWxnb3JpdGhtXCJcclxuXHJcbmltcG9ydCBGcmFtZSBmcm9tIFwiLi9GcmFtZVwiXHJcbmltcG9ydCBQYWdlIGZyb20gXCIuL1BhZ2VcIlxyXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi9Qcm9jZXNzXCJcclxuXHJcbmltcG9ydCBSZXBsYWNlbWVudEFsZ29yaXRobSBmcm9tIFwiLi9SZXBsYWNlbWVudEFsZ29yaXRobVwiXHJcbmltcG9ydCBMUlUgZnJvbSBcIi4vTFJVXCJcclxuXHJcbmV4cG9ydCB0eXBlIE1lbW9yeVN0YXRlRGF0YSA9IHtcclxuICAgIHBhZ2VfY2FsbDogUmVhZG9ubHk8UGFnZT4sXHJcbiAgICBjdXJyZW50X2ZyYW1lczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxGcmFtZT4+LFxyXG4gICAgcHJldmlvdXNfcGFnZV9jYWxsczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxQYWdlPj4sXHJcbiAgICBwcm9jZXNzZXM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8UHJvY2Vzcz4+XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBSZXN1bHRzID0ge1xyXG4gICAgdG90YWxfcGFnZV9mYXVsdHM6IG51bWJlcixcclxuICAgIHRvdGFsX3BhZ2VfaGl0czogbnVtYmVyLFxyXG4gICAgdG90YWxfY2FsbHM6IG51bWJlclxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWxsb2NhdGluZ01NVSB7XHJcbiAgICBwcm9jZXNzZXM6IEFycmF5PFByb2Nlc3M+ID0gW11cclxuICAgIGZyYW1lczogQXJyYXk8RnJhbWU+ID0gW11cclxuXHJcbiAgICBjYWxsX3Bvb2w6IEFycmF5PFBhZ2U+ID0gW11cclxuICAgIGNhbGxfcXVldWU6IEFycmF5PFBhZ2U+ID0gW11cclxuICAgIGNhbGxfaGlzdG9yeTogQXJyYXk8UGFnZT4gPSBbXVxyXG5cclxuICAgIG51bWJlcl9vZl9mcmFtZXM6IG51bWJlciA9IDBcclxuICAgIG51bWJlcl9vZl9wYWdlczogbnVtYmVyID0gMFxyXG5cclxuICAgIGFsbG9jYXRpb25BbGdvcml0aG06IEFsbG9jYXRpb25BbGdvcml0aG0gfCBudWxsID0gbnVsbFxyXG4gICAgcmVwbGFjZW1lbnRBbGdvcml0aG06IFJlcGxhY2VtZW50QWxnb3JpdGhtID0gbmV3IExSVSgpXHJcblxyXG4gICAgdG90YWxfcGFnZV9mYXVsdHM6IG51bWJlciA9IDBcclxuICAgIHRpbWU6IG51bWJlciA9IDBcclxuXHJcbiAgICBsYXN0X2NhbGxfY2F1c2VkX2ZhdWx0OiBib29sZWFuID0gZmFsc2VcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICAgIGluaXQobnVtYmVyX29mX3BhZ2VzPzogbnVtYmVyLCBudW1iZXJfb2ZfZnJhbWVzPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5udW1iZXJfb2ZfcGFnZXMgPSBudW1iZXJfb2ZfcGFnZXMgPz8gdGhpcy5udW1iZXJfb2ZfcGFnZXM7XHJcbiAgICAgICAgdGhpcy5udW1iZXJfb2ZfZnJhbWVzID0gbnVtYmVyX29mX2ZyYW1lcyA/PyB0aGlzLm51bWJlcl9vZl9mcmFtZXM7XHJcblxyXG4gICAgICAgIHRoaXMuY2FsbF9xdWV1ZSA9IFsuLi50aGlzLmNhbGxfcG9vbF07IC8vIGNvcHkgYXJyYXlcclxuICAgICAgICB0aGlzLmZyYW1lcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2FsbF9oaXN0b3J5ID0gW107XHJcblxyXG4gICAgICAgIHRoaXMudGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF9wYWdlX2ZhdWx0cyA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1iZXJfb2ZfZnJhbWVzOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5mcmFtZXMucHVzaChuZXcgRnJhbWUoaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzIG9mIHRoaXMucHJvY2Vzc2VzKSB7XHJcbiAgICAgICAgICAgIHByb2Nlc3MucmVzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUHJvY2Vzcyhwcm9jZXNzOiBQcm9jZXNzKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzZXMucHVzaChwcm9jZXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhclByb2Nlc3NlcygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnByb2Nlc3NlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlUGFnZUNhbGxQb29sKCk6IHZvaWQge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wcm9jZXNzZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzZXNbaV0uZ2VuZXJhdGVDYWxscygpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFBhZ2VDYWxsc1RvUG9vbCh0aGlzLnByb2Nlc3Nlc1tpXS5nZXRDYWxscygpLCB0aGlzLnByb2Nlc3Nlc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkUGFnZUNhbGxUb1Bvb2wocGFnZV9jYWxsOiBQYWdlKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jYWxsX3Bvb2wucHVzaChwYWdlX2NhbGwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkUGFnZUNhbGxzVG9Qb29sKHBhZ2VfY2FsbHM6IEFycmF5PG51bWJlcj4sIHByb2Nlc3M6IFByb2Nlc3MpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VfY2FsbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRQYWdlQ2FsbFRvUG9vbChuZXcgUGFnZShwYWdlX2NhbGxzW2ldLCBwcm9jZXNzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyUGFnZUNhbGxQb29sKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FsbF9wb29sID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QWxnb3JpdGhtKGFsZ29yaXRobTogQWxsb2NhdGlvbkFsZ29yaXRobSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobSA9IGFsZ29yaXRobTtcclxuICAgIH1cclxuXHJcbiAgICBuZXh0VGljaygpOiB2b2lkIHtcclxuICAgICAgICAvKiBlbnN1cmUgdGhhdCBhbiBhbGdvcml0aG0gaXMgc2VsZWN0ZWQgKi9cclxuICAgICAgICBpZiAodGhpcy5hbGxvY2F0aW9uQWxnb3JpdGhtID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWxnb3JpdGhtIHNlbGVjdGVkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogY2hlY2sgaWYgYW55IHByb2Nlc3MgaXMgc3RvcHBlZC9yZXN1bWVkICovXHJcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzIG9mIHRoaXMucHJvY2Vzc2VzKSB7XHJcbiAgICAgICAgICAgIHByb2Nlc3MudXBkYXRlUnVubmluZ1N0YXR1cyh0aGlzLmZyYW1lcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBkZWFsbG9jYXRlIGZpbmlzaGVkIHByb2Nlc3NlcyAqL1xyXG4gICAgICAgIHRoaXMuZnJhbWVzLmZvckVhY2goZnJhbWUgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZnJhbWUucHJvY2VzcyAhPSBudWxsICYmICFmcmFtZS5wcm9jZXNzLnJ1bm5pbmcpXHJcbiAgICAgICAgICAgICAgICBmcmFtZS5wcm9jZXNzID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogcmVhbGxvY2F0ZSBmcmFtZXMgdG8gcHJvY2Vzc2VzICovXHJcbiAgICAgICAgdGhpcy5hbGxvY2F0aW9uQWxnb3JpdGhtLmFsbG9jYXRlRnJhbWVzPy4odGhpcy5mcmFtZXMsIHRoaXMucHJvY2Vzc2VzKTtcclxuXHJcbiAgICAgICAgLyogcmVtb3ZlIHBhZ2VzIGZyb20gdW5hbGxvY2F0ZWQgZnJhbWVzICovXHJcbiAgICAgICAgdGhpcy5mcmFtZXMuZm9yRWFjaChmcmFtZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmcmFtZS5wcm9jZXNzID09IG51bGwgJiYgZnJhbWUucGFnZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgZnJhbWUucGFnZSA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVuYWxsb2NhdGVkRnJhbWVzTGVuZ3RoID0gdGhpcy5mcmFtZXMuZmlsdGVyKGZyYW1lID0+IGZyYW1lLnByb2Nlc3MgPT0gbnVsbCkubGVuZ3RoO1xyXG4gICAgICAgIGlmICh1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBOb3QgYWxsIGZyYW1lcyBhcmUgYWxsb2NhdGVkXFxuQWxsb2NhdGVkOiAke3RoaXMuZnJhbWVzLmxlbmd0aCAtIHVuYWxsb2NhdGVkRnJhbWVzTGVuZ3RofVxcblVuYWxsb2NhdGVkOiAke3VuYWxsb2NhdGVkRnJhbWVzTGVuZ3RofWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogdHJhdmVyc2UgdGhlIHF1ZXVlIHVudGlsIGEgY2FsbCBiZWxvbmdpbmcgdG8gYSBydW5uaW5nIHByb2Nlc3MgaXMgZm91bmQgKi9cclxuICAgICAgICBsZXQgcGFnZV9jYWxsOiBQYWdlIHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhbGxfcXVldWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FsbF9xdWV1ZVtpXS5wcm9jZXNzLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VfY2FsbCA9IHRoaXMuY2FsbF9xdWV1ZVtpXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbF9xdWV1ZS5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogbm8gcGFnZSBjYWxsIGF0IHRoaXMgdGltZSAqL1xyXG4gICAgICAgIGlmIChwYWdlX2NhbGwgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFbXB0eSBwYWdlIGNhbGwgcXVldWUgb3Igbm8gcHJvY2Vzc2VzIHJ1bm5pbmdcIik7XHJcbiAgICAgICAgICAgIHRoaXMudGltZSsrO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNhbGxfaGlzdG9yeS5wdXNoKHBhZ2VfY2FsbCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJQYWdlIGNhbGw6IFwiICsgcGFnZV9jYWxsLmlkKTtcclxuXHJcbiAgICAgICAgaWYgKHBhZ2VfY2FsbCkge1xyXG4gICAgICAgICAgICAvKiBleGVjdXRlIHJlcGxhY2VtZW50IGFsZ29yaXRobSAqL1xyXG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VtZW50QWxnb3JpdGhtLm9uUGFnZUNhbGw/Lih0aGlzLmdldEN1cnJlbnRTdGF0ZURhdGEocGFnZV9jYWxsKSk7XHJcblxyXG4gICAgICAgICAgICAvKiBjaGVjayBpZiB0aGVyZSBpcyBhIHBhZ2UgZmF1bHQgKi9cclxuICAgICAgICAgICAgbGV0IHBhZ2VfZmF1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZnJhbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGcmFtZSBpcyBudWxsXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lc1tpXS5wYWdlID09IG51bGwgJiYgdGhpcy5mcmFtZXNbaV0ucHJvY2VzcyA9PSBwYWdlX2NhbGwucHJvY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIGluc2VydCBpbnRvIHRoZSBmaXJzdCBmcmVlIGZyYW1lIGFzc2lnbmVkIHRvIHRoZSBwcm9jZXNzICovXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmFtZXNbaV0ucGFnZSA9IHBhZ2VfY2FsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogaW5jcmVtZW50IHBhZ2UgZmF1bHRzICovXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlX2ZhdWx0cysrO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VfY2FsbC5wcm9jZXNzLnBhZ2VfZmF1bHRzKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VfZmF1bHQgPSBmYWxzZTsgLy8gcGFnZSBmYXVsdCBhbHJlYWR5IGhhbmRsZWRcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0ucGFnZSAhPSBudWxsICYmIHRoaXMuZnJhbWVzW2ldLnBhZ2UhLmlkID09IHBhZ2VfY2FsbC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIHBhZ2UgaXMgYWxyZWFkeSBpbiBtZW1vcnkgKi9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VtZW50QWxnb3JpdGhtLm9uUGFnZUFscmVhZHlJbk1lbW9yeT8uKHRoaXMuZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGwpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZV9mYXVsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBoYW5kbGUgcGFnZSBmYXVsdCAqL1xyXG4gICAgICAgICAgICBpZiAocGFnZV9mYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYWdlIGZhdWx0OiBcIiArIHBhZ2VfY2FsbC5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogZW5zdXJlIHRoYXQgdGhlcmUgYXJlIG5vIGZyZWUgZnJhbWVzIGFzc2lnbmVkIHRvIHRoZSBwcm9jZXNzICovXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXMuZmluZChmcmFtZSA9PiBmcmFtZS5wcm9jZXNzID09IHBhZ2VfY2FsbCEucHJvY2VzcyAmJiBmcmFtZS5wYWdlID09IG51bGwpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbml0aWFsIHBhZ2UgZmlsbCBub3QgaGFuZGxlZCBwcm9wZXJseVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBpbmNyZW1lbnQgcGFnZSBmYXVsdHMgKi9cclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWxfcGFnZV9mYXVsdHMrKztcclxuICAgICAgICAgICAgICAgIHBhZ2VfY2FsbC5wcm9jZXNzLnBhZ2VfZmF1bHRzKys7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiByZXBsYWNlIGEgcGFnZSAqL1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWRfb2ZfZnJhbWVfdG9fcmVwbGFjZSA9IHRoaXMucmVwbGFjZW1lbnRBbGdvcml0aG0uaGFuZGxlUGFnZUZhdWx0KHRoaXMuZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGwpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaWRfb2ZfZnJhbWVfdG9fcmVwbGFjZSAhPSAtMSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lc1t0aGlzLmdldEZyYW1lSW5kZXhCeUlkKGlkX29mX2ZyYW1lX3RvX3JlcGxhY2UpXS5wYWdlID0gcGFnZV9jYWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBlbnN1cmUgdGhhdCB0aGUgcGFnZSBpcyBub3cgaW4gbWVtb3J5ICovXHJcbiAgICAgICAgICAgIGxldCBwYWdlX2luX21lbW9yeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZyYW1lIG9mIHRoaXMuZnJhbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnJhbWUucGFnZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgoPFBhZ2U+ZnJhbWUucGFnZSkuaWQgPT0gcGFnZV9jYWxsLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogcGFnZSBpcyBpbiBtZW1vcnkgKi9cclxuICAgICAgICAgICAgICAgICAgICBwYWdlX2luX21lbW9yeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFwYWdlX2luX21lbW9yeSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFnZSBmYXVsdCBub3QgaGFuZGxlZCBwcm9wZXJseSAtIHBhZ2Ugbm90IGluIG1lbW9yeVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogY2FsbCB0aGUgcGFnZSAqL1xyXG4gICAgICAgICAgICBwYWdlX2NhbGwuY2FsbCh0aGlzLnRpbWUsIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpbWUrKztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50U3RhdGVEYXRhKHBhZ2VfY2FsbDogUGFnZSk6IE1lbW9yeVN0YXRlRGF0YSB7XHJcbiAgICAgICAgLyogZ2V0IHRoZSBzdGF0ZSBvZiB0aGUgbWVtb3J5IGFzc2lnbmVkIHRvIHRoZSBwcm9jZXNzICovXHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc19mcmFtZXMgPSB0aGlzLmZyYW1lcy5maWx0ZXIoZnJhbWUgPT4gZnJhbWUucHJvY2VzcyA9PSBwYWdlX2NhbGwucHJvY2Vzcyk7XHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc19jYWxsX2hpc3RvcnkgPSB0aGlzLmNhbGxfaGlzdG9yeS5maWx0ZXIoY2FsbCA9PiBjYWxsLnByb2Nlc3MgPT0gcGFnZV9jYWxsLnByb2Nlc3MpO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhOiBNZW1vcnlTdGF0ZURhdGEgPSB7XHJcbiAgICAgICAgICAgIHBhZ2VfY2FsbDogcGFnZV9jYWxsLFxyXG4gICAgICAgICAgICBjdXJyZW50X2ZyYW1lczogcHJvY2Vzc19mcmFtZXMsXHJcbiAgICAgICAgICAgIHByZXZpb3VzX3BhZ2VfY2FsbHM6IHByb2Nlc3NfY2FsbF9oaXN0b3J5LFxyXG4gICAgICAgICAgICBwcm9jZXNzZXM6IHRoaXMucHJvY2Vzc2VzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsX3F1ZXVlLmxlbmd0aCA9PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RnJhbWVJbmRleEJ5SWQoaWQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZyYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0uaWQgPT0gaWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZXN1bHRzKCk6IFJlc3VsdHMge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB7XHJcbiAgICAgICAgICAgIHRvdGFsX3BhZ2VfZmF1bHRzOiB0aGlzLnRvdGFsX3BhZ2VfZmF1bHRzLFxyXG4gICAgICAgICAgICB0b3RhbF9wYWdlX2hpdHM6IHRoaXMuY2FsbF9oaXN0b3J5Lmxlbmd0aCAtIHRoaXMudG90YWxfcGFnZV9mYXVsdHMsXHJcbiAgICAgICAgICAgIHRvdGFsX2NhbGxzOiB0aGlzLmNhbGxfaGlzdG9yeS5sZW5ndGhcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIHNpbXVsYXRlKCk6IFJlc3VsdHMge1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG5cclxuICAgICAgICAvKiBlbnN1cmUgdGhhdCBhbiBhbGdvcml0aG0gaXMgc2VsZWN0ZWQgKi9cclxuICAgICAgICBpZiAodGhpcy5hbGxvY2F0aW9uQWxnb3JpdGhtID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWxnb3JpdGhtIHNlbGVjdGVkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogYWxsb2NhdGUgZnJhbWVzIHRvIHByb2Nlc3NlcyAqL1xyXG4gICAgICAgIHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobS5hbGxvY2F0ZUZyYW1lcz8uKHRoaXMuZnJhbWVzLCB0aGlzLnByb2Nlc3Nlcyk7XHJcblxyXG4gICAgICAgIHdoaWxlICghdGhpcy5pc0ZpbmlzaGVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5uZXh0VGljaygpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgTUFYX1RJTUUgPSAyMDA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWUgPiBNQVhfVElNRSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiU2ltdWxhdGlvbiB0aW1lZCBvdXRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzdWx0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlSZXN1bHRzKHJlc3VsdHM/OiBSZXN1bHRzLCBhbGdTdHI6IHN0cmluZyA9IHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobSEubmFtZSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdHNfd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c193cmFwcGVyXCIpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdHNfd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHNfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNcIikgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcmVzdWx0c19lbC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgQWxnb3JpdGhtOiAke2FsZ1N0ci50b1VwcGVyQ2FzZSgpfVxyXG5cclxuICAgICAgICBUb3RhbCBwYWdlIGZhdWx0czogPGIgc3R5bGU9J2NvbG9yOiByZWQnPiR7cmVzdWx0cyEudG90YWxfcGFnZV9mYXVsdHMudG9GaXhlZCgwKX08L2I+XHJcbiAgICAgICAgVG90YWwgcGFnZSBoaXRzOiA8YiBzdHlsZT0nY29sb3I6IGxpbWUnPiR7cmVzdWx0cyEudG90YWxfcGFnZV9oaXRzLnRvRml4ZWQoMCl9PC9iPlxyXG4gICAgICAgIFRvdGFsIHBhZ2UgY2FsbHM6IDxiPiR7cmVzdWx0cyEudG90YWxfY2FsbHMudG9GaXhlZCgwKX08L2I+XHJcbiAgICAgICAgYC5yZXBsYWNlKFJlZ0V4cChcIlxcblwiLCBcImdcIiksIFwiPGJyIC8+XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBhcmVBbGxBbmREaXNwbGF5UmVzdWx0cyhhbGdvcml0aG1zOiBBcnJheTxBbGxvY2F0aW9uQWxnb3JpdGhtPik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdHNfd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c193cmFwcGVyXCIpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdHNfd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHNfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNcIikgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcmVzdWx0c19lbC5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsZ29yaXRobXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBbGdvcml0aG0oYWxnb3JpdGhtc1tpXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHM6IFJlc3VsdHMgPSB0aGlzLnNpbXVsYXRlKCk7XHJcblxyXG4gICAgICAgICAgICByZXN1bHRzX2VsLmlubmVySFRNTCArPSBgXHJcbiAgICAgICAgICAgIEFsZ29yaXRobTogJHthbGdvcml0aG1zW2ldLm5hbWUudG9VcHBlckNhc2UoKX1cclxuICAgICAgICAgICAgVG90YWwgcGFnZSBmYXVsdHM6IDxiIHN0eWxlPSdjb2xvcjogcmVkJz4ke3Jlc3VsdHMudG90YWxfcGFnZV9mYXVsdHMudG9GaXhlZCgwKX08L2I+XHJcbiAgICAgICAgICAgIFRvdGFsIHBhZ2UgaGl0czogPGIgc3R5bGU9J2NvbG9yOiBsaW1lJz4ke3Jlc3VsdHMudG90YWxfcGFnZV9oaXRzLnRvRml4ZWQoMCl9PC9iPlxyXG4gICAgICAgICAgICBUb3RhbCBwYWdlIGNhbGxzOiA8Yj4ke3Jlc3VsdHMudG90YWxfY2FsbHMudG9GaXhlZCgwKX08L2I+XHJcbiAgICAgICAgICAgIGAucmVwbGFjZShSZWdFeHAoXCJcXG5cIiwgXCJnXCIpLCBcIjxiciAvPlwiKTtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdHNfZWwuaW5uZXJIVE1MICs9IFwiPGJyIC8+XCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IElBbmltYXRpb25HVUkgZnJvbSBcIi4uLy4uL3NoYXJlZC9pbnRlcmZhY2VzL0lBbmltYXRpb25HVUlcIjtcclxuaW1wb3J0IE1lbnUgZnJvbSBcIi4vTWVudVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5pbWF0aW9uR1VJIGltcGxlbWVudHMgSUFuaW1hdGlvbkdVSSB7XHJcbiAgICBtZW51OiBNZW51XHJcblxyXG4gICAgdmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlXHJcbiAgICBwbGF5aW5nOiBib29sZWFuID0gZmFsc2VcclxuICAgIHNwZWVkOiBudW1iZXIgPSAxXHJcblxyXG4gICAgR1VJOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBNRU5VOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgcGxheV9wYXVzZV9idXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIHN0ZXBfYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBzdG9wX2J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgc3BlZWRfc2xpZGVyOiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBpbmZvX2FsZ29yaXRobTogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgaW5mb190aW1lOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBpbmZvX2lzX2RvbmU6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBpbmZvX2luX3F1ZXVlOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBpbmZvX2ZpbmlzaGVkOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBpbmZvX3RvdGFsX3BhZ2VfZmF1bHRzOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBpbmZvX3RvdGFsX3BhZ2VfaGl0czogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGZyYW1lX3Jvd3M6IEFycmF5PEhUTUxUYWJsZVJvd0VsZW1lbnQ+ID0gW11cclxuXHJcbiAgICBzZWVfY29kZV9idXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICAvKiBzZXRJbnRlcnZhbCAqL1xyXG4gICAgc3RvcmVkU2V0SW50ZXJ2YWw6IE5vZGVKUy5UaW1lciB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgY29uc3RydWN0b3IobWVudTogTWVudSkge1xyXG4gICAgICAgIHRoaXMubWVudSA9IG1lbnU7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLkdVSSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2d1aVwiKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICB0aGlzLk1FTlUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNldHRpbmdzXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fcGxheV9wYXVzZVwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICB0aGlzLnN0ZXBfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fc3RlcFwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICB0aGlzLnN0b3BfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fc3RvcFwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICB0aGlzLnNwZWVkX3NsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3NwZWVkX3NsaWRlclwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgICAgICB0aGlzLmluZm9fYWxnb3JpdGhtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25faW5mb19hbGdvcml0aG1fdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5pbmZvX3RpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9pbmZvX3RpbWVfdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9pc19kb25lXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgICAgICB0aGlzLmluZm9faW5fcXVldWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGxzX2luX3F1ZXVlX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW5mb19maW5pc2hlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FsbHNfZmluaXNoZWRfdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5pbmZvX3RvdGFsX3BhZ2VfZmF1bHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbF9wYWdlX2ZhdWx0c192YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICB0aGlzLmluZm9fdG90YWxfcGFnZV9oaXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbF9wYWdlX2hpdHNfdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuc2VlX2NvZGVfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2RlX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogaGlkZSBlbGVtZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5mb19pc19kb25lLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBCaW5kIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5aW5nKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RlcF9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zdGVwKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcF9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGVlZF9zbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zcGVlZCA9IHBhcnNlSW50KHRoaXMuc3BlZWRfc2xpZGVyIS52YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFNwZWVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VlX2NvZGVfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1lbnUubWVtb3J5LmFsbG9jYXRpb25BbGdvcml0aG0gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFsZ29yaXRobU5hbWUgPSB0aGlzLm1lbnUubWVtb3J5LmFsbG9jYXRpb25BbGdvcml0aG0ubmFtZTtcclxuICAgICAgICAgICAgd2luZG93Lm9wZW4oYGh0dHBzOi8vZ2l0aHViLmNvbS9icnVuMG5lL3NjaGVkdWxpbmctc2ltL2Jsb2IvbWFpbi9wYWdlX3JlcGxhY2VtZW50X3NyYy9jbGFzc2VzL2FsZ29yaXRobXMvJHthbGdvcml0aG1OYW1lfS50c2AsIFwiX2JsYW5rXCIpIS5mb2N1cygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRJbnRlcnZhbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFNwZWVkKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHByZXBhcmUgSFRNTCB0YWJsZSBvZiBzdGF0ZXNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluaXRTdGF0ZVRhYmxlKCk7XHJcbiAgICB9XHJcbiAgICB0b2dnbGVQbGF5aW5nKHBsYXlpbmc/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHBsYXlpbmcgPT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy5wbGF5aW5nID0gIXRoaXMucGxheWluZztcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMucGxheWluZyA9IHBsYXlpbmc7XHJcblxyXG4gICAgICAgIHRoaXMucmVmcmVzaFNwZWVkKCk7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24hLmlubmVySFRNTCA9IHRoaXMucGxheWluZyA/IFwiUGF1c2VcIiA6IFwiUGxheVwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZVZpc2libGUodmlzaWJsZT86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAodmlzaWJsZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSAhdGhpcy52aXNpYmxlO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLkdVSSEuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgdGhpcy5NRU5VIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbnUuZGlzcGxheS5yZXNpemVDYWxsYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0N1cnJlbnRTdGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0N1cnJlbnRTdGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5HVUkhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgdGhpcy5NRU5VIS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdG9yZWRTZXRJbnRlcnZhbCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0b3JlZFNldEludGVydmFsKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVudS5kaXNwbGF5LnJlc2l6ZUNhbGxiYWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZW51LnJlZnJlc2hDYWxscygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubWVudS5yZWZyZXNoQ2FsbHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMucGxheV9wYXVzZV9idXR0b24gPT0gbnVsbCB8fCB0aGlzLmluZm9faXNfZG9uZSA9PSBudWxsIHx8IHRoaXMuc3RlcF9idXR0b24gPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FsbCBpbml0KCkgZmlyc3QhXCIpO1xyXG5cclxuICAgICAgICB0aGlzLm1lbnUubWVtb3J5LmluaXQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbi5pbm5lckhUTUwgPSBcIlBsYXlcIjtcclxuICAgICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdGVwX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRTdGF0ZVRhYmxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnRBbmltYXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZSh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3Q3VycmVudFN0YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHJlZnJlc2ggaW5mb1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucmVmcmVzaEluZm8oKTtcclxuXHJcbiAgICAgICAgdGhpcy5kcmF3Q2FsbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0U3RhdGVUYWJsZSgpOiB2b2lkIHtcclxuICAgICAgICAvKiBncmFiIGVsZW1lbnRzICovXHJcbiAgICAgICAgY29uc3QgdGltZV9yb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl90YWJsZV90aW1lXCIpIGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgY2FsbHNfcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfcGFnZV9jYWxsc1wiKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfYm9keVwiKSBhcyBIVE1MVGFibGVTZWN0aW9uRWxlbWVudDtcclxuXHJcbiAgICAgICAgLyogY2xlYXIgdGFibGUgKi9cclxuICAgICAgICB0aW1lX3Jvdy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIGNhbGxzX3Jvdy5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICAvKiB0aW1lICovXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lX3Jvd19oZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgIHRpbWVfcm93X2hlYWRlci5pbm5lckhUTUwgPSBcIlRpbWVcIjtcclxuICAgICAgICAgICAgdGltZV9yb3dfaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJcIik7XHJcbiAgICAgICAgICAgIHRpbWVfcm93LmFwcGVuZENoaWxkKHRpbWVfcm93X2hlYWRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBjYWxscyAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgY2FsbHNfcm93X2hlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgY2FsbHNfcm93X2hlYWRlci5pbm5lckhUTUwgPSBcIlBhZ2UgY2FsbHNcIjtcclxuICAgICAgICAgICAgY2FsbHNfcm93X2hlYWRlci5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyXCIpO1xyXG4gICAgICAgICAgICBjYWxsc19yb3cuYXBwZW5kQ2hpbGQoY2FsbHNfcm93X2hlYWRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBmcmFtZXMgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8qIHJlbW92ZSBvbGQgcm93cyAqL1xyXG4gICAgICAgICAgICB3aGlsZSAodGJvZHkubGFzdENoaWxkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gKHRib2R5Lmxhc3RDaGlsZCBhcyBIVE1MRWxlbWVudCkuaWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWQgPT0gXCJhbmltYXRpb25fdGFibGVfcGFnZV9jYWxsc1wiKSAvLyBza2lwIHRoZSByb3cgd2l0aCBwYWdlIGNhbGxzXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgdGJvZHkucmVtb3ZlQ2hpbGQodGJvZHkubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogYWRkIGEgcm93IGZvciBlYWNoIGZyYW1lICovXHJcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lX3Jvd3M6IEFycmF5PEhUTUxUYWJsZVJvd0VsZW1lbnQ+ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW51Lm1lbW9yeS5udW1iZXJfb2ZfZnJhbWVzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lX3JvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFtZV9yb3dfaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICAgICAgZnJhbWVfcm93X2hlYWRlci5pbm5lckhUTUwgPSBgRnJhbWUgJHtpfWA7XHJcbiAgICAgICAgICAgICAgICBmcmFtZV9yb3cuYXBwZW5kQ2hpbGQoZnJhbWVfcm93X2hlYWRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgZnJhbWVfcm93cy5wdXNoKGZyYW1lX3Jvdyk7XHJcbiAgICAgICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChmcmFtZV9yb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVfcm93cyA9IGZyYW1lX3Jvd3M7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdDYWxscyhTVEFSVF9YPzogbnVtYmVyLCBTVEFSVF9ZPzogbnVtYmVyLCBXSURUSD86IG51bWJlciwgSEVJR0hUPzogbnVtYmVyLCBjYWxsc1RvRHJhdz86IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8qIGdyYWIgZWxlbWVudHMgKi9cclxuICAgICAgICBjb25zdCB0aW1lX3JvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX3RpbWVcIikgYXMgSFRNTFRhYmxlUm93RWxlbWVudDtcclxuICAgICAgICBjb25zdCBjYWxsc19yb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl90YWJsZV9wYWdlX2NhbGxzXCIpIGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQ7XHJcblxyXG4gICAgICAgIC8qIG9ubHkgYWRkIG9uZSBjb2x1bW4gZm9yIHRoZSBuZXcgc3RhdGUgKi9cclxuICAgICAgICBjb25zdCBuZXdDYWxsID0gdGhpcy5tZW51Lm1lbW9yeS5jYWxsX2hpc3RvcnkuYXQoLTEpO1xyXG4gICAgICAgIGlmIChuZXdDYWxsID09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgLyogdGltZSAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZVRpY2tFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgdGltZVRpY2tFbC5pbm5lckhUTUwgPSBgJHt0aGlzLm1lbnUubWVtb3J5LnRpbWV9YDtcclxuICAgICAgICAgICAgdGltZV9yb3cuYXBwZW5kQ2hpbGQodGltZVRpY2tFbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBjYWxscyAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgY2FsbHNUaWNrRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgIGNhbGxzVGlja0VsLmlubmVySFRNTCA9IGAke25ld0NhbGwuaWR9YDtcclxuXHJcbiAgICAgICAgICAgIGNhbGxzX3Jvdy5hcHBlbmRDaGlsZChjYWxsc1RpY2tFbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBmcmFtZXMgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW51Lm1lbW9yeS5udW1iZXJfb2ZfZnJhbWVzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lX3JvdyA9IHRoaXMuZnJhbWVfcm93c1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLm1lbnUubWVtb3J5LmZyYW1lc1tpXS5wYWdlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lVGlja0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICAgICAgZnJhbWVUaWNrRWwuaW5uZXJIVE1MID0gYCR7cGFnZSAhPSBudWxsID8gcGFnZS5pZCA6IFwiXCJ9YDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFnZSAhPSBudWxsICYmIHBhZ2UuaWQgPT0gbmV3Q2FsbC5pZCAmJiB0aGlzLm1lbnUubWVtb3J5Lmxhc3RfY2FsbF9jYXVzZWRfZmF1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHBhZ2UgZmF1bHRzIHJlZFxyXG4gICAgICAgICAgICAgICAgICAgIGZyYW1lVGlja0VsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWVudS5tZW1vcnkuZnJhbWVzW2ldLnByb2Nlc3MgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYW1lVGlja0VsLmlubmVySFRNTCArPSBgIDxzcGFuIHN0eWxlPSdjb2xvcjogeWVsbG93Jz4oJHt0aGlzLm1lbnUubWVtb3J5LmZyYW1lc1tpXS5wcm9jZXNzIS5pZH0pPC9zcGFuPmA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnJhbWVfcm93LmFwcGVuZENoaWxkKGZyYW1lVGlja0VsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogc2Nyb2xsIHRvIHRoZSByaWdodCAqL1xyXG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fY2FsbF90YWJsZVwiKSBhcyBIVE1MVGFibGVFbGVtZW50O1xyXG4gICAgICAgIHRhYmxlLnNjcm9sbExlZnQgPSB0YWJsZS5zY3JvbGxXaWR0aDtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoSW5mbygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBtZW1vcnkgPSB0aGlzLm1lbnUubWVtb3J5O1xyXG4gICAgICAgIGlmIChtZW1vcnkuYWxsb2NhdGlvbkFsZ29yaXRobSA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIHN0YXJ0QW5pbWF0aW9uKCkgZmlyc3QhXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmluZm9fYWxnb3JpdGhtIS5pbm5lckhUTUwgPSBtZW1vcnkuYWxsb2NhdGlvbkFsZ29yaXRobS5uYW1lO1xyXG4gICAgICAgIHRoaXMuaW5mb190aW1lIS5pbm5lckhUTUwgPSBtZW1vcnkudGltZS50b1N0cmluZygpO1xyXG5cclxuICAgICAgICBpZiAobWVtb3J5LmlzRmluaXNoZWQoKSlcclxuICAgICAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUhLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmluZm9faXNfZG9uZSEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgICB0aGlzLmluZm9fdG90YWxfcGFnZV9oaXRzIS5pbm5lckhUTUwgPSAobWVtb3J5LmNhbGxfaGlzdG9yeS5sZW5ndGggLSBtZW1vcnkudG90YWxfcGFnZV9mYXVsdHMpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5pbmZvX3RvdGFsX3BhZ2VfZmF1bHRzIS5pbm5lckhUTUwgPSBtZW1vcnkudG90YWxfcGFnZV9mYXVsdHMudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2luX3F1ZXVlIS5pbm5lckhUTUwgPSBtZW1vcnkuY2FsbF9xdWV1ZS5sZW5ndGgudG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLmluZm9fZmluaXNoZWQhLmlubmVySFRNTCA9IG1lbW9yeS5jYWxsX2hpc3RvcnkubGVuZ3RoLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVmcmVzaFNwZWVkKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnN0b3JlZFNldEludGVydmFsICE9IG51bGwpXHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zdG9yZWRTZXRJbnRlcnZhbCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcmVkU2V0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmJpbmQodGhpcyksIDEwMDAgLyB0aGlzLnNwZWVkKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGVwKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbnUubWVtb3J5LmlzRmluaXNoZWQoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLm1lbnUubWVtb3J5Lm5leHRUaWNrKCk7XHJcbiAgICAgICAgdGhpcy5kcmF3Q3VycmVudFN0YXRlKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1lbnUubWVtb3J5LmlzRmluaXNoZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXlpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLm1lbnUubWVtb3J5LmRpc3BsYXlSZXN1bHRzKHRoaXMubWVudS5tZW1vcnkuZ2V0UmVzdWx0cygpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJEb25lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFmdGVyRG9uZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pbmZvX2lzX2RvbmUgPT0gbnVsbCB8fCB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uID09IG51bGwgfHwgdGhpcy5zdGVwX2J1dHRvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIGluaXQoKSBmaXJzdCFcIik7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19pc19kb25lLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3RlcF9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBhZ2UgZnJvbSBcIi4vUGFnZVwiO1xyXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi9Qcm9jZXNzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGcmFtZSB7XHJcbiAgICBpZDogbnVtYmVyXHJcbiAgICBwYWdlOiBQYWdlIHwgbnVsbFxyXG4gICAgcHJvY2VzczogUHJvY2VzcyB8IG51bGxcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb2Nlc3MgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUmVwbGFjZW1lbnRBbGdvcml0aG0gZnJvbSBcIi4vUmVwbGFjZW1lbnRBbGdvcml0aG1cIjtcclxuaW1wb3J0IHsgTWVtb3J5U3RhdGVEYXRhIH0gZnJvbSBcIi4vQWxsb2NhdGluZ01NVVwiO1xyXG5cclxuLyoqXHJcbiAqIExlYXN0IFJlY2VudGx5IFVzZWQgKExSVSlcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExSVSBpbXBsZW1lbnRzIFJlcGxhY2VtZW50QWxnb3JpdGhtIHtcclxuICAgIG5hbWU6IHN0cmluZyA9IFwiTFJVXCJcclxuXHJcbiAgICBoYW5kbGVQYWdlRmF1bHQoZGF0YTogTWVtb3J5U3RhdGVEYXRhKTogbnVtYmVyIHtcclxuICAgICAgICAvKiBmaW5kIHRoZSBwYWdlIHRoYXQgd2FzIHVzZWQgdGhlIGxvbmdlc3QgYWdvICovXHJcbiAgICAgICAgbGV0IGZyYW1lX3RvX3JlcGxhY2VfaW5kZXggPSAtMTtcclxuICAgICAgICBsZXQgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID0gLTE7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jdXJyZW50X2ZyYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IGRhdGEuY3VycmVudF9mcmFtZXNbaV07XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWUucHJvY2VzcyAhPSBkYXRhLnBhZ2VfY2FsbC5wcm9jZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRnJhbWUgaXMgYXNzaWduZWQgdG8gYSBkaWZmZXJlbnQgcHJvY2VzcyAtIHRoaXMgc2hvdWxkIGJlIGVuc3VyZWQgbm90IHRvIGhhcHBlbiBieSB0aGUgY2FsbGVyXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWUucGFnZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGcmFtZSBpcyBlbXB0eSAtIHRoaXMgc2hvdWxkIGJlIGVuc3VyZWQgbm90IHRvIGhhcHBlbiBieSB0aGUgY2FsbGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBwYWdlX2luZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBkYXRhLnByZXZpb3VzX3BhZ2VfY2FsbHMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzX3BhZ2VfY2FsbCA9IGRhdGEucHJldmlvdXNfcGFnZV9jYWxsc1tqXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNfcGFnZV9jYWxsLmlkID09IGZyYW1lLnBhZ2UuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlX2luZGV4ID0gajtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VfaW5kZXggPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIC8qIHBhZ2Ugd2FzIG5ldmVyIHVzZWQgYmVmb3JlICovXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VfaW5kZXggPCBsZWFzdF9yZWNlbnRseV91c2VkX3BhZ2VfaW5kZXggfHwgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBwYWdlIHdhcyB1c2VkIGxvbmdlciBhZ28gKi9cclxuICAgICAgICAgICAgICAgIGZyYW1lX3RvX3JlcGxhY2VfaW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID0gcGFnZV9pbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZyYW1lX3RvX3JlcGxhY2VfaW5kZXggPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gZnJhbWUgdG8gcmVwbGFjZSBmb3VuZCBieSBMUlVcIik7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhLmN1cnJlbnRfZnJhbWVzW2ZyYW1lX3RvX3JlcGxhY2VfaW5kZXhdLmlkO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBJTWVudSBmcm9tIFwiLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvSU1lbnVcIjtcclxuaW1wb3J0IERpc3BsYXkgZnJvbSBcIi4uLy4uL3NoYXJlZC9jbGFzc2VzL0Rpc3BsYXlcIjtcclxuaW1wb3J0IEFsbG9jYXRpbmdNTVUgZnJvbSBcIi4vQWxsb2NhdGluZ01NVVwiO1xyXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi9Qcm9jZXNzXCI7XHJcbmltcG9ydCBQYWdlIGZyb20gXCIuL1BhZ2VcIjtcclxuaW1wb3J0IEVxdWFsIGZyb20gXCIuL2FsZ29yaXRobXMvRXF1YWxcIjtcclxuaW1wb3J0IEFuaW1hdGlvbkdVSSBmcm9tIFwiLi9BbmltYXRpb25HVUlcIjtcclxuaW1wb3J0IFByb3BvcnRpb25hbCBmcm9tIFwiLi9hbGdvcml0aG1zL1Byb3BvcnRpb25hbFwiO1xyXG5pbXBvcnQgUGFnZUZhdWx0Q29udHJvbCBmcm9tIFwiLi9hbGdvcml0aG1zL1BhZ2VGYXVsdENvbnRyb2xcIjtcclxuaW1wb3J0IExvY2FsaXR5TW9kZWwgZnJvbSBcIi4vYWxnb3JpdGhtcy9Mb2NhbGl0eU1vZGVsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZW51IGltcGxlbWVudHMgSU1lbnUge1xyXG4gICAgZGlzcGxheTogRGlzcGxheVxyXG4gICAgbWVtb3J5OiBBbGxvY2F0aW5nTU1VXHJcbiAgICBhbmltYXRpb25HVUk6IEFuaW1hdGlvbkdVSVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZGlzcGxheSA9IG5ldyBEaXNwbGF5KCk7XHJcbiAgICAgICAgdGhpcy5tZW1vcnkgPSBuZXcgQWxsb2NhdGluZ01NVSgpO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkdVSSA9IG5ldyBBbmltYXRpb25HVUkodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBydW5fYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJydW5fYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHJ1bl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5ydW4oKSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBydW5fd2l0aF9hbmltYXRpb25fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMucnVuKHRydWUpIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGFkZF9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5hZGRQcm9jZXNzZXMoKSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xlYXJfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbGVhcl9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgY2xlYXJfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuY2xlYXJQcm9jZXNzZXMoKSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuYWRkQ2FsbHMoKSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xlYXJfY2FsbF9xdWV1ZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsZWFyX2NhbGxfcXVldWVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGNsZWFyX2NhbGxfcXVldWVfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuY2xlYXJDYWxscygpIH0pO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIGluaXQgXHJcbiAgICAgICAgICogc2V0IGNhbGxiYWNrIGZvciByZXNpemVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1lbW9yeS5pbml0KDUsIDMpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheS5pbml0KFwibWFpbl9jYW52YXNcIik7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25HVUkuaW5pdCgpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheS5zZXRSZXNpemVDYWxsYmFjaygoKSA9PiB7IHRoaXMucmVmcmVzaENhbGxzKCkgfSk7XHJcblxyXG4gICAgICAgIC8qKiBcclxuICAgICAgICAgKiBiYXNpYyBzZXR0aW5nc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IG51bWJlcl9vZl9mcmFtZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfZnJhbWVfY291bnRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBudW1iZXJfb2ZfZnJhbWVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGU6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld192YWwgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZS50YXJnZXQpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc05hTihuZXdfdmFsKSB8fCBuZXdfdmFsIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJJbnZhbGlkIG51bWJlciBvZiBmcmFtZXNcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVtb3J5LmluaXQodGhpcy5tZW1vcnkubnVtYmVyX29mX3BhZ2VzLCBuZXdfdmFsKTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogYWxnb3JpdGhtIHNlbGVjdFxyXG4gICAgICAgICAqIC0+IGRpc2FibGUgcnVubmluZyB3aXRoIGFuaW1hdGlvbiBpZiBjb21wYXJlX2FsbFxyXG4gICAgICAgICAqIC0+IHNob3cgc3BlY2lhbCBvcHRpb25zIGZvciBwYWdlIGZhdWx0IGNvbnRyb2xcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBhbGdvcml0aG1fc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhX3R5cGVcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgYWxnb3JpdGhtX3NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlOiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoKDxIVE1MU2VsZWN0RWxlbWVudD5lLnRhcmdldCkudmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gXCJjb21wYXJlX2FsbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxCdXR0b25FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvblwiKSkuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgKDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b25cIikpLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoKDxIVE1MU2VsZWN0RWxlbWVudD5lLnRhcmdldCkudmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gXCJmYXVsdF9jb250cm9sXCIgfHxcclxuICAgICAgICAgICAgICAgICg8SFRNTFNlbGVjdEVsZW1lbnQ+ZS50YXJnZXQpLnZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IFwiY29tcGFyZV9hbGxcIikge1xyXG4gICAgICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWluX3BhZ2VfZmF1bHRzX2FsbFwiKSkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgICg8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21heF9wYWdlX2ZhdWx0c19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic190aW1lX3dpbmRvd19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19taW5fcGFnZV9mYXVsdHNfYWxsXCIpKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfcGFnZV9mYXVsdHNfYWxsXCIpKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic190aW1lX3dpbmRvd19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBcclxuICAgICAgICAgKiByZXN1bHRzIGJ1dHRvbnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCByZXN1bHRzX2Nsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzX2Nsb3NlXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdHNfY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNfd3JhcHBlclwiKSkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIHJlZnJlc2ggY2FsbHMgXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRQcm9jZXNzZXMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc19jb3VudCA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNfY291bnRcIikpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgY29uc3QgcGFnZV9yYW5nZV9taW4gPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21pbl9yYW5nZVwiKSkudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IHBhZ2VfcmFuZ2VfbWF4ID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfcmFuZ2VcIikpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FsbF9jb3VudF9taW4gPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21pbl9jYWxsc1wiKSkudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IGNhbGxfY291bnRfbWF4ID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfY2FsbHNcIikpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRfcmFuZ2VfbWluID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9jZXNzX2NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcGFnZV9yYW5nZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChwYWdlX3JhbmdlX21heCAtIHBhZ2VfcmFuZ2VfbWluICsgMSkpICsgcGFnZV9yYW5nZV9taW47XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5hZGRQcm9jZXNzKG5ldyBQcm9jZXNzKFxyXG4gICAgICAgICAgICAgICAgW2N1cnJlbnRfcmFuZ2VfbWluLCBjdXJyZW50X3JhbmdlX21pbiArIHBhZ2VfcmFuZ2VdLFxyXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGNhbGxfY291bnRfbWF4IC0gY2FsbF9jb3VudF9taW4gKyAxKSkgKyBjYWxsX2NvdW50X21pbixcclxuICAgICAgICAgICAgICAgIGlcclxuICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIHRoaXMubWVtb3J5LnByb2Nlc3Nlc1t0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoIC0gMV0uZ2VuZXJhdGVDYWxscygpO1xyXG5cclxuICAgICAgICAgICAgY3VycmVudF9yYW5nZV9taW4gKz0gcGFnZV9yYW5nZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJQcm9jZXNzZXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tZW1vcnkuY2xlYXJQcm9jZXNzZXMoKTtcclxuICAgICAgICB0aGlzLm1lbW9yeS5jbGVhclBhZ2VDYWxsUG9vbCgpO1xyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENhbGxzKCk6IHZvaWQge1xyXG4gICAgICAgIC8qIGNvbWJpbmUgYWxsIHByb2Nlc3MgY2FsbHMgaW50byBvbmUgYXJyYXkgKi9cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubWVtb3J5LnByb2Nlc3Nlc1tpXS5nZXRDYWxscygpLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9yeS5jYWxsX3Bvb2wucHVzaChuZXcgUGFnZSh0aGlzLm1lbW9yeS5wcm9jZXNzZXNbaV0uZ2V0Q2FsbHMoKVtqXSwgdGhpcy5tZW1vcnkucHJvY2Vzc2VzW2ldKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLyogc2h1ZmZsZSBhcnJheSAqL1xyXG4gICAgICAgIHRoaXMubWVtb3J5LmNhbGxfcG9vbC5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpO1xyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQ2FsbHMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tZW1vcnkuY2FsbF9wb29sID0gW107XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoQ2FsbHMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudF9jb3VudF9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicF9jdXJyZW50X2NvdW50XCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIGN1cnJlbnRfY291bnRfZWwuaW5uZXJIVE1MID0gYCgke3RoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGgudG9TdHJpbmcoKX0pYDtcclxuXHJcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aCA+IDAgJiYgdGhpcy5tZW1vcnkuY2FsbF9wb29sLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24uYXR0cmlidXRlcy5zZXROYW1lZEl0ZW0oZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogZGlzcGxheSBpbmRpdmlkdWFsIHByb2Nlc3MgY2FsbHMgKi9cclxuICAgICAgICBjb25zdCBhbGxfcHJvY2Vzc2VzX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGxfcHJvY2Vzc2VzXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIGFsbF9wcm9jZXNzZXNfZWwuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvY2VzcyA9IHRoaXMubWVtb3J5LnByb2Nlc3Nlc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NfZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgcHJvY2Vzc19lbC5jbGFzc0xpc3QuYWRkKFwicHJvY2Vzc1wiKTtcclxuXHJcbiAgICAgICAgICAgIHByb2Nlc3NfZWwuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwicHJvY2Vzc19uYW1lXCI+Q2FsbHMgb2YgcHJvY2VzcyAke2l9OiA8L3NwYW4+IDxzcGFuIGNsYXNzPVwicHJvY2Vzc19jYWxsc1wiPiR7cHJvY2Vzcy5nZXRDYWxscygpLmpvaW4oXCIsIFwiKX08L3NwYW4+PGJyIC8+YDtcclxuXHJcbiAgICAgICAgICAgIGFsbF9wcm9jZXNzZXNfZWwuYXBwZW5kQ2hpbGQocHJvY2Vzc19lbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGFsbF9wcm9jZXNzZXNfZWwuaW5uZXJIVE1MID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6IHllbGxvdyc+Tm8gcHJvY2Vzc2VzIGFkZGVkIHlldC48L3NwYW4+XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBkaXNwbGF5IGNhbGwgcXVldWUgKi9cclxuICAgICAgICBjb25zdCBjYWxsX2NvdW50X2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjdXJyZW50X2NhbGxfY291bnRcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbiAgICAgICAgY2FsbF9jb3VudF9lbC5pbm5lckhUTUwgPSBgKCR7dGhpcy5tZW1vcnkuY2FsbF9wb29sLmxlbmd0aC50b1N0cmluZygpfSlgO1xyXG5cclxuICAgICAgICBjb25zdCBjYWxsX3F1ZXVlX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluX2NhbGxfcXVldWVcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgY2FsbF9xdWV1ZV9lbC5pbm5lckhUTUwgPSB0aGlzLm1lbW9yeS5jYWxsX3Bvb2wubWFwKChwYWdlKSA9PiB7IHJldHVybiBwYWdlLmlkIH0pLmpvaW4oXCIsIFwiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWVtb3J5LmNhbGxfcG9vbC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBjYWxsX3F1ZXVlX2VsLmlubmVySFRNTCA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOiB5ZWxsb3cnPk5vIGNhbGxzIGluIHF1ZXVlLjwvc3Bhbj5cIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcnVuKGFuaW1hdGlvbj86IGJvb2xlYW4gfCB1bmRlZmluZWQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aCA+IHRoaXMubWVtb3J5LmZyYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgYWxlcnQoXCJOb3QgZW5vdWdoIGZyYW1lcyBmb3IgYWxsIHByb2Nlc3Nlc1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWxnU3RyID0gKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYV90eXBlXCIpKS52YWx1ZTtcclxuICAgICAgICBsZXQgY29tcGFyZV9hbGw6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgbWluX2ZyZXEgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWluX3BhZ2VfZmF1bHRzXCIpKS52YWx1ZSk7XHJcbiAgICAgICAgY29uc3QgbWF4X2ZyZXEgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWF4X3BhZ2VfZmF1bHRzXCIpKS52YWx1ZSk7XHJcbiAgICAgICAgY29uc3QgdGltZV93aW5kb3cgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfdGltZV93aW5kb3dcIikpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChhbGdTdHIudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZXF1YWxcIjpcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9yeS5zZXRBbGdvcml0aG0obmV3IEVxdWFsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwicHJvcG9ydGlvbmFsXCI6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBQcm9wb3J0aW9uYWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJmYXVsdF9jb250cm9sXCI6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1pbl9mcmVxID49IG1heF9mcmVxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiTWluaW11bSBmcmVxdWVuY3kgaGFzIHRvIGJlIHNtYWxsZXIgdGhhbiB0aGUgbWF4aW11bVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBQYWdlRmF1bHRDb250cm9sKG1pbl9mcmVxLCBtYXhfZnJlcSwgdGltZV93aW5kb3cpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcImxvY2FsaXR5X21vZGVsXCI6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBMb2NhbGl0eU1vZGVsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiY29tcGFyZV9hbGxcIjpcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21wYXJlX2FsbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJJbnZhbGlkIGFsZ29yaXRobVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb21wYXJlX2FsbCkge1xyXG4gICAgICAgICAgICBpZiAobWluX2ZyZXEgPj0gbWF4X2ZyZXEpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiTWluaW11bSBmcmVxdWVuY3kgaGFzIHRvIGJlIHNtYWxsZXIgdGhhbiB0aGUgbWF4aW11bVwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtcyA9IFtcclxuICAgICAgICAgICAgICAgIG5ldyBFcXVhbCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IFByb3BvcnRpb25hbCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3IFBhZ2VGYXVsdENvbnRyb2wobWluX2ZyZXEsIG1heF9mcmVxLCB0aW1lX3dpbmRvdyksXHJcbiAgICAgICAgICAgICAgICAvLyBuZXcgTG9jYWxpdHlNb2RlbCgpXHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5jb21wYXJlQWxsQW5kRGlzcGxheVJlc3VsdHMoYWxnb3JpdGhtcyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhbmltYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25HVUkuc3RhcnRBbmltYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLm1lbW9yeS5zaW11bGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5kaXNwbGF5UmVzdWx0cyhyZXN1bHRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4vUHJvY2Vzc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnZSB7XHJcbiAgICBpZDogbnVtYmVyXHJcbiAgICBsYXN0X2NhbGxfdGltZTogbnVtYmVyID0gMFxyXG4gICAgcHJvY2VzczogUHJvY2Vzc1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIHByb2Nlc3M6IFByb2Nlc3MpIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzID0gcHJvY2VzcztcclxuICAgIH1cclxuXHJcbiAgICBjYWxsKHRpbWU6IG51bWJlciwgY2F1c2VkX2ZhdWx0OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5sYXN0X2NhbGxfdGltZSA9IHRpbWU7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzLmRvbmVfY2FsbHMrKztcclxuXHJcbiAgICAgICAgdGhpcy5wcm9jZXNzLmFkZFRvRmF1bHRMb2coY2F1c2VkX2ZhdWx0KTtcclxuICAgIH1cclxufSIsImltcG9ydCBGcmFtZSBmcm9tIFwiLi9GcmFtZVwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9jZXNzIHtcclxuICAgIHJhbmdlX29mX3BhZ2VzOiBbbnVtYmVyLCBudW1iZXJdXHJcbiAgICBudW1iZXJfb2ZfY2FsbHM6IG51bWJlclxyXG4gICAgaWQ6IG51bWJlclxyXG5cclxuICAgIHBhZ2VfZmF1bHRzOiBudW1iZXIgPSAwXHJcbiAgICBkb25lX2NhbGxzOiBudW1iZXIgPSAwXHJcblxyXG4gICAgcnVubmluZzogYm9vbGVhbiA9IHRydWVcclxuICAgIGFzc2lnbmVkRnJhbWVzOiBudW1iZXIgPSAwXHJcblxyXG4gICAgcHJpdmF0ZSBjYWxsczogQXJyYXk8bnVtYmVyPiA9IFtdXHJcbiAgICBmYXVsdF9sb2c6IEFycmF5PGJvb2xlYW4+ID0gW11cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihyYW5nZV9vZl9wYWdlczogW251bWJlciwgbnVtYmVyXSwgbnVtYmVyX29mX2NhbGxzOiBudW1iZXIsIGlkOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnJhbmdlX29mX3BhZ2VzID0gcmFuZ2Vfb2ZfcGFnZXM7XHJcbiAgICAgICAgdGhpcy5udW1iZXJfb2ZfY2FsbHMgPSBudW1iZXJfb2ZfY2FsbHM7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMucGFnZV9mYXVsdHMgPSAwO1xyXG4gICAgICAgIHRoaXMuZG9uZV9jYWxscyA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25lZEZyYW1lcyA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuZmF1bHRfbG9nID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYWxscygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhbGxzID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1iZXJfb2ZfY2FsbHM7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGxzLnB1c2goTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHRoaXMucmFuZ2Vfb2ZfcGFnZXNbMV0gLSB0aGlzLnJhbmdlX29mX3BhZ2VzWzBdKSkgKyB0aGlzLnJhbmdlX29mX3BhZ2VzWzBdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FsbHMoKTogQXJyYXk8bnVtYmVyPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbHM7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkVG9GYXVsdExvZyhmYXVsdDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuZmF1bHRfbG9nLnB1c2goZmF1bHQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mYXVsdF9sb2cubGVuZ3RoICE9IHRoaXMuZG9uZV9jYWxscylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmF1bHQgbG9nIGxlbmd0aCBkb2VzIG5vdCBtYXRjaCBkb25lIGNhbGxzXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVJ1bm5pbmdTdGF0dXMoZnJhbWVzOiBSZWFkb25seUFycmF5PFJlYWRvbmx5PEZyYW1lPj4pIHtcclxuICAgICAgICBsZXQgYXNzaWduZWRGcmFtZXM6IG51bWJlciA9IDA7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZnJhbWUgb2YgZnJhbWVzKSB7XHJcbiAgICAgICAgICAgIGlmIChmcmFtZS5wcm9jZXNzID09IHRoaXMpXHJcbiAgICAgICAgICAgICAgICBhc3NpZ25lZEZyYW1lcysrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGFzc2lnbmVkRnJhbWVzID4gMClcclxuICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kb25lX2NhbGxzID09IHRoaXMubnVtYmVyX29mX2NhbGxzKVxyXG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLmRvbmVfY2FsbHMgPj0gdGhpcy5udW1iZXJfb2ZfY2FsbHMpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc3MgZG9uZSBjYWxscyBleGNlZWRlZCBudW1iZXIgb2YgY2FsbHNcIik7XHJcblxyXG4gICAgICAgIHRoaXMuYXNzaWduZWRGcmFtZXMgPSBhc3NpZ25lZEZyYW1lcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRGYXVsdHNJbkxhc3ROKG46IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZhdWx0X2xvZy5zbGljZSh0aGlzLmZhdWx0X2xvZy5sZW5ndGggLSBuLCB0aGlzLmZhdWx0X2xvZy5sZW5ndGgpLmZpbHRlcihmYXVsdCA9PiBmYXVsdCkubGVuZ3RoO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBBbGxvY2F0aW9uQWxnb3JpdGhtIGZyb20gXCIuLi9BbGxvY2F0aW9uQWxnb3JpdGhtXCI7XHJcblxyXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi4vUHJvY2Vzc1wiO1xyXG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4uL0ZyYW1lXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFcXVhbCBpbXBsZW1lbnRzIEFsbG9jYXRpb25BbGdvcml0aG0ge1xyXG4gICAgbmFtZTogc3RyaW5nID0gXCJFcXVhbFwiXHJcblxyXG4gICAgYWxsb2NhdGVGcmFtZXMoZnJhbWVzOiBBcnJheTxGcmFtZT4sIHByb2Nlc3NlczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxQcm9jZXNzPj4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBmcmFtZXNfcGVyX3Byb2Nlc3MgPSBNYXRoLmZsb29yKGZyYW1lcy5sZW5ndGggLyBwcm9jZXNzZXMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYEFsbG9jYXRpbmcgJHtmcmFtZXNfcGVyX3Byb2Nlc3N9IGZyYW1lcyBwZXIgcHJvY2Vzc2ApO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZnJhbWVzW2ldLnByb2Nlc3MgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBmcmFtZSBpZiBpdCdzIGFscmVhZHkgYWxsb2NhdGVkXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZyYW1lc1tpXS5wcm9jZXNzID0gPFByb2Nlc3M+cHJvY2Vzc2VzW01hdGguZmxvb3IoaSAvIGZyYW1lc19wZXJfcHJvY2VzcyldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogdGhlIHJlbWFpbmluZyBmcmFtZXMgYXJlIGxlZnQgdW5hbGxvY2F0ZWQgKi9cclxuICAgIH1cclxufSIsImltcG9ydCBBbGxvY2F0aW9uQWxnb3JpdGhtIGZyb20gXCIuLi9BbGxvY2F0aW9uQWxnb3JpdGhtXCI7XHJcblxyXG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4uL0ZyYW1lXCI7XHJcbmltcG9ydCBQcm9jZXNzIGZyb20gXCIuLi9Qcm9jZXNzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbGl0eU1vZGVsIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XHJcbiAgICBuYW1lOiBzdHJpbmcgPSBcIkxvY2FsaXR5TW9kZWxcIlxyXG5cclxuICAgIGFsbG9jYXRlRnJhbWVzKGZyYW1lczogQXJyYXk8RnJhbWU+LCBwcm9jZXNzZXM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8UHJvY2Vzcz4+KTogdm9pZCB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQWxsb2NhdGlvbkFsZ29yaXRobSBmcm9tIFwiLi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiO1xyXG5cclxuaW1wb3J0IEZyYW1lIGZyb20gXCIuLi9GcmFtZVwiO1xyXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi4vUHJvY2Vzc1wiO1xyXG5cclxuaW1wb3J0IFByb3BvcnRpb25hbCBmcm9tIFwiLi9Qcm9wb3J0aW9uYWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZ2VGYXVsdENvbnRyb2wgaW1wbGVtZW50cyBBbGxvY2F0aW9uQWxnb3JpdGhtIHtcclxuICAgIG5hbWU6IHN0cmluZyA9IFwiUGFnZUZhdWx0Q29udHJvbFwiXHJcbiAgICBydW5fcHJvcG9ydGlvbmFsOiBib29sZWFuID0gdHJ1ZVxyXG5cclxuICAgIG1pbl9mYXVsdF9mcmVxOiBudW1iZXJcclxuICAgIG1heF9mYXVsdHNfZnJlcTogbnVtYmVyXHJcbiAgICB0aW1lX3dpbmRvdzogbnVtYmVyXHJcblxyXG4gICAgY29uc3RydWN0b3IobWluX2ZhdWx0X2ZyZXE6IG51bWJlciwgbWF4X2ZhdWx0X2ZyZXE6IG51bWJlciwgdGltZV93aW5kb3c6IG51bWJlciA9IDUpIHtcclxuICAgICAgICB0aGlzLm1pbl9mYXVsdF9mcmVxID0gbWluX2ZhdWx0X2ZyZXE7XHJcbiAgICAgICAgdGhpcy5tYXhfZmF1bHRzX2ZyZXEgPSBtYXhfZmF1bHRfZnJlcTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lX3dpbmRvdyA9IHRpbWVfd2luZG93O1xyXG4gICAgfVxyXG5cclxuICAgIGFsbG9jYXRlRnJhbWVzKGZyYW1lczogRnJhbWVbXSwgcHJvY2Vzc2VzOiByZWFkb25seSBSZWFkb25seTxQcm9jZXNzPltdKTogdm9pZCB7XHJcbiAgICAgICAgLyogZmlyc3QgcnVuIHByb3BvcnRpb25hbCBhbGxvY2F0aW9uICovXHJcbiAgICAgICAgaWYgKHRoaXMucnVuX3Byb3BvcnRpb25hbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJ1bl9wcm9wb3J0aW9uYWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wb3J0aW9uYWwoKS5hbGxvY2F0ZUZyYW1lcyhmcmFtZXMsIHByb2Nlc3Nlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiB0aGVuIHJ1biBwYWdlIGZhdWx0IGNvbnRyb2wgKi9cclxuICAgICAgICBjb25zdCBNSU5fRkFVTFRTID0gdGhpcy5taW5fZmF1bHRfZnJlcTtcclxuICAgICAgICBjb25zdCBNQVhfRkFVTFRTID0gdGhpcy5tYXhfZmF1bHRzX2ZyZXE7IC8vIGZyZXF1ZW5jeVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2Nlc3Nlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBmYXVsdHNJblRpbWVXaW5kb3cgPSBwcm9jZXNzZXNbaV0uZ2V0RmF1bHRzSW5MYXN0Tih0aGlzLnRpbWVfd2luZG93KTtcclxuICAgICAgICAgICAgbGV0IHRpbWVfd2luZG93ID0gdGhpcy50aW1lX3dpbmRvdztcclxuICAgICAgICAgICAgaWYgKHRpbWVfd2luZG93ID4gcHJvY2Vzc2VzW2ldLmZhdWx0X2xvZy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICB0aW1lX3dpbmRvdyA9IHByb2Nlc3Nlc1tpXS5mYXVsdF9sb2cubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgbGV0IGZhdWx0X2ZyZXF1ZW5jeSA9IGZhdWx0c0luVGltZVdpbmRvdyAvIHRpbWVfd2luZG93O1xyXG4gICAgICAgICAgICBsZXQgZnJhbWVzX251bWJlciA9IGZyYW1lcy5maWx0ZXIoZnJhbWUgPT4gZnJhbWUucHJvY2VzcyA9PSBwcm9jZXNzZXNbaV0pLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aW1lX3dpbmRvdyA9PSAwKVxyXG4gICAgICAgICAgICAgICAgZmF1bHRfZnJlcXVlbmN5ID0gKHRoaXMubWluX2ZhdWx0X2ZyZXEgKyB0aGlzLm1heF9mYXVsdHNfZnJlcSkgLyAyO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFByb2Nlc3MgJHtwcm9jZXNzZXNbaV0uaWR9IGZhdWx0IGZyZXF1ZW5jeTogJHtmYXVsdF9mcmVxdWVuY3l9ICgke2ZhdWx0c0luVGltZVdpbmRvd30gLyAke3RpbWVfd2luZG93fSlgKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmYXVsdF9mcmVxdWVuY3kgPCBNSU5fRkFVTFRTICYmIGZyYW1lc19udW1iZXIgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBkZWFsbG9jYXRlIDEgZnJhbWUgKi9cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZnJhbWVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZyYW1lc1tqXS5wcm9jZXNzID09IHByb2Nlc3Nlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZXNbal0ucHJvY2VzcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbG9jYXRlRnJhbWVzKGZyYW1lcywgcHJvY2Vzc2VzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChmYXVsdF9mcmVxdWVuY3kgPiBNQVhfRkFVTFRTKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBhbGxvY2F0ZSAxIGZyYW1lIGlmIHBvc3NpYmxlICovXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZyYW1lcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZXNbal0ucHJvY2VzcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lc1tqXS5wcm9jZXNzID0gPFByb2Nlc3M+cHJvY2Vzc2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQWxsb2NhdGlvbkFsZ29yaXRobSBmcm9tIFwiLi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiO1xyXG5cclxuaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4uL1Byb2Nlc3NcIjtcclxuaW1wb3J0IEZyYW1lIGZyb20gXCIuLi9GcmFtZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvcG9ydGlvbmFsIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XHJcbiAgICBuYW1lOiBzdHJpbmcgPSBcIlByb3BvcnRpb25hbFwiXHJcblxyXG4gICAgYWxsb2NhdGVGcmFtZXMoZnJhbWVzOiBBcnJheTxGcmFtZT4sIHByb2Nlc3NlczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxQcm9jZXNzPj4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0b3RhbF9jYWxscyA9IHByb2Nlc3Nlcy5yZWR1Y2UoKHRvdGFsLCBwcm9jZXNzKSA9PiB0b3RhbCArIHByb2Nlc3MubnVtYmVyX29mX2NhbGxzLCAwKTtcclxuXHJcbiAgICAgICAgbGV0IGZyYW1lc19hbGxvY2F0ZWQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBmcmFtZXNfZm9yX3Byb2Nlc3MgPSBNYXRoLmZsb29yKChwcm9jZXNzZXNbaV0ubnVtYmVyX29mX2NhbGxzIC8gdG90YWxfY2FsbHMpICogZnJhbWVzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWVzX2Zvcl9wcm9jZXNzIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgZnJhbWVzX2Zvcl9wcm9jZXNzID0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmcmFtZXNfZm9yX3Byb2Nlc3M7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lc19hbGxvY2F0ZWQgPj0gZnJhbWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFRoZXJlIGFyZSBub3QgZW5vdWdoIGZyYW1lcyB0byBhbGxvY2F0ZSBhbGwgZnJhbWVzLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChmcmFtZXNbZnJhbWVzX2FsbG9jYXRlZF0ucHJvY2VzcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBmcmFtZSBpZiBpdCdzIGFscmVhZHkgYWxsb2NhdGVkXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnJhbWVzW2ZyYW1lc19hbGxvY2F0ZWRdLnByb2Nlc3MgPSA8UHJvY2Vzcz5wcm9jZXNzZXNbaV07XHJcbiAgICAgICAgICAgICAgICBmcmFtZXNfYWxsb2NhdGVkKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIHRoZSByZW1haW5pbmcgZnJhbWVzIGFyZSBsZWZ0IHVuYWxsb2NhdGVkICovXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgTWVudSBmcm9tIFwiLi9jbGFzc2VzL01lbnVcIjtcclxuXHJcbmZ1bmN0aW9uIG1haW4oKSB7XHJcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgbWVudS5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgICogcnVuIHdpdGg6IHRzYyAmJiBub2RlIC5cXGRpc3RcXGZyYW1lX2FsbG9jYXRpb25fc3JjXFxtYWluLmpzXHJcbiAgICAgICAgKi9cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbm1haW4oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlzcGxheSB7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IG51bGwgPSBudWxsXHJcbiAgICByZXNpemVDYWxsYmFjazogKCgpID0+IHZvaWQpIHwgbnVsbFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjayA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGluaXQoZWxlbV9pZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbV9pZCkgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplVG9GaXQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVzaXplVG9GaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemVUb0ZpdCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jdHggPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZUNhbGxiYWNrICE9IG51bGwpe1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFJlc2l6ZUNhbGxiYWNrKGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NjUpO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwicHJvY2Vzc2VzIiwiZnJhbWVzIiwiY2FsbF9wb29sIiwiY2FsbF9xdWV1ZSIsImNhbGxfaGlzdG9yeSIsIm51bWJlcl9vZl9mcmFtZXMiLCJudW1iZXJfb2ZfcGFnZXMiLCJhbGxvY2F0aW9uQWxnb3JpdGhtIiwicmVwbGFjZW1lbnRBbGdvcml0aG0iLCJ0b3RhbF9wYWdlX2ZhdWx0cyIsInRpbWUiLCJsYXN0X2NhbGxfY2F1c2VkX2ZhdWx0IiwiaW5pdCIsInRoaXMiLCJpIiwicHVzaCIsInByb2Nlc3MiLCJyZXNldCIsImFkZFByb2Nlc3MiLCJjbGVhclByb2Nlc3NlcyIsImdlbmVyYXRlUGFnZUNhbGxQb29sIiwibGVuZ3RoIiwiZ2VuZXJhdGVDYWxscyIsImFkZFBhZ2VDYWxsc1RvUG9vbCIsImdldENhbGxzIiwiYWRkUGFnZUNhbGxUb1Bvb2wiLCJwYWdlX2NhbGwiLCJwYWdlX2NhbGxzIiwiY2xlYXJQYWdlQ2FsbFBvb2wiLCJzZXRBbGdvcml0aG0iLCJhbGdvcml0aG0iLCJuZXh0VGljayIsIkVycm9yIiwidXBkYXRlUnVubmluZ1N0YXR1cyIsImZvckVhY2giLCJmcmFtZSIsInJ1bm5pbmciLCJhbGxvY2F0ZUZyYW1lcyIsInBhZ2UiLCJ1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aCIsImZpbHRlciIsImNvbnNvbGUiLCJ3YXJuIiwic3BsaWNlIiwibG9nIiwiaWQiLCJvblBhZ2VDYWxsIiwiZ2V0Q3VycmVudFN0YXRlRGF0YSIsInBhZ2VfZmF1bHQiLCJwYWdlX2ZhdWx0cyIsIm9uUGFnZUFscmVhZHlJbk1lbW9yeSIsImZpbmQiLCJpZF9vZl9mcmFtZV90b19yZXBsYWNlIiwiaGFuZGxlUGFnZUZhdWx0IiwiZ2V0RnJhbWVJbmRleEJ5SWQiLCJwYWdlX2luX21lbW9yeSIsImNhbGwiLCJwcm9jZXNzX2ZyYW1lcyIsInByb2Nlc3NfY2FsbF9oaXN0b3J5IiwiY3VycmVudF9mcmFtZXMiLCJwcmV2aW91c19wYWdlX2NhbGxzIiwiaXNGaW5pc2hlZCIsImdldFJlc3VsdHMiLCJ0b3RhbF9wYWdlX2hpdHMiLCJ0b3RhbF9jYWxscyIsInNpbXVsYXRlIiwiTUFYX1RJTUUiLCJkaXNwbGF5UmVzdWx0cyIsInJlc3VsdHMiLCJhbGdTdHIiLCJuYW1lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsImlubmVySFRNTCIsInRvVXBwZXJDYXNlIiwidG9GaXhlZCIsInJlcGxhY2UiLCJSZWdFeHAiLCJjb21wYXJlQWxsQW5kRGlzcGxheVJlc3VsdHMiLCJhbGdvcml0aG1zIiwicmVzdWx0c19lbCIsIm1lbnUiLCJ2aXNpYmxlIiwicGxheWluZyIsInNwZWVkIiwiR1VJIiwiTUVOVSIsInBsYXlfcGF1c2VfYnV0dG9uIiwic3RlcF9idXR0b24iLCJzdG9wX2J1dHRvbiIsInNwZWVkX3NsaWRlciIsImluZm9fYWxnb3JpdGhtIiwiaW5mb190aW1lIiwiaW5mb19pc19kb25lIiwiaW5mb19pbl9xdWV1ZSIsImluZm9fZmluaXNoZWQiLCJpbmZvX3RvdGFsX3BhZ2VfZmF1bHRzIiwiaW5mb190b3RhbF9wYWdlX2hpdHMiLCJmcmFtZV9yb3dzIiwic2VlX2NvZGVfYnV0dG9uIiwic3RvcmVkU2V0SW50ZXJ2YWwiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlUGxheWluZyIsInN0ZXAiLCJ0b2dnbGVWaXNpYmxlIiwicGFyc2VJbnQiLCJ2YWx1ZSIsInJlZnJlc2hTcGVlZCIsIm1lbW9yeSIsImFsZ29yaXRobU5hbWUiLCJ3aW5kb3ciLCJvcGVuIiwiZm9jdXMiLCJpbml0U3RhdGVUYWJsZSIsInJlc2l6ZUNhbGxiYWNrIiwiZHJhd0N1cnJlbnRTdGF0ZSIsImNsZWFySW50ZXJ2YWwiLCJyZWZyZXNoQ2FsbHMiLCJkaXNhYmxlZCIsInN0YXJ0QW5pbWF0aW9uIiwicmVmcmVzaEluZm8iLCJkcmF3Q2FsbHMiLCJ0aW1lX3JvdyIsImNhbGxzX3JvdyIsInRib2R5IiwidGltZV9yb3dfaGVhZGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiY2FsbHNfcm93X2hlYWRlciIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZnJhbWVfcm93IiwiZnJhbWVfcm93X2hlYWRlciIsIlNUQVJUX1giLCJTVEFSVF9ZIiwiV0lEVEgiLCJIRUlHSFQiLCJjYWxsc1RvRHJhdyIsIm5ld0NhbGwiLCJhdCIsInRpbWVUaWNrRWwiLCJjYWxsc1RpY2tFbCIsImZyYW1lVGlja0VsIiwiYmFja2dyb3VuZENvbG9yIiwidGFibGUiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsV2lkdGgiLCJ0b1N0cmluZyIsInNldEludGVydmFsIiwiYmluZCIsImFmdGVyRG9uZSIsImRhdGEiLCJmcmFtZV90b19yZXBsYWNlX2luZGV4IiwibGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4IiwiZXJyb3IiLCJwYWdlX2luZGV4IiwiaiIsImFuaW1hdGlvbkdVSSIsInJ1biIsImFkZFByb2Nlc3NlcyIsImFkZENhbGxzIiwiY2xlYXJDYWxscyIsInNldFJlc2l6ZUNhbGxiYWNrIiwiZSIsIm5ld192YWwiLCJ0YXJnZXQiLCJpc05hTiIsImFsZXJ0IiwidG9Mb3dlckNhc2UiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwcm9jZXNzX2NvdW50IiwicGFnZV9yYW5nZV9taW4iLCJwYWdlX3JhbmdlX21heCIsImNhbGxfY291bnRfbWluIiwiY2FsbF9jb3VudF9tYXgiLCJjdXJyZW50X3JhbmdlX21pbiIsInBhZ2VfcmFuZ2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzb3J0IiwiZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24iLCJhdHRyaWJ1dGVzIiwic2V0TmFtZWRJdGVtIiwiY3JlYXRlQXR0cmlidXRlIiwiYWxsX3Byb2Nlc3Nlc19lbCIsInByb2Nlc3NfZWwiLCJqb2luIiwiY2FsbF9xdWV1ZV9lbCIsIm1hcCIsImFuaW1hdGlvbiIsImNvbXBhcmVfYWxsIiwibWluX2ZyZXEiLCJwYXJzZUZsb2F0IiwibWF4X2ZyZXEiLCJ0aW1lX3dpbmRvdyIsImxhc3RfY2FsbF90aW1lIiwiY2F1c2VkX2ZhdWx0IiwiZG9uZV9jYWxscyIsImFkZFRvRmF1bHRMb2ciLCJyYW5nZV9vZl9wYWdlcyIsIm51bWJlcl9vZl9jYWxscyIsImFzc2lnbmVkRnJhbWVzIiwiY2FsbHMiLCJmYXVsdF9sb2ciLCJmYXVsdCIsImdldEZhdWx0c0luTGFzdE4iLCJuIiwic2xpY2UiLCJmcmFtZXNfcGVyX3Byb2Nlc3MiLCJtaW5fZmF1bHRfZnJlcSIsIm1heF9mYXVsdF9mcmVxIiwicnVuX3Byb3BvcnRpb25hbCIsIm1heF9mYXVsdHNfZnJlcSIsIk1JTl9GQVVMVFMiLCJNQVhfRkFVTFRTIiwiZmF1bHRzSW5UaW1lV2luZG93IiwiZmF1bHRfZnJlcXVlbmN5IiwiZnJhbWVzX251bWJlciIsInJlZHVjZSIsInRvdGFsIiwiZnJhbWVzX2FsbG9jYXRlZCIsImZyYW1lc19mb3JfcHJvY2VzcyIsImN0eCIsImVsZW1faWQiLCJjYW52YXMiLCJnZXRDb250ZXh0IiwicmVzaXplVG9GaXQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImNhbGxiYWNrIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iXSwic291cmNlUm9vdCI6IiJ9