(()=>{"use strict";var e={994:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=l(s(752)),i=l(s(920)),n=l(s(463));t.default=class{constructor(){this.processes=[],this.frames=[],this.call_pool=[],this.call_queue=[],this.call_history=[],this.number_of_frames=0,this.number_of_pages=0,this.allocationAlgorithm=null,this.replacementAlgorithm=new n.default,this.total_page_faults=0,this.time=0,this.last_call_caused_fault=!1}init(e,t){this.number_of_pages=null!=e?e:this.number_of_pages,this.number_of_frames=null!=t?t:this.number_of_frames,this.call_queue=[...this.call_pool],this.frames=[],this.call_history=[],this.time=0,this.total_page_faults=0;for(let e=0;e<this.number_of_frames;e++)this.frames.push(new a.default(e));for(const e of this.processes)e.reset()}addProcess(e){this.processes.push(e)}clearProcesses(){this.processes=[]}generatePageCallPool(){for(let e=0;e<this.processes.length;e++)this.processes[e].generateCalls(),this.addPageCallsToPool(this.processes[e].getCalls(),this.processes[e])}addPageCallToPool(e){this.call_pool.push(e)}addPageCallsToPool(e,t){for(let s=0;s<e.length;s++)this.addPageCallToPool(new i.default(e[s],t))}clearPageCallPool(){this.call_pool=[]}setAlgorithm(e){this.allocationAlgorithm=e}nextTick(){var e,t,s,l,a,i;if(null==this.allocationAlgorithm)throw new Error("No algorithm selected");for(const e of this.processes)e.updateRunningStatus(this.frames);this.frames.forEach((e=>{null==e.process||e.process.running||(e.process=null)})),null===(t=(e=this.allocationAlgorithm).allocateFrames)||void 0===t||t.call(e,this.frames,this.processes,this.time);const n=this.frames.filter((e=>null==e.process)).length;n>0&&console.warn(`Not all frames are allocated\nAllocated: ${this.frames.length-n}\nUnallocated: ${n}`);let o=null;for(let e=0;e<this.call_queue.length;e++)if(this.call_queue[e].process.running){o=this.call_queue[e],this.call_queue.splice(e,1);break}if(null==o)return console.warn("Empty page call queue or no processes running"),void this.time++;if(this.call_history.push(o),console.log("Page call: "+o.id),o){null===(l=(s=this.replacementAlgorithm).onPageCall)||void 0===l||l.call(s,this.getCurrentStateData(o));let e=!0;for(let t=0;t<this.frames.length;t++){if(null==this.frames[t])throw new Error("Frame is null");if(null==this.frames[t].page&&this.frames[t].process==o.process){this.frames[t].page=o,this.total_page_faults++,o.process.page_faults++,o.process.fault_times.push(this.time),this.last_call_caused_fault=!0,e=!1;break}if(null!=this.frames[t].page&&this.frames[t].page.id==o.id){null===(i=(a=this.replacementAlgorithm).onPageAlreadyInMemory)||void 0===i||i.call(a,this.getCurrentStateData(o)),this.last_call_caused_fault=!1,e=!1;break}}if(e){if(console.log("Page fault: "+o.id),null!=this.frames.find((e=>e.process==o.process&&null==e.page)))throw new Error("Initial page fill not handled properly");this.total_page_faults++,o.process.page_faults++,o.process.fault_times.push(this.time),this.last_call_caused_fault=!0;const e=this.replacementAlgorithm.handlePageFault(this.getCurrentStateData(o));-1!=e&&(this.frames[this.getFrameIndexById(e)].page=o)}let t=!1;for(const e of this.frames)if(null!=e.page&&e.page.id==o.id){t=!0;break}if(!t)throw new Error("Page fault not handled properly - page not in memory");o.call(this.time)}this.time++}getCurrentStateData(e){const t=this.frames.filter((t=>t.process==e.process)),s=this.call_history.filter((t=>t.process==e.process));return{page_call:e,current_frames:t,previous_page_calls:s,processes:this.processes}}isFinished(){return 0==this.call_queue.length}getFrameIndexById(e){for(let t=0;t<this.frames.length;t++)if(this.frames[t].id==e)return t;return-1}getResults(){return{total_page_faults:this.total_page_faults,total_page_hits:this.call_history.length-this.total_page_faults,total_calls:this.call_history.length}}simulate(){var e,t;if(this.init(),null==this.allocationAlgorithm)throw new Error("No algorithm selected");for(null===(t=(e=this.allocationAlgorithm).allocateFrames)||void 0===t||t.call(e,this.frames,this.processes,0);!this.isFinished();){this.nextTick();const e=200;if(this.time>e){console.warn("Simulation timed out");break}}return this.getResults()}displayResults(e,t=this.allocationAlgorithm.name){document.getElementById("results_wrapper").style.display="flex",document.getElementById("results").innerHTML=`\n        Algorithm: ${t.toUpperCase()}\n\n        Total page faults: <b style='color: red'>${e.total_page_faults.toFixed(0)}</b>\n        Total page hits: <b style='color: lime'>${e.total_page_hits.toFixed(0)}</b>\n        Total page calls: <b>${e.total_calls.toFixed(0)}</b>\n        `.replace(RegExp("\n","g"),"<br />")}compareAllAndDisplayResults(e){document.getElementById("results_wrapper").style.display="flex";const t=document.getElementById("results");t.innerHTML="";for(let s=0;s<e.length;s++){this.setAlgorithm(e[s]);const l=this.simulate();t.innerHTML+=`\n            Algorithm: ${e[s].name.toUpperCase()}\n            Total page faults: <b style='color: red'>${l.total_page_faults.toFixed(0)}</b>\n            Total page hits: <b style='color: lime'>${l.total_page_hits.toFixed(0)}</b>\n            Total page calls: <b>${l.total_calls.toFixed(0)}</b>\n            `.replace(RegExp("\n","g"),"<br />"),t.innerHTML+="<br />"}}}},498:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.visible=!1,this.playing=!1,this.speed=1,this.GUI=null,this.MENU=null,this.play_pause_button=null,this.step_button=null,this.stop_button=null,this.speed_slider=null,this.info_algorithm=null,this.info_time=null,this.info_is_done=null,this.info_in_queue=null,this.info_finished=null,this.info_total_page_faults=null,this.info_total_page_hits=null,this.frame_rows=[],this.see_code_button=null,this.storedSetInterval=null,this.menu=e}init(){this.GUI=document.getElementById("animation_gui"),this.MENU=document.getElementById("settings"),this.play_pause_button=document.getElementById("animation_play_pause"),this.step_button=document.getElementById("animation_step"),this.stop_button=document.getElementById("animation_stop"),this.speed_slider=document.getElementById("animation_speed_slider"),this.info_algorithm=document.getElementById("animation_info_algorithm_value"),this.info_time=document.getElementById("animation_info_time_value"),this.info_is_done=document.getElementById("animation_is_done"),this.info_in_queue=document.getElementById("calls_in_queue_value"),this.info_finished=document.getElementById("calls_finished_value"),this.info_total_page_faults=document.getElementById("total_page_faults_value"),this.info_total_page_hits=document.getElementById("total_page_hits_value"),this.see_code_button=document.getElementById("code_button"),this.info_is_done.style.display="none",this.play_pause_button.addEventListener("click",(()=>{this.togglePlaying()})),this.step_button.addEventListener("click",(()=>{this.step()})),this.stop_button.addEventListener("click",(()=>{this.toggleVisible(!1)})),this.speed_slider.addEventListener("input",(()=>{this.speed=parseInt(this.speed_slider.value),this.refreshSpeed()})),this.see_code_button.addEventListener("click",(()=>{if(null==this.menu.memory.allocationAlgorithm)return;const e=this.menu.memory.allocationAlgorithm.name;window.open(`https://github.com/brun0ne/scheduling-sim/blob/main/page_replacement_src/classes/algorithms/${e}.ts`,"_blank").focus()})),this.refreshSpeed(),this.initStateTable()}togglePlaying(e){this.playing=null==e?!this.playing:e,this.refreshSpeed(),this.play_pause_button.innerHTML=this.playing?"Pause":"Play"}toggleVisible(e){this.visible=null==e?!this.visible:e,this.visible?(this.GUI.style.display="block",this.MENU.style.display="none",this.menu.display.resizeCallback=()=>{this.drawCurrentState()},this.drawCurrentState()):(this.GUI.style.display="none",this.MENU.style.display="flex",null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.menu.display.resizeCallback=()=>{this.menu.refreshCalls()},this.menu.refreshCalls())}reset(){if(null==this.play_pause_button||null==this.info_is_done||null==this.step_button)throw new Error("call init() first!");this.menu.memory.init(),this.play_pause_button.innerHTML="Play",this.playing=!1,this.info_is_done.style.display="none",this.play_pause_button.disabled=!1,this.step_button.disabled=!1,this.initStateTable()}startAnimation(){this.reset(),this.toggleVisible(!0)}drawCurrentState(){this.refreshInfo(),this.drawCalls()}initStateTable(){const e=document.getElementById("animation_table_time"),t=document.getElementById("animation_table_page_calls"),s=document.getElementById("animation_table_body");e.innerHTML="",t.innerHTML="";{const t=document.createElement("th");t.innerHTML="Time",t.classList.add("header"),e.appendChild(t)}{const e=document.createElement("th");e.innerHTML="Page calls",e.classList.add("header"),t.appendChild(e)}{for(;null!=s.lastChild&&"animation_table_page_calls"!=s.lastChild.id;)s.removeChild(s.lastChild);const e=[];for(let t=0;t<this.menu.memory.number_of_frames;t++){const l=document.createElement("tr"),a=document.createElement("th");a.innerHTML=`Frame ${t}`,l.appendChild(a),e.push(l),s.appendChild(l)}this.frame_rows=e}}drawCalls(e,t,s,l,a){const i=document.getElementById("animation_table_time"),n=document.getElementById("animation_table_page_calls"),o=this.menu.memory.call_history.at(-1);if(null==o)return;{const e=document.createElement("th");e.innerHTML=`${this.menu.memory.time}`,i.appendChild(e)}{const e=document.createElement("th");e.innerHTML=`${o.id}`,n.appendChild(e)}for(let e=0;e<this.menu.memory.number_of_frames;e++){const t=this.frame_rows[e],s=this.menu.memory.frames[e].page,l=document.createElement("th");l.innerHTML=`${null!=s?s.id:""}`,null!=s&&s.id==o.id&&this.menu.memory.last_call_caused_fault&&(l.style.backgroundColor="red"),null!=this.menu.memory.frames[e].process&&(l.innerHTML+=` <span style='color: yellow'>(${this.menu.memory.frames[e].process.id})</span>`),t.appendChild(l)}const r=document.getElementById("animation_call_table");r.scrollLeft=r.scrollWidth}refreshInfo(){const e=this.menu.memory;if(null==e.allocationAlgorithm)throw new Error("call startAnimation() first!");this.info_algorithm.innerHTML=e.allocationAlgorithm.name,this.info_time.innerHTML=e.time.toString(),e.isFinished()?this.info_is_done.style.display="block":this.info_is_done.style.display="none",this.info_total_page_hits.innerHTML=(e.call_history.length-e.total_page_faults).toString(),this.info_total_page_faults.innerHTML=e.total_page_faults.toString(),this.info_in_queue.innerHTML=e.call_queue.length.toString(),this.info_finished.innerHTML=e.call_history.length.toString()}refreshSpeed(){null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.storedSetInterval=setInterval((()=>{this.playing&&this.step()}).bind(this),1e3/this.speed)}step(){this.menu.memory.isFinished()||(this.menu.memory.nextTick(),this.drawCurrentState(),this.menu.memory.isFinished()&&(this.togglePlaying(!1),this.menu.memory.displayResults(this.menu.memory.getResults()),this.afterDone()))}afterDone(){if(null==this.info_is_done||null==this.play_pause_button||null==this.step_button)throw new Error("call init() first!");this.info_is_done.style.display="block",this.play_pause_button.disabled=!0,this.step_button.disabled=!0}}},752:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.page=null,this.process=null,this.id=e}}},463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="LRU"}handlePageFault(e){let t=-1,s=-1;for(let l=0;l<e.current_frames.length;l++){const a=e.current_frames[l];if(a.process!=e.page_call.process&&console.error("Frame is assigned to a different process - this should be ensured not to happen by the caller"),null==a.page)return console.warn("Frame is empty - this should be ensured not to happen by the caller"),l;let i=-1;for(let t=e.previous_page_calls.length-1;t>=0;t--)if(e.previous_page_calls[t].id==a.page.id){i=t;break}if(-1==i)return l;(i<s||-1==s)&&(t=l,s=i)}return-1==t?(console.warn("No frame to replace found by LRU"),-1):e.current_frames[t].id}}},268:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=l(s(617)),i=l(s(994)),n=l(s(950)),o=l(s(920)),r=l(s(382)),h=l(s(498)),u=l(s(634)),c=l(s(960)),m=l(s(728));t.default=class{constructor(){this.display=new a.default,this.memory=new i.default,this.animationGUI=new h.default(this)}init(){document.getElementById("run_button").addEventListener("click",(()=>{this.run()})),document.getElementById("run_with_animation_button").addEventListener("click",(()=>{this.run(!0)})),document.getElementById("add_button").addEventListener("click",(()=>{this.addProcesses()})),document.getElementById("clear_button").addEventListener("click",(()=>{this.clearProcesses()})),document.getElementById("generate_call_queue_button").addEventListener("click",(()=>{this.addCalls()})),document.getElementById("clear_call_queue_button").addEventListener("click",(()=>{this.clearCalls()})),this.memory.init(5,3),this.display.init("main_canvas"),this.animationGUI.init(),this.display.setResizeCallback((()=>{this.refreshCalls()})),document.getElementById("s_frame_count").addEventListener("change",(e=>{const t=parseInt(e.target.value);isNaN(t)||t<1?alert("Invalid number of frames"):(this.memory.init(this.memory.number_of_pages,t),this.refreshCalls())})),document.getElementById("a_type").addEventListener("change",(e=>{"compare_all"===e.target.value.toLowerCase()?document.getElementById("run_with_animation_button").setAttribute("disabled","true"):document.getElementById("run_with_animation_button").removeAttribute("disabled"),"fault_control"===e.target.value.toLowerCase()||"compare_all"===e.target.value.toLowerCase()?(document.getElementById("s_min_page_faults_all").style.display="block",document.getElementById("s_max_page_faults_all").style.display="block",document.getElementById("s_time_window_all").style.display="block"):(document.getElementById("s_min_page_faults_all").style.display="none",document.getElementById("s_max_page_faults_all").style.display="none",document.getElementById("s_time_window_all").style.display="none")})),document.getElementById("results_close").addEventListener("click",(()=>{document.getElementById("results_wrapper").style.display="none"})),this.refreshCalls()}addProcesses(){const e=parseInt(document.getElementById("c_count").value),t=parseInt(document.getElementById("s_min_range").value),s=parseInt(document.getElementById("s_max_range").value),l=parseInt(document.getElementById("s_min_calls").value),a=parseInt(document.getElementById("s_max_calls").value);let i=0;for(let o=0;o<e;o++){const e=Math.floor(Math.random()*(s-t+1))+t;this.memory.addProcess(new n.default([i,i+e],Math.floor(Math.random()*(a-l+1))+l,o)),this.memory.processes[this.memory.processes.length-1].generateCalls(),i+=e}this.refreshCalls()}clearProcesses(){this.memory.clearProcesses(),this.memory.clearPageCallPool(),this.refreshCalls()}addCalls(){for(let e=0;e<this.memory.processes.length;e++)for(let t=0;t<this.memory.processes[e].getCalls().length;t++)this.memory.call_pool.push(new o.default(this.memory.processes[e].getCalls()[t],this.memory.processes[e]));this.memory.call_pool.sort((()=>Math.random()-.5)),this.refreshCalls()}clearCalls(){this.memory.call_pool=[],this.refreshCalls()}refreshCalls(){document.getElementById("p_current_count").innerHTML=`(${this.memory.processes.length.toString()})`;const e=document.getElementById("generate_call_queue_button");this.memory.processes.length>0&&0==this.memory.call_pool.length?e.removeAttribute("disabled"):e.attributes.setNamedItem(document.createAttribute("disabled"));const t=document.getElementById("all_processes");t.innerHTML="";for(let e=0;e<this.memory.processes.length;e++){const s=this.memory.processes[e],l=document.createElement("span");l.classList.add("process"),l.innerHTML=`<span class="process_name">Calls of process ${e}: </span> <span class="process_calls">${s.getCalls().join(", ")}</span><br />`,t.appendChild(l)}0==this.memory.processes.length&&(t.innerHTML="<span style='color: yellow'>No processes added yet.</span>"),document.getElementById("current_call_count").innerHTML=`(${this.memory.call_pool.length.toString()})`;const s=document.getElementById("main_call_queue");s.innerHTML=this.memory.call_pool.map((e=>e.id)).join(", "),0==this.memory.call_pool.length&&(s.innerHTML="<span style='color: yellow'>No calls in queue.</span>")}run(e){if(this.memory.processes.length>this.memory.frames.length)return void alert("Not enough frames for all processes");const t=document.getElementById("a_type").value;let s=!1;const l=parseFloat(document.getElementById("s_min_page_faults").value),a=parseFloat(document.getElementById("s_max_page_faults").value),i=parseFloat(document.getElementById("s_time_window").value);switch(t.toLowerCase()){case"equal":this.memory.setAlgorithm(new r.default);break;case"proportional":this.memory.setAlgorithm(new u.default);break;case"fault_control":if(l>=a)return void alert("Minimum frequency has to be smaller than the maximum");this.memory.setAlgorithm(new c.default(l,a,i));break;case"locality_model":this.memory.setAlgorithm(new m.default);break;case"compare_all":s=!0;break;default:alert("Invalid algorithm")}if(s){if(l>=a)return void alert("Minimum frequency has to be smaller than the maximum");const e=[new r.default,new u.default,new c.default(l,a,i)];this.memory.compareAllAndDisplayResults(e)}else if(e)this.animationGUI.startAnimation();else{const e=this.memory.simulate();this.memory.displayResults(e)}}}},920:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.last_call_time=0,this.id=e,this.process=t}call(e){this.last_call_time=e,this.process.done_calls++}}},950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,s){this.page_faults=0,this.done_calls=0,this.running=!0,this.assignedFrames=0,this.calls=[],this.fault_times=[],this.range_of_pages=e,this.number_of_calls=t,this.id=s}reset(){this.page_faults=0,this.done_calls=0,this.running=!0,this.assignedFrames=0,this.fault_times=[]}generateCalls(){this.calls=[];for(let e=0;e<this.number_of_calls;e++)this.calls.push(Math.floor(Math.random()*(this.range_of_pages[1]-this.range_of_pages[0]))+this.range_of_pages[0])}getCalls(){return this.calls}updateRunningStatus(e){let t=0;for(const s of e)s.process==this&&t++;if(this.running=t>0,this.done_calls==this.number_of_calls)this.running=!1;else if(this.done_calls>=this.number_of_calls)throw new Error("Process done calls exceeded number of calls");this.assignedFrames=t}getFaultsInLastNTicks(e,t){let s=0;for(let l=this.fault_times.length-1;l>=0&&!(t-this.fault_times[l]>e);l--)s++;return s}}},382:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Equal"}allocateFrames(e,t){const s=Math.floor(e.length/t.length);console.log(`Allocating ${s} frames per process`);for(let l=0;l<e.length;l++)null==e[l].process&&(e[l].process=t[Math.floor(l/s)])}}},728:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="LocalityModel"}allocateFrames(e,t){throw new Error("Method not implemented.")}}},960:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=l(s(634));t.default=class{constructor(e,t,s=5){this.name="PageFaultControl",this.run_proportional=!0,this.min_fault_freq=e,this.max_faults_freq=t,this.time_window=s}allocateFrames(e,t,s){if(this.run_proportional)return this.run_proportional=!1,(new a.default).allocateFrames(e,t);const l=this.min_fault_freq,i=this.max_faults_freq;for(let a=0;a<t.length;a++){const n=t[a].getFaultsInLastNTicks(this.time_window,s);let o=n/this.time_window,r=e.filter((e=>e.process==t[a])).length;if(console.log(`Process ${t[a].id} fault frequency: ${o} (${n} / ${this.time_window})`),o<l&&r>1)for(let l=0;l<e.length;l++)if(e[l].process==t[a])return e[l].process=null,this.allocateFrames(e,t,s);if(o>i)for(let s=0;s<e.length;s++)if(null==e[s].process){e[s].process=t[a];break}}}}},634:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Proportional"}allocateFrames(e,t){const s=t.reduce(((e,t)=>e+t.number_of_calls),0);let l=0;for(let a=0;a<t.length;a++){let i=Math.floor(t[a].number_of_calls/s*e.length);i<1&&(i=1);for(let s=0;s<i;s++){if(l>=e.length){console.error("There are not enough frames to allocate all frames.");break}null==e[l].process&&(e[l].process=t[a],l++)}}}}},965:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=l(s(268));"undefined"!=typeof document&&(new a.default).init()},617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.ctx=null,this.resizeCallback=null}init(e){const t=document.getElementById(e);this.ctx=t.getContext("2d"),window.addEventListener("resize",this.resizeToFit.bind(this)),this.resizeToFit()}resizeToFit(){null!=this.ctx&&(this.ctx.canvas.width=window.innerWidth,this.ctx.canvas.height=window.innerHeight,null!=this.resizeCallback&&this.resizeCallback())}setResizeCallback(e){this.resizeCallback=e}}}},t={};!function s(l){var a=t[l];if(void 0!==a)return a.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,s),i.exports}(965)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1idW5kbGUuanMiLCJtYXBwaW5ncyI6Im1MQUVBLGtCQUNBLFlBSUEsWUFlQSxnQkFtQklBLGNBbEJBLEtBQUFDLFVBQTRCLEdBQzVCLEtBQUFDLE9BQXVCLEdBRXZCLEtBQUFDLFVBQXlCLEdBQ3pCLEtBQUFDLFdBQTBCLEdBQzFCLEtBQUFDLGFBQTRCLEdBRTVCLEtBQUFDLGlCQUEyQixFQUMzQixLQUFBQyxnQkFBMEIsRUFFMUIsS0FBQUMsb0JBQWtELEtBQ2xELEtBQUFDLHFCQUE2QyxJQUFJLFVBRWpELEtBQUFDLGtCQUE0QixFQUM1QixLQUFBQyxLQUFlLEVBRWYsS0FBQUMsd0JBQWtDLENBRWxCLENBRWhCQyxLQUFLTixFQUEwQkQsR0FDM0JRLEtBQUtQLGdCQUFrQkEsUUFBQUEsRUFBbUJPLEtBQUtQLGdCQUMvQ08sS0FBS1IsaUJBQW1CQSxRQUFBQSxFQUFvQlEsS0FBS1IsaUJBRWpEUSxLQUFLVixXQUFhLElBQUlVLEtBQUtYLFdBQzNCVyxLQUFLWixPQUFTLEdBQ2RZLEtBQUtULGFBQWUsR0FFcEJTLEtBQUtILEtBQU8sRUFDWkcsS0FBS0osa0JBQW9CLEVBRXpCLElBQUssSUFBSUssRUFBSSxFQUFHQSxFQUFJRCxLQUFLUixpQkFBa0JTLElBQ3ZDRCxLQUFLWixPQUFPYyxLQUFLLElBQUksVUFBTUQsSUFHL0IsSUFBSyxNQUFNRSxLQUFXSCxLQUFLYixVQUN2QmdCLEVBQVFDLE9BRWhCLENBRUFDLFdBQVdGLEdBQ1BILEtBQUtiLFVBQVVlLEtBQUtDLEVBQ3hCLENBRUFHLGlCQUNJTixLQUFLYixVQUFZLEVBQ3JCLENBRUFvQix1QkFDSSxJQUFLLElBQUlOLEVBQUksRUFBR0EsRUFBSUQsS0FBS2IsVUFBVXFCLE9BQVFQLElBQ3ZDRCxLQUFLYixVQUFVYyxHQUFHUSxnQkFDbEJULEtBQUtVLG1CQUFtQlYsS0FBS2IsVUFBVWMsR0FBR1UsV0FBWVgsS0FBS2IsVUFBVWMsR0FFN0UsQ0FFUVcsa0JBQWtCQyxHQUN0QmIsS0FBS1gsVUFBVWEsS0FBS1csRUFDeEIsQ0FFUUgsbUJBQW1CSSxFQUEyQlgsR0FDbEQsSUFBSyxJQUFJRixFQUFJLEVBQUdBLEVBQUlhLEVBQVdOLE9BQVFQLElBQ25DRCxLQUFLWSxrQkFBa0IsSUFBSSxVQUFLRSxFQUFXYixHQUFJRSxHQUV2RCxDQUVBWSxvQkFDSWYsS0FBS1gsVUFBWSxFQUNyQixDQUVBMkIsYUFBYUMsR0FDVGpCLEtBQUtOLG9CQUFzQnVCLENBQy9CLENBRUFDLFcsZ0JBRUksR0FBZ0MsTUFBNUJsQixLQUFLTixvQkFDTCxNQUFNLElBQUl5QixNQUFNLHlCQUlwQixJQUFLLE1BQU1oQixLQUFXSCxLQUFLYixVQUN2QmdCLEVBQVFpQixvQkFBb0JwQixLQUFLWixRQUlyQ1ksS0FBS1osT0FBT2lDLFNBQVFDLElBQ0ssTUFBakJBLEVBQU1uQixTQUFvQm1CLEVBQU1uQixRQUFRb0IsVUFDeENELEVBQU1uQixRQUFVLEtBQUksSUFJVyxRQUF2QyxLQUFBSCxLQUFLTixxQkFBb0I4QixzQkFBYyxnQkFBR3hCLEtBQUtaLE9BQVFZLEtBQUtiLFVBQVdhLEtBQUtILE1BRTVFLE1BQU00QixFQUEwQnpCLEtBQUtaLE9BQU9zQyxRQUFPSixHQUEwQixNQUFqQkEsRUFBTW5CLFVBQWlCSyxPQUMvRWlCLEVBQTBCLEdBQzFCRSxRQUFRQyxLQUFLLDRDQUE0QzVCLEtBQUtaLE9BQU9vQixPQUFTaUIsbUJBQXlDQSxLQUkzSCxJQUFJWixFQUF5QixLQUM3QixJQUFLLElBQUlaLEVBQUksRUFBR0EsRUFBSUQsS0FBS1YsV0FBV2tCLE9BQVFQLElBQ3hDLEdBQUlELEtBQUtWLFdBQVdXLEdBQUdFLFFBQVFvQixRQUFTLENBQ3BDVixFQUFZYixLQUFLVixXQUFXVyxHQUM1QkQsS0FBS1YsV0FBV3VDLE9BQU81QixFQUFHLEdBQzFCLEssQ0FLUixHQUFpQixNQUFiWSxFQUdBLE9BRkFjLFFBQVFDLEtBQUssc0RBQ2I1QixLQUFLSCxPQU9ULEdBSEFHLEtBQUtULGFBQWFXLEtBQUtXLEdBQ3ZCYyxRQUFRRyxJQUFJLGNBQWdCakIsRUFBVWtCLElBRWxDbEIsRUFBVyxDQUV5QixRQUFwQyxLQUFBYixLQUFLTCxzQkFBcUJxQyxrQkFBVSxnQkFBR2hDLEtBQUtpQyxvQkFBb0JwQixJQUdoRSxJQUFJcUIsR0FBYSxFQUNqQixJQUFLLElBQUlqQyxFQUFJLEVBQUdBLEVBQUlELEtBQUtaLE9BQU9vQixPQUFRUCxJQUFLLENBQ3pDLEdBQXNCLE1BQWxCRCxLQUFLWixPQUFPYSxHQUNaLE1BQU0sSUFBSWtCLE1BQU0saUJBRXBCLEdBQTJCLE1BQXZCbkIsS0FBS1osT0FBT2EsR0FBR2tDLE1BQWdCbkMsS0FBS1osT0FBT2EsR0FBR0UsU0FBV1UsRUFBVVYsUUFBUyxDQUU1RUgsS0FBS1osT0FBT2EsR0FBR2tDLEtBQU90QixFQUd0QmIsS0FBS0osb0JBQ0xpQixFQUFVVixRQUFRaUMsY0FDbEJ2QixFQUFVVixRQUFRa0MsWUFBWW5DLEtBQUtGLEtBQUtILE1BRXhDRyxLQUFLRix3QkFBeUIsRUFFOUJvQyxHQUFhLEVBQ2IsSyxDQUdKLEdBQTJCLE1BQXZCbEMsS0FBS1osT0FBT2EsR0FBR2tDLE1BQWdCbkMsS0FBS1osT0FBT2EsR0FBR2tDLEtBQU1KLElBQU1sQixFQUFVa0IsR0FBSSxDQUV6QixRQUEvQyxLQUFBL0IsS0FBS0wsc0JBQXFCMkMsNkJBQXFCLGdCQUFHdEMsS0FBS2lDLG9CQUFvQnBCLElBRTNFYixLQUFLRix3QkFBeUIsRUFDOUJvQyxHQUFhLEVBQ2IsSyxFQUtSLEdBQUlBLEVBQVksQ0FJWixHQUhBUCxRQUFRRyxJQUFJLGVBQWlCakIsRUFBVWtCLElBR3FELE1BQXhGL0IsS0FBS1osT0FBT21ELE1BQUtqQixHQUFTQSxFQUFNbkIsU0FBV1UsRUFBV1YsU0FBeUIsTUFBZG1CLEVBQU1hLE9BQ3ZFLE1BQU0sSUFBSWhCLE1BQU0sMENBSXBCbkIsS0FBS0osb0JBQ0xpQixFQUFVVixRQUFRaUMsY0FDbEJ2QixFQUFVVixRQUFRa0MsWUFBWW5DLEtBQUtGLEtBQUtILE1BRXhDRyxLQUFLRix3QkFBeUIsRUFHOUIsTUFBTTBDLEVBQXlCeEMsS0FBS0wscUJBQXFCOEMsZ0JBQWdCekMsS0FBS2lDLG9CQUFvQnBCLEtBRW5FLEdBQTNCMkIsSUFDQXhDLEtBQUtaLE9BQU9ZLEtBQUswQyxrQkFBa0JGLElBQXlCTCxLQUFPdEIsRSxDQUkzRSxJQUFJOEIsR0FBaUIsRUFDckIsSUFBSyxNQUFNckIsS0FBU3RCLEtBQUtaLE9BQ3JCLEdBQWtCLE1BQWRrQyxFQUFNYSxNQUdDYixFQUFNYSxLQUFNSixJQUFNbEIsRUFBVWtCLEdBQUksQ0FFdkNZLEdBQWlCLEVBQ2pCLEssQ0FHUixJQUFLQSxFQUNELE1BQU0sSUFBSXhCLE1BQU0sd0RBSXBCTixFQUFVK0IsS0FBSzVDLEtBQUtILEssQ0FHeEJHLEtBQUtILE1BQ1QsQ0FFQW9DLG9CQUFvQnBCLEdBRWhCLE1BQU1nQyxFQUFpQjdDLEtBQUtaLE9BQU9zQyxRQUFPSixHQUFTQSxFQUFNbkIsU0FBV1UsRUFBVVYsVUFDeEUyQyxFQUF1QjlDLEtBQUtULGFBQWFtQyxRQUFPa0IsR0FBUUEsRUFBS3pDLFNBQVdVLEVBQVVWLFVBU3hGLE1BUDhCLENBQzFCVSxVQUFXQSxFQUNYa0MsZUFBZ0JGLEVBQ2hCRyxvQkFBcUJGLEVBQ3JCM0QsVUFBV2EsS0FBS2IsVUFJeEIsQ0FFQThELGFBQ0ksT0FBaUMsR0FBMUJqRCxLQUFLVixXQUFXa0IsTUFDM0IsQ0FFUWtDLGtCQUFrQlgsR0FDdEIsSUFBSyxJQUFJOUIsRUFBSSxFQUFHQSxFQUFJRCxLQUFLWixPQUFPb0IsT0FBUVAsSUFDcEMsR0FBSUQsS0FBS1osT0FBT2EsR0FBRzhCLElBQU1BLEVBQ3JCLE9BQU85QixFQUdmLE9BQVEsQ0FDWixDQUVBaUQsYUFPSSxNQU5nQixDQUNadEQsa0JBQW1CSSxLQUFLSixrQkFDeEJ1RCxnQkFBaUJuRCxLQUFLVCxhQUFhaUIsT0FBU1IsS0FBS0osa0JBQ2pEd0QsWUFBYXBELEtBQUtULGFBQWFpQixPQUl2QyxDQUVBNkMsVyxRQUlJLEdBSEFyRCxLQUFLRCxPQUcyQixNQUE1QkMsS0FBS04sb0JBQ0wsTUFBTSxJQUFJeUIsTUFBTSx5QkFNcEIsSUFGdUMsUUFBdkMsS0FBQW5CLEtBQUtOLHFCQUFvQjhCLHNCQUFjLGdCQUFHeEIsS0FBS1osT0FBUVksS0FBS2IsVUFBVyxJQUUvRGEsS0FBS2lELGNBQWMsQ0FDdkJqRCxLQUFLa0IsV0FFTCxNQUFNb0MsRUFBVyxJQUNqQixHQUFJdEQsS0FBS0gsS0FBT3lELEVBQVUsQ0FDdEIzQixRQUFRQyxLQUFLLHdCQUNiLEssRUFJUixPQUFPNUIsS0FBS2tELFlBQ2hCLENBRUFLLGVBQWVDLEVBQW1CQyxFQUFpQnpELEtBQUtOLG9CQUFxQmdFLE1BQ2pEQyxTQUFTQyxlQUFlLG1CQUNoQ0MsTUFBTUMsUUFBVSxPQUViSCxTQUFTQyxlQUFlLFdBQ2hDRyxVQUFZLHdCQUNWTixFQUFPTyxxRUFFdUJSLEVBQVM1RCxrQkFBa0JxRSxRQUFRLDJEQUNwQ1QsRUFBU0wsZ0JBQWdCYyxRQUFRLHdDQUNwRFQsRUFBU0osWUFBWWEsUUFBUSxtQkFDbERDLFFBQVFDLE9BQU8sS0FBTSxLQUFNLFNBQ2pDLENBRUFDLDRCQUE0QkMsR0FDQVYsU0FBU0MsZUFBZSxtQkFDaENDLE1BQU1DLFFBQVUsT0FFaEMsTUFBTVEsRUFBYVgsU0FBU0MsZUFBZSxXQUMzQ1UsRUFBV1AsVUFBWSxHQUV2QixJQUFLLElBQUk5RCxFQUFJLEVBQUdBLEVBQUlvRSxFQUFXN0QsT0FBUVAsSUFBSyxDQUN4Q0QsS0FBS2dCLGFBQWFxRCxFQUFXcEUsSUFDN0IsTUFBTXVELEVBQW1CeEQsS0FBS3FELFdBRTlCaUIsRUFBV1AsV0FBYSw0QkFDWE0sRUFBV3BFLEdBQUd5RCxLQUFLTSx1RUFDV1IsRUFBUTVELGtCQUFrQnFFLFFBQVEsK0RBQ25DVCxFQUFRTCxnQkFBZ0JjLFFBQVEsNENBQ25EVCxFQUFRSixZQUFZYSxRQUFRLHVCQUNqREMsUUFBUUMsT0FBTyxLQUFNLEtBQU0sVUFFN0JHLEVBQVdQLFdBQWEsUSxDQUVoQyxFLCtEQzNUSixnQkErQkk3RSxZQUFZcUYsR0E1QlosS0FBQUMsU0FBbUIsRUFDbkIsS0FBQUMsU0FBbUIsRUFDbkIsS0FBQUMsTUFBZ0IsRUFFaEIsS0FBQUMsSUFBNkIsS0FDN0IsS0FBQUMsS0FBOEIsS0FFOUIsS0FBQUMsa0JBQThDLEtBQzlDLEtBQUFDLFlBQXdDLEtBQ3hDLEtBQUFDLFlBQXdDLEtBQ3hDLEtBQUFDLGFBQXdDLEtBRXhDLEtBQUFDLGVBQThDLEtBQzlDLEtBQUFDLFVBQXlDLEtBQ3pDLEtBQUFDLGFBQXNDLEtBRXRDLEtBQUFDLGNBQTZDLEtBQzdDLEtBQUFDLGNBQTZDLEtBQzdDLEtBQUFDLHVCQUFzRCxLQUN0RCxLQUFBQyxxQkFBb0QsS0FFcEQsS0FBQUMsV0FBeUMsR0FFekMsS0FBQUMsZ0JBQTRDLEtBRzVDLEtBQUFDLGtCQUF5QyxLQUdyQzFGLEtBQUt1RSxLQUFPQSxDQUNoQixDQUVBeEUsT0FDSUMsS0FBSzJFLElBQU1oQixTQUFTQyxlQUFlLGlCQUNuQzVELEtBQUs0RSxLQUFPakIsU0FBU0MsZUFBZSxZQUVwQzVELEtBQUs2RSxrQkFBb0JsQixTQUFTQyxlQUFlLHdCQUNqRDVELEtBQUs4RSxZQUFjbkIsU0FBU0MsZUFBZSxrQkFDM0M1RCxLQUFLK0UsWUFBY3BCLFNBQVNDLGVBQWUsa0JBQzNDNUQsS0FBS2dGLGFBQWVyQixTQUFTQyxlQUFlLDBCQUU1QzVELEtBQUtpRixlQUFpQnRCLFNBQVNDLGVBQWUsa0NBQzlDNUQsS0FBS2tGLFVBQVl2QixTQUFTQyxlQUFlLDZCQUN6QzVELEtBQUttRixhQUFleEIsU0FBU0MsZUFBZSxxQkFFNUM1RCxLQUFLb0YsY0FBZ0J6QixTQUFTQyxlQUFlLHdCQUM3QzVELEtBQUtxRixjQUFnQjFCLFNBQVNDLGVBQWUsd0JBQzdDNUQsS0FBS3NGLHVCQUF5QjNCLFNBQVNDLGVBQWUsMkJBQ3RENUQsS0FBS3VGLHFCQUF1QjVCLFNBQVNDLGVBQWUseUJBRXBENUQsS0FBS3lGLGdCQUFrQjlCLFNBQVNDLGVBQWUsZUFLL0M1RCxLQUFLbUYsYUFBYXRCLE1BQU1DLFFBQVUsT0FLbEM5RCxLQUFLNkUsa0JBQWtCYyxpQkFBaUIsU0FBUyxLQUM3QzNGLEtBQUs0RixlQUFlLElBR3hCNUYsS0FBSzhFLFlBQVlhLGlCQUFpQixTQUFTLEtBQ3ZDM0YsS0FBSzZGLE1BQU0sSUFHZjdGLEtBQUsrRSxZQUFZWSxpQkFBaUIsU0FBUyxLQUN2QzNGLEtBQUs4RixlQUFjLEVBQU0sSUFHN0I5RixLQUFLZ0YsYUFBYVcsaUJBQWlCLFNBQVMsS0FDeEMzRixLQUFLMEUsTUFBUXFCLFNBQVMvRixLQUFLZ0YsYUFBY2dCLE9BQ3pDaEcsS0FBS2lHLGNBQWMsSUFHdkJqRyxLQUFLeUYsZ0JBQWdCRSxpQkFBaUIsU0FBUyxLQUMzQyxHQUE0QyxNQUF4QzNGLEtBQUt1RSxLQUFLMkIsT0FBT3hHLG9CQUNqQixPQUVKLE1BQU15RyxFQUFnQm5HLEtBQUt1RSxLQUFLMkIsT0FBT3hHLG9CQUFvQmdFLEtBQzNEMEMsT0FBT0MsS0FBSywrRkFBK0ZGLE9BQW9CLFVBQVdHLE9BQU8sSUFNckp0RyxLQUFLaUcsZUFLTGpHLEtBQUt1RyxnQkFDVCxDQUNBWCxjQUFjbkIsR0FFTnpFLEtBQUt5RSxRQURNLE1BQVhBLEdBQ2dCekUsS0FBS3lFLFFBRU5BLEVBRW5CekUsS0FBS2lHLGVBRUxqRyxLQUFLNkUsa0JBQW1CZCxVQUFZL0QsS0FBS3lFLFFBQVUsUUFBVSxNQUNqRSxDQUVBcUIsY0FBY3RCLEdBRU54RSxLQUFLd0UsUUFETSxNQUFYQSxHQUNnQnhFLEtBQUt3RSxRQUVOQSxFQUVmeEUsS0FBS3dFLFNBQ0x4RSxLQUFLMkUsSUFBS2QsTUFBTUMsUUFBVSxRQUMxQjlELEtBQUs0RSxLQUFNZixNQUFNQyxRQUFVLE9BRTNCOUQsS0FBS3VFLEtBQUtULFFBQVEwQyxlQUFpQixLQUMvQnhHLEtBQUt5RyxrQkFBa0IsRUFFM0J6RyxLQUFLeUcscUJBR0x6RyxLQUFLMkUsSUFBS2QsTUFBTUMsUUFBVSxPQUMxQjlELEtBQUs0RSxLQUFNZixNQUFNQyxRQUFVLE9BRUcsTUFBMUI5RCxLQUFLMEYsbUJBQ0xnQixjQUFjMUcsS0FBSzBGLG1CQUV2QjFGLEtBQUt1RSxLQUFLVCxRQUFRMEMsZUFBaUIsS0FDL0J4RyxLQUFLdUUsS0FBS29DLGNBQWMsRUFFNUIzRyxLQUFLdUUsS0FBS29DLGVBRWxCLENBRUF2RyxRQUNJLEdBQThCLE1BQTFCSixLQUFLNkUsbUJBQWtELE1BQXJCN0UsS0FBS21GLGNBQTRDLE1BQXBCbkYsS0FBSzhFLFlBQ3BFLE1BQU0sSUFBSTNELE1BQU0sc0JBRXBCbkIsS0FBS3VFLEtBQUsyQixPQUFPbkcsT0FFakJDLEtBQUs2RSxrQkFBa0JkLFVBQVksT0FDbkMvRCxLQUFLeUUsU0FBVSxFQUVmekUsS0FBS21GLGFBQWF0QixNQUFNQyxRQUFVLE9BRWxDOUQsS0FBSzZFLGtCQUFrQitCLFVBQVcsRUFDbEM1RyxLQUFLOEUsWUFBWThCLFVBQVcsRUFFNUI1RyxLQUFLdUcsZ0JBQ1QsQ0FFQU0saUJBQ0k3RyxLQUFLSSxRQUNMSixLQUFLOEYsZUFBYyxFQUN2QixDQUVBVyxtQkFJSXpHLEtBQUs4RyxjQUVMOUcsS0FBSytHLFdBQ1QsQ0FFQVIsaUJBRUksTUFBTVMsRUFBV3JELFNBQVNDLGVBQWUsd0JBQ25DcUQsRUFBWXRELFNBQVNDLGVBQWUsOEJBQ3BDc0QsRUFBUXZELFNBQVNDLGVBQWUsd0JBR3RDb0QsRUFBU2pELFVBQVksR0FDckJrRCxFQUFVbEQsVUFBWSxHQUd0QixDQUNJLE1BQU1vRCxFQUFrQnhELFNBQVN5RCxjQUFjLE1BQy9DRCxFQUFnQnBELFVBQVksT0FDNUJvRCxFQUFnQkUsVUFBVUMsSUFBSSxVQUM5Qk4sRUFBU08sWUFBWUosRSxDQUl6QixDQUNJLE1BQU1LLEVBQW1CN0QsU0FBU3lELGNBQWMsTUFDaERJLEVBQWlCekQsVUFBWSxhQUM3QnlELEVBQWlCSCxVQUFVQyxJQUFJLFVBQy9CTCxFQUFVTSxZQUFZQyxFLENBSTFCLENBRUksS0FBMEIsTUFBbkJOLEVBQU1PLFdBRUMsOEJBREVQLEVBQU1PLFVBQTBCMUYsSUFJNUNtRixFQUFNUSxZQUFZUixFQUFNTyxXQUk1QixNQUFNakMsRUFBeUMsR0FDL0MsSUFBSyxJQUFJdkYsRUFBSSxFQUFHQSxFQUFJRCxLQUFLdUUsS0FBSzJCLE9BQU8xRyxpQkFBa0JTLElBQUssQ0FDeEQsTUFBTTBILEVBQVloRSxTQUFTeUQsY0FBYyxNQUVuQ1EsRUFBbUJqRSxTQUFTeUQsY0FBYyxNQUNoRFEsRUFBaUI3RCxVQUFZLFNBQVM5RCxJQUN0QzBILEVBQVVKLFlBQVlLLEdBRXRCcEMsRUFBV3RGLEtBQUt5SCxHQUNoQlQsRUFBTUssWUFBWUksRSxDQUV0QjNILEtBQUt3RixXQUFhQSxDLENBRTFCLENBRUF1QixVQUFVYyxFQUFrQkMsRUFBa0JDLEVBQWdCQyxFQUFpQkMsR0FFM0UsTUFBTWpCLEVBQVdyRCxTQUFTQyxlQUFlLHdCQUNuQ3FELEVBQVl0RCxTQUFTQyxlQUFlLDhCQUdwQ3NFLEVBQVVsSSxLQUFLdUUsS0FBSzJCLE9BQU8zRyxhQUFhNEksSUFBSSxHQUNsRCxHQUFlLE1BQVhELEVBQ0EsT0FHSixDQUNJLE1BQU1FLEVBQWF6RSxTQUFTeUQsY0FBYyxNQUMxQ2dCLEVBQVdyRSxVQUFZLEdBQUcvRCxLQUFLdUUsS0FBSzJCLE9BQU9yRyxPQUMzQ21ILEVBQVNPLFlBQVlhLEUsQ0FJekIsQ0FDSSxNQUFNQyxFQUFjMUUsU0FBU3lELGNBQWMsTUFDM0NpQixFQUFZdEUsVUFBWSxHQUFHbUUsRUFBUW5HLEtBRW5Da0YsRUFBVU0sWUFBWWMsRSxDQUt0QixJQUFLLElBQUlwSSxFQUFJLEVBQUdBLEVBQUlELEtBQUt1RSxLQUFLMkIsT0FBTzFHLGlCQUFrQlMsSUFBSyxDQUN4RCxNQUFNMEgsRUFBWTNILEtBQUt3RixXQUFXdkYsR0FDNUJrQyxFQUFPbkMsS0FBS3VFLEtBQUsyQixPQUFPOUcsT0FBT2EsR0FBR2tDLEtBRWxDbUcsRUFBYzNFLFNBQVN5RCxjQUFjLE1BQzNDa0IsRUFBWXZFLFVBQVksR0FBVyxNQUFSNUIsRUFBZUEsRUFBS0osR0FBSyxLQUV4QyxNQUFSSSxHQUFnQkEsRUFBS0osSUFBTW1HLEVBQVFuRyxJQUFNL0IsS0FBS3VFLEtBQUsyQixPQUFPcEcseUJBRTFEd0ksRUFBWXpFLE1BQU0wRSxnQkFBa0IsT0FHRSxNQUF0Q3ZJLEtBQUt1RSxLQUFLMkIsT0FBTzlHLE9BQU9hLEdBQUdFLFVBQzNCbUksRUFBWXZFLFdBQWEsaUNBQWlDL0QsS0FBS3VFLEtBQUsyQixPQUFPOUcsT0FBT2EsR0FBR0UsUUFBUzRCLGNBR2xHNEYsRUFBVUosWUFBWWUsRSxDQUs5QixNQUFNRSxFQUFRN0UsU0FBU0MsZUFBZSx3QkFDdEM0RSxFQUFNQyxXQUFhRCxFQUFNRSxXQUM3QixDQUVBNUIsY0FDSSxNQUFNWixFQUFTbEcsS0FBS3VFLEtBQUsyQixPQUN6QixHQUFrQyxNQUE5QkEsRUFBT3hHLG9CQUNQLE1BQU0sSUFBSXlCLE1BQU0sZ0NBRXBCbkIsS0FBS2lGLGVBQWdCbEIsVUFBWW1DLEVBQU94RyxvQkFBb0JnRSxLQUM1RDFELEtBQUtrRixVQUFXbkIsVUFBWW1DLEVBQU9yRyxLQUFLOEksV0FFcEN6QyxFQUFPakQsYUFDUGpELEtBQUttRixhQUFjdEIsTUFBTUMsUUFBVSxRQUVuQzlELEtBQUttRixhQUFjdEIsTUFBTUMsUUFBVSxPQUV2QzlELEtBQUt1RixxQkFBc0J4QixXQUFhbUMsRUFBTzNHLGFBQWFpQixPQUFTMEYsRUFBT3RHLG1CQUFtQitJLFdBQy9GM0ksS0FBS3NGLHVCQUF3QnZCLFVBQVltQyxFQUFPdEcsa0JBQWtCK0ksV0FFbEUzSSxLQUFLb0YsY0FBZXJCLFVBQVltQyxFQUFPNUcsV0FBV2tCLE9BQU9tSSxXQUN6RDNJLEtBQUtxRixjQUFldEIsVUFBWW1DLEVBQU8zRyxhQUFhaUIsT0FBT21JLFVBQy9ELENBRUExQyxlQUNrQyxNQUExQmpHLEtBQUswRixtQkFDTGdCLGNBQWMxRyxLQUFLMEYsbUJBRXZCMUYsS0FBSzBGLGtCQUFvQmtELGFBQVksS0FDN0I1SSxLQUFLeUUsU0FDTHpFLEtBQUs2RixNQUVaLEdBQUVnRCxLQUFLN0ksTUFBTyxJQUFPQSxLQUFLMEUsTUFDL0IsQ0FFQW1CLE9BQ1E3RixLQUFLdUUsS0FBSzJCLE9BQU9qRCxlQUdyQmpELEtBQUt1RSxLQUFLMkIsT0FBT2hGLFdBQ2pCbEIsS0FBS3lHLG1CQUVEekcsS0FBS3VFLEtBQUsyQixPQUFPakQsZUFDakJqRCxLQUFLNEYsZUFBYyxHQUNuQjVGLEtBQUt1RSxLQUFLMkIsT0FBTzNDLGVBQWV2RCxLQUFLdUUsS0FBSzJCLE9BQU9oRCxjQUVqRGxELEtBQUs4SSxhQUViLENBRUFBLFlBQ0ksR0FBeUIsTUFBckI5SSxLQUFLbUYsY0FBa0QsTUFBMUJuRixLQUFLNkUsbUJBQWlELE1BQXBCN0UsS0FBSzhFLFlBQ3BFLE1BQU0sSUFBSTNELE1BQU0sc0JBRXBCbkIsS0FBS21GLGFBQWF0QixNQUFNQyxRQUFVLFFBRWxDOUQsS0FBSzZFLGtCQUFrQitCLFVBQVcsRUFDbEM1RyxLQUFLOEUsWUFBWThCLFVBQVcsQ0FDaEMsRSwrREN4VUosZ0JBS0kxSCxZQUFZNkMsR0FDUi9CLEtBQUttQyxLQUFPLEtBQ1puQyxLQUFLRyxRQUFVLEtBRWZILEtBQUsrQixHQUFLQSxDQUNkLEUsK0RDUEosOEJBQ0ksS0FBQTJCLEtBQWUsS0FnRG5CLENBOUNJakIsZ0JBQWdCc0csR0FFWixJQUFJQyxHQUEwQixFQUMxQkMsR0FBa0MsRUFFdEMsSUFBSyxJQUFJaEosRUFBSSxFQUFHQSxFQUFJOEksRUFBS2hHLGVBQWV2QyxPQUFRUCxJQUFLLENBQ2pELE1BQU1xQixFQUFReUgsRUFBS2hHLGVBQWU5QyxHQU1sQyxHQUpJcUIsRUFBTW5CLFNBQVc0SSxFQUFLbEksVUFBVVYsU0FDaEN3QixRQUFRdUgsTUFBTSxpR0FHQSxNQUFkNUgsRUFBTWEsS0FFTixPQURBUixRQUFRQyxLQUFLLHVFQUNOM0IsRUFHWCxJQUFJa0osR0FBYyxFQUNsQixJQUFLLElBQUlDLEVBQUlMLEVBQUsvRixvQkFBb0J4QyxPQUFTLEVBQUc0SSxHQUFLLEVBQUdBLElBR3RELEdBRjJCTCxFQUFLL0Ysb0JBQW9Cb0csR0FFN0JySCxJQUFNVCxFQUFNYSxLQUFLSixHQUFJLENBQ3hDb0gsRUFBYUMsRUFDYixLLENBSVIsSUFBbUIsR0FBZkQsRUFFQSxPQUFPbEosR0FHUGtKLEVBQWFGLElBQXFFLEdBQW5DQSxLQUUvQ0QsRUFBeUIvSSxFQUN6QmdKLEVBQWlDRSxFLENBSXpDLE9BQStCLEdBQTNCSCxHQUNBckgsUUFBUUMsS0FBSyxxQ0FDTCxHQUdMbUgsRUFBS2hHLGVBQWVpRyxHQUF3QmpILEVBQ3ZELEUsMkpDckRKLGtCQUNBLFlBQ0EsWUFDQSxZQUNBLFlBQ0EsWUFDQSxZQUNBLFlBQ0EsWUFFQSxnQkFLSTdDLGNBQ0ljLEtBQUs4RCxRQUFVLElBQUksVUFDbkI5RCxLQUFLa0csT0FBUyxJQUFJLFVBRWxCbEcsS0FBS3FKLGFBQWUsSUFBSSxVQUFhckosS0FDekMsQ0FFQUQsT0FDdUI0RCxTQUFTQyxlQUFlLGNBQ2hDK0IsaUJBQWlCLFNBQVMsS0FBUTNGLEtBQUtzSixLQUFLLElBRXJCM0YsU0FBU0MsZUFBZSw2QkFDaEMrQixpQkFBaUIsU0FBUyxLQUFRM0YsS0FBS3NKLEtBQUksRUFBSyxJQUV2RDNGLFNBQVNDLGVBQWUsY0FDaEMrQixpQkFBaUIsU0FBUyxLQUFRM0YsS0FBS3VKLGNBQWMsSUFFM0M1RixTQUFTQyxlQUFlLGdCQUNoQytCLGlCQUFpQixTQUFTLEtBQVEzRixLQUFLTSxnQkFBZ0IsSUFFakNxRCxTQUFTQyxlQUFlLDhCQUNoQytCLGlCQUFpQixTQUFTLEtBQVEzRixLQUFLd0osVUFBVSxJQUU1QzdGLFNBQVNDLGVBQWUsMkJBQ2hDK0IsaUJBQWlCLFNBQVMsS0FBUTNGLEtBQUt5SixZQUFZLElBTTNFekosS0FBS2tHLE9BQU9uRyxLQUFLLEVBQUcsR0FDcEJDLEtBQUs4RCxRQUFRL0QsS0FBSyxlQUNsQkMsS0FBS3FKLGFBQWF0SixPQUNsQkMsS0FBSzhELFFBQVE0RixtQkFBa0IsS0FBUTFKLEtBQUsyRyxjQUFjLElBS2pDaEQsU0FBU0MsZUFBZSxpQkFDaEMrQixpQkFBaUIsVUFBV2dFLElBQ3pDLE1BQU1DLEVBQVU3RCxTQUE0QjRELEVBQUVFLE9BQVE3RCxPQUVsRDhELE1BQU1GLElBQVlBLEVBQVUsRUFDNUJHLE1BQU0sNkJBSVYvSixLQUFLa0csT0FBT25HLEtBQUtDLEtBQUtrRyxPQUFPekcsZ0JBQWlCbUssR0FDOUM1SixLQUFLMkcsZUFBYyxJQVFFaEQsU0FBU0MsZUFBZSxVQUNoQytCLGlCQUFpQixVQUFXZ0UsSUFDaUIsZ0JBQWxDQSxFQUFFRSxPQUFRN0QsTUFBTWdFLGNBQ2hCckcsU0FBU0MsZUFBZSw2QkFBOEJxRyxhQUFhLFdBQVksUUFHL0V0RyxTQUFTQyxlQUFlLDZCQUE4QnNHLGdCQUFnQixZQUdwQyxrQkFBbENQLEVBQUVFLE9BQVE3RCxNQUFNZ0UsZUFDa0IsZ0JBQWxDTCxFQUFFRSxPQUFRN0QsTUFBTWdFLGVBQ25CckcsU0FBU0MsZUFBZSx5QkFBMEJDLE1BQU1DLFFBQVUsUUFDbEVILFNBQVNDLGVBQWUseUJBQTBCQyxNQUFNQyxRQUFVLFFBQ2xFSCxTQUFTQyxlQUFlLHFCQUFzQkMsTUFBTUMsUUFBVSxVQUc5REgsU0FBU0MsZUFBZSx5QkFBMEJDLE1BQU1DLFFBQVUsT0FDbEVILFNBQVNDLGVBQWUseUJBQTBCQyxNQUFNQyxRQUFVLE9BQ2xFSCxTQUFTQyxlQUFlLHFCQUFzQkMsTUFBTUMsUUFBVSxPLElBT2pFSCxTQUFTQyxlQUFlLGlCQUNoQytCLGlCQUFpQixTQUFTLEtBQ25CaEMsU0FBU0MsZUFBZSxtQkFBb0JDLE1BQU1DLFFBQVUsTUFBTSxJQU12RjlELEtBQUsyRyxjQUNULENBRUE0QyxlQUNJLE1BQU1ZLEVBQWdCcEUsU0FBNEJwQyxTQUFTQyxlQUFlLFdBQVlvQyxPQUVoRm9FLEVBQWlCckUsU0FBNEJwQyxTQUFTQyxlQUFlLGVBQWdCb0MsT0FDckZxRSxFQUFpQnRFLFNBQTRCcEMsU0FBU0MsZUFBZSxlQUFnQm9DLE9BRXJGc0UsRUFBaUJ2RSxTQUE0QnBDLFNBQVNDLGVBQWUsZUFBZ0JvQyxPQUNyRnVFLEVBQWlCeEUsU0FBNEJwQyxTQUFTQyxlQUFlLGVBQWdCb0MsT0FFM0YsSUFBSXdFLEVBQW9CLEVBRXhCLElBQUssSUFBSXZLLEVBQUksRUFBR0EsRUFBSWtLLEVBQWVsSyxJQUFLLENBQ3BDLE1BQU13SyxFQUFhQyxLQUFLQyxNQUFNRCxLQUFLRSxVQUFZUCxFQUFpQkQsRUFBaUIsSUFBTUEsRUFFdkZwSyxLQUFLa0csT0FBTzdGLFdBQVcsSUFBSSxVQUN2QixDQUFDbUssRUFBbUJBLEVBQW9CQyxHQUN4Q0MsS0FBS0MsTUFBTUQsS0FBS0UsVUFBWUwsRUFBaUJELEVBQWlCLElBQU1BLEVBQ3BFckssSUFFSkQsS0FBS2tHLE9BQU8vRyxVQUFVYSxLQUFLa0csT0FBTy9HLFVBQVVxQixPQUFTLEdBQUdDLGdCQUV4RCtKLEdBQXFCQyxDLENBR3pCekssS0FBSzJHLGNBQ1QsQ0FFQXJHLGlCQUNJTixLQUFLa0csT0FBTzVGLGlCQUNaTixLQUFLa0csT0FBT25GLG9CQUVaZixLQUFLMkcsY0FDVCxDQUVBNkMsV0FFSSxJQUFLLElBQUl2SixFQUFJLEVBQUdBLEVBQUlELEtBQUtrRyxPQUFPL0csVUFBVXFCLE9BQVFQLElBQzlDLElBQUssSUFBSW1KLEVBQUksRUFBR0EsRUFBSXBKLEtBQUtrRyxPQUFPL0csVUFBVWMsR0FBR1UsV0FBV0gsT0FBUTRJLElBQzVEcEosS0FBS2tHLE9BQU83RyxVQUFVYSxLQUFLLElBQUksVUFBS0YsS0FBS2tHLE9BQU8vRyxVQUFVYyxHQUFHVSxXQUFXeUksR0FBSXBKLEtBQUtrRyxPQUFPL0csVUFBVWMsS0FJMUdELEtBQUtrRyxPQUFPN0csVUFBVXdMLE1BQUssSUFBTUgsS0FBS0UsU0FBVyxLQUVqRDVLLEtBQUsyRyxjQUNULENBRUE4QyxhQUNJekosS0FBS2tHLE9BQU83RyxVQUFZLEdBQ3hCVyxLQUFLMkcsY0FDVCxDQUVBQSxlQUM2QmhELFNBQVNDLGVBQWUsbUJBQ2hDRyxVQUFZLElBQUkvRCxLQUFLa0csT0FBTy9HLFVBQVVxQixPQUFPbUksY0FFOUQsTUFBTW1DLEVBQTZCbkgsU0FBU0MsZUFBZSw4QkFFdkQ1RCxLQUFLa0csT0FBTy9HLFVBQVVxQixPQUFTLEdBQXFDLEdBQWhDUixLQUFLa0csT0FBTzdHLFVBQVVtQixPQUMxRHNLLEVBQTJCWixnQkFBZ0IsWUFHM0NZLEVBQTJCQyxXQUFXQyxhQUFhckgsU0FBU3NILGdCQUFnQixhQUloRixNQUFNQyxFQUFtQnZILFNBQVNDLGVBQWUsaUJBQ2pEc0gsRUFBaUJuSCxVQUFZLEdBRTdCLElBQUssSUFBSTlELEVBQUksRUFBR0EsRUFBSUQsS0FBS2tHLE9BQU8vRyxVQUFVcUIsT0FBUVAsSUFBSyxDQUNuRCxNQUFNRSxFQUFVSCxLQUFLa0csT0FBTy9HLFVBQVVjLEdBRWhDa0wsRUFBYXhILFNBQVN5RCxjQUFjLFFBQzFDK0QsRUFBVzlELFVBQVVDLElBQUksV0FFekI2RCxFQUFXcEgsVUFBWSwrQ0FBK0M5RCwwQ0FBMENFLEVBQVFRLFdBQVd5SyxLQUFLLHFCQUV4SUYsRUFBaUIzRCxZQUFZNEQsRSxDQUdHLEdBQWhDbkwsS0FBS2tHLE9BQU8vRyxVQUFVcUIsU0FDdEIwSyxFQUFpQm5ILFVBQVksOERBSVhKLFNBQVNDLGVBQWUsc0JBQ2hDRyxVQUFZLElBQUkvRCxLQUFLa0csT0FBTzdHLFVBQVVtQixPQUFPbUksY0FFM0QsTUFBTTBDLEVBQWdCMUgsU0FBU0MsZUFBZSxtQkFDOUN5SCxFQUFjdEgsVUFBWS9ELEtBQUtrRyxPQUFPN0csVUFBVWlNLEtBQUtuSixHQUFrQkEsRUFBS0osS0FBTXFKLEtBQUssTUFFbkQsR0FBaENwTCxLQUFLa0csT0FBTzdHLFVBQVVtQixTQUN0QjZLLEVBQWN0SCxVQUFZLHdEQUVsQyxDQUVBdUYsSUFBSWlDLEdBQ0EsR0FBSXZMLEtBQUtrRyxPQUFPL0csVUFBVXFCLE9BQVNSLEtBQUtrRyxPQUFPOUcsT0FBT29CLE9BRWxELFlBREF1SixNQUFNLHVDQUlWLE1BQU10RyxFQUE0QkUsU0FBU0MsZUFBZSxVQUFXb0MsTUFDckUsSUFBSXdGLEdBQXVCLEVBRTNCLE1BQU1DLEVBQVdDLFdBQThCL0gsU0FBU0MsZUFBZSxxQkFBc0JvQyxPQUN2RjJGLEVBQVdELFdBQThCL0gsU0FBU0MsZUFBZSxxQkFBc0JvQyxPQUN2RjRGLEVBQWNGLFdBQThCL0gsU0FBU0MsZUFBZSxpQkFBa0JvQyxPQUU1RixPQUFRdkMsRUFBT3VHLGVBQ1gsSUFBSyxRQUVHaEssS0FBS2tHLE9BQU9sRixhQUFhLElBQUksV0FDN0IsTUFFUixJQUFLLGVBRUdoQixLQUFLa0csT0FBT2xGLGFBQWEsSUFBSSxXQUM3QixNQUVSLElBQUssZ0JBRUcsR0FBSXlLLEdBQVlFLEVBRVosWUFEQTVCLE1BQU0sd0RBSVYvSixLQUFLa0csT0FBT2xGLGFBQWEsSUFBSSxVQUFpQnlLLEVBQVVFLEVBQVVDLElBQ2xFLE1BRVIsSUFBSyxpQkFFRzVMLEtBQUtrRyxPQUFPbEYsYUFBYSxJQUFJLFdBQzdCLE1BRVIsSUFBSyxjQUVHd0ssR0FBYyxFQUNkLE1BRVIsUUFFUXpCLE1BQU0scUJBSWxCLEdBQUl5QixFQUFKLENBQ0ksR0FBSUMsR0FBWUUsRUFFWixZQURBNUIsTUFBTSx3REFJVixNQUFNMUYsRUFBYSxDQUNmLElBQUksVUFDSixJQUFJLFVBQ0osSUFBSSxVQUFpQm9ILEVBQVVFLEVBQVVDLElBSTdDNUwsS0FBS2tHLE9BQU85Qiw0QkFBNEJDLEUsTUFJNUMsR0FBSWtILEVBQ0F2TCxLQUFLcUosYUFBYXhDLHFCQUVqQixDQUNELE1BQU1yRCxFQUFVeEQsS0FBS2tHLE9BQU83QyxXQUM1QnJELEtBQUtrRyxPQUFPM0MsZUFBZUMsRSxDQUVuQyxFLCtEQ3BSSixnQkFLSXRFLFlBQVk2QyxFQUFZNUIsR0FIeEIsS0FBQTBMLGVBQXlCLEVBSXJCN0wsS0FBSytCLEdBQUtBLEVBQ1YvQixLQUFLRyxRQUFVQSxDQUNuQixDQUVBeUMsS0FBSy9DLEdBQ0RHLEtBQUs2TCxlQUFpQmhNLEVBQ3RCRyxLQUFLRyxRQUFRMkwsWUFDakIsRSwrRENiSixnQkFjSTVNLFlBQVk2TSxFQUFrQ0MsRUFBeUJqSyxHQVR2RSxLQUFBSyxZQUFzQixFQUN0QixLQUFBMEosV0FBcUIsRUFFckIsS0FBQXZLLFNBQW1CLEVBQ25CLEtBQUEwSyxlQUF5QixFQUVqQixLQUFBQyxNQUF1QixHQUMvQixLQUFBN0osWUFBNkIsR0FHekJyQyxLQUFLK0wsZUFBaUJBLEVBQ3RCL0wsS0FBS2dNLGdCQUFrQkEsRUFDdkJoTSxLQUFLK0IsR0FBS0EsQ0FDZCxDQUVBM0IsUUFDSUosS0FBS29DLFlBQWMsRUFDbkJwQyxLQUFLOEwsV0FBYSxFQUVsQjlMLEtBQUt1QixTQUFVLEVBQ2Z2QixLQUFLaU0sZUFBaUIsRUFFdEJqTSxLQUFLcUMsWUFBYyxFQUN2QixDQUVBNUIsZ0JBQ0lULEtBQUtrTSxNQUFRLEdBRWIsSUFBSyxJQUFJak0sRUFBSSxFQUFHQSxFQUFJRCxLQUFLZ00sZ0JBQWlCL0wsSUFDdENELEtBQUtrTSxNQUFNaE0sS0FBS3dLLEtBQUtDLE1BQU1ELEtBQUtFLFVBQVk1SyxLQUFLK0wsZUFBZSxHQUFLL0wsS0FBSytMLGVBQWUsS0FBTy9MLEtBQUsrTCxlQUFlLEdBRTVILENBRUFwTCxXQUNJLE9BQU9YLEtBQUtrTSxLQUNoQixDQUVBOUssb0JBQW9CaEMsR0FDaEIsSUFBSTZNLEVBQXlCLEVBRTdCLElBQUssTUFBTTNLLEtBQVNsQyxFQUNaa0MsRUFBTW5CLFNBQVdILE1BQ2pCaU0sSUFRUixHQUpJak0sS0FBS3VCLFFBREwwSyxFQUFpQixFQUtqQmpNLEtBQUs4TCxZQUFjOUwsS0FBS2dNLGdCQUN4QmhNLEtBQUt1QixTQUFVLE9BQ2QsR0FBSXZCLEtBQUs4TCxZQUFjOUwsS0FBS2dNLGdCQUM3QixNQUFNLElBQUk3SyxNQUFNLCtDQUVwQm5CLEtBQUtpTSxlQUFpQkEsQ0FDMUIsQ0FFQUUsc0JBQXNCQyxFQUFXdk0sR0FDN0IsSUFBSXdNLEVBQWlCLEVBRXJCLElBQUssSUFBSXBNLEVBQUlELEtBQUtxQyxZQUFZN0IsT0FBUyxFQUFHUCxHQUFLLEtBQ3ZDSixFQUFPRyxLQUFLcUMsWUFBWXBDLEdBQUttTSxHQURhbk0sSUFJOUNvTSxJQUdKLE9BQU9BLENBQ1gsRSwrREN2RUosOEJBQ0ksS0FBQTNJLEtBQWUsT0FpQm5CLENBZklsQyxlQUFlcEMsRUFBc0JELEdBQ2pDLE1BQU1tTixFQUFxQjVCLEtBQUtDLE1BQU12TCxFQUFPb0IsT0FBU3JCLEVBQVVxQixRQUVoRW1CLFFBQVFHLElBQUksY0FBY3dLLHdCQUUxQixJQUFLLElBQUlyTSxFQUFJLEVBQUdBLEVBQUliLEVBQU9vQixPQUFRUCxJQUNOLE1BQXJCYixFQUFPYSxHQUFHRSxVQUlkZixFQUFPYSxHQUFHRSxRQUFtQmhCLEVBQVV1TCxLQUFLQyxNQUFNMUssRUFBSXFNLElBSTlELEUsK0RDakJKLDhCQUNJLEtBQUE1SSxLQUFlLGVBS25CLENBSElsQyxlQUFlcEMsRUFBc0JELEdBQ2pDLE1BQU0sSUFBSWdDLE1BQU0sMEJBQ3BCLEUsMkpDTEosa0JBRUEsZ0JBUUlqQyxZQUFZcU4sRUFBd0JDLEVBQXdCWixFQUFzQixHQVBsRixLQUFBbEksS0FBZSxtQkFDZixLQUFBK0ksa0JBQTRCLEVBT3hCek0sS0FBS3VNLGVBQWlCQSxFQUN0QnZNLEtBQUswTSxnQkFBa0JGLEVBRXZCeE0sS0FBSzRMLFlBQWNBLENBQ3ZCLENBRUFwSyxlQUFlcEMsRUFBaUJELEVBQXlDVSxHQUVyRSxHQUFJRyxLQUFLeU0saUJBRUwsT0FEQXpNLEtBQUt5TSxrQkFBbUIsR0FDakIsSUFBSSxXQUFlakwsZUFBZXBDLEVBQVFELEdBSXJELE1BQU13TixFQUFhM00sS0FBS3VNLGVBQ2xCSyxFQUFhNU0sS0FBSzBNLGdCQUV4QixJQUFLLElBQUl6TSxFQUFJLEVBQUdBLEVBQUlkLEVBQVVxQixPQUFRUCxJQUFLLENBQ3ZDLE1BQU00TSxFQUFxQjFOLEVBQVVjLEdBQUdrTSxzQkFBc0JuTSxLQUFLNEwsWUFBYS9MLEdBQ2hGLElBQUlpTixFQUFrQkQsRUFBcUI3TSxLQUFLNEwsWUFDNUNtQixFQUFnQjNOLEVBQU9zQyxRQUFPSixHQUFTQSxFQUFNbkIsU0FBV2hCLEVBQVVjLEtBQUlPLE9BSTFFLEdBRkFtQixRQUFRRyxJQUFJLFdBQVczQyxFQUFVYyxHQUFHOEIsdUJBQXVCK0ssTUFBb0JELE9BQXdCN00sS0FBSzRMLGdCQUV4R2tCLEVBQWtCSCxHQUFjSSxFQUFnQixFQUVoRCxJQUFLLElBQUkzRCxFQUFJLEVBQUdBLEVBQUloSyxFQUFPb0IsT0FBUTRJLElBQy9CLEdBQUloSyxFQUFPZ0ssR0FBR2pKLFNBQVdoQixFQUFVYyxHQUUvQixPQURBYixFQUFPZ0ssR0FBR2pKLFFBQVUsS0FDYkgsS0FBS3dCLGVBQWVwQyxFQUFRRCxFQUFXVSxHQUsxRCxHQUFJaU4sRUFBa0JGLEVBRWxCLElBQUssSUFBSXhELEVBQUksRUFBR0EsRUFBSWhLLEVBQU9vQixPQUFRNEksSUFDL0IsR0FBeUIsTUFBckJoSyxFQUFPZ0ssR0FBR2pKLFFBQWlCLENBQzNCZixFQUFPZ0ssR0FBR2pKLFFBQW1CaEIsRUFBVWMsR0FDdkMsSyxFQUtwQixFLCtEQ3ZESiw4QkFDSSxLQUFBeUQsS0FBZSxjQThCbkIsQ0E1QklsQyxlQUFlcEMsRUFBc0JELEdBQ2pDLE1BQU1pRSxFQUFjakUsRUFBVTZOLFFBQU8sQ0FBQ0MsRUFBTzlNLElBQVk4TSxFQUFROU0sRUFBUTZMLGlCQUFpQixHQUUxRixJQUFJa0IsRUFBbUIsRUFDdkIsSUFBSyxJQUFJak4sRUFBSSxFQUFHQSxFQUFJZCxFQUFVcUIsT0FBUVAsSUFBSyxDQUN2QyxJQUFJa04sRUFBcUJ6QyxLQUFLQyxNQUFPeEwsRUFBVWMsR0FBRytMLGdCQUFrQjVJLEVBQWVoRSxFQUFPb0IsUUFFdEYyTSxFQUFxQixJQUNyQkEsRUFBcUIsR0FHekIsSUFBSyxJQUFJL0QsRUFBSSxFQUFHQSxFQUFJK0QsRUFBb0IvRCxJQUFLLENBQ3pDLEdBQUk4RCxHQUFvQjlOLEVBQU9vQixPQUFRLENBQ25DbUIsUUFBUXVILE1BQU0sdURBQ2QsSyxDQUdvQyxNQUFwQzlKLEVBQU84TixHQUFrQi9NLFVBSTdCZixFQUFPOE4sR0FBa0IvTSxRQUFtQmhCLEVBQVVjLEdBQ3REaU4sSSxFQUtaLEUsMkpDbkNKLGtCQUc0QixvQkFBYnZKLFdBQ00sSUFBSSxXQUNaNUQsTSwrRENMYixnQkFJSWIsY0FIQSxLQUFBa08sSUFBdUMsS0FJbkNwTixLQUFLd0csZUFBaUIsSUFDMUIsQ0FFQXpHLEtBQUtzTixHQUNELE1BQU1DLEVBQVMzSixTQUFTQyxlQUFleUosR0FDdkNyTixLQUFLb04sSUFBTUUsRUFBT0MsV0FBVyxNQUU3Qm5ILE9BQU9ULGlCQUFpQixTQUFVM0YsS0FBS3dOLFlBQVkzRSxLQUFLN0ksT0FFeERBLEtBQUt3TixhQUNULENBRUFBLGNBQ29CLE1BQVp4TixLQUFLb04sTUFJVHBOLEtBQUtvTixJQUFJRSxPQUFPRyxNQUFRckgsT0FBT3NILFdBQy9CMU4sS0FBS29OLElBQUlFLE9BQU9LLE9BQVN2SCxPQUFPd0gsWUFFTCxNQUF2QjVOLEtBQUt3RyxnQkFDTHhHLEtBQUt3RyxpQkFFYixDQUVBa0Qsa0JBQWtCbUUsR0FDZDdOLEtBQUt3RyxlQUFpQnFILENBQzFCLEUsR0MvQkFDLEVBQTJCLENBQUMsR0FHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVcEwsS0FBS3dMLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNKLEdBR3BFSyxFQUFPRCxPQUNmLENDbkIwQkosQ0FBb0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NsYXNzZXMvQWxsb2NhdGluZ01NVS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL0FuaW1hdGlvbkdVSS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL0ZyYW1lLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvTFJVLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvTWVudS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL1BhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9Qcm9jZXNzLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvYWxnb3JpdGhtcy9FcXVhbC50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvTG9jYWxpdHlNb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvUGFnZUZhdWx0Q29udHJvbC50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvUHJvcG9ydGlvbmFsLnRzIiwid2VicGFjazovLy8uL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4uL3NoYXJlZC9jbGFzc2VzL0Rpc3BsYXkudHMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFsbG9jYXRpb25BbGdvcml0aG0gZnJvbSBcIi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiXHJcblxyXG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4vRnJhbWVcIlxyXG5pbXBvcnQgUGFnZSBmcm9tIFwiLi9QYWdlXCJcclxuaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4vUHJvY2Vzc1wiXHJcblxyXG5pbXBvcnQgUmVwbGFjZW1lbnRBbGdvcml0aG0gZnJvbSBcIi4vUmVwbGFjZW1lbnRBbGdvcml0aG1cIlxyXG5pbXBvcnQgTFJVIGZyb20gXCIuL0xSVVwiXHJcblxyXG5leHBvcnQgdHlwZSBNZW1vcnlTdGF0ZURhdGEgPSB7XHJcbiAgICBwYWdlX2NhbGw6IFJlYWRvbmx5PFBhZ2U+LFxyXG4gICAgY3VycmVudF9mcmFtZXM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8RnJhbWU+PixcclxuICAgIHByZXZpb3VzX3BhZ2VfY2FsbHM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8UGFnZT4+LFxyXG4gICAgcHJvY2Vzc2VzOiBSZWFkb25seUFycmF5PFJlYWRvbmx5PFByb2Nlc3M+PlxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgUmVzdWx0cyA9IHtcclxuICAgIHRvdGFsX3BhZ2VfZmF1bHRzOiBudW1iZXIsXHJcbiAgICB0b3RhbF9wYWdlX2hpdHM6IG51bWJlcixcclxuICAgIHRvdGFsX2NhbGxzOiBudW1iZXJcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsbG9jYXRpbmdNTVUge1xyXG4gICAgcHJvY2Vzc2VzOiBBcnJheTxQcm9jZXNzPiA9IFtdXHJcbiAgICBmcmFtZXM6IEFycmF5PEZyYW1lPiA9IFtdXHJcblxyXG4gICAgY2FsbF9wb29sOiBBcnJheTxQYWdlPiA9IFtdXHJcbiAgICBjYWxsX3F1ZXVlOiBBcnJheTxQYWdlPiA9IFtdXHJcbiAgICBjYWxsX2hpc3Rvcnk6IEFycmF5PFBhZ2U+ID0gW11cclxuXHJcbiAgICBudW1iZXJfb2ZfZnJhbWVzOiBudW1iZXIgPSAwXHJcbiAgICBudW1iZXJfb2ZfcGFnZXM6IG51bWJlciA9IDBcclxuXHJcbiAgICBhbGxvY2F0aW9uQWxnb3JpdGhtOiBBbGxvY2F0aW9uQWxnb3JpdGhtIHwgbnVsbCA9IG51bGxcclxuICAgIHJlcGxhY2VtZW50QWxnb3JpdGhtOiBSZXBsYWNlbWVudEFsZ29yaXRobSA9IG5ldyBMUlUoKVxyXG5cclxuICAgIHRvdGFsX3BhZ2VfZmF1bHRzOiBudW1iZXIgPSAwXHJcbiAgICB0aW1lOiBudW1iZXIgPSAwXHJcblxyXG4gICAgbGFzdF9jYWxsX2NhdXNlZF9mYXVsdDogYm9vbGVhbiA9IGZhbHNlXHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgICBpbml0KG51bWJlcl9vZl9wYWdlcz86IG51bWJlciwgbnVtYmVyX29mX2ZyYW1lcz86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubnVtYmVyX29mX3BhZ2VzID0gbnVtYmVyX29mX3BhZ2VzID8/IHRoaXMubnVtYmVyX29mX3BhZ2VzO1xyXG4gICAgICAgIHRoaXMubnVtYmVyX29mX2ZyYW1lcyA9IG51bWJlcl9vZl9mcmFtZXMgPz8gdGhpcy5udW1iZXJfb2ZfZnJhbWVzO1xyXG5cclxuICAgICAgICB0aGlzLmNhbGxfcXVldWUgPSBbLi4udGhpcy5jYWxsX3Bvb2xdOyAvLyBjb3B5IGFycmF5XHJcbiAgICAgICAgdGhpcy5mcmFtZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmNhbGxfaGlzdG9yeSA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfcGFnZV9mYXVsdHMgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyX29mX2ZyYW1lczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVzLnB1c2gobmV3IEZyYW1lKGkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgcHJvY2VzcyBvZiB0aGlzLnByb2Nlc3Nlcykge1xyXG4gICAgICAgICAgICBwcm9jZXNzLnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZFByb2Nlc3MocHJvY2VzczogUHJvY2Vzcyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc2VzLnB1c2gocHJvY2Vzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJQcm9jZXNzZXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzZXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVBhZ2VDYWxsUG9vbCgpOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc2VzW2ldLmdlbmVyYXRlQ2FsbHMoKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRQYWdlQ2FsbHNUb1Bvb2wodGhpcy5wcm9jZXNzZXNbaV0uZ2V0Q2FsbHMoKSwgdGhpcy5wcm9jZXNzZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFBhZ2VDYWxsVG9Qb29sKHBhZ2VfY2FsbDogUGFnZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FsbF9wb29sLnB1c2gocGFnZV9jYWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFBhZ2VDYWxsc1RvUG9vbChwYWdlX2NhbGxzOiBBcnJheTxudW1iZXI+LCBwcm9jZXNzOiBQcm9jZXNzKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlX2NhbGxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUGFnZUNhbGxUb1Bvb2wobmV3IFBhZ2UocGFnZV9jYWxsc1tpXSwgcHJvY2VzcykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhclBhZ2VDYWxsUG9vbCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhbGxfcG9vbCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFsZ29yaXRobShhbGdvcml0aG06IEFsbG9jYXRpb25BbGdvcml0aG0pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFsbG9jYXRpb25BbGdvcml0aG0gPSBhbGdvcml0aG07XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dFRpY2soKTogdm9pZCB7XHJcbiAgICAgICAgLyogZW5zdXJlIHRoYXQgYW4gYWxnb3JpdGhtIGlzIHNlbGVjdGVkICovXHJcbiAgICAgICAgaWYgKHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFsZ29yaXRobSBzZWxlY3RlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGNoZWNrIGlmIGFueSBwcm9jZXNzIGlzIHN0b3BwZWQvcmVzdW1lZCAqL1xyXG4gICAgICAgIGZvciAoY29uc3QgcHJvY2VzcyBvZiB0aGlzLnByb2Nlc3Nlcykge1xyXG4gICAgICAgICAgICBwcm9jZXNzLnVwZGF0ZVJ1bm5pbmdTdGF0dXModGhpcy5mcmFtZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogZGVhbGxvY2F0ZSBmaW5pc2hlZCBwcm9jZXNzZXMgKi9cclxuICAgICAgICB0aGlzLmZyYW1lcy5mb3JFYWNoKGZyYW1lID0+IHtcclxuICAgICAgICAgICAgaWYgKGZyYW1lLnByb2Nlc3MgIT0gbnVsbCAmJiAhZnJhbWUucHJvY2Vzcy5ydW5uaW5nKVxyXG4gICAgICAgICAgICAgICAgZnJhbWUucHJvY2VzcyA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIHJlYWxsb2NhdGUgZnJhbWVzIHRvIHByb2Nlc3NlcyAqL1xyXG4gICAgICAgIHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobS5hbGxvY2F0ZUZyYW1lcz8uKHRoaXMuZnJhbWVzLCB0aGlzLnByb2Nlc3NlcywgdGhpcy50aW1lKTtcclxuXHJcbiAgICAgICAgY29uc3QgdW5hbGxvY2F0ZWRGcmFtZXNMZW5ndGggPSB0aGlzLmZyYW1lcy5maWx0ZXIoZnJhbWUgPT4gZnJhbWUucHJvY2VzcyA9PSBudWxsKS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKHVuYWxsb2NhdGVkRnJhbWVzTGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYE5vdCBhbGwgZnJhbWVzIGFyZSBhbGxvY2F0ZWRcXG5BbGxvY2F0ZWQ6ICR7dGhpcy5mcmFtZXMubGVuZ3RoIC0gdW5hbGxvY2F0ZWRGcmFtZXNMZW5ndGh9XFxuVW5hbGxvY2F0ZWQ6ICR7dW5hbGxvY2F0ZWRGcmFtZXNMZW5ndGh9YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiB0cmF2ZXJzZSB0aGUgcXVldWUgdW50aWwgYSBjYWxsIGJlbG9uZ2luZyB0byBhIHJ1bm5pbmcgcHJvY2VzcyBpcyBmb3VuZCAqL1xyXG4gICAgICAgIGxldCBwYWdlX2NhbGw6IFBhZ2UgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2FsbF9xdWV1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jYWxsX3F1ZXVlW2ldLnByb2Nlc3MucnVubmluZykge1xyXG4gICAgICAgICAgICAgICAgcGFnZV9jYWxsID0gdGhpcy5jYWxsX3F1ZXVlW2ldO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsX3F1ZXVlLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBubyBwYWdlIGNhbGwgYXQgdGhpcyB0aW1lICovXHJcbiAgICAgICAgaWYgKHBhZ2VfY2FsbCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVtcHR5IHBhZ2UgY2FsbCBxdWV1ZSBvciBubyBwcm9jZXNzZXMgcnVubmluZ1wiKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lKys7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2FsbF9oaXN0b3J5LnB1c2gocGFnZV9jYWxsKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlBhZ2UgY2FsbDogXCIgKyBwYWdlX2NhbGwuaWQpO1xyXG5cclxuICAgICAgICBpZiAocGFnZV9jYWxsKSB7XHJcbiAgICAgICAgICAgIC8qIGV4ZWN1dGUgcmVwbGFjZW1lbnQgYWxnb3JpdGhtICovXHJcbiAgICAgICAgICAgIHRoaXMucmVwbGFjZW1lbnRBbGdvcml0aG0ub25QYWdlQ2FsbD8uKHRoaXMuZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGwpKTtcclxuXHJcbiAgICAgICAgICAgIC8qIGNoZWNrIGlmIHRoZXJlIGlzIGEgcGFnZSBmYXVsdCAqL1xyXG4gICAgICAgICAgICBsZXQgcGFnZV9mYXVsdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mcmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lc1tpXSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZyYW1lIGlzIG51bGxcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJhbWVzW2ldLnBhZ2UgPT0gbnVsbCAmJiB0aGlzLmZyYW1lc1tpXS5wcm9jZXNzID09IHBhZ2VfY2FsbC5wcm9jZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogaW5zZXJ0IGludG8gdGhlIGZpcnN0IGZyZWUgZnJhbWUgYXNzaWduZWQgdG8gdGhlIHByb2Nlc3MgKi9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lc1tpXS5wYWdlID0gcGFnZV9jYWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBpbmNyZW1lbnQgcGFnZSBmYXVsdHMgKi9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VfZmF1bHRzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZV9jYWxsLnByb2Nlc3MucGFnZV9mYXVsdHMrKztcclxuICAgICAgICAgICAgICAgICAgICBwYWdlX2NhbGwucHJvY2Vzcy5mYXVsdF90aW1lcy5wdXNoKHRoaXMudGltZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VfZmF1bHQgPSBmYWxzZTsgLy8gcGFnZSBmYXVsdCBhbHJlYWR5IGhhbmRsZWRcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0ucGFnZSAhPSBudWxsICYmIHRoaXMuZnJhbWVzW2ldLnBhZ2UhLmlkID09IHBhZ2VfY2FsbC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIHBhZ2UgaXMgYWxyZWFkeSBpbiBtZW1vcnkgKi9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VtZW50QWxnb3JpdGhtLm9uUGFnZUFscmVhZHlJbk1lbW9yeT8uKHRoaXMuZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGwpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZV9mYXVsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBoYW5kbGUgcGFnZSBmYXVsdCAqL1xyXG4gICAgICAgICAgICBpZiAocGFnZV9mYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYWdlIGZhdWx0OiBcIiArIHBhZ2VfY2FsbC5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogZW5zdXJlIHRoYXQgdGhlcmUgYXJlIG5vIGZyZWUgZnJhbWVzIGFzc2lnbmVkIHRvIHRoZSBwcm9jZXNzICovXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXMuZmluZChmcmFtZSA9PiBmcmFtZS5wcm9jZXNzID09IHBhZ2VfY2FsbCEucHJvY2VzcyAmJiBmcmFtZS5wYWdlID09IG51bGwpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbml0aWFsIHBhZ2UgZmlsbCBub3QgaGFuZGxlZCBwcm9wZXJseVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBpbmNyZW1lbnQgcGFnZSBmYXVsdHMgKi9cclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWxfcGFnZV9mYXVsdHMrKztcclxuICAgICAgICAgICAgICAgIHBhZ2VfY2FsbC5wcm9jZXNzLnBhZ2VfZmF1bHRzKys7XHJcbiAgICAgICAgICAgICAgICBwYWdlX2NhbGwucHJvY2Vzcy5mYXVsdF90aW1lcy5wdXNoKHRoaXMudGltZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiByZXBsYWNlIGEgcGFnZSAqL1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWRfb2ZfZnJhbWVfdG9fcmVwbGFjZSA9IHRoaXMucmVwbGFjZW1lbnRBbGdvcml0aG0uaGFuZGxlUGFnZUZhdWx0KHRoaXMuZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGwpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaWRfb2ZfZnJhbWVfdG9fcmVwbGFjZSAhPSAtMSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lc1t0aGlzLmdldEZyYW1lSW5kZXhCeUlkKGlkX29mX2ZyYW1lX3RvX3JlcGxhY2UpXS5wYWdlID0gcGFnZV9jYWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBlbnN1cmUgdGhhdCB0aGUgcGFnZSBpcyBub3cgaW4gbWVtb3J5ICovXHJcbiAgICAgICAgICAgIGxldCBwYWdlX2luX21lbW9yeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZyYW1lIG9mIHRoaXMuZnJhbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnJhbWUucGFnZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgoPFBhZ2U+ZnJhbWUucGFnZSkuaWQgPT0gcGFnZV9jYWxsLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogcGFnZSBpcyBpbiBtZW1vcnkgKi9cclxuICAgICAgICAgICAgICAgICAgICBwYWdlX2luX21lbW9yeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFwYWdlX2luX21lbW9yeSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFnZSBmYXVsdCBub3QgaGFuZGxlZCBwcm9wZXJseSAtIHBhZ2Ugbm90IGluIG1lbW9yeVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogY2FsbCB0aGUgcGFnZSAqL1xyXG4gICAgICAgICAgICBwYWdlX2NhbGwuY2FsbCh0aGlzLnRpbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50aW1lKys7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGw6IFBhZ2UpOiBNZW1vcnlTdGF0ZURhdGEge1xyXG4gICAgICAgIC8qIGdldCB0aGUgc3RhdGUgb2YgdGhlIG1lbW9yeSBhc3NpZ25lZCB0byB0aGUgcHJvY2VzcyAqL1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3NfZnJhbWVzID0gdGhpcy5mcmFtZXMuZmlsdGVyKGZyYW1lID0+IGZyYW1lLnByb2Nlc3MgPT0gcGFnZV9jYWxsLnByb2Nlc3MpO1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3NfY2FsbF9oaXN0b3J5ID0gdGhpcy5jYWxsX2hpc3RvcnkuZmlsdGVyKGNhbGwgPT4gY2FsbC5wcm9jZXNzID09IHBhZ2VfY2FsbC5wcm9jZXNzKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YTogTWVtb3J5U3RhdGVEYXRhID0ge1xyXG4gICAgICAgICAgICBwYWdlX2NhbGw6IHBhZ2VfY2FsbCxcclxuICAgICAgICAgICAgY3VycmVudF9mcmFtZXM6IHByb2Nlc3NfZnJhbWVzLFxyXG4gICAgICAgICAgICBwcmV2aW91c19wYWdlX2NhbGxzOiBwcm9jZXNzX2NhbGxfaGlzdG9yeSxcclxuICAgICAgICAgICAgcHJvY2Vzc2VzOiB0aGlzLnByb2Nlc3Nlc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbF9xdWV1ZS5sZW5ndGggPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZyYW1lSW5kZXhCeUlkKGlkOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mcmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZnJhbWVzW2ldLmlkID09IGlkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVzdWx0cygpOiBSZXN1bHRzIHtcclxuICAgICAgICBjb25zdCByZXN1bHRzID0ge1xyXG4gICAgICAgICAgICB0b3RhbF9wYWdlX2ZhdWx0czogdGhpcy50b3RhbF9wYWdlX2ZhdWx0cyxcclxuICAgICAgICAgICAgdG90YWxfcGFnZV9oaXRzOiB0aGlzLmNhbGxfaGlzdG9yeS5sZW5ndGggLSB0aGlzLnRvdGFsX3BhZ2VfZmF1bHRzLFxyXG4gICAgICAgICAgICB0b3RhbF9jYWxsczogdGhpcy5jYWxsX2hpc3RvcnkubGVuZ3RoXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICBzaW11bGF0ZSgpOiBSZXN1bHRzIHtcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuXHJcbiAgICAgICAgLyogZW5zdXJlIHRoYXQgYW4gYWxnb3JpdGhtIGlzIHNlbGVjdGVkICovXHJcbiAgICAgICAgaWYgKHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFsZ29yaXRobSBzZWxlY3RlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGFsbG9jYXRlIGZyYW1lcyB0byBwcm9jZXNzZXMgKi9cclxuICAgICAgICB0aGlzLmFsbG9jYXRpb25BbGdvcml0aG0uYWxsb2NhdGVGcmFtZXM/Lih0aGlzLmZyYW1lcywgdGhpcy5wcm9jZXNzZXMsIDApO1xyXG5cclxuICAgICAgICB3aGlsZSAoIXRoaXMuaXNGaW5pc2hlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFRpY2soKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IE1BWF9USU1FID0gMjAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy50aW1lID4gTUFYX1RJTUUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlNpbXVsYXRpb24gdGltZWQgb3V0XCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlc3VsdHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5UmVzdWx0cyhyZXN1bHRzPzogUmVzdWx0cywgYWxnU3RyOiBzdHJpbmcgPSB0aGlzLmFsbG9jYXRpb25BbGdvcml0aG0hLm5hbWUpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCByZXN1bHRzX3dyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNfd3JhcHBlclwiKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICByZXN1bHRzX3dyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHRzX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzXCIpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdHNfZWwuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIEFsZ29yaXRobTogJHthbGdTdHIudG9VcHBlckNhc2UoKX1cclxuXHJcbiAgICAgICAgVG90YWwgcGFnZSBmYXVsdHM6IDxiIHN0eWxlPSdjb2xvcjogcmVkJz4ke3Jlc3VsdHMhLnRvdGFsX3BhZ2VfZmF1bHRzLnRvRml4ZWQoMCl9PC9iPlxyXG4gICAgICAgIFRvdGFsIHBhZ2UgaGl0czogPGIgc3R5bGU9J2NvbG9yOiBsaW1lJz4ke3Jlc3VsdHMhLnRvdGFsX3BhZ2VfaGl0cy50b0ZpeGVkKDApfTwvYj5cclxuICAgICAgICBUb3RhbCBwYWdlIGNhbGxzOiA8Yj4ke3Jlc3VsdHMhLnRvdGFsX2NhbGxzLnRvRml4ZWQoMCl9PC9iPlxyXG4gICAgICAgIGAucmVwbGFjZShSZWdFeHAoXCJcXG5cIiwgXCJnXCIpLCBcIjxiciAvPlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wYXJlQWxsQW5kRGlzcGxheVJlc3VsdHMoYWxnb3JpdGhtczogQXJyYXk8QWxsb2NhdGlvbkFsZ29yaXRobT4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCByZXN1bHRzX3dyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNfd3JhcHBlclwiKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICByZXN1bHRzX3dyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHRzX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzXCIpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdHNfZWwuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGdvcml0aG1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QWxnb3JpdGhtKGFsZ29yaXRobXNbaV0pO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzOiBSZXN1bHRzID0gdGhpcy5zaW11bGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgcmVzdWx0c19lbC5pbm5lckhUTUwgKz0gYFxyXG4gICAgICAgICAgICBBbGdvcml0aG06ICR7YWxnb3JpdGhtc1tpXS5uYW1lLnRvVXBwZXJDYXNlKCl9XHJcbiAgICAgICAgICAgIFRvdGFsIHBhZ2UgZmF1bHRzOiA8YiBzdHlsZT0nY29sb3I6IHJlZCc+JHtyZXN1bHRzLnRvdGFsX3BhZ2VfZmF1bHRzLnRvRml4ZWQoMCl9PC9iPlxyXG4gICAgICAgICAgICBUb3RhbCBwYWdlIGhpdHM6IDxiIHN0eWxlPSdjb2xvcjogbGltZSc+JHtyZXN1bHRzLnRvdGFsX3BhZ2VfaGl0cy50b0ZpeGVkKDApfTwvYj5cclxuICAgICAgICAgICAgVG90YWwgcGFnZSBjYWxsczogPGI+JHtyZXN1bHRzLnRvdGFsX2NhbGxzLnRvRml4ZWQoMCl9PC9iPlxyXG4gICAgICAgICAgICBgLnJlcGxhY2UoUmVnRXhwKFwiXFxuXCIsIFwiZ1wiKSwgXCI8YnIgLz5cIik7XHJcblxyXG4gICAgICAgICAgICByZXN1bHRzX2VsLmlubmVySFRNTCArPSBcIjxiciAvPlwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBJQW5pbWF0aW9uR1VJIGZyb20gXCIuLi8uLi9zaGFyZWQvaW50ZXJmYWNlcy9JQW5pbWF0aW9uR1VJXCI7XHJcbmltcG9ydCBNZW51IGZyb20gXCIuL01lbnVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFuaW1hdGlvbkdVSSBpbXBsZW1lbnRzIElBbmltYXRpb25HVUkge1xyXG4gICAgbWVudTogTWVudVxyXG5cclxuICAgIHZpc2libGU6IGJvb2xlYW4gPSBmYWxzZVxyXG4gICAgcGxheWluZzogYm9vbGVhbiA9IGZhbHNlXHJcbiAgICBzcGVlZDogbnVtYmVyID0gMVxyXG5cclxuICAgIEdVSTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgTUVOVTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIHBsYXlfcGF1c2VfYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBzdGVwX2J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgc3RvcF9idXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIHNwZWVkX3NsaWRlcjogSFRNTElucHV0RWxlbWVudCB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgaW5mb19hbGdvcml0aG06IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9fdGltZTogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgaW5mb19pc19kb25lOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgaW5mb19pbl9xdWV1ZTogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgaW5mb19maW5pc2hlZDogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgaW5mb190b3RhbF9wYWdlX2ZhdWx0czogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgaW5mb190b3RhbF9wYWdlX2hpdHM6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBmcmFtZV9yb3dzOiBBcnJheTxIVE1MVGFibGVSb3dFbGVtZW50PiA9IFtdXHJcblxyXG4gICAgc2VlX2NvZGVfYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgLyogc2V0SW50ZXJ2YWwgKi9cclxuICAgIHN0b3JlZFNldEludGVydmFsOiBOb2RlSlMuVGltZXIgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1lbnU6IE1lbnUpIHtcclxuICAgICAgICB0aGlzLm1lbnUgPSBtZW51O1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5HVUkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9ndWlcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5NRU5VID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR0aW5nc1wiKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3BsYXlfcGF1c2VcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5zdGVwX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3N0ZXBcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5zdG9wX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3N0b3BcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5zcGVlZF9zbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9zcGVlZF9zbGlkZXJcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2FsZ29yaXRobSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2luZm9fYWxnb3JpdGhtX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW5mb190aW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25faW5mb190aW1lX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW5mb19pc19kb25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25faXNfZG9uZVwiKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2luX3F1ZXVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYWxsc19pbl9xdWV1ZV92YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICB0aGlzLmluZm9fZmluaXNoZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGxzX2ZpbmlzaGVkX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW5mb190b3RhbF9wYWdlX2ZhdWx0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxfcGFnZV9mYXVsdHNfdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5pbmZvX3RvdGFsX3BhZ2VfaGl0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxfcGFnZV9oaXRzX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG5cclxuICAgICAgICB0aGlzLnNlZV9jb2RlX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29kZV9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGhpZGUgZWxlbWVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluZm9faXNfZG9uZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogQmluZCBldmVudCBsaXN0ZW5lcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheWluZygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN0ZXBfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RlcCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3BfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3BlZWRfc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlZWQgPSBwYXJzZUludCh0aGlzLnNwZWVkX3NsaWRlciEudmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hTcGVlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNlZV9jb2RlX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tZW51Lm1lbW9yeS5hbGxvY2F0aW9uQWxnb3JpdGhtID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbGdvcml0aG1OYW1lID0gdGhpcy5tZW51Lm1lbW9yeS5hbGxvY2F0aW9uQWxnb3JpdGhtLm5hbWU7XHJcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGBodHRwczovL2dpdGh1Yi5jb20vYnJ1bjBuZS9zY2hlZHVsaW5nLXNpbS9ibG9iL21haW4vcGFnZV9yZXBsYWNlbWVudF9zcmMvY2xhc3Nlcy9hbGdvcml0aG1zLyR7YWxnb3JpdGhtTmFtZX0udHNgLCBcIl9ibGFua1wiKSEuZm9jdXMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0SW50ZXJ2YWxcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJlZnJlc2hTcGVlZCgpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwcmVwYXJlIEhUTUwgdGFibGUgb2Ygc3RhdGVzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbml0U3RhdGVUYWJsZSgpO1xyXG4gICAgfVxyXG4gICAgdG9nZ2xlUGxheWluZyhwbGF5aW5nPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmIChwbGF5aW5nID09IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMucGxheWluZyA9ICF0aGlzLnBsYXlpbmc7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnBsYXlpbmcgPSBwbGF5aW5nO1xyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hTcGVlZCgpO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uIS5pbm5lckhUTUwgPSB0aGlzLnBsYXlpbmcgPyBcIlBhdXNlXCIgOiBcIlBsYXlcIjtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVWaXNpYmxlKHZpc2libGU/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHZpc2libGUgPT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gIXRoaXMudmlzaWJsZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5HVUkhLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIHRoaXMuTUVOVSEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW51LmRpc3BsYXkucmVzaXplQ2FsbGJhY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdDdXJyZW50U3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRyYXdDdXJyZW50U3RhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuR1VJIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIHRoaXMuTUVOVSEuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcmVkU2V0SW50ZXJ2YWwgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zdG9yZWRTZXRJbnRlcnZhbCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbnUuZGlzcGxheS5yZXNpemVDYWxsYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVudS5yZWZyZXNoQ2FsbHMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1lbnUucmVmcmVzaENhbGxzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnBsYXlfcGF1c2VfYnV0dG9uID09IG51bGwgfHwgdGhpcy5pbmZvX2lzX2RvbmUgPT0gbnVsbCB8fCB0aGlzLnN0ZXBfYnV0dG9uID09IG51bGwpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbGwgaW5pdCgpIGZpcnN0IVwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5tZW51Lm1lbW9yeS5pbml0KCk7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24uaW5uZXJIVE1MID0gXCJQbGF5XCI7XHJcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19pc19kb25lLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3RlcF9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0U3RhdGVUYWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0QW5pbWF0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0N1cnJlbnRTdGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiByZWZyZXNoIGluZm9cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJlZnJlc2hJbmZvKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd0NhbGxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFN0YXRlVGFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgLyogZ3JhYiBlbGVtZW50cyAqL1xyXG4gICAgICAgIGNvbnN0IHRpbWVfcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfdGltZVwiKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGNhbGxzX3JvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX3BhZ2VfY2FsbHNcIikgYXMgSFRNTFRhYmxlUm93RWxlbWVudDtcclxuICAgICAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX2JvZHlcIikgYXMgSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIC8qIGNsZWFyIHRhYmxlICovXHJcbiAgICAgICAgdGltZV9yb3cuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBjYWxsc19yb3cuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgLyogdGltZSAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZV9yb3dfaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICB0aW1lX3Jvd19oZWFkZXIuaW5uZXJIVE1MID0gXCJUaW1lXCI7XHJcbiAgICAgICAgICAgIHRpbWVfcm93X2hlYWRlci5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyXCIpO1xyXG4gICAgICAgICAgICB0aW1lX3Jvdy5hcHBlbmRDaGlsZCh0aW1lX3Jvd19oZWFkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogY2FsbHMgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGxzX3Jvd19oZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgIGNhbGxzX3Jvd19oZWFkZXIuaW5uZXJIVE1MID0gXCJQYWdlIGNhbGxzXCI7XHJcbiAgICAgICAgICAgIGNhbGxzX3Jvd19oZWFkZXIuY2xhc3NMaXN0LmFkZChcImhlYWRlclwiKTtcclxuICAgICAgICAgICAgY2FsbHNfcm93LmFwcGVuZENoaWxkKGNhbGxzX3Jvd19oZWFkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogZnJhbWVzICovXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvKiByZW1vdmUgb2xkIHJvd3MgKi9cclxuICAgICAgICAgICAgd2hpbGUgKHRib2R5Lmxhc3RDaGlsZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9ICh0Ym9keS5sYXN0Q2hpbGQgYXMgSFRNTEVsZW1lbnQpLmlkO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkID09IFwiYW5pbWF0aW9uX3RhYmxlX3BhZ2VfY2FsbHNcIikgLy8gc2tpcCB0aGUgcm93IHdpdGggcGFnZSBjYWxsc1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHRib2R5LnJlbW92ZUNoaWxkKHRib2R5Lmxhc3RDaGlsZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIGFkZCBhIHJvdyBmb3IgZWFjaCBmcmFtZSAqL1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZV9yb3dzOiBBcnJheTxIVE1MVGFibGVSb3dFbGVtZW50PiA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVudS5tZW1vcnkubnVtYmVyX29mX2ZyYW1lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFtZV9yb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJhbWVfcm93X2hlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgICAgIGZyYW1lX3Jvd19oZWFkZXIuaW5uZXJIVE1MID0gYEZyYW1lICR7aX1gO1xyXG4gICAgICAgICAgICAgICAgZnJhbWVfcm93LmFwcGVuZENoaWxkKGZyYW1lX3Jvd19oZWFkZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZyYW1lX3Jvd3MucHVzaChmcmFtZV9yb3cpO1xyXG4gICAgICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoZnJhbWVfcm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmZyYW1lX3Jvd3MgPSBmcmFtZV9yb3dzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3Q2FsbHMoU1RBUlRfWD86IG51bWJlciwgU1RBUlRfWT86IG51bWJlciwgV0lEVEg/OiBudW1iZXIsIEhFSUdIVD86IG51bWJlciwgY2FsbHNUb0RyYXc/OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvKiBncmFiIGVsZW1lbnRzICovXHJcbiAgICAgICAgY29uc3QgdGltZV9yb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl90YWJsZV90aW1lXCIpIGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgY2FsbHNfcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfcGFnZV9jYWxsc1wiKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50O1xyXG5cclxuICAgICAgICAvKiBvbmx5IGFkZCBvbmUgY29sdW1uIGZvciB0aGUgbmV3IHN0YXRlICovXHJcbiAgICAgICAgY29uc3QgbmV3Q2FsbCA9IHRoaXMubWVudS5tZW1vcnkuY2FsbF9oaXN0b3J5LmF0KC0xKTtcclxuICAgICAgICBpZiAobmV3Q2FsbCA9PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIC8qIHRpbWUgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVUaWNrRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgIHRpbWVUaWNrRWwuaW5uZXJIVE1MID0gYCR7dGhpcy5tZW51Lm1lbW9yeS50aW1lfWA7XHJcbiAgICAgICAgICAgIHRpbWVfcm93LmFwcGVuZENoaWxkKHRpbWVUaWNrRWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogY2FsbHMgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGxzVGlja0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICBjYWxsc1RpY2tFbC5pbm5lckhUTUwgPSBgJHtuZXdDYWxsLmlkfWA7XHJcblxyXG4gICAgICAgICAgICBjYWxsc19yb3cuYXBwZW5kQ2hpbGQoY2FsbHNUaWNrRWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogZnJhbWVzICovXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVudS5tZW1vcnkubnVtYmVyX29mX2ZyYW1lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFtZV9yb3cgPSB0aGlzLmZyYW1lX3Jvd3NbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYWdlID0gdGhpcy5tZW51Lm1lbW9yeS5mcmFtZXNbaV0ucGFnZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFtZVRpY2tFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgICAgIGZyYW1lVGlja0VsLmlubmVySFRNTCA9IGAke3BhZ2UgIT0gbnVsbCA/IHBhZ2UuaWQgOiBcIlwifWA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBhZ2UgIT0gbnVsbCAmJiBwYWdlLmlkID09IG5ld0NhbGwuaWQgJiYgdGhpcy5tZW51Lm1lbW9yeS5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBwYWdlIGZhdWx0cyByZWRcclxuICAgICAgICAgICAgICAgICAgICBmcmFtZVRpY2tFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lbnUubWVtb3J5LmZyYW1lc1tpXS5wcm9jZXNzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBmcmFtZVRpY2tFbC5pbm5lckhUTUwgKz0gYCA8c3BhbiBzdHlsZT0nY29sb3I6IHllbGxvdyc+KCR7dGhpcy5tZW51Lm1lbW9yeS5mcmFtZXNbaV0ucHJvY2VzcyEuaWR9KTwvc3Bhbj5gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZyYW1lX3Jvdy5hcHBlbmRDaGlsZChmcmFtZVRpY2tFbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIHNjcm9sbCB0byB0aGUgcmlnaHQgKi9cclxuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2NhbGxfdGFibGVcIikgYXMgSFRNTFRhYmxlRWxlbWVudDtcclxuICAgICAgICB0YWJsZS5zY3JvbGxMZWZ0ID0gdGFibGUuc2Nyb2xsV2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgcmVmcmVzaEluZm8oKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbWVtb3J5ID0gdGhpcy5tZW51Lm1lbW9yeTtcclxuICAgICAgICBpZiAobWVtb3J5LmFsbG9jYXRpb25BbGdvcml0aG0gPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FsbCBzdGFydEFuaW1hdGlvbigpIGZpcnN0IVwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2FsZ29yaXRobSEuaW5uZXJIVE1MID0gbWVtb3J5LmFsbG9jYXRpb25BbGdvcml0aG0ubmFtZTtcclxuICAgICAgICB0aGlzLmluZm9fdGltZSEuaW5uZXJIVE1MID0gbWVtb3J5LnRpbWUudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgaWYgKG1lbW9yeS5pc0ZpbmlzaGVkKCkpXHJcbiAgICAgICAgICAgIHRoaXMuaW5mb19pc19kb25lIS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX3RvdGFsX3BhZ2VfaGl0cyEuaW5uZXJIVE1MID0gKG1lbW9yeS5jYWxsX2hpc3RvcnkubGVuZ3RoIC0gbWVtb3J5LnRvdGFsX3BhZ2VfZmF1bHRzKS50b1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuaW5mb190b3RhbF9wYWdlX2ZhdWx0cyEuaW5uZXJIVE1MID0gbWVtb3J5LnRvdGFsX3BhZ2VfZmF1bHRzLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19pbl9xdWV1ZSEuaW5uZXJIVE1MID0gbWVtb3J5LmNhbGxfcXVldWUubGVuZ3RoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5pbmZvX2ZpbmlzaGVkIS5pbm5lckhUTUwgPSBtZW1vcnkuY2FsbF9oaXN0b3J5Lmxlbmd0aC50b1N0cmluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hTcGVlZCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zdG9yZWRTZXRJbnRlcnZhbCAhPSBudWxsKVxyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc3RvcmVkU2V0SW50ZXJ2YWwpO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3JlZFNldEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5iaW5kKHRoaXMpLCAxMDAwIC8gdGhpcy5zcGVlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RlcCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tZW51Lm1lbW9yeS5pc0ZpbmlzaGVkKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5tZW51Lm1lbW9yeS5uZXh0VGljaygpO1xyXG4gICAgICAgIHRoaXMuZHJhd0N1cnJlbnRTdGF0ZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tZW51Lm1lbW9yeS5pc0ZpbmlzaGVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5aW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5tZW51Lm1lbW9yeS5kaXNwbGF5UmVzdWx0cyh0aGlzLm1lbnUubWVtb3J5LmdldFJlc3VsdHMoKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFmdGVyRG9uZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZnRlckRvbmUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5mb19pc19kb25lID09IG51bGwgfHwgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbiA9PSBudWxsIHx8IHRoaXMuc3RlcF9idXR0b24gPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FsbCBpbml0KCkgZmlyc3QhXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmluZm9faXNfZG9uZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnN0ZXBfYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH1cclxufSIsImltcG9ydCBQYWdlIGZyb20gXCIuL1BhZ2VcIjtcclxuaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4vUHJvY2Vzc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJhbWUge1xyXG4gICAgaWQ6IG51bWJlclxyXG4gICAgcGFnZTogUGFnZSB8IG51bGxcclxuICAgIHByb2Nlc3M6IFByb2Nlc3MgfCBudWxsXHJcblxyXG4gICAgY29uc3RydWN0b3IoaWQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucGFnZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFJlcGxhY2VtZW50QWxnb3JpdGhtIGZyb20gXCIuL1JlcGxhY2VtZW50QWxnb3JpdGhtXCI7XHJcbmltcG9ydCB7IE1lbW9yeVN0YXRlRGF0YSB9IGZyb20gXCIuL0FsbG9jYXRpbmdNTVVcIjtcclxuXHJcbi8qKlxyXG4gKiBMZWFzdCBSZWNlbnRseSBVc2VkIChMUlUpXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMUlUgaW1wbGVtZW50cyBSZXBsYWNlbWVudEFsZ29yaXRobSB7XHJcbiAgICBuYW1lOiBzdHJpbmcgPSBcIkxSVVwiXHJcblxyXG4gICAgaGFuZGxlUGFnZUZhdWx0KGRhdGE6IE1lbW9yeVN0YXRlRGF0YSk6IG51bWJlciB7XHJcbiAgICAgICAgLyogZmluZCB0aGUgcGFnZSB0aGF0IHdhcyB1c2VkIHRoZSBsb25nZXN0IGFnbyAqL1xyXG4gICAgICAgIGxldCBmcmFtZV90b19yZXBsYWNlX2luZGV4ID0gLTE7XHJcbiAgICAgICAgbGV0IGxlYXN0X3JlY2VudGx5X3VzZWRfcGFnZV9pbmRleCA9IC0xO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuY3VycmVudF9mcmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZnJhbWUgPSBkYXRhLmN1cnJlbnRfZnJhbWVzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZyYW1lLnByb2Nlc3MgIT0gZGF0YS5wYWdlX2NhbGwucHJvY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZyYW1lIGlzIGFzc2lnbmVkIHRvIGEgZGlmZmVyZW50IHByb2Nlc3MgLSB0aGlzIHNob3VsZCBiZSBlbnN1cmVkIG5vdCB0byBoYXBwZW4gYnkgdGhlIGNhbGxlclwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGZyYW1lLnBhZ2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRnJhbWUgaXMgZW1wdHkgLSB0aGlzIHNob3VsZCBiZSBlbnN1cmVkIG5vdCB0byBoYXBwZW4gYnkgdGhlIGNhbGxlclwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgcGFnZV9pbmRleCA9IC0xO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gZGF0YS5wcmV2aW91c19wYWdlX2NhbGxzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c19wYWdlX2NhbGwgPSBkYXRhLnByZXZpb3VzX3BhZ2VfY2FsbHNbal07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzX3BhZ2VfY2FsbC5pZCA9PSBmcmFtZS5wYWdlLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZV9pbmRleCA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYWdlX2luZGV4ID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBwYWdlIHdhcyBuZXZlciB1c2VkIGJlZm9yZSAqL1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYWdlX2luZGV4IDwgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4IHx8IGxlYXN0X3JlY2VudGx5X3VzZWRfcGFnZV9pbmRleCA9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgLyogcGFnZSB3YXMgdXNlZCBsb25nZXIgYWdvICovXHJcbiAgICAgICAgICAgICAgICBmcmFtZV90b19yZXBsYWNlX2luZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgIGxlYXN0X3JlY2VudGx5X3VzZWRfcGFnZV9pbmRleCA9IHBhZ2VfaW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmcmFtZV90b19yZXBsYWNlX2luZGV4ID09IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk5vIGZyYW1lIHRvIHJlcGxhY2UgZm91bmQgYnkgTFJVXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YS5jdXJyZW50X2ZyYW1lc1tmcmFtZV90b19yZXBsYWNlX2luZGV4XS5pZDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgSU1lbnUgZnJvbSBcIi4uLy4uL3NoYXJlZC9pbnRlcmZhY2VzL0lNZW51XCI7XHJcbmltcG9ydCBEaXNwbGF5IGZyb20gXCIuLi8uLi9zaGFyZWQvY2xhc3Nlcy9EaXNwbGF5XCI7XHJcbmltcG9ydCBBbGxvY2F0aW5nTU1VIGZyb20gXCIuL0FsbG9jYXRpbmdNTVVcIjtcclxuaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4vUHJvY2Vzc1wiO1xyXG5pbXBvcnQgUGFnZSBmcm9tIFwiLi9QYWdlXCI7XHJcbmltcG9ydCBFcXVhbCBmcm9tIFwiLi9hbGdvcml0aG1zL0VxdWFsXCI7XHJcbmltcG9ydCBBbmltYXRpb25HVUkgZnJvbSBcIi4vQW5pbWF0aW9uR1VJXCI7XHJcbmltcG9ydCBQcm9wb3J0aW9uYWwgZnJvbSBcIi4vYWxnb3JpdGhtcy9Qcm9wb3J0aW9uYWxcIjtcclxuaW1wb3J0IFBhZ2VGYXVsdENvbnRyb2wgZnJvbSBcIi4vYWxnb3JpdGhtcy9QYWdlRmF1bHRDb250cm9sXCI7XHJcbmltcG9ydCBMb2NhbGl0eU1vZGVsIGZyb20gXCIuL2FsZ29yaXRobXMvTG9jYWxpdHlNb2RlbFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVudSBpbXBsZW1lbnRzIElNZW51IHtcclxuICAgIGRpc3BsYXk6IERpc3BsYXlcclxuICAgIG1lbW9yeTogQWxsb2NhdGluZ01NVVxyXG4gICAgYW5pbWF0aW9uR1VJOiBBbmltYXRpb25HVUlcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheSgpO1xyXG4gICAgICAgIHRoaXMubWVtb3J5ID0gbmV3IEFsbG9jYXRpbmdNTVUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25HVUkgPSBuZXcgQW5pbWF0aW9uR1VJKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcnVuX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicnVuX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBydW5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMucnVuKCkgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgcnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLnJ1bih0cnVlKSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBhZGRfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuYWRkUHJvY2Vzc2VzKCkgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsZWFyX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xlYXJfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGNsZWFyX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLmNsZWFyUHJvY2Vzc2VzKCkgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZW5lcmF0ZV9jYWxsX3F1ZXVlX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBnZW5lcmF0ZV9jYWxsX3F1ZXVlX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLmFkZENhbGxzKCkgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsZWFyX2NhbGxfcXVldWVfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbGVhcl9jYWxsX3F1ZXVlX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBjbGVhcl9jYWxsX3F1ZXVlX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLmNsZWFyQ2FsbHMoKSB9KTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBpbml0IFxyXG4gICAgICAgICAqIHNldCBjYWxsYmFjayBmb3IgcmVzaXplXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tZW1vcnkuaW5pdCg1LCAzKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXkuaW5pdChcIm1haW5fY2FudmFzXCIpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uR1VJLmluaXQoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXkuc2V0UmVzaXplQ2FsbGJhY2soKCkgPT4geyB0aGlzLnJlZnJlc2hDYWxscygpIH0pO1xyXG5cclxuICAgICAgICAvKiogXHJcbiAgICAgICAgICogYmFzaWMgc2V0dGluZ3NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBudW1iZXJfb2ZfZnJhbWVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX2ZyYW1lX2NvdW50XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgbnVtYmVyX29mX2ZyYW1lcy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlOiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdfdmFsID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmUudGFyZ2V0KS52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNOYU4obmV3X3ZhbCkgfHwgbmV3X3ZhbCA8IDEpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiSW52YWxpZCBudW1iZXIgb2YgZnJhbWVzXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5pbml0KHRoaXMubWVtb3J5Lm51bWJlcl9vZl9wYWdlcywgbmV3X3ZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGFsZ29yaXRobSBzZWxlY3RcclxuICAgICAgICAgKiAtPiBkaXNhYmxlIHJ1bm5pbmcgd2l0aCBhbmltYXRpb24gaWYgY29tcGFyZV9hbGxcclxuICAgICAgICAgKiAtPiBzaG93IHNwZWNpYWwgb3B0aW9ucyBmb3IgcGFnZSBmYXVsdCBjb250cm9sXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgYWxnb3JpdGhtX3NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYV90eXBlXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgIGFsZ29yaXRobV9zZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZTogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCg8SFRNTFNlbGVjdEVsZW1lbnQ+ZS50YXJnZXQpLnZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IFwiY29tcGFyZV9hbGxcIikge1xyXG4gICAgICAgICAgICAgICAgKDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b25cIikpLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICg8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJydW5fd2l0aF9hbmltYXRpb25fYnV0dG9uXCIpKS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCg8SFRNTFNlbGVjdEVsZW1lbnQ+ZS50YXJnZXQpLnZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IFwiZmF1bHRfY29udHJvbFwiIHx8XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxTZWxlY3RFbGVtZW50PmUudGFyZ2V0KS52YWx1ZS50b0xvd2VyQ2FzZSgpID09PSBcImNvbXBhcmVfYWxsXCIpIHtcclxuICAgICAgICAgICAgICAgICg8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21pbl9wYWdlX2ZhdWx0c19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfcGFnZV9mYXVsdHNfYWxsXCIpKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfdGltZV93aW5kb3dfYWxsXCIpKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWluX3BhZ2VfZmF1bHRzX2FsbFwiKSkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWF4X3BhZ2VfZmF1bHRzX2FsbFwiKSkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfdGltZV93aW5kb3dfYWxsXCIpKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogXHJcbiAgICAgICAgICogcmVzdWx0cyBidXR0b25zXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgcmVzdWx0c19jbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c19jbG9zZVwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICByZXN1bHRzX2Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICg8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzX3dyYXBwZXJcIikpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiByZWZyZXNoIGNhbGxzIFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUHJvY2Vzc2VzKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3NfY291bnQgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjX2NvdW50XCIpKS52YWx1ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhZ2VfcmFuZ2VfbWluID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19taW5fcmFuZ2VcIikpLnZhbHVlKTtcclxuICAgICAgICBjb25zdCBwYWdlX3JhbmdlX21heCA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWF4X3JhbmdlXCIpKS52YWx1ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbGxfY291bnRfbWluID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19taW5fY2FsbHNcIikpLnZhbHVlKTtcclxuICAgICAgICBjb25zdCBjYWxsX2NvdW50X21heCA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWF4X2NhbGxzXCIpKS52YWx1ZSk7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50X3JhbmdlX21pbiA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvY2Vzc19jb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VfcmFuZ2UgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAocGFnZV9yYW5nZV9tYXggLSBwYWdlX3JhbmdlX21pbiArIDEpKSArIHBhZ2VfcmFuZ2VfbWluO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuYWRkUHJvY2VzcyhuZXcgUHJvY2VzcyhcclxuICAgICAgICAgICAgICAgIFtjdXJyZW50X3JhbmdlX21pbiwgY3VycmVudF9yYW5nZV9taW4gKyBwYWdlX3JhbmdlXSxcclxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChjYWxsX2NvdW50X21heCAtIGNhbGxfY291bnRfbWluICsgMSkpICsgY2FsbF9jb3VudF9taW4sXHJcbiAgICAgICAgICAgICAgICBpXHJcbiAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5wcm9jZXNzZXNbdGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aCAtIDFdLmdlbmVyYXRlQ2FsbHMoKTtcclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRfcmFuZ2VfbWluICs9IHBhZ2VfcmFuZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyUHJvY2Vzc2VzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubWVtb3J5LmNsZWFyUHJvY2Vzc2VzKCk7XHJcbiAgICAgICAgdGhpcy5tZW1vcnkuY2xlYXJQYWdlQ2FsbFBvb2woKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDYWxscygpOiB2b2lkIHtcclxuICAgICAgICAvKiBjb21iaW5lIGFsbCBwcm9jZXNzIGNhbGxzIGludG8gb25lIGFycmF5ICovXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLm1lbW9yeS5wcm9jZXNzZXNbaV0uZ2V0Q2FsbHMoKS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuY2FsbF9wb29sLnB1c2gobmV3IFBhZ2UodGhpcy5tZW1vcnkucHJvY2Vzc2VzW2ldLmdldENhbGxzKClbal0sIHRoaXMubWVtb3J5LnByb2Nlc3Nlc1tpXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIHNodWZmbGUgYXJyYXkgKi9cclxuICAgICAgICB0aGlzLm1lbW9yeS5jYWxsX3Bvb2wuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhckNhbGxzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubWVtb3J5LmNhbGxfcG9vbCA9IFtdO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVmcmVzaENhbGxzKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRfY291bnRfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBfY3VycmVudF9jb3VudFwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICBjdXJyZW50X2NvdW50X2VsLmlubmVySFRNTCA9IGAoJHt0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoLnRvU3RyaW5nKCl9KWA7XHJcblxyXG4gICAgICAgIGNvbnN0IGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZW5lcmF0ZV9jYWxsX3F1ZXVlX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGggPiAwICYmIHRoaXMubWVtb3J5LmNhbGxfcG9vbC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBnZW5lcmF0ZV9jYWxsX3F1ZXVlX2J1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uLmF0dHJpYnV0ZXMuc2V0TmFtZWRJdGVtKGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGRpc3BsYXkgaW5kaXZpZHVhbCBwcm9jZXNzIGNhbGxzICovXHJcbiAgICAgICAgY29uc3QgYWxsX3Byb2Nlc3Nlc19lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxsX3Byb2Nlc3Nlc1wiKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICBhbGxfcHJvY2Vzc2VzX2VsLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3MgPSB0aGlzLm1lbW9yeS5wcm9jZXNzZXNbaV07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzX2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIHByb2Nlc3NfZWwuY2xhc3NMaXN0LmFkZChcInByb2Nlc3NcIik7XHJcblxyXG4gICAgICAgICAgICBwcm9jZXNzX2VsLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInByb2Nlc3NfbmFtZVwiPkNhbGxzIG9mIHByb2Nlc3MgJHtpfTogPC9zcGFuPiA8c3BhbiBjbGFzcz1cInByb2Nlc3NfY2FsbHNcIj4ke3Byb2Nlc3MuZ2V0Q2FsbHMoKS5qb2luKFwiLCBcIil9PC9zcGFuPjxiciAvPmA7XHJcblxyXG4gICAgICAgICAgICBhbGxfcHJvY2Vzc2VzX2VsLmFwcGVuZENoaWxkKHByb2Nlc3NfZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBhbGxfcHJvY2Vzc2VzX2VsLmlubmVySFRNTCA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOiB5ZWxsb3cnPk5vIHByb2Nlc3NlcyBhZGRlZCB5ZXQuPC9zcGFuPlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogZGlzcGxheSBjYWxsIHF1ZXVlICovXHJcbiAgICAgICAgY29uc3QgY2FsbF9jb3VudF9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VycmVudF9jYWxsX2NvdW50XCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIGNhbGxfY291bnRfZWwuaW5uZXJIVE1MID0gYCgke3RoaXMubWVtb3J5LmNhbGxfcG9vbC5sZW5ndGgudG9TdHJpbmcoKX0pYDtcclxuXHJcbiAgICAgICAgY29uc3QgY2FsbF9xdWV1ZV9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbl9jYWxsX3F1ZXVlXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIGNhbGxfcXVldWVfZWwuaW5uZXJIVE1MID0gdGhpcy5tZW1vcnkuY2FsbF9wb29sLm1hcCgocGFnZSkgPT4geyByZXR1cm4gcGFnZS5pZCB9KS5qb2luKFwiLCBcIik7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1lbW9yeS5jYWxsX3Bvb2wubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgY2FsbF9xdWV1ZV9lbC5pbm5lckhUTUwgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjogeWVsbG93Jz5ObyBjYWxscyBpbiBxdWV1ZS48L3NwYW4+XCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJ1bihhbmltYXRpb24/OiBib29sZWFuIHwgdW5kZWZpbmVkKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGggPiB0aGlzLm1lbW9yeS5mcmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwiTm90IGVub3VnaCBmcmFtZXMgZm9yIGFsbCBwcm9jZXNzZXNcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFsZ1N0ciA9ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFfdHlwZVwiKSkudmFsdWU7XHJcbiAgICAgICAgbGV0IGNvbXBhcmVfYWxsOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IG1pbl9mcmVxID0gcGFyc2VGbG9hdCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21pbl9wYWdlX2ZhdWx0c1wiKSkudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IG1heF9mcmVxID0gcGFyc2VGbG9hdCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21heF9wYWdlX2ZhdWx0c1wiKSkudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVfd2luZG93ID0gcGFyc2VGbG9hdCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX3RpbWVfd2luZG93XCIpKS52YWx1ZSk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoYWxnU3RyLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgY2FzZSBcImVxdWFsXCI6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBFcXVhbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcInByb3BvcnRpb25hbFwiOlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb3J5LnNldEFsZ29yaXRobShuZXcgUHJvcG9ydGlvbmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiZmF1bHRfY29udHJvbFwiOlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtaW5fZnJlcSA+PSBtYXhfZnJlcSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIk1pbmltdW0gZnJlcXVlbmN5IGhhcyB0byBiZSBzbWFsbGVyIHRoYW4gdGhlIG1heGltdW1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb3J5LnNldEFsZ29yaXRobShuZXcgUGFnZUZhdWx0Q29udHJvbChtaW5fZnJlcSwgbWF4X2ZyZXEsIHRpbWVfd2luZG93KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJsb2NhbGl0eV9tb2RlbFwiOlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb3J5LnNldEFsZ29yaXRobShuZXcgTG9jYWxpdHlNb2RlbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcImNvbXBhcmVfYWxsXCI6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyZV9hbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiSW52YWxpZCBhbGdvcml0aG1cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29tcGFyZV9hbGwpIHtcclxuICAgICAgICAgICAgaWYgKG1pbl9mcmVxID49IG1heF9mcmVxKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIk1pbmltdW0gZnJlcXVlbmN5IGhhcyB0byBiZSBzbWFsbGVyIHRoYW4gdGhlIG1heGltdW1cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFsZ29yaXRobXMgPSBbXHJcbiAgICAgICAgICAgICAgICBuZXcgRXF1YWwoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBQcm9wb3J0aW9uYWwoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBQYWdlRmF1bHRDb250cm9sKG1pbl9mcmVxLCBtYXhfZnJlcSwgdGltZV93aW5kb3cpLFxyXG4gICAgICAgICAgICAgICAgLy8gbmV3IExvY2FsaXR5TW9kZWwoKVxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuY29tcGFyZUFsbEFuZERpc3BsYXlSZXN1bHRzKGFsZ29yaXRobXMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uR1VJLnN0YXJ0QW5pbWF0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5tZW1vcnkuc2ltdWxhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuZGlzcGxheVJlc3VsdHMocmVzdWx0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBQcm9jZXNzIGZyb20gXCIuL1Byb2Nlc3NcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZ2Uge1xyXG4gICAgaWQ6IG51bWJlclxyXG4gICAgbGFzdF9jYWxsX3RpbWU6IG51bWJlciA9IDBcclxuICAgIHByb2Nlc3M6IFByb2Nlc3NcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwcm9jZXNzOiBQcm9jZXNzKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMucHJvY2VzcyA9IHByb2Nlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsbCh0aW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmxhc3RfY2FsbF90aW1lID0gdGltZTtcclxuICAgICAgICB0aGlzLnByb2Nlc3MuZG9uZV9jYWxscysrO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEZyYW1lIGZyb20gXCIuL0ZyYW1lXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2Nlc3Mge1xyXG4gICAgcmFuZ2Vfb2ZfcGFnZXM6IFtudW1iZXIsIG51bWJlcl1cclxuICAgIG51bWJlcl9vZl9jYWxsczogbnVtYmVyXHJcbiAgICBpZDogbnVtYmVyXHJcblxyXG4gICAgcGFnZV9mYXVsdHM6IG51bWJlciA9IDBcclxuICAgIGRvbmVfY2FsbHM6IG51bWJlciA9IDBcclxuXHJcbiAgICBydW5uaW5nOiBib29sZWFuID0gdHJ1ZVxyXG4gICAgYXNzaWduZWRGcmFtZXM6IG51bWJlciA9IDBcclxuXHJcbiAgICBwcml2YXRlIGNhbGxzOiBBcnJheTxudW1iZXI+ID0gW11cclxuICAgIGZhdWx0X3RpbWVzOiBBcnJheTxudW1iZXI+ID0gW11cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihyYW5nZV9vZl9wYWdlczogW251bWJlciwgbnVtYmVyXSwgbnVtYmVyX29mX2NhbGxzOiBudW1iZXIsIGlkOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnJhbmdlX29mX3BhZ2VzID0gcmFuZ2Vfb2ZfcGFnZXM7XHJcbiAgICAgICAgdGhpcy5udW1iZXJfb2ZfY2FsbHMgPSBudW1iZXJfb2ZfY2FsbHM7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMucGFnZV9mYXVsdHMgPSAwO1xyXG4gICAgICAgIHRoaXMuZG9uZV9jYWxscyA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25lZEZyYW1lcyA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuZmF1bHRfdGltZXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUNhbGxzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FsbHMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bWJlcl9vZl9jYWxsczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbHMucHVzaChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAodGhpcy5yYW5nZV9vZl9wYWdlc1sxXSAtIHRoaXMucmFuZ2Vfb2ZfcGFnZXNbMF0pKSArIHRoaXMucmFuZ2Vfb2ZfcGFnZXNbMF0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDYWxscygpOiBBcnJheTxudW1iZXI+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxscztcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVSdW5uaW5nU3RhdHVzKGZyYW1lczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxGcmFtZT4+KSB7XHJcbiAgICAgICAgbGV0IGFzc2lnbmVkRnJhbWVzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGZyYW1lIG9mIGZyYW1lcykge1xyXG4gICAgICAgICAgICBpZiAoZnJhbWUucHJvY2VzcyA9PSB0aGlzKVxyXG4gICAgICAgICAgICAgICAgYXNzaWduZWRGcmFtZXMrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhc3NpZ25lZEZyYW1lcyA+IDApXHJcbiAgICAgICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZG9uZV9jYWxscyA9PSB0aGlzLm51bWJlcl9vZl9jYWxscylcclxuICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5kb25lX2NhbGxzID49IHRoaXMubnVtYmVyX29mX2NhbGxzKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNzIGRvbmUgY2FsbHMgZXhjZWVkZWQgbnVtYmVyIG9mIGNhbGxzXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmFzc2lnbmVkRnJhbWVzID0gYXNzaWduZWRGcmFtZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RmF1bHRzSW5MYXN0TlRpY2tzKG46IG51bWJlciwgdGltZTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGZhdWx0czogbnVtYmVyID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuZmF1bHRfdGltZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYgKHRpbWUgLSB0aGlzLmZhdWx0X3RpbWVzW2ldID4gbilcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZmF1bHRzKys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmF1bHRzO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBBbGxvY2F0aW9uQWxnb3JpdGhtIGZyb20gXCIuLi9BbGxvY2F0aW9uQWxnb3JpdGhtXCI7XHJcblxyXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi4vUHJvY2Vzc1wiO1xyXG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4uL0ZyYW1lXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFcXVhbCBpbXBsZW1lbnRzIEFsbG9jYXRpb25BbGdvcml0aG0ge1xyXG4gICAgbmFtZTogc3RyaW5nID0gXCJFcXVhbFwiXHJcblxyXG4gICAgYWxsb2NhdGVGcmFtZXMoZnJhbWVzOiBBcnJheTxGcmFtZT4sIHByb2Nlc3NlczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxQcm9jZXNzPj4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBmcmFtZXNfcGVyX3Byb2Nlc3MgPSBNYXRoLmZsb29yKGZyYW1lcy5sZW5ndGggLyBwcm9jZXNzZXMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYEFsbG9jYXRpbmcgJHtmcmFtZXNfcGVyX3Byb2Nlc3N9IGZyYW1lcyBwZXIgcHJvY2Vzc2ApO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZnJhbWVzW2ldLnByb2Nlc3MgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBmcmFtZSBpZiBpdCdzIGFscmVhZHkgYWxsb2NhdGVkXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZyYW1lc1tpXS5wcm9jZXNzID0gPFByb2Nlc3M+cHJvY2Vzc2VzW01hdGguZmxvb3IoaSAvIGZyYW1lc19wZXJfcHJvY2VzcyldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogdGhlIHJlbWFpbmluZyBmcmFtZXMgYXJlIGxlZnQgdW5hbGxvY2F0ZWQgKi9cclxuICAgIH1cclxufSIsImltcG9ydCBBbGxvY2F0aW9uQWxnb3JpdGhtIGZyb20gXCIuLi9BbGxvY2F0aW9uQWxnb3JpdGhtXCI7XHJcblxyXG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4uL0ZyYW1lXCI7XHJcbmltcG9ydCBQcm9jZXNzIGZyb20gXCIuLi9Qcm9jZXNzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbGl0eU1vZGVsIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XHJcbiAgICBuYW1lOiBzdHJpbmcgPSBcIkxvY2FsaXR5TW9kZWxcIlxyXG5cclxuICAgIGFsbG9jYXRlRnJhbWVzKGZyYW1lczogQXJyYXk8RnJhbWU+LCBwcm9jZXNzZXM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8UHJvY2Vzcz4+KTogdm9pZCB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQWxsb2NhdGlvbkFsZ29yaXRobSBmcm9tIFwiLi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiO1xyXG5cclxuaW1wb3J0IEZyYW1lIGZyb20gXCIuLi9GcmFtZVwiO1xyXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi4vUHJvY2Vzc1wiO1xyXG5cclxuaW1wb3J0IFByb3BvcnRpb25hbCBmcm9tIFwiLi9Qcm9wb3J0aW9uYWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZ2VGYXVsdENvbnRyb2wgaW1wbGVtZW50cyBBbGxvY2F0aW9uQWxnb3JpdGhtIHtcclxuICAgIG5hbWU6IHN0cmluZyA9IFwiUGFnZUZhdWx0Q29udHJvbFwiXHJcbiAgICBydW5fcHJvcG9ydGlvbmFsOiBib29sZWFuID0gdHJ1ZVxyXG5cclxuICAgIG1pbl9mYXVsdF9mcmVxOiBudW1iZXJcclxuICAgIG1heF9mYXVsdHNfZnJlcTogbnVtYmVyXHJcbiAgICB0aW1lX3dpbmRvdzogbnVtYmVyXHJcblxyXG4gICAgY29uc3RydWN0b3IobWluX2ZhdWx0X2ZyZXE6IG51bWJlciwgbWF4X2ZhdWx0X2ZyZXE6IG51bWJlciwgdGltZV93aW5kb3c6IG51bWJlciA9IDUpIHtcclxuICAgICAgICB0aGlzLm1pbl9mYXVsdF9mcmVxID0gbWluX2ZhdWx0X2ZyZXE7XHJcbiAgICAgICAgdGhpcy5tYXhfZmF1bHRzX2ZyZXEgPSBtYXhfZmF1bHRfZnJlcTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lX3dpbmRvdyA9IHRpbWVfd2luZG93O1xyXG4gICAgfVxyXG5cclxuICAgIGFsbG9jYXRlRnJhbWVzKGZyYW1lczogRnJhbWVbXSwgcHJvY2Vzc2VzOiByZWFkb25seSBSZWFkb25seTxQcm9jZXNzPltdLCB0aW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAvKiBmaXJzdCBydW4gcHJvcG9ydGlvbmFsIGFsbG9jYXRpb24gKi9cclxuICAgICAgICBpZiAodGhpcy5ydW5fcHJvcG9ydGlvbmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucnVuX3Byb3BvcnRpb25hbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb3BvcnRpb25hbCgpLmFsbG9jYXRlRnJhbWVzKGZyYW1lcywgcHJvY2Vzc2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIHRoZW4gcnVuIHBhZ2UgZmF1bHQgY29udHJvbCAqL1xyXG4gICAgICAgIGNvbnN0IE1JTl9GQVVMVFMgPSB0aGlzLm1pbl9mYXVsdF9mcmVxO1xyXG4gICAgICAgIGNvbnN0IE1BWF9GQVVMVFMgPSB0aGlzLm1heF9mYXVsdHNfZnJlcTsgLy8gZnJlcXVlbmN5XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhdWx0c0luVGltZVdpbmRvdyA9IHByb2Nlc3Nlc1tpXS5nZXRGYXVsdHNJbkxhc3ROVGlja3ModGhpcy50aW1lX3dpbmRvdywgdGltZSEpO1xyXG4gICAgICAgICAgICBsZXQgZmF1bHRfZnJlcXVlbmN5ID0gZmF1bHRzSW5UaW1lV2luZG93IC8gdGhpcy50aW1lX3dpbmRvdztcclxuICAgICAgICAgICAgbGV0IGZyYW1lc19udW1iZXIgPSBmcmFtZXMuZmlsdGVyKGZyYW1lID0+IGZyYW1lLnByb2Nlc3MgPT0gcHJvY2Vzc2VzW2ldKS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUHJvY2VzcyAke3Byb2Nlc3Nlc1tpXS5pZH0gZmF1bHQgZnJlcXVlbmN5OiAke2ZhdWx0X2ZyZXF1ZW5jeX0gKCR7ZmF1bHRzSW5UaW1lV2luZG93fSAvICR7dGhpcy50aW1lX3dpbmRvd30pYCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmF1bHRfZnJlcXVlbmN5IDwgTUlOX0ZBVUxUUyAmJiBmcmFtZXNfbnVtYmVyID4gMSkge1xyXG4gICAgICAgICAgICAgICAgLyogZGVhbGxvY2F0ZSAxIGZyYW1lICovXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZyYW1lcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZXNbal0ucHJvY2VzcyA9PSBwcm9jZXNzZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVzW2pdLnByb2Nlc3MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbGxvY2F0ZUZyYW1lcyhmcmFtZXMsIHByb2Nlc3NlcywgdGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZmF1bHRfZnJlcXVlbmN5ID4gTUFYX0ZBVUxUUykge1xyXG4gICAgICAgICAgICAgICAgLyogYWxsb2NhdGUgMSBmcmFtZSBpZiBwb3NzaWJsZSAqL1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmcmFtZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZnJhbWVzW2pdLnByb2Nlc3MgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZXNbal0ucHJvY2VzcyA9IDxQcm9jZXNzPnByb2Nlc3Nlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IEFsbG9jYXRpb25BbGdvcml0aG0gZnJvbSBcIi4uL0FsbG9jYXRpb25BbGdvcml0aG1cIjtcclxuXHJcbmltcG9ydCBQcm9jZXNzIGZyb20gXCIuLi9Qcm9jZXNzXCI7XHJcbmltcG9ydCBGcmFtZSBmcm9tIFwiLi4vRnJhbWVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb3BvcnRpb25hbCBpbXBsZW1lbnRzIEFsbG9jYXRpb25BbGdvcml0aG0ge1xyXG4gICAgbmFtZTogc3RyaW5nID0gXCJQcm9wb3J0aW9uYWxcIlxyXG5cclxuICAgIGFsbG9jYXRlRnJhbWVzKGZyYW1lczogQXJyYXk8RnJhbWU+LCBwcm9jZXNzZXM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8UHJvY2Vzcz4+KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdG90YWxfY2FsbHMgPSBwcm9jZXNzZXMucmVkdWNlKCh0b3RhbCwgcHJvY2VzcykgPT4gdG90YWwgKyBwcm9jZXNzLm51bWJlcl9vZl9jYWxscywgMCk7XHJcblxyXG4gICAgICAgIGxldCBmcmFtZXNfYWxsb2NhdGVkID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2Nlc3Nlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZnJhbWVzX2Zvcl9wcm9jZXNzID0gTWF0aC5mbG9vcigocHJvY2Vzc2VzW2ldLm51bWJlcl9vZl9jYWxscyAvIHRvdGFsX2NhbGxzKSAqIGZyYW1lcy5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZyYW1lc19mb3JfcHJvY2VzcyA8IDEpIHtcclxuICAgICAgICAgICAgICAgIGZyYW1lc19mb3JfcHJvY2VzcyA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZnJhbWVzX2Zvcl9wcm9jZXNzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChmcmFtZXNfYWxsb2NhdGVkID49IGZyYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBUaGVyZSBhcmUgbm90IGVub3VnaCBmcmFtZXMgdG8gYWxsb2NhdGUgYWxsIGZyYW1lcy5gKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZnJhbWVzW2ZyYW1lc19hbGxvY2F0ZWRdLnByb2Nlc3MgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBza2lwIHRoaXMgZnJhbWUgaWYgaXQncyBhbHJlYWR5IGFsbG9jYXRlZFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZyYW1lc1tmcmFtZXNfYWxsb2NhdGVkXS5wcm9jZXNzID0gPFByb2Nlc3M+cHJvY2Vzc2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgZnJhbWVzX2FsbG9jYXRlZCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiB0aGUgcmVtYWluaW5nIGZyYW1lcyBhcmUgbGVmdCB1bmFsbG9jYXRlZCAqL1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IE1lbnUgZnJvbSBcIi4vY2xhc3Nlcy9NZW51XCI7XHJcblxyXG5mdW5jdGlvbiBtYWluKCkge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgIG1lbnUuaW5pdCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAqIHJ1biB3aXRoOiB0c2MgJiYgbm9kZSAuXFxkaXN0XFxmcmFtZV9hbGxvY2F0aW9uX3NyY1xcbWFpbi5qc1xyXG4gICAgICAgICovXHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5tYWluKCk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERpc3BsYXkge1xyXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBudWxsID0gbnVsbFxyXG4gICAgcmVzaXplQ2FsbGJhY2s6ICgoKSA9PiB2b2lkKSB8IG51bGxcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMucmVzaXplQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpbml0KGVsZW1faWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1faWQpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlc2l6ZVRvRml0LmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICB0aGlzLnJlc2l6ZVRvRml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzaXplVG9GaXQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3R4ID09IG51bGwpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmN0eC5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5yZXNpemVDYWxsYmFjayAhPSBudWxsKXtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRSZXNpemVDYWxsYmFjayhjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVzaXplQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIH1cclxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTY1KTtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInByb2Nlc3NlcyIsImZyYW1lcyIsImNhbGxfcG9vbCIsImNhbGxfcXVldWUiLCJjYWxsX2hpc3RvcnkiLCJudW1iZXJfb2ZfZnJhbWVzIiwibnVtYmVyX29mX3BhZ2VzIiwiYWxsb2NhdGlvbkFsZ29yaXRobSIsInJlcGxhY2VtZW50QWxnb3JpdGhtIiwidG90YWxfcGFnZV9mYXVsdHMiLCJ0aW1lIiwibGFzdF9jYWxsX2NhdXNlZF9mYXVsdCIsImluaXQiLCJ0aGlzIiwiaSIsInB1c2giLCJwcm9jZXNzIiwicmVzZXQiLCJhZGRQcm9jZXNzIiwiY2xlYXJQcm9jZXNzZXMiLCJnZW5lcmF0ZVBhZ2VDYWxsUG9vbCIsImxlbmd0aCIsImdlbmVyYXRlQ2FsbHMiLCJhZGRQYWdlQ2FsbHNUb1Bvb2wiLCJnZXRDYWxscyIsImFkZFBhZ2VDYWxsVG9Qb29sIiwicGFnZV9jYWxsIiwicGFnZV9jYWxscyIsImNsZWFyUGFnZUNhbGxQb29sIiwic2V0QWxnb3JpdGhtIiwiYWxnb3JpdGhtIiwibmV4dFRpY2siLCJFcnJvciIsInVwZGF0ZVJ1bm5pbmdTdGF0dXMiLCJmb3JFYWNoIiwiZnJhbWUiLCJydW5uaW5nIiwiYWxsb2NhdGVGcmFtZXMiLCJ1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aCIsImZpbHRlciIsImNvbnNvbGUiLCJ3YXJuIiwic3BsaWNlIiwibG9nIiwiaWQiLCJvblBhZ2VDYWxsIiwiZ2V0Q3VycmVudFN0YXRlRGF0YSIsInBhZ2VfZmF1bHQiLCJwYWdlIiwicGFnZV9mYXVsdHMiLCJmYXVsdF90aW1lcyIsIm9uUGFnZUFscmVhZHlJbk1lbW9yeSIsImZpbmQiLCJpZF9vZl9mcmFtZV90b19yZXBsYWNlIiwiaGFuZGxlUGFnZUZhdWx0IiwiZ2V0RnJhbWVJbmRleEJ5SWQiLCJwYWdlX2luX21lbW9yeSIsImNhbGwiLCJwcm9jZXNzX2ZyYW1lcyIsInByb2Nlc3NfY2FsbF9oaXN0b3J5IiwiY3VycmVudF9mcmFtZXMiLCJwcmV2aW91c19wYWdlX2NhbGxzIiwiaXNGaW5pc2hlZCIsImdldFJlc3VsdHMiLCJ0b3RhbF9wYWdlX2hpdHMiLCJ0b3RhbF9jYWxscyIsInNpbXVsYXRlIiwiTUFYX1RJTUUiLCJkaXNwbGF5UmVzdWx0cyIsInJlc3VsdHMiLCJhbGdTdHIiLCJuYW1lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsImlubmVySFRNTCIsInRvVXBwZXJDYXNlIiwidG9GaXhlZCIsInJlcGxhY2UiLCJSZWdFeHAiLCJjb21wYXJlQWxsQW5kRGlzcGxheVJlc3VsdHMiLCJhbGdvcml0aG1zIiwicmVzdWx0c19lbCIsIm1lbnUiLCJ2aXNpYmxlIiwicGxheWluZyIsInNwZWVkIiwiR1VJIiwiTUVOVSIsInBsYXlfcGF1c2VfYnV0dG9uIiwic3RlcF9idXR0b24iLCJzdG9wX2J1dHRvbiIsInNwZWVkX3NsaWRlciIsImluZm9fYWxnb3JpdGhtIiwiaW5mb190aW1lIiwiaW5mb19pc19kb25lIiwiaW5mb19pbl9xdWV1ZSIsImluZm9fZmluaXNoZWQiLCJpbmZvX3RvdGFsX3BhZ2VfZmF1bHRzIiwiaW5mb190b3RhbF9wYWdlX2hpdHMiLCJmcmFtZV9yb3dzIiwic2VlX2NvZGVfYnV0dG9uIiwic3RvcmVkU2V0SW50ZXJ2YWwiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlUGxheWluZyIsInN0ZXAiLCJ0b2dnbGVWaXNpYmxlIiwicGFyc2VJbnQiLCJ2YWx1ZSIsInJlZnJlc2hTcGVlZCIsIm1lbW9yeSIsImFsZ29yaXRobU5hbWUiLCJ3aW5kb3ciLCJvcGVuIiwiZm9jdXMiLCJpbml0U3RhdGVUYWJsZSIsInJlc2l6ZUNhbGxiYWNrIiwiZHJhd0N1cnJlbnRTdGF0ZSIsImNsZWFySW50ZXJ2YWwiLCJyZWZyZXNoQ2FsbHMiLCJkaXNhYmxlZCIsInN0YXJ0QW5pbWF0aW9uIiwicmVmcmVzaEluZm8iLCJkcmF3Q2FsbHMiLCJ0aW1lX3JvdyIsImNhbGxzX3JvdyIsInRib2R5IiwidGltZV9yb3dfaGVhZGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiY2FsbHNfcm93X2hlYWRlciIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZnJhbWVfcm93IiwiZnJhbWVfcm93X2hlYWRlciIsIlNUQVJUX1giLCJTVEFSVF9ZIiwiV0lEVEgiLCJIRUlHSFQiLCJjYWxsc1RvRHJhdyIsIm5ld0NhbGwiLCJhdCIsInRpbWVUaWNrRWwiLCJjYWxsc1RpY2tFbCIsImZyYW1lVGlja0VsIiwiYmFja2dyb3VuZENvbG9yIiwidGFibGUiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsV2lkdGgiLCJ0b1N0cmluZyIsInNldEludGVydmFsIiwiYmluZCIsImFmdGVyRG9uZSIsImRhdGEiLCJmcmFtZV90b19yZXBsYWNlX2luZGV4IiwibGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4IiwiZXJyb3IiLCJwYWdlX2luZGV4IiwiaiIsImFuaW1hdGlvbkdVSSIsInJ1biIsImFkZFByb2Nlc3NlcyIsImFkZENhbGxzIiwiY2xlYXJDYWxscyIsInNldFJlc2l6ZUNhbGxiYWNrIiwiZSIsIm5ld192YWwiLCJ0YXJnZXQiLCJpc05hTiIsImFsZXJ0IiwidG9Mb3dlckNhc2UiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwcm9jZXNzX2NvdW50IiwicGFnZV9yYW5nZV9taW4iLCJwYWdlX3JhbmdlX21heCIsImNhbGxfY291bnRfbWluIiwiY2FsbF9jb3VudF9tYXgiLCJjdXJyZW50X3JhbmdlX21pbiIsInBhZ2VfcmFuZ2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzb3J0IiwiZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24iLCJhdHRyaWJ1dGVzIiwic2V0TmFtZWRJdGVtIiwiY3JlYXRlQXR0cmlidXRlIiwiYWxsX3Byb2Nlc3Nlc19lbCIsInByb2Nlc3NfZWwiLCJqb2luIiwiY2FsbF9xdWV1ZV9lbCIsIm1hcCIsImFuaW1hdGlvbiIsImNvbXBhcmVfYWxsIiwibWluX2ZyZXEiLCJwYXJzZUZsb2F0IiwibWF4X2ZyZXEiLCJ0aW1lX3dpbmRvdyIsImxhc3RfY2FsbF90aW1lIiwiZG9uZV9jYWxscyIsInJhbmdlX29mX3BhZ2VzIiwibnVtYmVyX29mX2NhbGxzIiwiYXNzaWduZWRGcmFtZXMiLCJjYWxscyIsImdldEZhdWx0c0luTGFzdE5UaWNrcyIsIm4iLCJmYXVsdHMiLCJmcmFtZXNfcGVyX3Byb2Nlc3MiLCJtaW5fZmF1bHRfZnJlcSIsIm1heF9mYXVsdF9mcmVxIiwicnVuX3Byb3BvcnRpb25hbCIsIm1heF9mYXVsdHNfZnJlcSIsIk1JTl9GQVVMVFMiLCJNQVhfRkFVTFRTIiwiZmF1bHRzSW5UaW1lV2luZG93IiwiZmF1bHRfZnJlcXVlbmN5IiwiZnJhbWVzX251bWJlciIsInJlZHVjZSIsInRvdGFsIiwiZnJhbWVzX2FsbG9jYXRlZCIsImZyYW1lc19mb3JfcHJvY2VzcyIsImN0eCIsImVsZW1faWQiLCJjYW52YXMiLCJnZXRDb250ZXh0IiwicmVzaXplVG9GaXQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImNhbGxiYWNrIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iXSwic291cmNlUm9vdCI6IiJ9