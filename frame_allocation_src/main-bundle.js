(()=>{"use strict";var e={994:function(e,t,l){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(l(752)),a=s(l(920)),i=s(l(463));t.default=class{constructor(){this.processes=[],this.frames=[],this.call_pool=[],this.call_queue=[],this.call_history=[],this.number_of_frames=0,this.number_of_pages=0,this.allocationAlgorithm=null,this.replacementAlgorithm=new i.default,this.total_page_faults=0,this.time=0,this.last_call_caused_fault=!1,this.last_empty_queue=!1}init(e){this.number_of_frames=null!=e?e:this.number_of_frames,this.call_queue=[...this.call_pool],this.frames=[],this.call_history=[],this.time=0,this.total_page_faults=0;for(let e=0;e<this.number_of_frames;e++)this.frames.push(new n.default(e));for(const e of this.processes)e.reset()}addProcess(e){this.processes.push(e)}clearProcesses(){this.processes=[]}generatePageCallPool(){for(let e=0;e<this.processes.length;e++)this.processes[e].generateCalls(),this.addPageCallsToPool(this.processes[e].getCalls(),this.processes[e])}addPageCallToPool(e){this.call_pool.push(e)}addPageCallsToPool(e,t){for(let l=0;l<e.length;l++)this.addPageCallToPool(new a.default(e[l],t))}clearPageCallPool(){this.call_pool=[]}setAlgorithm(e){this.allocationAlgorithm=e}nextTick(){var e,t,l,s,n,a;if(null==this.allocationAlgorithm)throw new Error("No algorithm selected");for(const e of this.processes)e.updateRunningStatus(this.frames);this.frames.forEach((e=>{null==e.process||e.process.running||(e.process=null)})),null===(t=(e=this.allocationAlgorithm).allocateFrames)||void 0===t||t.call(e,this.frames,this.processes),this.frames.forEach((e=>{null==e.process&&null!=e.page&&(e.page=null)}));const i=this.frames.filter((e=>null==e.process)).length;i>0&&console.warn(`Not all frames are allocated\nAllocated: ${this.frames.length-i}\nUnallocated: ${i}`);for(const e of this.processes)e.updateRunningStatus(this.frames);let o=null;for(let e=0;e<this.call_queue.length;e++)if(this.call_queue[e].process.running){o=this.call_queue[e],this.call_queue.splice(e,1);break}if(null==o)return console.warn("Empty page call queue or no processes running"),this.time++,void(this.last_empty_queue=!0);if(this.last_empty_queue=!1,this.call_history.push(o),console.log("Page call: "+o.id),o){null===(s=(l=this.replacementAlgorithm).onPageCall)||void 0===s||s.call(l,this.getCurrentStateData(o));let e=!0;for(let t=0;t<this.frames.length;t++){if(null==this.frames[t])throw new Error("Frame is null");if(null==this.frames[t].page&&this.frames[t].process==o.process){this.frames[t].page=o,this.total_page_faults++,o.process.page_faults++,this.last_call_caused_fault=!0,e=!1;break}if(null!=this.frames[t].page&&this.frames[t].page.id==o.id){null===(a=(n=this.replacementAlgorithm).onPageAlreadyInMemory)||void 0===a||a.call(n,this.getCurrentStateData(o)),this.last_call_caused_fault=!1,e=!1;break}}if(e){if(console.log("Page fault: "+o.id),null!=this.frames.find((e=>e.process==o.process&&null==e.page)))throw new Error("Initial page fill not handled properly");this.total_page_faults++,o.process.page_faults++,this.last_call_caused_fault=!0;const e=this.replacementAlgorithm.handlePageFault(this.getCurrentStateData(o));-1!=e&&(this.frames[this.getFrameIndexById(e)].page=o)}let t=!1;for(const e of this.frames)if(null!=e.page&&e.page.id==o.id){t=!0;break}if(!t)throw new Error("Page fault not handled properly - page not in memory");o.call(this.time,this.last_call_caused_fault)}this.time++}getCurrentStateData(e){const t=this.frames.filter((t=>t.process==e.process)),l=this.call_history.filter((t=>t.process==e.process));return{page_call:e,current_frames:t,previous_page_calls:l,processes:this.processes}}isFinished(){return 0==this.call_queue.length}getFrameIndexById(e){for(let t=0;t<this.frames.length;t++)if(this.frames[t].id==e)return t;return-1}getResults(){return{total_page_faults:this.total_page_faults,total_page_hits:this.call_history.length-this.total_page_faults,total_calls:this.call_history.length}}simulate(){for(this.init();!this.isFinished();){this.nextTick();const e=1e4;if(this.time>e){console.warn("Simulation timed out");break}}return this.getResults()}displayResults(e,t){var l;void 0===t&&(t=null!==(l=this.allocationAlgorithm.display_name)&&void 0!==l?l:this.allocationAlgorithm.name),document.getElementById("results_wrapper").style.display="flex",document.getElementById("results").innerHTML=`\n        Algorithm: ${t}\n\n        Total page faults: <b style='color: red'>${e.total_page_faults.toFixed(0)}</b>\n        Total page hits: <b style='color: lime'>${e.total_page_hits.toFixed(0)}</b>\n        Total page calls: <b>${e.total_calls.toFixed(0)}</b>\n        `.replace(RegExp("\n","g"),"<br />")}compareAllAndDisplayResults(e){var t,l;document.getElementById("results_wrapper").style.display="flex";const s=document.getElementById("results");s.innerHTML="";const n=[];for(let l=0;l<e.length;l++){this.setAlgorithm(e[l]);const a=this.simulate();s.innerHTML+=`\n            Algorithm: ${null!==(t=e[l].display_name)&&void 0!==t?t:e[l].name}\n            Total page faults: <b style='color: red'>${a.total_page_faults.toFixed(0)}</b>\n            Total page hits: <b style='color: lime'>${a.total_page_hits.toFixed(0)}</b>\n            Total page calls: <b>${a.total_calls.toFixed(0)}</b>\n            `.replace(RegExp("\n","g"),"<br />"),s.innerHTML+="<br />";for(let e=0;e<this.processes.length;e++)null==n[l]&&(n[l]=[]),n[l].push(this.processes[e].page_faults)}const a=document.createElement("div");a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center";const i=document.createElement("table");i.style.border="1px solid white",i.style.borderCollapse="collapse",a.appendChild(i);const o=document.createElement("tr"),r=document.createElement("td");r.style.border="1px solid white",r.style.padding="5px",r.style.color="yellow",r.innerHTML="Process",o.appendChild(r);for(let t=0;t<e.length;t++){const s=document.createElement("td");s.style.border="1px solid white",s.style.padding="5px",s.style.color="yellow",s.innerHTML=null!==(l=e[t].display_name)&&void 0!==l?l:e[t].name,o.appendChild(s)}i.appendChild(o);for(let t=0;t<this.processes.length;t++){const l=document.createElement("tr"),s=document.createElement("td");s.style.border="1px solid white",s.style.padding="5px",s.style.color="yellow",s.innerHTML=this.processes[t].id.toString(),l.appendChild(s);for(let s=0;s<e.length;s++){const e=document.createElement("td");e.style.border="1px solid white",e.style.padding="5px",e.innerHTML=n[s][t].toString(),l.appendChild(e)}i.appendChild(l)}s.appendChild(a)}}},498:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.visible=!1,this.playing=!1,this.speed=1,this.GUI=null,this.MENU=null,this.play_pause_button=null,this.step_button=null,this.stop_button=null,this.speed_slider=null,this.info_algorithm=null,this.info_time=null,this.info_is_done=null,this.info_in_queue=null,this.info_finished=null,this.info_total_page_faults=null,this.info_total_page_hits=null,this.frame_rows=[],this.see_code_button=null,this.storedSetInterval=null,this.menu=e}init(){this.GUI=document.getElementById("animation_gui"),this.MENU=document.getElementById("settings"),this.play_pause_button=document.getElementById("animation_play_pause"),this.step_button=document.getElementById("animation_step"),this.stop_button=document.getElementById("animation_stop"),this.speed_slider=document.getElementById("animation_speed_slider"),this.info_algorithm=document.getElementById("animation_info_algorithm_value"),this.info_time=document.getElementById("animation_info_time_value"),this.info_is_done=document.getElementById("animation_is_done"),this.info_in_queue=document.getElementById("calls_in_queue_value"),this.info_finished=document.getElementById("calls_finished_value"),this.info_total_page_faults=document.getElementById("total_page_faults_value"),this.info_total_page_hits=document.getElementById("total_page_hits_value"),this.see_code_button=document.getElementById("code_button"),this.info_is_done.style.display="none",this.play_pause_button.addEventListener("click",(()=>{this.togglePlaying()})),this.step_button.addEventListener("click",(()=>{this.step()})),this.stop_button.addEventListener("click",(()=>{this.toggleVisible(!1)})),this.speed_slider.addEventListener("input",(()=>{this.speed=parseInt(this.speed_slider.value),this.refreshSpeed()})),this.see_code_button.addEventListener("click",(()=>{if(null==this.menu.memory.allocationAlgorithm)return;const e=this.menu.memory.allocationAlgorithm.name;window.open(`https://github.com/brun0ne/scheduling-sim/blob/main/frame_allocation_src/classes/algorithms/${e}.ts`,"_blank").focus()})),this.refreshSpeed(),this.initStateTable()}togglePlaying(e){this.playing=null==e?!this.playing:e,this.refreshSpeed(),this.play_pause_button.innerHTML=this.playing?"Pause":"Play"}toggleVisible(e){this.visible=null==e?!this.visible:e,this.visible?(this.GUI.style.display="block",this.MENU.style.display="none",this.menu.display.resizeCallback=()=>{this.drawCurrentState()},this.drawCurrentState()):(this.GUI.style.display="none",this.MENU.style.display="flex",null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.menu.display.resizeCallback=()=>{this.menu.refreshCalls()},this.menu.refreshCalls())}reset(){if(null==this.play_pause_button||null==this.info_is_done||null==this.step_button)throw new Error("call init() first!");this.menu.memory.init(),this.play_pause_button.innerHTML="Play",this.playing=!1,this.info_is_done.style.display="none",this.play_pause_button.disabled=!1,this.step_button.disabled=!1,this.initStateTable()}startAnimation(){this.reset(),this.toggleVisible(!0)}drawCurrentState(){this.refreshInfo(),this.drawCalls()}initStateTable(){const e=document.getElementById("animation_table_time"),t=document.getElementById("animation_table_page_calls"),l=document.getElementById("animation_table_body");e.innerHTML="",t.innerHTML="";{const t=document.createElement("th");t.innerHTML="Time",t.classList.add("header"),e.appendChild(t)}{const e=document.createElement("th");e.innerHTML="Page calls",e.classList.add("header"),t.appendChild(e)}{for(;null!=l.lastChild&&"animation_table_page_calls"!=l.lastChild.id;)l.removeChild(l.lastChild);const e=[];for(let t=0;t<this.menu.memory.number_of_frames;t++){const s=document.createElement("tr"),n=document.createElement("th");n.innerHTML=`Frame ${t}`,s.appendChild(n),e.push(s),l.appendChild(s)}this.frame_rows=e}}drawCalls(e,t,l,s,n){const a=document.getElementById("animation_table_time"),i=document.getElementById("animation_table_page_calls"),o=this.menu.memory.call_history.at(-1);if(this.menu.memory.last_empty_queue)return;if(null==o)return;{const e=document.createElement("th");e.innerHTML=`${this.menu.memory.time}`,a.appendChild(e)}{const e=document.createElement("th");e.innerHTML=`${o.id}`,e.style.color="cyan",i.appendChild(e)}for(let e=0;e<this.menu.memory.number_of_frames;e++){const t=this.frame_rows[e],l=this.menu.memory.frames[e].page,s=document.createElement("th");s.innerHTML=`${null!=l?l.id:""}`,null!=l&&l.id==o.id&&this.menu.memory.last_call_caused_fault&&(s.style.backgroundColor="red"),null!=this.menu.memory.frames[e].process&&(s.innerHTML+=` <span style='color: yellow'>(${this.menu.memory.frames[e].process.id})</span>`),t.appendChild(s)}const r=document.getElementById("animation_call_table");r.scrollLeft=r.scrollWidth}refreshInfo(){const e=this.menu.memory;if(null==e.allocationAlgorithm)throw new Error("call startAnimation() first!");this.info_algorithm.innerHTML=e.allocationAlgorithm.name,this.info_time.innerHTML=e.time.toString(),e.isFinished()?this.info_is_done.style.display="block":this.info_is_done.style.display="none",this.info_total_page_hits.innerHTML=(e.call_history.length-e.total_page_faults).toString(),this.info_total_page_faults.innerHTML=e.total_page_faults.toString(),this.info_in_queue.innerHTML=e.call_queue.length.toString(),this.info_finished.innerHTML=e.call_history.length.toString()}refreshSpeed(){null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.storedSetInterval=setInterval((()=>{this.playing&&this.step()}).bind(this),1e3/this.speed)}step(){this.menu.memory.isFinished()||(this.menu.memory.nextTick(),this.drawCurrentState(),this.menu.memory.isFinished()&&(this.togglePlaying(!1),this.menu.memory.displayResults(this.menu.memory.getResults()),this.afterDone()))}afterDone(){if(null==this.info_is_done||null==this.play_pause_button||null==this.step_button)throw new Error("call init() first!");this.info_is_done.style.display="block",this.play_pause_button.disabled=!0,this.step_button.disabled=!0}}},752:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.page=null,this.process=null,this.id=e}}},463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="LRU"}handlePageFault(e){let t=-1,l=-1;for(let s=0;s<e.current_frames.length;s++){const n=e.current_frames[s];if(n.process!=e.page_call.process&&console.error("Frame is assigned to a different process - this should be ensured not to happen by the caller"),null==n.page)return console.warn("Frame is empty - this should be ensured not to happen by the caller"),s;let a=-1;for(let t=e.previous_page_calls.length-1;t>=0;t--)if(e.previous_page_calls[t].id==n.page.id){a=t;break}if(-1==a)return s;(a<l||-1==l)&&(t=s,l=a)}return-1==t?(console.warn("No frame to replace found by LRU"),-1):e.current_frames[t].id}}},268:function(e,t,l){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(l(617)),a=s(l(994)),i=s(l(950)),o=s(l(920)),r=s(l(382)),h=s(l(498)),u=s(l(634)),c=s(l(960)),d=s(l(728));t.default=class{constructor(){this.display=new n.default,this.memory=new a.default,this.animationGUI=new h.default(this)}init(){document.getElementById("run_button").addEventListener("click",(()=>{this.run()})),document.getElementById("run_with_animation_button").addEventListener("click",(()=>{this.run(!0)})),document.getElementById("add_button").addEventListener("click",(()=>{this.addProcesses()})),document.getElementById("clear_button").addEventListener("click",(()=>{this.clearProcesses()})),document.getElementById("generate_call_queue_button").addEventListener("click",(()=>{this.addCalls()})),document.getElementById("clear_call_queue_button").addEventListener("click",(()=>{this.clearCalls()}));const e=parseInt(document.getElementById("s_frame_count").value);this.memory.init(e),this.display.init("main_canvas"),this.animationGUI.init(),this.display.setResizeCallback((()=>{this.refreshCalls()})),document.getElementById("s_frame_count").addEventListener("change",(e=>{const t=parseInt(e.target.value);isNaN(t)||t<1?alert("Invalid number of frames"):(this.memory.init(t),this.refreshCalls())})),document.getElementById("a_type").addEventListener("change",(e=>{"compare_all"===e.target.value.toLowerCase()?document.getElementById("run_with_animation_button").setAttribute("disabled","true"):document.getElementById("run_with_animation_button").removeAttribute("disabled"),"fault_control"===e.target.value.toLowerCase()||"compare_all"===e.target.value.toLowerCase()?(document.getElementById("s_min_page_faults_all").style.display="block",document.getElementById("s_max_page_faults_all").style.display="block",document.getElementById("s_time_window_all").style.display="block"):(document.getElementById("s_min_page_faults_all").style.display="none",document.getElementById("s_max_page_faults_all").style.display="none",document.getElementById("s_time_window_all").style.display="none"),"locality_model"===e.target.value.toLowerCase()||"compare_all"===e.target.value.toLowerCase()?document.getElementById("s_time_window_all").style.display="block":document.getElementById("s_time_window_all").style.display="none"})),document.getElementById("results_close").addEventListener("click",(()=>{document.getElementById("results_wrapper").style.display="none"})),this.refreshCalls()}addProcesses(){const e=parseInt(document.getElementById("c_count").value),t=parseInt(document.getElementById("s_min_range").value),l=parseInt(document.getElementById("s_max_range").value),s=parseInt(document.getElementById("s_min_calls").value),n=parseInt(document.getElementById("s_max_calls").value);let a=0;for(let o=0;o<e;o++){const e=Math.floor(Math.random()*(l-t+1))+t;this.memory.addProcess(new i.default([a,a+e],Math.floor(Math.random()*(n-s+1))+s,o)),this.memory.processes[this.memory.processes.length-1].generateCalls(),a+=e}this.refreshCalls()}clearProcesses(){this.memory.clearProcesses(),this.memory.clearPageCallPool(),this.refreshCalls()}addCalls(){for(let e=0;e<this.memory.processes.length;e++)for(let t=0;t<this.memory.processes[e].getCalls().length;t++)this.memory.call_pool.push(new o.default(this.memory.processes[e].getCalls()[t],this.memory.processes[e]));this.memory.call_pool.sort((()=>Math.random()-.5)),this.refreshCalls()}clearCalls(){this.memory.call_pool=[],this.refreshCalls()}refreshCalls(){document.getElementById("p_current_count").innerHTML=`(${this.memory.processes.length.toString()})`;const e=document.getElementById("generate_call_queue_button");this.memory.processes.length>0&&0==this.memory.call_pool.length?e.removeAttribute("disabled"):e.attributes.setNamedItem(document.createAttribute("disabled"));const t=document.getElementById("all_processes");t.innerHTML="";for(let e=0;e<this.memory.processes.length;e++){const l=this.memory.processes[e],s=document.createElement("span");s.classList.add("process"),s.innerHTML=`<span class="process_name">Calls of process ${e}: </span> <span class="process_calls">${l.getCalls().join(", ")}</span><br />`,t.appendChild(s)}0==this.memory.processes.length&&(t.innerHTML="<span style='color: yellow'>No processes added yet.</span>"),document.getElementById("current_call_count").innerHTML=`(${this.memory.call_pool.length.toString()})`;const l=document.getElementById("main_call_queue");l.innerHTML=this.memory.call_pool.map((e=>e.id)).join(", "),0==this.memory.call_pool.length&&(l.innerHTML="<span style='color: yellow'>No calls in queue.</span>")}run(e){if(this.memory.processes.length>this.memory.frames.length)return void alert("Not enough frames for all processes");const t=document.getElementById("a_type").value;let l=!1;const s=parseFloat(document.getElementById("s_min_page_faults").value),n=parseFloat(document.getElementById("s_max_page_faults").value),a=parseFloat(document.getElementById("s_time_window").value);switch(t.toLowerCase()){case"equal":this.memory.setAlgorithm(new r.default);break;case"proportional":this.memory.setAlgorithm(new u.default);break;case"fault_control":if(s>=n)return void alert("Minimum frequency has to be smaller than the maximum");this.memory.setAlgorithm(new c.default(s,n,a));break;case"locality_model":this.memory.setAlgorithm(new d.default(a));break;case"compare_all":l=!0;break;default:alert("Invalid algorithm")}if(l){if(s>=n)return void alert("Minimum frequency has to be smaller than the maximum");const e=[new r.default,new u.default,new c.default(s,n,a),new d.default(a)];this.memory.compareAllAndDisplayResults(e)}else if(e)this.animationGUI.startAnimation();else{const e=this.memory.simulate();this.memory.displayResults(e)}}}},920:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.last_call_time=0,this.id=e,this.process=t}call(e,t){this.last_call_time=e,this.process.done_calls++,this.process.addToFaultLog(t),this.process.addToCallLog(this)}}},950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,l){this.page_faults=0,this.done_calls=0,this.call_log=[],this.fault_log=[],this.running=!0,this.assignedFrames=0,this.calls=[],this.range_of_pages=e,this.number_of_calls=t,this.id=l}reset(){this.page_faults=0,this.done_calls=0,this.running=!0,this.assignedFrames=0,this.fault_log=[],this.call_log=[]}generateCalls(){this.calls=[];for(let e=0;e<this.number_of_calls;e++)this.calls.push(Math.floor(Math.random()*(this.range_of_pages[1]-this.range_of_pages[0]))+this.range_of_pages[0])}getCalls(){return this.calls}addToFaultLog(e){if(this.fault_log.push(e),this.fault_log.length!=this.done_calls)throw new Error("Fault log length does not match done calls")}addToCallLog(e){if(this.call_log.push(e),this.call_log.length!=this.done_calls)throw new Error("Call log length does not match done calls")}updateRunningStatus(e){let t=0;for(const l of e)l.process==this&&t++;if(this.running=t>0,this.done_calls==this.number_of_calls)this.running=!1;else if(this.done_calls>=this.number_of_calls)throw new Error("Process done calls exceeded number of calls");this.assignedFrames=t}getFaultsInLastN(e){return this.fault_log.slice(this.fault_log.length-e,this.fault_log.length).filter((e=>e)).length}getUniquePagesInLastN(e){return this.call_log.slice(this.call_log.length-e,this.call_log.length).map((e=>e.id)).filter(((e,t,l)=>l.indexOf(e)===t)).length}}},382:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Equal"}allocateFrames(e,t){const l=Math.floor(e.length/t.length);console.log(`Allocating ${l} frames per process`);for(let s=0;s<e.length;s++)null==e[s].process&&(e[s].process=t[Math.floor(s/l)])}}},728:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.name="LocalityModel",this.display_name="Locality Model",this.time_window=e}allocateFrames(e,t){for(let t=0;t<e.length;t++)e[t].process=null;let l=0;for(const s of t){if(s.done_calls==s.getCalls().length)continue;let t=this.time_window;t>s.call_log.length&&(t=s.call_log.length);let n=s.getUniquePagesInLastN(this.time_window);n<1&&(n=1);for(let t=0;t<e.length;t++)if(null==e[t].process){if(n>0&&(e[t].process=s,n--,l++),0==n)break;if(l==e.length){console.warn("Allocated all frames (LocalityModel)");break}}}}}},960:function(e,t,l){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(l(634));t.default=class{constructor(e,t,l){this.name="PageFaultControl",this.display_name="Fault Control",this.run_proportional=!0,this.min_fault_freq=e,this.max_faults_freq=t,this.time_window=l}allocateFrames(e,t){if(this.run_proportional)return this.run_proportional=!1,(new n.default).allocateFrames(e,t);const l=this.min_fault_freq,s=this.max_faults_freq;for(let n=0;n<t.length;n++){const a=t[n].getFaultsInLastN(this.time_window);let i=this.time_window;i>t[n].fault_log.length&&(i=t[n].fault_log.length);let o=a/i,r=e.filter((e=>e.process==t[n])).length;if(0==i&&(o=(this.min_fault_freq+this.max_faults_freq)/2),console.log(`Process ${t[n].id} fault frequency: ${o} (${a} / ${i})`),o<l&&r>1)for(let l=0;l<e.length;l++)if(e[l].process==t[n])return e[l].process=null,this.allocateFrames(e,t);if(o>s&&t[n].getCalls().length!=t[n].done_calls)for(let l=0;l<e.length;l++)if(null==e[l].process){e[l].process=t[n];break}}}}},634:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="Proportional"}allocateFrames(e,t){const l=t.reduce(((e,t)=>e+t.number_of_calls),0);let s=0;for(let n=0;n<t.length;n++){let a=Math.floor(t[n].number_of_calls/l*e.length);a<1&&(a=1);for(let l=0;l<a;l++){if(s>=e.length){console.error("There are not enough frames to allocate all frames.");break}null==e[s].process&&(e[s].process=t[n],s++)}}}}},965:function(e,t,l){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(l(268));"undefined"!=typeof document&&(new n.default).init()},617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.ctx=null,this.resizeCallback=null}init(e){const t=document.getElementById(e);this.ctx=t.getContext("2d"),window.addEventListener("resize",this.resizeToFit.bind(this)),this.resizeToFit()}resizeToFit(){null!=this.ctx&&(this.ctx.canvas.width=window.innerWidth,this.ctx.canvas.height=window.innerHeight,null!=this.resizeCallback&&this.resizeCallback())}setResizeCallback(e){this.resizeCallback=e}}}},t={};!function l(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,l),a.exports}(965)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFtQmpCLEVBQVVlLEdBQ3REeU8sSSxFQUtaLEUsMkpDbkNKLGtCQUc0QixvQkFBYi9LLFdBQ00sSUFBSSxXQUNaNUQsTSwrRENMYixnQkFJSWQsY0FIQSxLQUFBMlAsSUFBdUMsS0FJbkM1TyxLQUFLd0gsZUFBaUIsSUFDMUIsQ0FFQXpILEtBQUs4TyxHQUNELE1BQU1DLEVBQVNuTCxTQUFTQyxlQUFlaUwsR0FDdkM3TyxLQUFLNE8sSUFBTUUsRUFBT0MsV0FBVyxNQUU3QjNILE9BQU9ULGlCQUFpQixTQUFVM0csS0FBS2dQLFlBQVl2RixLQUFLekosT0FFeERBLEtBQUtnUCxhQUNULENBRUFBLGNBQ29CLE1BQVpoUCxLQUFLNE8sTUFJVDVPLEtBQUs0TyxJQUFJRSxPQUFPRyxNQUFRN0gsT0FBTzhILFdBQy9CbFAsS0FBSzRPLElBQUlFLE9BQU9LLE9BQVMvSCxPQUFPZ0ksWUFFTCxNQUF2QnBQLEtBQUt3SCxnQkFDTHhILEtBQUt3SCxpQkFFYixDQUVBOEMsa0JBQWtCK0UsR0FDZHJQLEtBQUt3SCxlQUFpQjZILENBQzFCLEUsR0MvQkFDLEVBQTJCLENBQUMsR0FHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVN00sS0FBS2lOLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNKLEdBR3BFSyxFQUFPRCxPQUNmLENDbkIwQkosQ0FBb0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NsYXNzZXMvQWxsb2NhdGluZ01NVS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL0FuaW1hdGlvbkdVSS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL0ZyYW1lLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvTFJVLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvTWVudS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL1BhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9Qcm9jZXNzLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvYWxnb3JpdGhtcy9FcXVhbC50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvTG9jYWxpdHlNb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvUGFnZUZhdWx0Q29udHJvbC50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvUHJvcG9ydGlvbmFsLnRzIiwid2VicGFjazovLy8uL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4uL3NoYXJlZC9jbGFzc2VzL0Rpc3BsYXkudHMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFsbG9jYXRpb25BbGdvcml0aG0gZnJvbSBcIi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiXHJcblxyXG5pbXBvcnQgRnJhbWUgZnJvbSBcIi4vRnJhbWVcIlxyXG5pbXBvcnQgUGFnZSBmcm9tIFwiLi9QYWdlXCJcclxuaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4vUHJvY2Vzc1wiXHJcblxyXG5pbXBvcnQgUmVwbGFjZW1lbnRBbGdvcml0aG0gZnJvbSBcIi4vUmVwbGFjZW1lbnRBbGdvcml0aG1cIlxyXG5pbXBvcnQgTFJVIGZyb20gXCIuL0xSVVwiXHJcblxyXG5leHBvcnQgdHlwZSBNZW1vcnlTdGF0ZURhdGEgPSB7XHJcbiAgICBwYWdlX2NhbGw6IFJlYWRvbmx5PFBhZ2U+LFxyXG4gICAgY3VycmVudF9mcmFtZXM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8RnJhbWU+PixcclxuICAgIHByZXZpb3VzX3BhZ2VfY2FsbHM6IFJlYWRvbmx5QXJyYXk8UmVhZG9ubHk8UGFnZT4+LFxyXG4gICAgcHJvY2Vzc2VzOiBSZWFkb25seUFycmF5PFJlYWRvbmx5PFByb2Nlc3M+PlxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgUmVzdWx0cyA9IHtcclxuICAgIHRvdGFsX3BhZ2VfZmF1bHRzOiBudW1iZXIsXHJcbiAgICB0b3RhbF9wYWdlX2hpdHM6IG51bWJlcixcclxuICAgIHRvdGFsX2NhbGxzOiBudW1iZXJcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsbG9jYXRpbmdNTVUge1xyXG4gICAgcHJvY2Vzc2VzOiBBcnJheTxQcm9jZXNzPiA9IFtdXHJcbiAgICBmcmFtZXM6IEFycmF5PEZyYW1lPiA9IFtdXHJcblxyXG4gICAgY2FsbF9wb29sOiBBcnJheTxQYWdlPiA9IFtdXHJcbiAgICBjYWxsX3F1ZXVlOiBBcnJheTxQYWdlPiA9IFtdXHJcbiAgICBjYWxsX2hpc3Rvcnk6IEFycmF5PFBhZ2U+ID0gW11cclxuXHJcbiAgICBudW1iZXJfb2ZfZnJhbWVzOiBudW1iZXIgPSAwXHJcbiAgICBudW1iZXJfb2ZfcGFnZXM6IG51bWJlciA9IDBcclxuXHJcbiAgICBhbGxvY2F0aW9uQWxnb3JpdGhtOiBBbGxvY2F0aW9uQWxnb3JpdGhtIHwgbnVsbCA9IG51bGxcclxuICAgIHJlcGxhY2VtZW50QWxnb3JpdGhtOiBSZXBsYWNlbWVudEFsZ29yaXRobSA9IG5ldyBMUlUoKVxyXG5cclxuICAgIHRvdGFsX3BhZ2VfZmF1bHRzOiBudW1iZXIgPSAwXHJcbiAgICB0aW1lOiBudW1iZXIgPSAwXHJcblxyXG4gICAgbGFzdF9jYWxsX2NhdXNlZF9mYXVsdDogYm9vbGVhbiA9IGZhbHNlXHJcbiAgICBsYXN0X2VtcHR5X3F1ZXVlOiBib29sZWFuID0gZmFsc2VcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICAgIGluaXQobnVtYmVyX29mX2ZyYW1lcz86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubnVtYmVyX29mX2ZyYW1lcyA9IG51bWJlcl9vZl9mcmFtZXMgPz8gdGhpcy5udW1iZXJfb2ZfZnJhbWVzO1xyXG5cclxuICAgICAgICB0aGlzLmNhbGxfcXVldWUgPSBbLi4udGhpcy5jYWxsX3Bvb2xdOyAvLyBjb3B5IGFycmF5XHJcbiAgICAgICAgdGhpcy5mcmFtZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmNhbGxfaGlzdG9yeSA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfcGFnZV9mYXVsdHMgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyX29mX2ZyYW1lczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVzLnB1c2gobmV3IEZyYW1lKGkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgcHJvY2VzcyBvZiB0aGlzLnByb2Nlc3Nlcykge1xyXG4gICAgICAgICAgICBwcm9jZXNzLnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZFByb2Nlc3MocHJvY2VzczogUHJvY2Vzcyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc2VzLnB1c2gocHJvY2Vzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJQcm9jZXNzZXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzZXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVBhZ2VDYWxsUG9vbCgpOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc2VzW2ldLmdlbmVyYXRlQ2FsbHMoKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRQYWdlQ2FsbHNUb1Bvb2wodGhpcy5wcm9jZXNzZXNbaV0uZ2V0Q2FsbHMoKSwgdGhpcy5wcm9jZXNzZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFBhZ2VDYWxsVG9Qb29sKHBhZ2VfY2FsbDogUGFnZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FsbF9wb29sLnB1c2gocGFnZV9jYWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFBhZ2VDYWxsc1RvUG9vbChwYWdlX2NhbGxzOiBBcnJheTxudW1iZXI+LCBwcm9jZXNzOiBQcm9jZXNzKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlX2NhbGxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUGFnZUNhbGxUb1Bvb2wobmV3IFBhZ2UocGFnZV9jYWxsc1tpXSwgcHJvY2VzcykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhclBhZ2VDYWxsUG9vbCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhbGxfcG9vbCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFsZ29yaXRobShhbGdvcml0aG06IEFsbG9jYXRpb25BbGdvcml0aG0pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFsbG9jYXRpb25BbGdvcml0aG0gPSBhbGdvcml0aG07XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dFRpY2soKTogdm9pZCB7XHJcbiAgICAgICAgLyogZW5zdXJlIHRoYXQgYW4gYWxnb3JpdGhtIGlzIHNlbGVjdGVkICovXHJcbiAgICAgICAgaWYgKHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFsZ29yaXRobSBzZWxlY3RlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGNoZWNrIGlmIGFueSBwcm9jZXNzIGlzIHN0b3BwZWQvcmVzdW1lZCAqL1xyXG4gICAgICAgIGZvciAoY29uc3QgcHJvY2VzcyBvZiB0aGlzLnByb2Nlc3Nlcykge1xyXG4gICAgICAgICAgICBwcm9jZXNzLnVwZGF0ZVJ1bm5pbmdTdGF0dXModGhpcy5mcmFtZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogZGVhbGxvY2F0ZSBmaW5pc2hlZCBwcm9jZXNzZXMgKi9cclxuICAgICAgICB0aGlzLmZyYW1lcy5mb3JFYWNoKGZyYW1lID0+IHtcclxuICAgICAgICAgICAgaWYgKGZyYW1lLnByb2Nlc3MgIT0gbnVsbCAmJiAhZnJhbWUucHJvY2Vzcy5ydW5uaW5nKVxyXG4gICAgICAgICAgICAgICAgZnJhbWUucHJvY2VzcyA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIHJlYWxsb2NhdGUgZnJhbWVzIHRvIHByb2Nlc3NlcyAqL1xyXG4gICAgICAgIHRoaXMuYWxsb2NhdGlvbkFsZ29yaXRobS5hbGxvY2F0ZUZyYW1lcz8uKHRoaXMuZnJhbWVzLCB0aGlzLnByb2Nlc3Nlcyk7XHJcblxyXG4gICAgICAgIC8qIHJlbW92ZSBwYWdlcyBmcm9tIHVuYWxsb2NhdGVkIGZyYW1lcyAqL1xyXG4gICAgICAgIHRoaXMuZnJhbWVzLmZvckVhY2goZnJhbWUgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZnJhbWUucHJvY2VzcyA9PSBudWxsICYmIGZyYW1lLnBhZ2UgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGZyYW1lLnBhZ2UgPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aCA9IHRoaXMuZnJhbWVzLmZpbHRlcihmcmFtZSA9PiBmcmFtZS5wcm9jZXNzID09IG51bGwpLmxlbmd0aDtcclxuICAgICAgICBpZiAodW5hbGxvY2F0ZWRGcmFtZXNMZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgTm90IGFsbCBmcmFtZXMgYXJlIGFsbG9jYXRlZFxcbkFsbG9jYXRlZDogJHt0aGlzLmZyYW1lcy5sZW5ndGggLSB1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aH1cXG5VbmFsbG9jYXRlZDogJHt1bmFsbG9jYXRlZEZyYW1lc0xlbmd0aH1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGNoZWNrIGFnYWluIGlmIGFueSBwcm9jZXNzIGlzIHN0b3BwZWQvcmVzdW1lZCAqL1xyXG4gICAgICAgIGZvciAoY29uc3QgcHJvY2VzcyBvZiB0aGlzLnByb2Nlc3Nlcykge1xyXG4gICAgICAgICAgICBwcm9jZXNzLnVwZGF0ZVJ1bm5pbmdTdGF0dXModGhpcy5mcmFtZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogdHJhdmVyc2UgdGhlIHF1ZXVlIHVudGlsIGEgY2FsbCBiZWxvbmdpbmcgdG8gYSBydW5uaW5nIHByb2Nlc3MgaXMgZm91bmQgKi9cclxuICAgICAgICBsZXQgcGFnZV9jYWxsOiBQYWdlIHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhbGxfcXVldWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FsbF9xdWV1ZVtpXS5wcm9jZXNzLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VfY2FsbCA9IHRoaXMuY2FsbF9xdWV1ZVtpXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbF9xdWV1ZS5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogbm8gcGFnZSBjYWxsIGF0IHRoaXMgdGltZSAqL1xyXG4gICAgICAgIGlmIChwYWdlX2NhbGwgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFbXB0eSBwYWdlIGNhbGwgcXVldWUgb3Igbm8gcHJvY2Vzc2VzIHJ1bm5pbmdcIik7XHJcbiAgICAgICAgICAgIHRoaXMudGltZSsrO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RfZW1wdHlfcXVldWUgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGFzdF9lbXB0eV9xdWV1ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmNhbGxfaGlzdG9yeS5wdXNoKHBhZ2VfY2FsbCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJQYWdlIGNhbGw6IFwiICsgcGFnZV9jYWxsLmlkKTtcclxuXHJcbiAgICAgICAgaWYgKHBhZ2VfY2FsbCkge1xyXG4gICAgICAgICAgICAvKiBleGVjdXRlIHJlcGxhY2VtZW50IGFsZ29yaXRobSAqL1xyXG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VtZW50QWxnb3JpdGhtLm9uUGFnZUNhbGw/Lih0aGlzLmdldEN1cnJlbnRTdGF0ZURhdGEocGFnZV9jYWxsKSk7XHJcblxyXG4gICAgICAgICAgICAvKiBjaGVjayBpZiB0aGVyZSBpcyBhIHBhZ2UgZmF1bHQgKi9cclxuICAgICAgICAgICAgbGV0IHBhZ2VfZmF1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZnJhbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGcmFtZSBpcyBudWxsXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lc1tpXS5wYWdlID09IG51bGwgJiYgdGhpcy5mcmFtZXNbaV0ucHJvY2VzcyA9PSBwYWdlX2NhbGwucHJvY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIGluc2VydCBpbnRvIHRoZSBmaXJzdCBmcmVlIGZyYW1lIGFzc2lnbmVkIHRvIHRoZSBwcm9jZXNzICovXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmFtZXNbaV0ucGFnZSA9IHBhZ2VfY2FsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogaW5jcmVtZW50IHBhZ2UgZmF1bHRzICovXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlX2ZhdWx0cysrO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VfY2FsbC5wcm9jZXNzLnBhZ2VfZmF1bHRzKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VfZmF1bHQgPSBmYWxzZTsgLy8gcGFnZSBmYXVsdCBhbHJlYWR5IGhhbmRsZWRcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0ucGFnZSAhPSBudWxsICYmIHRoaXMuZnJhbWVzW2ldLnBhZ2UhLmlkID09IHBhZ2VfY2FsbC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIHBhZ2UgaXMgYWxyZWFkeSBpbiBtZW1vcnkgKi9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VtZW50QWxnb3JpdGhtLm9uUGFnZUFscmVhZHlJbk1lbW9yeT8uKHRoaXMuZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGwpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZV9mYXVsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBoYW5kbGUgcGFnZSBmYXVsdCAqL1xyXG4gICAgICAgICAgICBpZiAocGFnZV9mYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYWdlIGZhdWx0OiBcIiArIHBhZ2VfY2FsbC5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogZW5zdXJlIHRoYXQgdGhlcmUgYXJlIG5vIGZyZWUgZnJhbWVzIGFzc2lnbmVkIHRvIHRoZSBwcm9jZXNzICovXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXMuZmluZChmcmFtZSA9PiBmcmFtZS5wcm9jZXNzID09IHBhZ2VfY2FsbCEucHJvY2VzcyAmJiBmcmFtZS5wYWdlID09IG51bGwpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbml0aWFsIHBhZ2UgZmlsbCBub3QgaGFuZGxlZCBwcm9wZXJseVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBpbmNyZW1lbnQgcGFnZSBmYXVsdHMgKi9cclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWxfcGFnZV9mYXVsdHMrKztcclxuICAgICAgICAgICAgICAgIHBhZ2VfY2FsbC5wcm9jZXNzLnBhZ2VfZmF1bHRzKys7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiByZXBsYWNlIGEgcGFnZSAqL1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWRfb2ZfZnJhbWVfdG9fcmVwbGFjZSA9IHRoaXMucmVwbGFjZW1lbnRBbGdvcml0aG0uaGFuZGxlUGFnZUZhdWx0KHRoaXMuZ2V0Q3VycmVudFN0YXRlRGF0YShwYWdlX2NhbGwpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaWRfb2ZfZnJhbWVfdG9fcmVwbGFjZSAhPSAtMSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lc1t0aGlzLmdldEZyYW1lSW5kZXhCeUlkKGlkX29mX2ZyYW1lX3RvX3JlcGxhY2UpXS5wYWdlID0gcGFnZV9jYWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBlbnN1cmUgdGhhdCB0aGUgcGFnZSBpcyBub3cgaW4gbWVtb3J5ICovXHJcbiAgICAgICAgICAgIGxldCBwYWdlX2luX21lbW9yeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZyYW1lIG9mIHRoaXMuZnJhbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnJhbWUucGFnZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgoPFBhZ2U+ZnJhbWUucGFnZSkuaWQgPT0gcGFnZV9jYWxsLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogcGFnZSBpcyBpbiBtZW1vcnkgKi9cclxuICAgICAgICAgICAgICAgICAgICBwYWdlX2luX21lbW9yeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFwYWdlX2luX21lbW9yeSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFnZSBmYXVsdCBub3QgaGFuZGxlZCBwcm9wZXJseSAtIHBhZ2Ugbm90IGluIG1lbW9yeVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogY2FsbCB0aGUgcGFnZSAqL1xyXG4gICAgICAgICAgICBwYWdlX2NhbGwuY2FsbCh0aGlzLnRpbWUsIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpbWUrKztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50U3RhdGVEYXRhKHBhZ2VfY2FsbDogUGFnZSk6IE1lbW9yeVN0YXRlRGF0YSB7XHJcbiAgICAgICAgLyogZ2V0IHRoZSBzdGF0ZSBvZiB0aGUgbWVtb3J5IGFzc2lnbmVkIHRvIHRoZSBwcm9jZXNzICovXHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc19mcmFtZXMgPSB0aGlzLmZyYW1lcy5maWx0ZXIoZnJhbWUgPT4gZnJhbWUucHJvY2VzcyA9PSBwYWdlX2NhbGwucHJvY2Vzcyk7XHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc19jYWxsX2hpc3RvcnkgPSB0aGlzLmNhbGxfaGlzdG9yeS5maWx0ZXIoY2FsbCA9PiBjYWxsLnByb2Nlc3MgPT0gcGFnZV9jYWxsLnByb2Nlc3MpO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhOiBNZW1vcnlTdGF0ZURhdGEgPSB7XHJcbiAgICAgICAgICAgIHBhZ2VfY2FsbDogcGFnZV9jYWxsLFxyXG4gICAgICAgICAgICBjdXJyZW50X2ZyYW1lczogcHJvY2Vzc19mcmFtZXMsXHJcbiAgICAgICAgICAgIHByZXZpb3VzX3BhZ2VfY2FsbHM6IHByb2Nlc3NfY2FsbF9oaXN0b3J5LFxyXG4gICAgICAgICAgICBwcm9jZXNzZXM6IHRoaXMucHJvY2Vzc2VzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsX3F1ZXVlLmxlbmd0aCA9PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RnJhbWVJbmRleEJ5SWQoaWQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZyYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0uaWQgPT0gaWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZXN1bHRzKCk6IFJlc3VsdHMge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB7XHJcbiAgICAgICAgICAgIHRvdGFsX3BhZ2VfZmF1bHRzOiB0aGlzLnRvdGFsX3BhZ2VfZmF1bHRzLFxyXG4gICAgICAgICAgICB0b3RhbF9wYWdlX2hpdHM6IHRoaXMuY2FsbF9oaXN0b3J5Lmxlbmd0aCAtIHRoaXMudG90YWxfcGFnZV9mYXVsdHMsXHJcbiAgICAgICAgICAgIHRvdGFsX2NhbGxzOiB0aGlzLmNhbGxfaGlzdG9yeS5sZW5ndGhcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIHNpbXVsYXRlKCk6IFJlc3VsdHMge1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG5cclxuICAgICAgICB3aGlsZSAoIXRoaXMuaXNGaW5pc2hlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFRpY2soKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IE1BWF9USU1FID0gMTAwMDA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWUgPiBNQVhfVElNRSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiU2ltdWxhdGlvbiB0aW1lZCBvdXRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzdWx0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlSZXN1bHRzKHJlc3VsdHM/OiBSZXN1bHRzLFxyXG4gICAgICAgIGFsZ1N0cjogc3RyaW5nID0gdGhpcy5hbGxvY2F0aW9uQWxnb3JpdGhtIS5kaXNwbGF5X25hbWUgPz8gdGhpcy5hbGxvY2F0aW9uQWxnb3JpdGhtIS5uYW1lXHJcbiAgICAgICAgKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0c193cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzX3dyYXBwZXJcIikgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcmVzdWx0c193cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0c19lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c1wiKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICByZXN1bHRzX2VsLmlubmVySFRNTCA9IGBcclxuICAgICAgICBBbGdvcml0aG06ICR7YWxnU3RyfVxyXG5cclxuICAgICAgICBUb3RhbCBwYWdlIGZhdWx0czogPGIgc3R5bGU9J2NvbG9yOiByZWQnPiR7cmVzdWx0cyEudG90YWxfcGFnZV9mYXVsdHMudG9GaXhlZCgwKX08L2I+XHJcbiAgICAgICAgVG90YWwgcGFnZSBoaXRzOiA8YiBzdHlsZT0nY29sb3I6IGxpbWUnPiR7cmVzdWx0cyEudG90YWxfcGFnZV9oaXRzLnRvRml4ZWQoMCl9PC9iPlxyXG4gICAgICAgIFRvdGFsIHBhZ2UgY2FsbHM6IDxiPiR7cmVzdWx0cyEudG90YWxfY2FsbHMudG9GaXhlZCgwKX08L2I+XHJcbiAgICAgICAgYC5yZXBsYWNlKFJlZ0V4cChcIlxcblwiLCBcImdcIiksIFwiPGJyIC8+XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBhcmVBbGxBbmREaXNwbGF5UmVzdWx0cyhhbGdvcml0aG1zOiBBcnJheTxBbGxvY2F0aW9uQWxnb3JpdGhtPik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdHNfd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c193cmFwcGVyXCIpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdHNfd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHNfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNcIikgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcmVzdWx0c19lbC5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9jZXNzX2RhdGE6IEFycmF5PEFycmF5PG51bWJlcj4+ID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxnb3JpdGhtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNldEFsZ29yaXRobShhbGdvcml0aG1zW2ldKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0czogUmVzdWx0cyA9IHRoaXMuc2ltdWxhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdHNfZWwuaW5uZXJIVE1MICs9IGBcclxuICAgICAgICAgICAgQWxnb3JpdGhtOiAke2FsZ29yaXRobXNbaV0uZGlzcGxheV9uYW1lID8/IGFsZ29yaXRobXNbaV0ubmFtZX1cclxuICAgICAgICAgICAgVG90YWwgcGFnZSBmYXVsdHM6IDxiIHN0eWxlPSdjb2xvcjogcmVkJz4ke3Jlc3VsdHMudG90YWxfcGFnZV9mYXVsdHMudG9GaXhlZCgwKX08L2I+XHJcbiAgICAgICAgICAgIFRvdGFsIHBhZ2UgaGl0czogPGIgc3R5bGU9J2NvbG9yOiBsaW1lJz4ke3Jlc3VsdHMudG90YWxfcGFnZV9oaXRzLnRvRml4ZWQoMCl9PC9iPlxyXG4gICAgICAgICAgICBUb3RhbCBwYWdlIGNhbGxzOiA8Yj4ke3Jlc3VsdHMudG90YWxfY2FsbHMudG9GaXhlZCgwKX08L2I+XHJcbiAgICAgICAgICAgIGAucmVwbGFjZShSZWdFeHAoXCJcXG5cIiwgXCJnXCIpLCBcIjxiciAvPlwiKTtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdHNfZWwuaW5uZXJIVE1MICs9IFwiPGJyIC8+XCI7XHJcblxyXG4gICAgICAgICAgICAvKiBjb3B5IGluZGl2aWR1YWwgcHJvY2VzcyBwYWdlIGZhdWx0cyB0byBwcm9jZXNzX2RhdGEgKi9cclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnByb2Nlc3Nlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NfZGF0YVtpXSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NfZGF0YVtpXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIHByb2Nlc3NfZGF0YVtpXS5wdXNoKHRoaXMucHJvY2Vzc2VzW2pdLnBhZ2VfZmF1bHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogY29tcGFyZSByZXN1bHRzIGZvciBlYWNoIHByb2Nlc3MgaW5kaXZpZHVhbGx5IChhcyBhIHRhYmxlKSAqL1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qIFxyXG4gICAgICAgICAqIHRvcCByb3cgaXMgdGhlIGhlYWRlciwgZm9yIHRoZSBhbGdvcml0aG0gbmFtZXMgKGZpcnN0IGNlbGwgbGVmdCBlbXB0eSAtIGNvcm5lcilcclxuICAgICAgICAgKiBmaXJzdCBjb2x1bXMgaXMgdGhlIHByb2Nlc3MgaWRzIChmaXJzdCBjZWxsIGxlZnQgZW1wdHkgLSBjb3JuZXIpXHJcbiAgICAgICAgICogZWFjaCBjZWxsIGlzIHRoZSBudW1iZXIgb2YgcGFnZSBmYXVsdHMgZm9yIHRoZSBwcm9jZXNzIHdpdGggdGhlIGFsZ29yaXRobVxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBjb25zdCB0YWJsZV93cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0YWJsZV93cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICB0YWJsZV93cmFwcGVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xyXG4gICAgICAgIHRhYmxlX3dyYXBwZXIuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO1xyXG4gICAgICAgIHRhYmxlLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHdoaXRlXCI7XHJcbiAgICAgICAgdGFibGUuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSBcImNvbGxhcHNlXCI7XHJcblxyXG4gICAgICAgIC8vIGFkZCB0aGUgdGFibGUgaW50byB0aGUgd3JhcHBlclxyXG4gICAgICAgIHRhYmxlX3dyYXBwZXIuYXBwZW5kQ2hpbGQodGFibGUpO1xyXG5cclxuICAgICAgICBjb25zdCBoZWFkZXJfcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBoZWFkZXJfY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICBoZWFkZXJfY2VsbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB3aGl0ZVwiO1xyXG4gICAgICAgIGhlYWRlcl9jZWxsLnN0eWxlLnBhZGRpbmcgPSBcIjVweFwiO1xyXG4gICAgICAgIGhlYWRlcl9jZWxsLnN0eWxlLmNvbG9yID0gXCJ5ZWxsb3dcIjtcclxuICAgICAgICBoZWFkZXJfY2VsbC5pbm5lckhUTUwgPSBcIlByb2Nlc3NcIjtcclxuICAgICAgICBoZWFkZXJfcm93LmFwcGVuZENoaWxkKGhlYWRlcl9jZWxsKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGdvcml0aG1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcl9jZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgICAgICBoZWFkZXJfY2VsbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB3aGl0ZVwiO1xyXG4gICAgICAgICAgICBoZWFkZXJfY2VsbC5zdHlsZS5wYWRkaW5nID0gXCI1cHhcIjtcclxuICAgICAgICAgICAgaGVhZGVyX2NlbGwuc3R5bGUuY29sb3IgPSBcInllbGxvd1wiO1xyXG5cclxuICAgICAgICAgICAgaGVhZGVyX2NlbGwuaW5uZXJIVE1MID0gYWxnb3JpdGhtc1tpXS5kaXNwbGF5X25hbWUgPz8gYWxnb3JpdGhtc1tpXS5uYW1lO1xyXG4gICAgICAgICAgICBoZWFkZXJfcm93LmFwcGVuZENoaWxkKGhlYWRlcl9jZWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGhlYWRlcl9yb3cpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgICAgIGNlbGwuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgd2hpdGVcIjtcclxuICAgICAgICAgICAgY2VsbC5zdHlsZS5wYWRkaW5nID0gXCI1cHhcIjtcclxuICAgICAgICAgICAgY2VsbC5zdHlsZS5jb2xvciA9IFwieWVsbG93XCI7XHJcbiAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gdGhpcy5wcm9jZXNzZXNbaV0uaWQudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhbGdvcml0aG1zLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB3aGl0ZVwiO1xyXG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5wYWRkaW5nID0gXCI1cHhcIjtcclxuICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gcHJvY2Vzc19kYXRhW2pdW2ldLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY2VsbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhZGQgdGhlIHRhYmxlIHdyYXBwZXIgdG8gdGhlIHJlc3VsdHMgZWxlbWVudFxyXG4gICAgICAgIHJlc3VsdHNfZWwuYXBwZW5kQ2hpbGQodGFibGVfd3JhcHBlcik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgSUFuaW1hdGlvbkdVSSBmcm9tIFwiLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvSUFuaW1hdGlvbkdVSVwiO1xyXG5pbXBvcnQgTWVudSBmcm9tIFwiLi9NZW51XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRpb25HVUkgaW1wbGVtZW50cyBJQW5pbWF0aW9uR1VJIHtcclxuICAgIG1lbnU6IE1lbnVcclxuXHJcbiAgICB2aXNpYmxlOiBib29sZWFuID0gZmFsc2VcclxuICAgIHBsYXlpbmc6IGJvb2xlYW4gPSBmYWxzZVxyXG4gICAgc3BlZWQ6IG51bWJlciA9IDFcclxuXHJcbiAgICBHVUk6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIE1FTlU6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBwbGF5X3BhdXNlX2J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG4gICAgc3RlcF9idXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIHN0b3BfYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBzcGVlZF9zbGlkZXI6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGluZm9fYWxnb3JpdGhtOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXHJcbiAgICBpbmZvX3RpbWU6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9faXNfZG9uZTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGluZm9faW5fcXVldWU6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9fZmluaXNoZWQ6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9fdG90YWxfcGFnZV9mYXVsdHM6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcclxuICAgIGluZm9fdG90YWxfcGFnZV9oaXRzOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgZnJhbWVfcm93czogQXJyYXk8SFRNTFRhYmxlUm93RWxlbWVudD4gPSBbXVxyXG5cclxuICAgIHNlZV9jb2RlX2J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIC8qIHNldEludGVydmFsICovXHJcbiAgICBzdG9yZWRTZXRJbnRlcnZhbDogTm9kZUpTLlRpbWVyIHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihtZW51OiBNZW51KSB7XHJcbiAgICAgICAgdGhpcy5tZW51ID0gbWVudTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuR1VJID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fZ3VpXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuTUVOVSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dGluZ3NcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9wbGF5X3BhdXNlXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuc3RlcF9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9zdGVwXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuc3RvcF9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9zdG9wXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuc3BlZWRfc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fc3BlZWRfc2xpZGVyXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19hbGdvcml0aG0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9pbmZvX2FsZ29yaXRobV92YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICB0aGlzLmluZm9fdGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2luZm9fdGltZV92YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICB0aGlzLmluZm9faXNfZG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2lzX2RvbmVcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19pbl9xdWV1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FsbHNfaW5fcXVldWVfdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5pbmZvX2ZpbmlzaGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYWxsc19maW5pc2hlZF92YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuICAgICAgICB0aGlzLmluZm9fdG90YWxfcGFnZV9mYXVsdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsX3BhZ2VfZmF1bHRzX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW5mb190b3RhbF9wYWdlX2hpdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsX3BhZ2VfaGl0c192YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5zZWVfY29kZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvZGVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBoaWRlIGVsZW1lbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEJpbmQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXlpbmcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGVwX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0ZXAoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdG9wX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNwZWVkX3NsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNwZWVkID0gcGFyc2VJbnQodGhpcy5zcGVlZF9zbGlkZXIhLnZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoU3BlZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWVfY29kZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWVudS5tZW1vcnkuYWxsb2NhdGlvbkFsZ29yaXRobSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtTmFtZSA9IHRoaXMubWVudS5tZW1vcnkuYWxsb2NhdGlvbkFsZ29yaXRobS5uYW1lO1xyXG4gICAgICAgICAgICB3aW5kb3cub3BlbihgaHR0cHM6Ly9naXRodWIuY29tL2JydW4wbmUvc2NoZWR1bGluZy1zaW0vYmxvYi9tYWluL2ZyYW1lX2FsbG9jYXRpb25fc3JjL2NsYXNzZXMvYWxnb3JpdGhtcy8ke2FsZ29yaXRobU5hbWV9LnRzYCwgXCJfYmxhbmtcIikhLmZvY3VzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldEludGVydmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoU3BlZWQoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcHJlcGFyZSBIVE1MIHRhYmxlIG9mIHN0YXRlc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5pdFN0YXRlVGFibGUoKTtcclxuICAgIH1cclxuICAgIHRvZ2dsZVBsYXlpbmcocGxheWluZz86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAocGxheWluZyA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLnBsYXlpbmcgPSAhdGhpcy5wbGF5aW5nO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5wbGF5aW5nID0gcGxheWluZztcclxuXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoU3BlZWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbiEuaW5uZXJIVE1MID0gdGhpcy5wbGF5aW5nID8gXCJQYXVzZVwiIDogXCJQbGF5XCI7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlVmlzaWJsZSh2aXNpYmxlPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICh2aXNpYmxlID09IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9ICF0aGlzLnZpc2libGU7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuR1VJIS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICB0aGlzLk1FTlUhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVudS5kaXNwbGF5LnJlc2l6ZUNhbGxiYWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Q3VycmVudFN0YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kcmF3Q3VycmVudFN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLkdVSSEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICB0aGlzLk1FTlUhLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3JlZFNldEludGVydmFsICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc3RvcmVkU2V0SW50ZXJ2YWwpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW51LmRpc3BsYXkucmVzaXplQ2FsbGJhY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnUucmVmcmVzaENhbGxzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tZW51LnJlZnJlc2hDYWxscygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5wbGF5X3BhdXNlX2J1dHRvbiA9PSBudWxsIHx8IHRoaXMuaW5mb19pc19kb25lID09IG51bGwgfHwgdGhpcy5zdGVwX2J1dHRvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIGluaXQoKSBmaXJzdCFcIik7XHJcblxyXG4gICAgICAgIHRoaXMubWVudS5tZW1vcnkuaW5pdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uLmlubmVySFRNTCA9IFwiUGxheVwiO1xyXG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmluZm9faXNfZG9uZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN0ZXBfYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFN0YXRlVGFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydEFuaW1hdGlvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdDdXJyZW50U3RhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcmVmcmVzaCBpbmZvXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoSW5mbygpO1xyXG5cclxuICAgICAgICB0aGlzLmRyYXdDYWxscygpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRTdGF0ZVRhYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIC8qIGdyYWIgZWxlbWVudHMgKi9cclxuICAgICAgICBjb25zdCB0aW1lX3JvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX3RpbWVcIikgYXMgSFRNTFRhYmxlUm93RWxlbWVudDtcclxuICAgICAgICBjb25zdCBjYWxsc19yb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl90YWJsZV9wYWdlX2NhbGxzXCIpIGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl90YWJsZV9ib2R5XCIpIGFzIEhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O1xyXG5cclxuICAgICAgICAvKiBjbGVhciB0YWJsZSAqL1xyXG4gICAgICAgIHRpbWVfcm93LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgY2FsbHNfcm93LmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgICAgIC8qIHRpbWUgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVfcm93X2hlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgdGltZV9yb3dfaGVhZGVyLmlubmVySFRNTCA9IFwiVGltZVwiO1xyXG4gICAgICAgICAgICB0aW1lX3Jvd19oZWFkZXIuY2xhc3NMaXN0LmFkZChcImhlYWRlclwiKTtcclxuICAgICAgICAgICAgdGltZV9yb3cuYXBwZW5kQ2hpbGQodGltZV9yb3dfaGVhZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGNhbGxzICovXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBjYWxsc19yb3dfaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICBjYWxsc19yb3dfaGVhZGVyLmlubmVySFRNTCA9IFwiUGFnZSBjYWxsc1wiO1xyXG4gICAgICAgICAgICBjYWxsc19yb3dfaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJcIik7XHJcbiAgICAgICAgICAgIGNhbGxzX3Jvdy5hcHBlbmRDaGlsZChjYWxsc19yb3dfaGVhZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGZyYW1lcyAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLyogcmVtb3ZlIG9sZCByb3dzICovXHJcbiAgICAgICAgICAgIHdoaWxlICh0Ym9keS5sYXN0Q2hpbGQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSAodGJvZHkubGFzdENoaWxkIGFzIEhUTUxFbGVtZW50KS5pZDtcclxuICAgICAgICAgICAgICAgIGlmIChpZCA9PSBcImFuaW1hdGlvbl90YWJsZV9wYWdlX2NhbGxzXCIpIC8vIHNraXAgdGhlIHJvdyB3aXRoIHBhZ2UgY2FsbHNcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICB0Ym9keS5yZW1vdmVDaGlsZCh0Ym9keS5sYXN0Q2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBhZGQgYSByb3cgZm9yIGVhY2ggZnJhbWUgKi9cclxuICAgICAgICAgICAgY29uc3QgZnJhbWVfcm93czogQXJyYXk8SFRNTFRhYmxlUm93RWxlbWVudD4gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbnUubWVtb3J5Lm51bWJlcl9vZl9mcmFtZXM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJhbWVfcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lX3Jvd19oZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgICAgICBmcmFtZV9yb3dfaGVhZGVyLmlubmVySFRNTCA9IGBGcmFtZSAke2l9YDtcclxuICAgICAgICAgICAgICAgIGZyYW1lX3Jvdy5hcHBlbmRDaGlsZChmcmFtZV9yb3dfaGVhZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmcmFtZV9yb3dzLnB1c2goZnJhbWVfcm93KTtcclxuICAgICAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKGZyYW1lX3Jvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5mcmFtZV9yb3dzID0gZnJhbWVfcm93cztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0NhbGxzKFNUQVJUX1g/OiBudW1iZXIsIFNUQVJUX1k/OiBudW1iZXIsIFdJRFRIPzogbnVtYmVyLCBIRUlHSFQ/OiBudW1iZXIsIGNhbGxzVG9EcmF3PzogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLyogZ3JhYiBlbGVtZW50cyAqL1xyXG4gICAgICAgIGNvbnN0IHRpbWVfcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfdGltZVwiKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGNhbGxzX3JvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX3BhZ2VfY2FsbHNcIikgYXMgSFRNTFRhYmxlUm93RWxlbWVudDtcclxuXHJcbiAgICAgICAgLyogb25seSBhZGQgb25lIGNvbHVtbiBmb3IgdGhlIG5ldyBzdGF0ZSAqL1xyXG4gICAgICAgIGNvbnN0IG5ld0NhbGwgPSB0aGlzLm1lbnUubWVtb3J5LmNhbGxfaGlzdG9yeS5hdCgtMSk7XHJcbiAgICAgICAgaWYgKHRoaXMubWVudS5tZW1vcnkubGFzdF9lbXB0eV9xdWV1ZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmIChuZXdDYWxsID09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgLyogdGltZSAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZVRpY2tFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICAgICAgdGltZVRpY2tFbC5pbm5lckhUTUwgPSBgJHt0aGlzLm1lbnUubWVtb3J5LnRpbWV9YDtcclxuICAgICAgICAgICAgdGltZV9yb3cuYXBwZW5kQ2hpbGQodGltZVRpY2tFbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBjYWxscyAqL1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgY2FsbHNUaWNrRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICAgICAgICAgIGNhbGxzVGlja0VsLmlubmVySFRNTCA9IGAke25ld0NhbGwuaWR9YDtcclxuICAgICAgICAgICAgY2FsbHNUaWNrRWwuc3R5bGUuY29sb3IgPSBcImN5YW5cIjtcclxuXHJcbiAgICAgICAgICAgIGNhbGxzX3Jvdy5hcHBlbmRDaGlsZChjYWxsc1RpY2tFbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBmcmFtZXMgKi9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW51Lm1lbW9yeS5udW1iZXJfb2ZfZnJhbWVzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lX3JvdyA9IHRoaXMuZnJhbWVfcm93c1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLm1lbnUubWVtb3J5LmZyYW1lc1tpXS5wYWdlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lVGlja0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICAgICAgZnJhbWVUaWNrRWwuaW5uZXJIVE1MID0gYCR7cGFnZSAhPSBudWxsID8gcGFnZS5pZCA6IFwiXCJ9YDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFnZSAhPSBudWxsICYmIHBhZ2UuaWQgPT0gbmV3Q2FsbC5pZCAmJiB0aGlzLm1lbnUubWVtb3J5Lmxhc3RfY2FsbF9jYXVzZWRfZmF1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHBhZ2UgZmF1bHRzIHJlZFxyXG4gICAgICAgICAgICAgICAgICAgIGZyYW1lVGlja0VsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWVudS5tZW1vcnkuZnJhbWVzW2ldLnByb2Nlc3MgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYW1lVGlja0VsLmlubmVySFRNTCArPSBgIDxzcGFuIHN0eWxlPSdjb2xvcjogeWVsbG93Jz4oJHt0aGlzLm1lbnUubWVtb3J5LmZyYW1lc1tpXS5wcm9jZXNzIS5pZH0pPC9zcGFuPmA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnJhbWVfcm93LmFwcGVuZENoaWxkKGZyYW1lVGlja0VsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogc2Nyb2xsIHRvIHRoZSByaWdodCAqL1xyXG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fY2FsbF90YWJsZVwiKSBhcyBIVE1MVGFibGVFbGVtZW50O1xyXG4gICAgICAgIHRhYmxlLnNjcm9sbExlZnQgPSB0YWJsZS5zY3JvbGxXaWR0aDtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoSW5mbygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBtZW1vcnkgPSB0aGlzLm1lbnUubWVtb3J5O1xyXG4gICAgICAgIGlmIChtZW1vcnkuYWxsb2NhdGlvbkFsZ29yaXRobSA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIHN0YXJ0QW5pbWF0aW9uKCkgZmlyc3QhXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmluZm9fYWxnb3JpdGhtIS5pbm5lckhUTUwgPSBtZW1vcnkuYWxsb2NhdGlvbkFsZ29yaXRobS5uYW1lO1xyXG4gICAgICAgIHRoaXMuaW5mb190aW1lIS5pbm5lckhUTUwgPSBtZW1vcnkudGltZS50b1N0cmluZygpO1xyXG5cclxuICAgICAgICBpZiAobWVtb3J5LmlzRmluaXNoZWQoKSlcclxuICAgICAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUhLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmluZm9faXNfZG9uZSEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgICB0aGlzLmluZm9fdG90YWxfcGFnZV9oaXRzIS5pbm5lckhUTUwgPSAobWVtb3J5LmNhbGxfaGlzdG9yeS5sZW5ndGggLSBtZW1vcnkudG90YWxfcGFnZV9mYXVsdHMpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5pbmZvX3RvdGFsX3BhZ2VfZmF1bHRzIS5pbm5lckhUTUwgPSBtZW1vcnkudG90YWxfcGFnZV9mYXVsdHMudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvX2luX3F1ZXVlIS5pbm5lckhUTUwgPSBtZW1vcnkuY2FsbF9xdWV1ZS5sZW5ndGgudG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLmluZm9fZmluaXNoZWQhLmlubmVySFRNTCA9IG1lbW9yeS5jYWxsX2hpc3RvcnkubGVuZ3RoLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVmcmVzaFNwZWVkKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnN0b3JlZFNldEludGVydmFsICE9IG51bGwpXHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zdG9yZWRTZXRJbnRlcnZhbCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcmVkU2V0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmJpbmQodGhpcyksIDEwMDAgLyB0aGlzLnNwZWVkKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGVwKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbnUubWVtb3J5LmlzRmluaXNoZWQoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLm1lbnUubWVtb3J5Lm5leHRUaWNrKCk7XHJcbiAgICAgICAgdGhpcy5kcmF3Q3VycmVudFN0YXRlKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1lbnUubWVtb3J5LmlzRmluaXNoZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXlpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLm1lbnUubWVtb3J5LmRpc3BsYXlSZXN1bHRzKHRoaXMubWVudS5tZW1vcnkuZ2V0UmVzdWx0cygpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJEb25lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFmdGVyRG9uZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pbmZvX2lzX2RvbmUgPT0gbnVsbCB8fCB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uID09IG51bGwgfHwgdGhpcy5zdGVwX2J1dHRvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIGluaXQoKSBmaXJzdCFcIik7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb19pc19kb25lLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3RlcF9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBhZ2UgZnJvbSBcIi4vUGFnZVwiO1xyXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi9Qcm9jZXNzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGcmFtZSB7XHJcbiAgICBpZDogbnVtYmVyXHJcbiAgICBwYWdlOiBQYWdlIHwgbnVsbFxyXG4gICAgcHJvY2VzczogUHJvY2VzcyB8IG51bGxcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb2Nlc3MgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUmVwbGFjZW1lbnRBbGdvcml0aG0gZnJvbSBcIi4vUmVwbGFjZW1lbnRBbGdvcml0aG1cIjtcclxuaW1wb3J0IHsgTWVtb3J5U3RhdGVEYXRhIH0gZnJvbSBcIi4vQWxsb2NhdGluZ01NVVwiO1xyXG5cclxuLyoqXHJcbiAqIExlYXN0IFJlY2VudGx5IFVzZWQgKExSVSlcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExSVSBpbXBsZW1lbnRzIFJlcGxhY2VtZW50QWxnb3JpdGhtIHtcclxuICAgIG5hbWU6IHN0cmluZyA9IFwiTFJVXCJcclxuXHJcbiAgICBoYW5kbGVQYWdlRmF1bHQoZGF0YTogTWVtb3J5U3RhdGVEYXRhKTogbnVtYmVyIHtcclxuICAgICAgICAvKiBmaW5kIHRoZSBwYWdlIHRoYXQgd2FzIHVzZWQgdGhlIGxvbmdlc3QgYWdvICovXHJcbiAgICAgICAgbGV0IGZyYW1lX3RvX3JlcGxhY2VfaW5kZXggPSAtMTtcclxuICAgICAgICBsZXQgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID0gLTE7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jdXJyZW50X2ZyYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IGRhdGEuY3VycmVudF9mcmFtZXNbaV07XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWUucHJvY2VzcyAhPSBkYXRhLnBhZ2VfY2FsbC5wcm9jZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRnJhbWUgaXMgYXNzaWduZWQgdG8gYSBkaWZmZXJlbnQgcHJvY2VzcyAtIHRoaXMgc2hvdWxkIGJlIGVuc3VyZWQgbm90IHRvIGhhcHBlbiBieSB0aGUgY2FsbGVyXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWUucGFnZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGcmFtZSBpcyBlbXB0eSAtIHRoaXMgc2hvdWxkIGJlIGVuc3VyZWQgbm90IHRvIGhhcHBlbiBieSB0aGUgY2FsbGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBwYWdlX2luZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBkYXRhLnByZXZpb3VzX3BhZ2VfY2FsbHMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzX3BhZ2VfY2FsbCA9IGRhdGEucHJldmlvdXNfcGFnZV9jYWxsc1tqXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNfcGFnZV9jYWxsLmlkID09IGZyYW1lLnBhZ2UuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlX2luZGV4ID0gajtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VfaW5kZXggPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIC8qIHBhZ2Ugd2FzIG5ldmVyIHVzZWQgYmVmb3JlICovXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VfaW5kZXggPCBsZWFzdF9yZWNlbnRseV91c2VkX3BhZ2VfaW5kZXggfHwgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBwYWdlIHdhcyB1c2VkIGxvbmdlciBhZ28gKi9cclxuICAgICAgICAgICAgICAgIGZyYW1lX3RvX3JlcGxhY2VfaW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID0gcGFnZV9pbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZyYW1lX3RvX3JlcGxhY2VfaW5kZXggPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gZnJhbWUgdG8gcmVwbGFjZSBmb3VuZCBieSBMUlVcIik7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhLmN1cnJlbnRfZnJhbWVzW2ZyYW1lX3RvX3JlcGxhY2VfaW5kZXhdLmlkO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBJTWVudSBmcm9tIFwiLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvSU1lbnVcIjtcclxuaW1wb3J0IERpc3BsYXkgZnJvbSBcIi4uLy4uL3NoYXJlZC9jbGFzc2VzL0Rpc3BsYXlcIjtcclxuaW1wb3J0IEFsbG9jYXRpbmdNTVUgZnJvbSBcIi4vQWxsb2NhdGluZ01NVVwiO1xyXG5pbXBvcnQgUHJvY2VzcyBmcm9tIFwiLi9Qcm9jZXNzXCI7XHJcbmltcG9ydCBQYWdlIGZyb20gXCIuL1BhZ2VcIjtcclxuaW1wb3J0IEVxdWFsIGZyb20gXCIuL2FsZ29yaXRobXMvRXF1YWxcIjtcclxuaW1wb3J0IEFuaW1hdGlvbkdVSSBmcm9tIFwiLi9BbmltYXRpb25HVUlcIjtcclxuaW1wb3J0IFByb3BvcnRpb25hbCBmcm9tIFwiLi9hbGdvcml0aG1zL1Byb3BvcnRpb25hbFwiO1xyXG5pbXBvcnQgUGFnZUZhdWx0Q29udHJvbCBmcm9tIFwiLi9hbGdvcml0aG1zL1BhZ2VGYXVsdENvbnRyb2xcIjtcclxuaW1wb3J0IExvY2FsaXR5TW9kZWwgZnJvbSBcIi4vYWxnb3JpdGhtcy9Mb2NhbGl0eU1vZGVsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZW51IGltcGxlbWVudHMgSU1lbnUge1xyXG4gICAgZGlzcGxheTogRGlzcGxheVxyXG4gICAgbWVtb3J5OiBBbGxvY2F0aW5nTU1VXHJcbiAgICBhbmltYXRpb25HVUk6IEFuaW1hdGlvbkdVSVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZGlzcGxheSA9IG5ldyBEaXNwbGF5KCk7XHJcbiAgICAgICAgdGhpcy5tZW1vcnkgPSBuZXcgQWxsb2NhdGluZ01NVSgpO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkdVSSA9IG5ldyBBbmltYXRpb25HVUkodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBydW5fYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJydW5fYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHJ1bl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5ydW4oKSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBydW5fd2l0aF9hbmltYXRpb25fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMucnVuKHRydWUpIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBhZGRfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGFkZF9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5hZGRQcm9jZXNzZXMoKSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xlYXJfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbGVhcl9idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgY2xlYXJfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuY2xlYXJQcm9jZXNzZXMoKSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuYWRkQ2FsbHMoKSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xlYXJfY2FsbF9xdWV1ZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsZWFyX2NhbGxfcXVldWVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGNsZWFyX2NhbGxfcXVldWVfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuY2xlYXJDYWxscygpIH0pO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIGluaXQgXHJcbiAgICAgICAgICogc2V0IGNhbGxiYWNrIGZvciByZXNpemVcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBpbml0aWFsX2ZyYW1lX2NvdW50ID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19mcmFtZV9jb3VudFwiKSkudmFsdWUpO1xyXG4gICAgICAgIHRoaXMubWVtb3J5LmluaXQoaW5pdGlhbF9mcmFtZV9jb3VudCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5LmluaXQoXCJtYWluX2NhbnZhc1wiKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkdVSS5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5LnNldFJlc2l6ZUNhbGxiYWNrKCgpID0+IHsgdGhpcy5yZWZyZXNoQ2FsbHMoKSB9KTtcclxuXHJcbiAgICAgICAgLyoqIFxyXG4gICAgICAgICAqIGJhc2ljIHNldHRpbmdzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgbnVtYmVyX29mX2ZyYW1lcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19mcmFtZV9jb3VudFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIG51bWJlcl9vZl9mcmFtZXMuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZTogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3X3ZhbCA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5lLnRhcmdldCkudmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzTmFOKG5ld192YWwpIHx8IG5ld192YWwgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIkludmFsaWQgbnVtYmVyIG9mIGZyYW1lc1wiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuaW5pdChuZXdfdmFsKTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogYWxnb3JpdGhtIHNlbGVjdFxyXG4gICAgICAgICAqIC0+IGRpc2FibGUgcnVubmluZyB3aXRoIGFuaW1hdGlvbiBpZiBjb21wYXJlX2FsbFxyXG4gICAgICAgICAqIC0+IHNob3cgc3BlY2lhbCBvcHRpb25zIGZvciBwYWdlIGZhdWx0IGNvbnRyb2xcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBhbGdvcml0aG1fc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhX3R5cGVcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgYWxnb3JpdGhtX3NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlOiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoKDxIVE1MU2VsZWN0RWxlbWVudD5lLnRhcmdldCkudmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gXCJjb21wYXJlX2FsbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxCdXR0b25FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvblwiKSkuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgKDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJ1bl93aXRoX2FuaW1hdGlvbl9idXR0b25cIikpLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoKDxIVE1MU2VsZWN0RWxlbWVudD5lLnRhcmdldCkudmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gXCJmYXVsdF9jb250cm9sXCIgfHxcclxuICAgICAgICAgICAgICAgICg8SFRNTFNlbGVjdEVsZW1lbnQ+ZS50YXJnZXQpLnZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IFwiY29tcGFyZV9hbGxcIikge1xyXG4gICAgICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWluX3BhZ2VfZmF1bHRzX2FsbFwiKSkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgICg8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21heF9wYWdlX2ZhdWx0c19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic190aW1lX3dpbmRvd19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19taW5fcGFnZV9mYXVsdHNfYWxsXCIpKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfcGFnZV9mYXVsdHNfYWxsXCIpKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic190aW1lX3dpbmRvd19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCg8SFRNTFNlbGVjdEVsZW1lbnQ+ZS50YXJnZXQpLnZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IFwibG9jYWxpdHlfbW9kZWxcIiB8fFxyXG4gICAgICAgICAgICAgICAgKDxIVE1MU2VsZWN0RWxlbWVudD5lLnRhcmdldCkudmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gXCJjb21wYXJlX2FsbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic190aW1lX3dpbmRvd19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic190aW1lX3dpbmRvd19hbGxcIikpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBcclxuICAgICAgICAgKiByZXN1bHRzIGJ1dHRvbnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCByZXN1bHRzX2Nsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzX2Nsb3NlXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHJlc3VsdHNfY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNfd3JhcHBlclwiKSkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIHJlZnJlc2ggY2FsbHMgXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRQcm9jZXNzZXMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc19jb3VudCA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNfY291bnRcIikpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgY29uc3QgcGFnZV9yYW5nZV9taW4gPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21pbl9yYW5nZVwiKSkudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IHBhZ2VfcmFuZ2VfbWF4ID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfcmFuZ2VcIikpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FsbF9jb3VudF9taW4gPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX21pbl9jYWxsc1wiKSkudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IGNhbGxfY291bnRfbWF4ID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19tYXhfY2FsbHNcIikpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRfcmFuZ2VfbWluID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9jZXNzX2NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcGFnZV9yYW5nZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChwYWdlX3JhbmdlX21heCAtIHBhZ2VfcmFuZ2VfbWluICsgMSkpICsgcGFnZV9yYW5nZV9taW47XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5hZGRQcm9jZXNzKG5ldyBQcm9jZXNzKFxyXG4gICAgICAgICAgICAgICAgW2N1cnJlbnRfcmFuZ2VfbWluLCBjdXJyZW50X3JhbmdlX21pbiArIHBhZ2VfcmFuZ2VdLFxyXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGNhbGxfY291bnRfbWF4IC0gY2FsbF9jb3VudF9taW4gKyAxKSkgKyBjYWxsX2NvdW50X21pbixcclxuICAgICAgICAgICAgICAgIGlcclxuICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIHRoaXMubWVtb3J5LnByb2Nlc3Nlc1t0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoIC0gMV0uZ2VuZXJhdGVDYWxscygpO1xyXG5cclxuICAgICAgICAgICAgY3VycmVudF9yYW5nZV9taW4gKz0gcGFnZV9yYW5nZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJQcm9jZXNzZXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tZW1vcnkuY2xlYXJQcm9jZXNzZXMoKTtcclxuICAgICAgICB0aGlzLm1lbW9yeS5jbGVhclBhZ2VDYWxsUG9vbCgpO1xyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENhbGxzKCk6IHZvaWQge1xyXG4gICAgICAgIC8qIGNvbWJpbmUgYWxsIHByb2Nlc3MgY2FsbHMgaW50byBvbmUgYXJyYXkgKi9cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubWVtb3J5LnByb2Nlc3Nlc1tpXS5nZXRDYWxscygpLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9yeS5jYWxsX3Bvb2wucHVzaChuZXcgUGFnZSh0aGlzLm1lbW9yeS5wcm9jZXNzZXNbaV0uZ2V0Q2FsbHMoKVtqXSwgdGhpcy5tZW1vcnkucHJvY2Vzc2VzW2ldKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLyogc2h1ZmZsZSBhcnJheSAqL1xyXG4gICAgICAgIHRoaXMubWVtb3J5LmNhbGxfcG9vbC5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpO1xyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQ2FsbHMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tZW1vcnkuY2FsbF9wb29sID0gW107XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoQ2FsbHMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudF9jb3VudF9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicF9jdXJyZW50X2NvdW50XCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gICAgICAgIGN1cnJlbnRfY291bnRfZWwuaW5uZXJIVE1MID0gYCgke3RoaXMubWVtb3J5LnByb2Nlc3Nlcy5sZW5ndGgudG9TdHJpbmcoKX0pYDtcclxuXHJcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aCA+IDAgJiYgdGhpcy5tZW1vcnkuY2FsbF9wb29sLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGdlbmVyYXRlX2NhbGxfcXVldWVfYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24uYXR0cmlidXRlcy5zZXROYW1lZEl0ZW0oZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogZGlzcGxheSBpbmRpdmlkdWFsIHByb2Nlc3MgY2FsbHMgKi9cclxuICAgICAgICBjb25zdCBhbGxfcHJvY2Vzc2VzX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGxfcHJvY2Vzc2VzXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIGFsbF9wcm9jZXNzZXNfZWwuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbW9yeS5wcm9jZXNzZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvY2VzcyA9IHRoaXMubWVtb3J5LnByb2Nlc3Nlc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NfZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgcHJvY2Vzc19lbC5jbGFzc0xpc3QuYWRkKFwicHJvY2Vzc1wiKTtcclxuXHJcbiAgICAgICAgICAgIHByb2Nlc3NfZWwuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwicHJvY2Vzc19uYW1lXCI+Q2FsbHMgb2YgcHJvY2VzcyAke2l9OiA8L3NwYW4+IDxzcGFuIGNsYXNzPVwicHJvY2Vzc19jYWxsc1wiPiR7cHJvY2Vzcy5nZXRDYWxscygpLmpvaW4oXCIsIFwiKX08L3NwYW4+PGJyIC8+YDtcclxuXHJcbiAgICAgICAgICAgIGFsbF9wcm9jZXNzZXNfZWwuYXBwZW5kQ2hpbGQocHJvY2Vzc19lbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGFsbF9wcm9jZXNzZXNfZWwuaW5uZXJIVE1MID0gXCI8c3BhbiBzdHlsZT0nY29sb3I6IHllbGxvdyc+Tm8gcHJvY2Vzc2VzIGFkZGVkIHlldC48L3NwYW4+XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBkaXNwbGF5IGNhbGwgcXVldWUgKi9cclxuICAgICAgICBjb25zdCBjYWxsX2NvdW50X2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjdXJyZW50X2NhbGxfY291bnRcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbiAgICAgICAgY2FsbF9jb3VudF9lbC5pbm5lckhUTUwgPSBgKCR7dGhpcy5tZW1vcnkuY2FsbF9wb29sLmxlbmd0aC50b1N0cmluZygpfSlgO1xyXG5cclxuICAgICAgICBjb25zdCBjYWxsX3F1ZXVlX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluX2NhbGxfcXVldWVcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgY2FsbF9xdWV1ZV9lbC5pbm5lckhUTUwgPSB0aGlzLm1lbW9yeS5jYWxsX3Bvb2wubWFwKChwYWdlKSA9PiB7IHJldHVybiBwYWdlLmlkIH0pLmpvaW4oXCIsIFwiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWVtb3J5LmNhbGxfcG9vbC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBjYWxsX3F1ZXVlX2VsLmlubmVySFRNTCA9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOiB5ZWxsb3cnPk5vIGNhbGxzIGluIHF1ZXVlLjwvc3Bhbj5cIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcnVuKGFuaW1hdGlvbj86IGJvb2xlYW4gfCB1bmRlZmluZWQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tZW1vcnkucHJvY2Vzc2VzLmxlbmd0aCA+IHRoaXMubWVtb3J5LmZyYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgYWxlcnQoXCJOb3QgZW5vdWdoIGZyYW1lcyBmb3IgYWxsIHByb2Nlc3Nlc1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWxnU3RyID0gKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYV90eXBlXCIpKS52YWx1ZTtcclxuICAgICAgICBsZXQgY29tcGFyZV9hbGw6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgbWluX2ZyZXEgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWluX3BhZ2VfZmF1bHRzXCIpKS52YWx1ZSk7XHJcbiAgICAgICAgY29uc3QgbWF4X2ZyZXEgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfbWF4X3BhZ2VfZmF1bHRzXCIpKS52YWx1ZSk7XHJcbiAgICAgICAgY29uc3QgdGltZV93aW5kb3cgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNfdGltZV93aW5kb3dcIikpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChhbGdTdHIudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZXF1YWxcIjpcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9yeS5zZXRBbGdvcml0aG0obmV3IEVxdWFsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwicHJvcG9ydGlvbmFsXCI6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBQcm9wb3J0aW9uYWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJmYXVsdF9jb250cm9sXCI6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1pbl9mcmVxID49IG1heF9mcmVxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiTWluaW11bSBmcmVxdWVuY3kgaGFzIHRvIGJlIHNtYWxsZXIgdGhhbiB0aGUgbWF4aW11bVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBQYWdlRmF1bHRDb250cm9sKG1pbl9mcmVxLCBtYXhfZnJlcSwgdGltZV93aW5kb3cpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcImxvY2FsaXR5X21vZGVsXCI6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBMb2NhbGl0eU1vZGVsKHRpbWVfd2luZG93KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJjb21wYXJlX2FsbFwiOlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmVfYWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIkludmFsaWQgYWxnb3JpdGhtXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbXBhcmVfYWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChtaW5fZnJlcSA+PSBtYXhfZnJlcSkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJNaW5pbXVtIGZyZXF1ZW5jeSBoYXMgdG8gYmUgc21hbGxlciB0aGFuIHRoZSBtYXhpbXVtXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbGdvcml0aG1zID0gW1xyXG4gICAgICAgICAgICAgICAgbmV3IEVxdWFsKCksXHJcbiAgICAgICAgICAgICAgICBuZXcgUHJvcG9ydGlvbmFsKCksXHJcbiAgICAgICAgICAgICAgICBuZXcgUGFnZUZhdWx0Q29udHJvbChtaW5fZnJlcSwgbWF4X2ZyZXEsIHRpbWVfd2luZG93KSxcclxuICAgICAgICAgICAgICAgIG5ldyBMb2NhbGl0eU1vZGVsKHRpbWVfd2luZG93KVxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuY29tcGFyZUFsbEFuZERpc3BsYXlSZXN1bHRzKGFsZ29yaXRobXMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uR1VJLnN0YXJ0QW5pbWF0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5tZW1vcnkuc2ltdWxhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuZGlzcGxheVJlc3VsdHMocmVzdWx0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBQcm9jZXNzIGZyb20gXCIuL1Byb2Nlc3NcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZ2Uge1xyXG4gICAgaWQ6IG51bWJlclxyXG4gICAgbGFzdF9jYWxsX3RpbWU6IG51bWJlciA9IDBcclxuICAgIHByb2Nlc3M6IFByb2Nlc3NcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwcm9jZXNzOiBQcm9jZXNzKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMucHJvY2VzcyA9IHByb2Nlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsbCh0aW1lOiBudW1iZXIsIGNhdXNlZF9mYXVsdDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubGFzdF9jYWxsX3RpbWUgPSB0aW1lO1xyXG4gICAgICAgIHRoaXMucHJvY2Vzcy5kb25lX2NhbGxzKys7XHJcblxyXG4gICAgICAgIHRoaXMucHJvY2Vzcy5hZGRUb0ZhdWx0TG9nKGNhdXNlZF9mYXVsdCk7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzLmFkZFRvQ2FsbExvZyh0aGlzKTtcclxuICAgIH1cclxufSIsImltcG9ydCBGcmFtZSBmcm9tIFwiLi9GcmFtZVwiXHJcbmltcG9ydCBQYWdlIGZyb20gXCIuL1BhZ2VcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvY2VzcyB7XHJcbiAgICByYW5nZV9vZl9wYWdlczogW251bWJlciwgbnVtYmVyXVxyXG4gICAgbnVtYmVyX29mX2NhbGxzOiBudW1iZXJcclxuICAgIGlkOiBudW1iZXJcclxuXHJcbiAgICBwYWdlX2ZhdWx0czogbnVtYmVyID0gMFxyXG4gICAgZG9uZV9jYWxsczogbnVtYmVyID0gMFxyXG4gICAgY2FsbF9sb2c6IEFycmF5PFBhZ2U+ID0gW11cclxuICAgIGZhdWx0X2xvZzogQXJyYXk8Ym9vbGVhbj4gPSBbXVxyXG5cclxuICAgIHJ1bm5pbmc6IGJvb2xlYW4gPSB0cnVlXHJcbiAgICBhc3NpZ25lZEZyYW1lczogbnVtYmVyID0gMFxyXG5cclxuICAgIHByaXZhdGUgY2FsbHM6IEFycmF5PG51bWJlcj4gPSBbXVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHJhbmdlX29mX3BhZ2VzOiBbbnVtYmVyLCBudW1iZXJdLCBudW1iZXJfb2ZfY2FsbHM6IG51bWJlciwgaWQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmFuZ2Vfb2ZfcGFnZXMgPSByYW5nZV9vZl9wYWdlcztcclxuICAgICAgICB0aGlzLm51bWJlcl9vZl9jYWxscyA9IG51bWJlcl9vZl9jYWxscztcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlX2ZhdWx0cyA9IDA7XHJcbiAgICAgICAgdGhpcy5kb25lX2NhbGxzID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFzc2lnbmVkRnJhbWVzID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5mYXVsdF9sb2cgPSBbXTtcclxuICAgICAgICB0aGlzLmNhbGxfbG9nID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYWxscygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhbGxzID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1iZXJfb2ZfY2FsbHM7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGxzLnB1c2goTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHRoaXMucmFuZ2Vfb2ZfcGFnZXNbMV0gLSB0aGlzLnJhbmdlX29mX3BhZ2VzWzBdKSkgKyB0aGlzLnJhbmdlX29mX3BhZ2VzWzBdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FsbHMoKTogQXJyYXk8bnVtYmVyPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbHM7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkVG9GYXVsdExvZyhmYXVsdDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuZmF1bHRfbG9nLnB1c2goZmF1bHQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mYXVsdF9sb2cubGVuZ3RoICE9IHRoaXMuZG9uZV9jYWxscylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmF1bHQgbG9nIGxlbmd0aCBkb2VzIG5vdCBtYXRjaCBkb25lIGNhbGxzXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFRvQ2FsbExvZyhwYWdlOiBQYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsX2xvZy5wdXNoKHBhZ2UpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jYWxsX2xvZy5sZW5ndGggIT0gdGhpcy5kb25lX2NhbGxzKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWxsIGxvZyBsZW5ndGggZG9lcyBub3QgbWF0Y2ggZG9uZSBjYWxsc1wiKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVSdW5uaW5nU3RhdHVzKGZyYW1lczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxGcmFtZT4+KSB7XHJcbiAgICAgICAgbGV0IGFzc2lnbmVkRnJhbWVzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGZyYW1lIG9mIGZyYW1lcykge1xyXG4gICAgICAgICAgICBpZiAoZnJhbWUucHJvY2VzcyA9PSB0aGlzKVxyXG4gICAgICAgICAgICAgICAgYXNzaWduZWRGcmFtZXMrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhc3NpZ25lZEZyYW1lcyA+IDApXHJcbiAgICAgICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZG9uZV9jYWxscyA9PSB0aGlzLm51bWJlcl9vZl9jYWxscylcclxuICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5kb25lX2NhbGxzID49IHRoaXMubnVtYmVyX29mX2NhbGxzKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNzIGRvbmUgY2FsbHMgZXhjZWVkZWQgbnVtYmVyIG9mIGNhbGxzXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmFzc2lnbmVkRnJhbWVzID0gYXNzaWduZWRGcmFtZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RmF1bHRzSW5MYXN0TihuOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mYXVsdF9sb2cuc2xpY2UodGhpcy5mYXVsdF9sb2cubGVuZ3RoIC0gbiwgdGhpcy5mYXVsdF9sb2cubGVuZ3RoKS5maWx0ZXIoZmF1bHQgPT4gZmF1bHQpLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVbmlxdWVQYWdlc0luTGFzdE4objogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbF9sb2cuc2xpY2UodGhpcy5jYWxsX2xvZy5sZW5ndGggLSBuLCB0aGlzLmNhbGxfbG9nLmxlbmd0aCkubWFwKHBhZ2UgPT4gcGFnZS5pZCkuZmlsdGVyKCh2YWx1ZSwgaW5kZXgsIHNlbGYpID0+IHNlbGYuaW5kZXhPZih2YWx1ZSkgPT09IGluZGV4KS5sZW5ndGg7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEFsbG9jYXRpb25BbGdvcml0aG0gZnJvbSBcIi4uL0FsbG9jYXRpb25BbGdvcml0aG1cIjtcclxuXHJcbmltcG9ydCBQcm9jZXNzIGZyb20gXCIuLi9Qcm9jZXNzXCI7XHJcbmltcG9ydCBGcmFtZSBmcm9tIFwiLi4vRnJhbWVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVxdWFsIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XHJcbiAgICBuYW1lOiBzdHJpbmcgPSBcIkVxdWFsXCJcclxuXHJcbiAgICBhbGxvY2F0ZUZyYW1lcyhmcmFtZXM6IEFycmF5PEZyYW1lPiwgcHJvY2Vzc2VzOiBSZWFkb25seUFycmF5PFJlYWRvbmx5PFByb2Nlc3M+Pik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGZyYW1lc19wZXJfcHJvY2VzcyA9IE1hdGguZmxvb3IoZnJhbWVzLmxlbmd0aCAvIHByb2Nlc3Nlcy5sZW5ndGgpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhgQWxsb2NhdGluZyAke2ZyYW1lc19wZXJfcHJvY2Vzc30gZnJhbWVzIHBlciBwcm9jZXNzYCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChmcmFtZXNbaV0ucHJvY2VzcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCB0aGlzIGZyYW1lIGlmIGl0J3MgYWxyZWFkeSBhbGxvY2F0ZWRcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnJhbWVzW2ldLnByb2Nlc3MgPSA8UHJvY2Vzcz5wcm9jZXNzZXNbTWF0aC5mbG9vcihpIC8gZnJhbWVzX3Blcl9wcm9jZXNzKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiB0aGUgcmVtYWluaW5nIGZyYW1lcyBhcmUgbGVmdCB1bmFsbG9jYXRlZCAqL1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEFsbG9jYXRpb25BbGdvcml0aG0gZnJvbSBcIi4uL0FsbG9jYXRpb25BbGdvcml0aG1cIjtcclxuXHJcbmltcG9ydCBGcmFtZSBmcm9tIFwiLi4vRnJhbWVcIjtcclxuaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4uL1Byb2Nlc3NcIjtcclxuXHJcbmltcG9ydCBQcm9wb3J0aW9uYWwgZnJvbSBcIi4vUHJvcG9ydGlvbmFsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbGl0eU1vZGVsIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XHJcbiAgICBuYW1lOiBzdHJpbmcgPSBcIkxvY2FsaXR5TW9kZWxcIlxyXG4gICAgZGlzcGxheV9uYW1lID0gXCJMb2NhbGl0eSBNb2RlbFwiO1xyXG4gICAgdGltZV93aW5kb3c6IG51bWJlclxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRpbWVfd2luZG93OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRpbWVfd2luZG93ID0gdGltZV93aW5kb3c7XHJcbiAgICB9XHJcblxyXG4gICAgYWxsb2NhdGVGcmFtZXMoZnJhbWVzOiBBcnJheTxGcmFtZT4sIHByb2Nlc3NlczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxQcm9jZXNzPj4pOiB2b2lkIHtcclxuICAgICAgICAvKiBkZWFsbG9jYXRlIGFsbCBmcmFtZXMgKi9cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmcmFtZXNbaV0ucHJvY2VzcyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYWxsb2NhdGVkX2ZyYW1lcyA9IDA7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgcHJvY2VzcyBvZiBwcm9jZXNzZXMpIHtcclxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZG9uZV9jYWxscyA9PSBwcm9jZXNzLmdldENhbGxzKCkubGVuZ3RoKSAvLyBza2lwIGZpbmlzaGVkIHByb2Nlc3Nlc1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBsZXQgdGltZV93aW5kb3cgPSB0aGlzLnRpbWVfd2luZG93O1xyXG4gICAgICAgICAgICBpZiAodGltZV93aW5kb3cgPiBwcm9jZXNzLmNhbGxfbG9nLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIHRpbWVfd2luZG93ID0gcHJvY2Vzcy5jYWxsX2xvZy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBsZXQgdW5pcXVlUGFnZXNJblRpbWVXaW5kb3cgPSBwcm9jZXNzLmdldFVuaXF1ZVBhZ2VzSW5MYXN0Tih0aGlzLnRpbWVfd2luZG93KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh1bmlxdWVQYWdlc0luVGltZVdpbmRvdyA8IDEpXHJcbiAgICAgICAgICAgICAgICB1bmlxdWVQYWdlc0luVGltZVdpbmRvdyA9IDE7XHJcblxyXG4gICAgICAgICAgICAvKiBhbGxvY2F0ZSB1bmlxdWVQYWdlc0luVGltZVdpbmRvdyBmcmFtZXMgKi9cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChmcmFtZXNbaV0ucHJvY2VzcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBmcmFtZSBpZiBpdCdzIGFscmVhZHkgYWxsb2NhdGVkXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHVuaXF1ZVBhZ2VzSW5UaW1lV2luZG93ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYW1lc1tpXS5wcm9jZXNzID0gPFByb2Nlc3M+cHJvY2VzcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlUGFnZXNJblRpbWVXaW5kb3ctLTtcclxuICAgICAgICAgICAgICAgICAgICBhbGxvY2F0ZWRfZnJhbWVzKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHVuaXF1ZVBhZ2VzSW5UaW1lV2luZG93ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWxsb2NhdGVkX2ZyYW1lcyA9PSBmcmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQWxsb2NhdGVkIGFsbCBmcmFtZXMgKExvY2FsaXR5TW9kZWwpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IEFsbG9jYXRpb25BbGdvcml0aG0gZnJvbSBcIi4uL0FsbG9jYXRpb25BbGdvcml0aG1cIjtcclxuXHJcbmltcG9ydCBGcmFtZSBmcm9tIFwiLi4vRnJhbWVcIjtcclxuaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4uL1Byb2Nlc3NcIjtcclxuXHJcbmltcG9ydCBQcm9wb3J0aW9uYWwgZnJvbSBcIi4vUHJvcG9ydGlvbmFsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlRmF1bHRDb250cm9sIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XHJcbiAgICBuYW1lOiBzdHJpbmcgPSBcIlBhZ2VGYXVsdENvbnRyb2xcIlxyXG4gICAgZGlzcGxheV9uYW1lID0gXCJGYXVsdCBDb250cm9sXCI7XHJcbiAgICBydW5fcHJvcG9ydGlvbmFsOiBib29sZWFuID0gdHJ1ZVxyXG5cclxuICAgIG1pbl9mYXVsdF9mcmVxOiBudW1iZXJcclxuICAgIG1heF9mYXVsdHNfZnJlcTogbnVtYmVyXHJcbiAgICB0aW1lX3dpbmRvdzogbnVtYmVyXHJcblxyXG4gICAgY29uc3RydWN0b3IobWluX2ZhdWx0X2ZyZXE6IG51bWJlciwgbWF4X2ZhdWx0X2ZyZXE6IG51bWJlciwgdGltZV93aW5kb3c6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubWluX2ZhdWx0X2ZyZXEgPSBtaW5fZmF1bHRfZnJlcTtcclxuICAgICAgICB0aGlzLm1heF9mYXVsdHNfZnJlcSA9IG1heF9mYXVsdF9mcmVxO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWVfd2luZG93ID0gdGltZV93aW5kb3c7XHJcbiAgICB9XHJcblxyXG4gICAgYWxsb2NhdGVGcmFtZXMoZnJhbWVzOiBGcmFtZVtdLCBwcm9jZXNzZXM6IHJlYWRvbmx5IFJlYWRvbmx5PFByb2Nlc3M+W10pOiB2b2lkIHtcclxuICAgICAgICAvKiBmaXJzdCBydW4gcHJvcG9ydGlvbmFsIGFsbG9jYXRpb24gKi9cclxuICAgICAgICBpZiAodGhpcy5ydW5fcHJvcG9ydGlvbmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucnVuX3Byb3BvcnRpb25hbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb3BvcnRpb25hbCgpLmFsbG9jYXRlRnJhbWVzKGZyYW1lcywgcHJvY2Vzc2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIHRoZW4gcnVuIHBhZ2UgZmF1bHQgY29udHJvbCAqL1xyXG4gICAgICAgIGNvbnN0IE1JTl9GQVVMVFMgPSB0aGlzLm1pbl9mYXVsdF9mcmVxO1xyXG4gICAgICAgIGNvbnN0IE1BWF9GQVVMVFMgPSB0aGlzLm1heF9mYXVsdHNfZnJlcTsgLy8gZnJlcXVlbmN5XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhdWx0c0luVGltZVdpbmRvdyA9IHByb2Nlc3Nlc1tpXS5nZXRGYXVsdHNJbkxhc3ROKHRoaXMudGltZV93aW5kb3cpO1xyXG4gICAgICAgICAgICBsZXQgdGltZV93aW5kb3cgPSB0aGlzLnRpbWVfd2luZG93O1xyXG4gICAgICAgICAgICBpZiAodGltZV93aW5kb3cgPiBwcm9jZXNzZXNbaV0uZmF1bHRfbG9nLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIHRpbWVfd2luZG93ID0gcHJvY2Vzc2VzW2ldLmZhdWx0X2xvZy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBsZXQgZmF1bHRfZnJlcXVlbmN5ID0gZmF1bHRzSW5UaW1lV2luZG93IC8gdGltZV93aW5kb3c7XHJcbiAgICAgICAgICAgIGxldCBmcmFtZXNfbnVtYmVyID0gZnJhbWVzLmZpbHRlcihmcmFtZSA9PiBmcmFtZS5wcm9jZXNzID09IHByb2Nlc3Nlc1tpXSkubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRpbWVfd2luZG93ID09IDApXHJcbiAgICAgICAgICAgICAgICBmYXVsdF9mcmVxdWVuY3kgPSAodGhpcy5taW5fZmF1bHRfZnJlcSArIHRoaXMubWF4X2ZhdWx0c19mcmVxKSAvIDI7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUHJvY2VzcyAke3Byb2Nlc3Nlc1tpXS5pZH0gZmF1bHQgZnJlcXVlbmN5OiAke2ZhdWx0X2ZyZXF1ZW5jeX0gKCR7ZmF1bHRzSW5UaW1lV2luZG93fSAvICR7dGltZV93aW5kb3d9KWApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZhdWx0X2ZyZXF1ZW5jeSA8IE1JTl9GQVVMVFMgJiYgZnJhbWVzX251bWJlciA+IDEpIHtcclxuICAgICAgICAgICAgICAgIC8qIGRlYWxsb2NhdGUgMSBmcmFtZSAqL1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmcmFtZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZnJhbWVzW2pdLnByb2Nlc3MgPT0gcHJvY2Vzc2VzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lc1tqXS5wcm9jZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsb2NhdGVGcmFtZXMoZnJhbWVzLCBwcm9jZXNzZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGZhdWx0X2ZyZXF1ZW5jeSA+IE1BWF9GQVVMVFMgJiYgcHJvY2Vzc2VzW2ldLmdldENhbGxzKCkubGVuZ3RoICE9IHByb2Nlc3Nlc1tpXS5kb25lX2NhbGxzKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBhbGxvY2F0ZSAxIGZyYW1lIGlmIHBvc3NpYmxlICovXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZyYW1lcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZXNbal0ucHJvY2VzcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lc1tqXS5wcm9jZXNzID0gPFByb2Nlc3M+cHJvY2Vzc2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQWxsb2NhdGlvbkFsZ29yaXRobSBmcm9tIFwiLi4vQWxsb2NhdGlvbkFsZ29yaXRobVwiO1xyXG5cclxuaW1wb3J0IFByb2Nlc3MgZnJvbSBcIi4uL1Byb2Nlc3NcIjtcclxuaW1wb3J0IEZyYW1lIGZyb20gXCIuLi9GcmFtZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvcG9ydGlvbmFsIGltcGxlbWVudHMgQWxsb2NhdGlvbkFsZ29yaXRobSB7XHJcbiAgICBuYW1lOiBzdHJpbmcgPSBcIlByb3BvcnRpb25hbFwiXHJcblxyXG4gICAgYWxsb2NhdGVGcmFtZXMoZnJhbWVzOiBBcnJheTxGcmFtZT4sIHByb2Nlc3NlczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxQcm9jZXNzPj4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0b3RhbF9jYWxscyA9IHByb2Nlc3Nlcy5yZWR1Y2UoKHRvdGFsLCBwcm9jZXNzKSA9PiB0b3RhbCArIHByb2Nlc3MubnVtYmVyX29mX2NhbGxzLCAwKTtcclxuXHJcbiAgICAgICAgbGV0IGZyYW1lc19hbGxvY2F0ZWQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvY2Vzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBmcmFtZXNfZm9yX3Byb2Nlc3MgPSBNYXRoLmZsb29yKChwcm9jZXNzZXNbaV0ubnVtYmVyX29mX2NhbGxzIC8gdG90YWxfY2FsbHMpICogZnJhbWVzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWVzX2Zvcl9wcm9jZXNzIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgZnJhbWVzX2Zvcl9wcm9jZXNzID0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmcmFtZXNfZm9yX3Byb2Nlc3M7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lc19hbGxvY2F0ZWQgPj0gZnJhbWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFRoZXJlIGFyZSBub3QgZW5vdWdoIGZyYW1lcyB0byBhbGxvY2F0ZSBhbGwgZnJhbWVzLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChmcmFtZXNbZnJhbWVzX2FsbG9jYXRlZF0ucHJvY2VzcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBmcmFtZSBpZiBpdCdzIGFscmVhZHkgYWxsb2NhdGVkXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnJhbWVzW2ZyYW1lc19hbGxvY2F0ZWRdLnByb2Nlc3MgPSA8UHJvY2Vzcz5wcm9jZXNzZXNbaV07XHJcbiAgICAgICAgICAgICAgICBmcmFtZXNfYWxsb2NhdGVkKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIHRoZSByZW1haW5pbmcgZnJhbWVzIGFyZSBsZWZ0IHVuYWxsb2NhdGVkICovXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgTWVudSBmcm9tIFwiLi9jbGFzc2VzL01lbnVcIjtcclxuXHJcbmZ1bmN0aW9uIG1haW4oKSB7XHJcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgbWVudS5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgICogcnVuIHdpdGg6IHRzYyAmJiBub2RlIC5cXGRpc3RcXGZyYW1lX2FsbG9jYXRpb25fc3JjXFxtYWluLmpzXHJcbiAgICAgICAgKi9cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbm1haW4oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlzcGxheSB7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IG51bGwgPSBudWxsXHJcbiAgICByZXNpemVDYWxsYmFjazogKCgpID0+IHZvaWQpIHwgbnVsbFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjayA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGluaXQoZWxlbV9pZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbV9pZCkgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplVG9GaXQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVzaXplVG9GaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemVUb0ZpdCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jdHggPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZUNhbGxiYWNrICE9IG51bGwpe1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFJlc2l6ZUNhbGxiYWNrKGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NjUpO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwicHJvY2Vzc2VzIiwiZnJhbWVzIiwiY2FsbF9wb29sIiwiY2FsbF9xdWV1ZSIsImNhbGxfaGlzdG9yeSIsIm51bWJlcl9vZl9mcmFtZXMiLCJudW1iZXJfb2ZfcGFnZXMiLCJhbGxvY2F0aW9uQWxnb3JpdGhtIiwicmVwbGFjZW1lbnRBbGdvcml0aG0iLCJ0b3RhbF9wYWdlX2ZhdWx0cyIsInRpbWUiLCJsYXN0X2NhbGxfY2F1c2VkX2ZhdWx0IiwibGFzdF9lbXB0eV9xdWV1ZSIsImluaXQiLCJ0aGlzIiwiaSIsInB1c2giLCJwcm9jZXNzIiwicmVzZXQiLCJhZGRQcm9jZXNzIiwiY2xlYXJQcm9jZXNzZXMiLCJnZW5lcmF0ZVBhZ2VDYWxsUG9vbCIsImxlbmd0aCIsImdlbmVyYXRlQ2FsbHMiLCJhZGRQYWdlQ2FsbHNUb1Bvb2wiLCJnZXRDYWxscyIsImFkZFBhZ2VDYWxsVG9Qb29sIiwicGFnZV9jYWxsIiwicGFnZV9jYWxscyIsImNsZWFyUGFnZUNhbGxQb29sIiwic2V0QWxnb3JpdGhtIiwiYWxnb3JpdGhtIiwibmV4dFRpY2siLCJFcnJvciIsInVwZGF0ZVJ1bm5pbmdTdGF0dXMiLCJmb3JFYWNoIiwiZnJhbWUiLCJydW5uaW5nIiwiYWxsb2NhdGVGcmFtZXMiLCJwYWdlIiwidW5hbGxvY2F0ZWRGcmFtZXNMZW5ndGgiLCJmaWx0ZXIiLCJjb25zb2xlIiwid2FybiIsInNwbGljZSIsImxvZyIsImlkIiwib25QYWdlQ2FsbCIsImdldEN1cnJlbnRTdGF0ZURhdGEiLCJwYWdlX2ZhdWx0IiwicGFnZV9mYXVsdHMiLCJvblBhZ2VBbHJlYWR5SW5NZW1vcnkiLCJmaW5kIiwiaWRfb2ZfZnJhbWVfdG9fcmVwbGFjZSIsImhhbmRsZVBhZ2VGYXVsdCIsImdldEZyYW1lSW5kZXhCeUlkIiwicGFnZV9pbl9tZW1vcnkiLCJjYWxsIiwicHJvY2Vzc19mcmFtZXMiLCJwcm9jZXNzX2NhbGxfaGlzdG9yeSIsImN1cnJlbnRfZnJhbWVzIiwicHJldmlvdXNfcGFnZV9jYWxscyIsImlzRmluaXNoZWQiLCJnZXRSZXN1bHRzIiwidG90YWxfcGFnZV9oaXRzIiwidG90YWxfY2FsbHMiLCJzaW11bGF0ZSIsIk1BWF9USU1FIiwiZGlzcGxheVJlc3VsdHMiLCJyZXN1bHRzIiwiYWxnU3RyIiwiZGlzcGxheV9uYW1lIiwibmFtZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJpbm5lckhUTUwiLCJ0b0ZpeGVkIiwicmVwbGFjZSIsIlJlZ0V4cCIsImNvbXBhcmVBbGxBbmREaXNwbGF5UmVzdWx0cyIsImFsZ29yaXRobXMiLCJyZXN1bHRzX2VsIiwicHJvY2Vzc19kYXRhIiwiaiIsInRhYmxlX3dyYXBwZXIiLCJjcmVhdGVFbGVtZW50IiwiZmxleERpcmVjdGlvbiIsImFsaWduSXRlbXMiLCJ0YWJsZSIsImJvcmRlciIsImJvcmRlckNvbGxhcHNlIiwiYXBwZW5kQ2hpbGQiLCJoZWFkZXJfcm93IiwiaGVhZGVyX2NlbGwiLCJwYWRkaW5nIiwiY29sb3IiLCJyb3ciLCJjZWxsIiwidG9TdHJpbmciLCJtZW51IiwidmlzaWJsZSIsInBsYXlpbmciLCJzcGVlZCIsIkdVSSIsIk1FTlUiLCJwbGF5X3BhdXNlX2J1dHRvbiIsInN0ZXBfYnV0dG9uIiwic3RvcF9idXR0b24iLCJzcGVlZF9zbGlkZXIiLCJpbmZvX2FsZ29yaXRobSIsImluZm9fdGltZSIsImluZm9faXNfZG9uZSIsImluZm9faW5fcXVldWUiLCJpbmZvX2ZpbmlzaGVkIiwiaW5mb190b3RhbF9wYWdlX2ZhdWx0cyIsImluZm9fdG90YWxfcGFnZV9oaXRzIiwiZnJhbWVfcm93cyIsInNlZV9jb2RlX2J1dHRvbiIsInN0b3JlZFNldEludGVydmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZVBsYXlpbmciLCJzdGVwIiwidG9nZ2xlVmlzaWJsZSIsInBhcnNlSW50IiwidmFsdWUiLCJyZWZyZXNoU3BlZWQiLCJtZW1vcnkiLCJhbGdvcml0aG1OYW1lIiwid2luZG93Iiwib3BlbiIsImZvY3VzIiwiaW5pdFN0YXRlVGFibGUiLCJyZXNpemVDYWxsYmFjayIsImRyYXdDdXJyZW50U3RhdGUiLCJjbGVhckludGVydmFsIiwicmVmcmVzaENhbGxzIiwiZGlzYWJsZWQiLCJzdGFydEFuaW1hdGlvbiIsInJlZnJlc2hJbmZvIiwiZHJhd0NhbGxzIiwidGltZV9yb3ciLCJjYWxsc19yb3ciLCJ0Ym9keSIsInRpbWVfcm93X2hlYWRlciIsImNsYXNzTGlzdCIsImFkZCIsImNhbGxzX3Jvd19oZWFkZXIiLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImZyYW1lX3JvdyIsImZyYW1lX3Jvd19oZWFkZXIiLCJTVEFSVF9YIiwiU1RBUlRfWSIsIldJRFRIIiwiSEVJR0hUIiwiY2FsbHNUb0RyYXciLCJuZXdDYWxsIiwiYXQiLCJ0aW1lVGlja0VsIiwiY2FsbHNUaWNrRWwiLCJmcmFtZVRpY2tFbCIsImJhY2tncm91bmRDb2xvciIsInNjcm9sbExlZnQiLCJzY3JvbGxXaWR0aCIsInNldEludGVydmFsIiwiYmluZCIsImFmdGVyRG9uZSIsImRhdGEiLCJmcmFtZV90b19yZXBsYWNlX2luZGV4IiwibGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4IiwiZXJyb3IiLCJwYWdlX2luZGV4IiwiYW5pbWF0aW9uR1VJIiwicnVuIiwiYWRkUHJvY2Vzc2VzIiwiYWRkQ2FsbHMiLCJjbGVhckNhbGxzIiwiaW5pdGlhbF9mcmFtZV9jb3VudCIsInNldFJlc2l6ZUNhbGxiYWNrIiwiZSIsIm5ld192YWwiLCJ0YXJnZXQiLCJpc05hTiIsImFsZXJ0IiwidG9Mb3dlckNhc2UiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwcm9jZXNzX2NvdW50IiwicGFnZV9yYW5nZV9taW4iLCJwYWdlX3JhbmdlX21heCIsImNhbGxfY291bnRfbWluIiwiY2FsbF9jb3VudF9tYXgiLCJjdXJyZW50X3JhbmdlX21pbiIsInBhZ2VfcmFuZ2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzb3J0IiwiZ2VuZXJhdGVfY2FsbF9xdWV1ZV9idXR0b24iLCJhdHRyaWJ1dGVzIiwic2V0TmFtZWRJdGVtIiwiY3JlYXRlQXR0cmlidXRlIiwiYWxsX3Byb2Nlc3Nlc19lbCIsInByb2Nlc3NfZWwiLCJqb2luIiwiY2FsbF9xdWV1ZV9lbCIsIm1hcCIsImFuaW1hdGlvbiIsImNvbXBhcmVfYWxsIiwibWluX2ZyZXEiLCJwYXJzZUZsb2F0IiwibWF4X2ZyZXEiLCJ0aW1lX3dpbmRvdyIsImxhc3RfY2FsbF90aW1lIiwiY2F1c2VkX2ZhdWx0IiwiZG9uZV9jYWxscyIsImFkZFRvRmF1bHRMb2ciLCJhZGRUb0NhbGxMb2ciLCJyYW5nZV9vZl9wYWdlcyIsIm51bWJlcl9vZl9jYWxscyIsImNhbGxfbG9nIiwiZmF1bHRfbG9nIiwiYXNzaWduZWRGcmFtZXMiLCJjYWxscyIsImZhdWx0IiwiZ2V0RmF1bHRzSW5MYXN0TiIsIm4iLCJzbGljZSIsImdldFVuaXF1ZVBhZ2VzSW5MYXN0TiIsImluZGV4Iiwic2VsZiIsImluZGV4T2YiLCJmcmFtZXNfcGVyX3Byb2Nlc3MiLCJhbGxvY2F0ZWRfZnJhbWVzIiwidW5pcXVlUGFnZXNJblRpbWVXaW5kb3ciLCJtaW5fZmF1bHRfZnJlcSIsIm1heF9mYXVsdF9mcmVxIiwicnVuX3Byb3BvcnRpb25hbCIsIm1heF9mYXVsdHNfZnJlcSIsIk1JTl9GQVVMVFMiLCJNQVhfRkFVTFRTIiwiZmF1bHRzSW5UaW1lV2luZG93IiwiZmF1bHRfZnJlcXVlbmN5IiwiZnJhbWVzX251bWJlciIsInJlZHVjZSIsInRvdGFsIiwiZnJhbWVzX2FsbG9jYXRlZCIsImZyYW1lc19mb3JfcHJvY2VzcyIsImN0eCIsImVsZW1faWQiLCJjYW52YXMiLCJnZXRDb250ZXh0IiwicmVzaXplVG9GaXQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImNhbGxiYWNrIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iXSwic291cmNlUm9vdCI6IiJ9