(()=>{"use strict";var e={498:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.visible=!1,this.playing=!1,this.speed=1,this.GUI=null,this.MENU=null,this.play_pause_button=null,this.step_button=null,this.stop_button=null,this.speed_slider=null,this.info_algorithm=null,this.info_time=null,this.info_is_done=null,this.info_in_queue=null,this.info_finished=null,this.info_total_page_faults=null,this.info_total_page_hits=null,this.frame_rows=[],this.see_code_button=null,this.storedSetInterval=null,this.menu=e}init(){this.GUI=document.getElementById("animation_gui"),this.MENU=document.getElementById("settings"),this.play_pause_button=document.getElementById("animation_play_pause"),this.step_button=document.getElementById("animation_step"),this.stop_button=document.getElementById("animation_stop"),this.speed_slider=document.getElementById("animation_speed_slider"),this.info_algorithm=document.getElementById("animation_info_algorithm_value"),this.info_time=document.getElementById("animation_info_time_value"),this.info_is_done=document.getElementById("animation_is_done"),this.info_in_queue=document.getElementById("calls_in_queue_value"),this.info_finished=document.getElementById("calls_finished_value"),this.info_total_page_faults=document.getElementById("total_page_faults_value"),this.info_total_page_hits=document.getElementById("total_page_hits_value"),this.see_code_button=document.getElementById("code_button"),this.info_is_done.style.display="none",this.play_pause_button.addEventListener("click",(()=>{this.togglePlaying()})),this.step_button.addEventListener("click",(()=>{this.step()})),this.stop_button.addEventListener("click",(()=>{this.toggleVisible(!1)})),this.speed_slider.addEventListener("input",(()=>{this.speed=parseInt(this.speed_slider.value),this.refreshSpeed()})),this.see_code_button.addEventListener("click",(()=>{if(null==this.menu.memory.algorithm)return;const e=this.menu.memory.algorithm.name;window.open(`https://github.com/brun0ne/scheduling-sim/blob/main/page_replacement_src/classes/algorithms/${e}.ts`,"_blank").focus()})),this.refreshSpeed(),this.initStateTable()}togglePlaying(e){this.playing=null==e?!this.playing:e,this.refreshSpeed(),this.play_pause_button.innerHTML=this.playing?"Pause":"Play"}toggleVisible(e){this.visible=null==e?!this.visible:e,this.visible?(this.GUI.style.display="block",this.MENU.style.display="none",this.menu.display.resizeCallback=()=>{this.drawCurrentState()},this.drawCurrentState()):(this.GUI.style.display="none",this.MENU.style.display="flex",null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.menu.display.resizeCallback=()=>{this.menu.refreshCalls()},this.menu.refreshCalls())}reset(){if(null==this.play_pause_button||null==this.info_is_done||null==this.step_button)throw new Error("call init() first!");this.menu.memory.init(),this.play_pause_button.innerHTML="Play",this.playing=!1,this.info_is_done.style.display="none",this.play_pause_button.disabled=!1,this.step_button.disabled=!1,this.initStateTable()}startAnimation(){this.reset(),this.toggleVisible(!0)}drawCurrentState(){this.refreshInfo(),this.drawCalls()}initStateTable(){const e=document.getElementById("animation_table_time"),t=document.getElementById("animation_table_page_calls"),l=document.getElementById("animation_table_body");e.innerHTML="",t.innerHTML="";{const t=document.createElement("th");t.innerHTML="Time",t.classList.add("header"),e.appendChild(t)}{const e=document.createElement("th");e.innerHTML="Page calls",e.classList.add("header"),t.appendChild(e)}{for(;null!=l.lastChild&&"animation_table_page_calls"!=l.lastChild.id;)l.removeChild(l.lastChild);const e=[];for(let t=0;t<this.menu.memory.number_of_frames;t++){const s=document.createElement("tr"),i=document.createElement("th");i.innerHTML=`Frame ${t}`,s.appendChild(i),e.push(s),l.appendChild(s)}this.frame_rows=e}}drawCalls(e,t,l,s,i){const a=document.getElementById("animation_table_time"),n=document.getElementById("animation_table_page_calls"),o=this.menu.memory.previous_page_calls.at(-1);if(null==o)return;{const e=document.createElement("th");e.innerHTML=`${this.menu.memory.time}`,a.appendChild(e)}{const e=document.createElement("th");e.innerHTML=`${o.id}`,n.appendChild(e)}for(let e=0;e<this.menu.memory.number_of_frames;e++){const t=this.frame_rows[e],l=this.menu.memory.frames[e].page,s=document.createElement("th");s.innerHTML=`${null!=l?l.id:""}`,null!=l&&l.id==o.id&&this.menu.memory.last_call_caused_fault&&(s.style.backgroundColor="red"),t.appendChild(s)}const r=document.getElementById("animation_call_table");r.scrollLeft=r.scrollWidth}refreshInfo(){const e=this.menu.memory;if(null==e.algorithm)throw new Error("call startAnimation() first!");this.info_algorithm.innerHTML=e.algorithm.name,this.info_time.innerHTML=e.time.toString(),e.isFinished()?this.info_is_done.style.display="block":this.info_is_done.style.display="none",this.info_total_page_hits.innerHTML=(e.previous_page_calls.length-e.total_page_faults).toString(),this.info_total_page_faults.innerHTML=e.total_page_faults.toString(),this.info_in_queue.innerHTML=e.page_call_queue.length.toString(),this.info_finished.innerHTML=e.previous_page_calls.length.toString()}refreshSpeed(){null!=this.storedSetInterval&&clearInterval(this.storedSetInterval),this.storedSetInterval=setInterval((()=>{this.playing&&this.step()}).bind(this),1e3/this.speed)}step(){this.menu.memory.isFinished()||(this.menu.memory.nextTick(),this.drawCurrentState(),this.menu.memory.isFinished()&&(this.togglePlaying(!1),this.menu.memory.displayResults(this.menu.memory.getResults()),this.afterDone()))}afterDone(){if(null==this.info_is_done||null==this.play_pause_button||null==this.step_button)throw new Error("call init() first!");this.info_is_done.style.display="block",this.play_pause_button.disabled=!0,this.step_button.disabled=!0}}},752:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.page=null}}},495:function(e,t,l){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(l(920)),a=s(l(752));t.default=class{constructor(){this.number_of_pages=0,this.number_of_frames=0,this.page_call_pool=[],this.page_call_queue=[],this.previous_page_calls=[],this.frames=[],this.algorithm=null,this.last_replaced_index=-1,this.last_call_caused_fault=!1,this.time=0,this.total_page_faults=0}init(e,t){this.number_of_pages=null!=e?e:this.number_of_pages,this.number_of_frames=null!=t?t:this.number_of_frames,this.page_call_queue=[...this.page_call_pool],this.frames=[],this.previous_page_calls=[],this.time=0,this.total_page_faults=0;for(let e=0;e<this.number_of_frames;e++)this.frames.push(new a.default)}addPageCallToPool(e){this.page_call_pool.push(e)}addPageCallsToPool(e){for(let t=0;t<e.length;t++)this.page_call_pool.push(new i.default(e[t]))}clearPageCallPool(){this.page_call_pool=[]}setAlgorithm(e){this.algorithm=e}nextTick(){var e,t,l,s;if(null==this.algorithm)throw new Error("No algorithm selected");const i=this.page_call_queue.shift();if(null==i)return console.warn("Empty page call queue but not finished"),void this.time++;if(this.previous_page_calls.push(i),console.log("Page call: "+i.id),i){null===(t=(e=this.algorithm).onPageCall)||void 0===t||t.call(e,i);let a=!0;for(let e=0;e<this.frames.length;e++){if(null==this.frames[e])throw new Error("Frame is null");if(null==this.frames[e].page){this.frames[e].page=i,this.last_replaced_index=e,this.total_page_faults++,this.last_call_caused_fault=!0,a=!1;break}if(this.frames[e].page.id==i.id){null===(s=(l=this.algorithm).onPageAlreadyInMemory)||void 0===s||s.call(l,i),this.last_call_caused_fault=!1,a=!1;break}}if(a){if(console.log("Page fault: "+i.id),null!=this.frames.find((e=>null==e.page)))throw new Error("Initial page fill not handled properly");this.total_page_faults++,this.last_call_caused_fault=!0;const e={page_call:i,last_replaced_index:this.last_replaced_index,current_frames:this.frames,future_page_calls:this.page_call_queue,previous_page_calls:this.previous_page_calls},t=this.algorithm.handlePageFault(e);this.frames[t].page=i,this.last_replaced_index=t}let n=!1;for(const e of this.frames)if(null!=e.page&&e.page.id==i.id){n=!0;break}if(!n)throw new Error("Page fault not handled properly - page not in memory");i.call(this.time)}this.time++}isFinished(){return 0==this.page_call_queue.length}simulate(){for(this.init();!this.isFinished();)this.nextTick();return this.getResults()}getResults(){return{total_page_faults:this.total_page_faults,total_page_hits:this.previous_page_calls.length-this.total_page_faults,total_page_calls:this.previous_page_calls.length}}printFrames(){console.log("Frames:");for(const e of this.frames)console.log(e.page?e.page.id:"null")}displayResults(e,t=this.algorithm.name){document.getElementById("results_wrapper").style.display="flex",document.getElementById("results").innerHTML=`\n        Algorithm: ${t.toUpperCase()}\n\n        Total page faults: <b style='color: red'>${e.total_page_faults.toFixed(0)}</b>\n        Total page hits: <b style='color: lime'>${e.total_page_hits.toFixed(0)}</b>\n        Total page calls: <b>${e.total_page_calls.toFixed(0)}</b>\n        `.replace(RegExp("\n","g"),"<br />")}compareAllAndDisplayResults(e){document.getElementById("results_wrapper").style.display="flex";const t=document.getElementById("results");t.innerHTML="";for(let l=0;l<e.length;l++){this.setAlgorithm(e[l]);const s=this.simulate();t.innerHTML+=`\n            Algorithm: ${e[l].name.toUpperCase()}\n            Total page faults: <b style='color: red'>${s.total_page_faults.toFixed(0)}</b>\n            Total page hits: <b style='color: lime'>${s.total_page_hits.toFixed(0)}</b>\n            Total page calls: <b>${s.total_page_calls.toFixed(0)}</b>\n            `.replace(RegExp("\n","g"),"<br />"),t.innerHTML+="<br />"}}}},268:function(e,t,l){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(l(617)),a=s(l(498)),n=s(l(495)),o=s(l(238)),r=s(l(789)),u=s(l(93)),d=s(l(429)),h=s(l(436));t.default=class{constructor(){this.display=new i.default,this.memory=new n.default,this.animationGUI=new a.default(this)}init(){document.getElementById("run_button").addEventListener("click",(()=>{this.run()})),document.getElementById("run_with_animation_button").addEventListener("click",(()=>{this.run(!0)})),document.getElementById("add_button").addEventListener("click",(()=>{this.addCalls()})),document.getElementById("clear_button").addEventListener("click",(()=>{this.clearCalls()})),this.memory.init(5,3),this.display.init("main_canvas"),this.animationGUI.init(),this.display.setResizeCallback((()=>{this.refreshCalls()})),document.getElementById("s_page_count").addEventListener("change",(e=>{const t=parseInt(e.target.value);isNaN(t)||t<1?alert("Invalid number of pages"):(this.memory.init(t,this.memory.number_of_frames),this.clearCalls(),this.refreshCalls())})),document.getElementById("s_frame_count").addEventListener("change",(e=>{const t=parseInt(e.target.value);isNaN(t)||t<1?alert("Invalid number of frames"):(this.memory.init(this.memory.number_of_pages,t),this.refreshCalls())})),document.getElementById("c_distribution").addEventListener("change",(e=>{const t=e.target.value.toLowerCase(),l=document.getElementById("c_window_size_all"),s=document.getElementById("c_window_delta_all");switch(t){case"uniform":l.style.display="none",s.style.display="none";break;case"locality":l.style.display="block",s.style.display="block";break;default:alert("Invalid distribution")}})),document.getElementById("a_type").addEventListener("change",(e=>{"compare_all"===e.target.value.toLowerCase()?document.getElementById("run_with_animation_button").setAttribute("disabled","true"):document.getElementById("run_with_animation_button").removeAttribute("disabled")})),document.getElementById("results_close").addEventListener("click",(()=>{document.getElementById("results_wrapper").style.display="none"})),this.refreshCalls()}addCalls(){const e=document.getElementById("c_distribution").value,t=parseInt(document.getElementById("c_count").value);switch(e){case"uniform":for(let e=0;e<t;e++)this.memory.addPageCallsToPool([Math.floor(Math.random()*this.memory.number_of_pages)]);break;case"locality":{const e=parseInt(document.getElementById("c_window_size").value),l=parseInt(document.getElementById("c_window_delta").value);if(isNaN(e)||isNaN(l))return void alert("Invalid input");if(e>this.memory.number_of_pages)return void alert("Window size is bigger than number of pages");if(l>this.memory.number_of_pages)return void alert("Window delta is bigger than number of pages");let s=Math.floor(Math.random()*(this.memory.number_of_pages-e));for(let i=0;i<t;i++){const t=Math.floor(Math.random()*e)+s;this.memory.addPageCallsToPool([t]),s=(s+(Math.floor(Math.random()*(2*l+1))-l))%(this.memory.number_of_pages-e),this.memory.number_of_pages-e==0&&(s=0),s<0&&(s+=this.memory.number_of_pages)}break}default:return void alert("Invalid distribution")}this.refreshCalls()}clearCalls(){this.memory.clearPageCallPool(),this.refreshCalls()}refreshCalls(){console.log("Calls in pool: "+this.memory.page_call_pool.length),document.getElementById("p_current_count").innerHTML=`(${this.memory.page_call_pool.length.toString()})`;const e=document.getElementById("current_page_calls_val");e.innerHTML=this.memory.page_call_pool.reduce(((e,t)=>e+t.id.toString()+", "),"").slice(0,-2),0==this.memory.page_call_pool.length&&(e.innerHTML="<span style='color: yellow'>empty</span>")}run(e){let t=!1;switch(document.getElementById("a_type").value.toLowerCase()){case"fifo":this.memory.setAlgorithm(new o.default);break;case"opt":this.memory.setAlgorithm(new r.default);break;case"lru":this.memory.setAlgorithm(new u.default);break;case"alru":this.memory.setAlgorithm(new d.default);break;case"rand":this.memory.setAlgorithm(new h.default);break;case"compare_all":t=!0;break;default:alert("Invalid algorithm")}if(t){const e=[new o.default,new r.default,new u.default,new d.default,new h.default];this.memory.compareAllAndDisplayResults(e)}else if(e)this.animationGUI.startAnimation();else{const e=this.memory.simulate();this.memory.displayResults(e)}}}},920:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.id=e,this.last_call_time=0}call(e){this.last_call_time=e}}},429:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="ALRU",this.bit_array=[]}onPageCall(e){null==this.bit_array[e.id]&&(this.bit_array[e.id]=!1)}onPageAlreadyInMemory(e){this.bit_array[e.id]=!0}handlePageFault(e){for(let t=0;t<e.current_frames.length;t++){const l=e.current_frames[t];if(null==l.page)return console.warn("Frame is empty - this should be ensured not to happen by the caller"),t;if(0==this.bit_array[l.page.id])return t;this.bit_array[l.page.id]=!1}return 0}}},238:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="FIFO"}handlePageFault(e){return(e.last_replaced_index+1)%e.current_frames.length}}},93:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="LRU"}handlePageFault(e){let t=-1,l=-1;for(let s=0;s<e.current_frames.length;s++){const i=e.current_frames[s];if(null==i.page)return console.warn("Frame is empty - this should be ensured not to happen by the caller"),s;let a=-1;for(let t=e.previous_page_calls.length-1;t>=0;t--)if(e.previous_page_calls[t].id==i.page.id){a=t;break}if(-1==a)return s;(a<l||-1==l)&&(t=s,l=a)}return t}}},789:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="OPT"}handlePageFault(e){let t=-1,l=-1;for(let s=0;s<e.current_frames.length;s++){const i=e.current_frames[s];if(null==i.page)return console.warn("Frame is empty - this should be ensured not to happen by the caller"),s;let a=-1;for(let t=0;t<e.future_page_calls.length;t++)if(e.future_page_calls[t].id==i.page.id){a=t;break}if(-1==a)return s;a>l&&(t=s,l=a)}return t}}},436:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.name="RAND"}handlePageFault(e){return Math.floor(Math.random()*e.current_frames.length)}}},965:function(e,t,l){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(l(268)),a=s(l(495)),n=s(l(429));!function(){if("undefined"!=typeof document)(new i.default).init();else{const e=new a.default;for(e.init(5,3),e.addPageCallsToPool([1,2,3,4,1,2,5,1,2,3,4,5]),e.setAlgorithm(new n.default);e.page_call_queue.length>0;)e.nextTick(),e.printFrames();console.log("Total page faults: "+e.total_page_faults)}}()},617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.ctx=null,this.resizeCallback=null}init(e){const t=document.getElementById(e);this.ctx=t.getContext("2d"),window.addEventListener("resize",this.resizeToFit.bind(this)),this.resizeToFit()}resizeToFit(){null!=this.ctx&&(this.ctx.canvas.width=window.innerWidth,this.ctx.canvas.height=window.innerHeight,null!=this.resizeCallback&&this.resizeCallback())}setResizeCallback(e){this.resizeCallback=e}}}},t={};!function l(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,l),a.exports}(965)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxNQUFRL0ksT0FBT2dKLFdBQy9CakssS0FBSzJKLElBQUlFLE9BQU9LLE9BQVNqSixPQUFPa0osWUFFTCxNQUF2Qm5LLEtBQUtzQixnQkFDTHRCLEtBQUtzQixpQkFFYixDQUVBbUcsa0JBQWtCMkMsR0FDZHBLLEtBQUtzQixlQUFpQjhJLENBQzFCLEUsR0MvQkFDLEVBQTJCLENBQUMsR0FHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVaEUsS0FBS29FLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNKLEdBR3BFSyxFQUFPRCxPQUNmLENDbkIwQkosQ0FBb0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NsYXNzZXMvQW5pbWF0aW9uR1VJLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvRnJhbWUudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9NTVUudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9NZW51LnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvUGFnZS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvQUxSVS50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvRklGTy50cyIsIndlYnBhY2s6Ly8vLi9jbGFzc2VzL2FsZ29yaXRobXMvTFJVLnRzIiwid2VicGFjazovLy8uL2NsYXNzZXMvYWxnb3JpdGhtcy9PUFQudHMiLCJ3ZWJwYWNrOi8vLy4vY2xhc3Nlcy9hbGdvcml0aG1zL1JBTkQudHMiLCJ3ZWJwYWNrOi8vLy4vbWFpbi50cyIsIndlYnBhY2s6Ly8vLi4vc2hhcmVkL2NsYXNzZXMvRGlzcGxheS50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSUFuaW1hdGlvbkdVSSBmcm9tIFwiLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvSUFuaW1hdGlvbkdVSVwiO1xuaW1wb3J0IE1lbnUgZnJvbSBcIi4vTWVudVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRpb25HVUkgaW1wbGVtZW50cyBJQW5pbWF0aW9uR1VJIHtcbiAgICBtZW51OiBNZW51XG5cbiAgICB2aXNpYmxlOiBib29sZWFuID0gZmFsc2VcbiAgICBwbGF5aW5nOiBib29sZWFuID0gZmFsc2VcbiAgICBzcGVlZDogbnVtYmVyID0gMVxuXG4gICAgR1VJOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsXG4gICAgTUVOVTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbFxuXG4gICAgcGxheV9wYXVzZV9idXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IG51bGxcbiAgICBzdGVwX2J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbFxuICAgIHN0b3BfYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsXG4gICAgc3BlZWRfc2xpZGVyOiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCA9IG51bGxcblxuICAgIGluZm9fYWxnb3JpdGhtOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXG4gICAgaW5mb190aW1lOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXG4gICAgaW5mb19pc19kb25lOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsXG5cbiAgICBpbmZvX2luX3F1ZXVlOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGwgPSBudWxsXG4gICAgaW5mb19maW5pc2hlZDogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxuICAgIGluZm9fdG90YWxfcGFnZV9mYXVsdHM6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHwgbnVsbCA9IG51bGxcbiAgICBpbmZvX3RvdGFsX3BhZ2VfaGl0czogSFRNTFBhcmFncmFwaEVsZW1lbnQgfCBudWxsID0gbnVsbFxuXG4gICAgZnJhbWVfcm93czogQXJyYXk8SFRNTFRhYmxlUm93RWxlbWVudD4gPSBbXVxuICAgIFxuICAgIHNlZV9jb2RlX2J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbFxuXG4gICAgLyogc2V0SW50ZXJ2YWwgKi9cbiAgICBzdG9yZWRTZXRJbnRlcnZhbDogTm9kZUpTLlRpbWVyIHwgbnVsbCA9IG51bGxcblxuICAgIGNvbnN0cnVjdG9yKG1lbnU6IE1lbnUpIHtcbiAgICAgICAgdGhpcy5tZW51ID0gbWVudTtcbiAgICB9XG5cbiAgICBpbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLkdVSSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX2d1aVwiKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgdGhpcy5NRU5VID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR0aW5nc1wiKSBhcyBIVE1MRGl2RWxlbWVudDtcblxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fcGxheV9wYXVzZVwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgdGhpcy5zdGVwX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3N0ZXBcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIHRoaXMuc3RvcF9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9zdG9wXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICB0aGlzLnNwZWVkX3NsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3NwZWVkX3NsaWRlclwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgICAgIHRoaXMuaW5mb19hbGdvcml0aG0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9pbmZvX2FsZ29yaXRobV92YWx1ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcbiAgICAgICAgdGhpcy5pbmZvX3RpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl9pbmZvX3RpbWVfdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuaW5mb19pc19kb25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25faXNfZG9uZVwiKSBhcyBIVE1MRGl2RWxlbWVudDtcblxuICAgICAgICB0aGlzLmluZm9faW5fcXVldWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGxzX2luX3F1ZXVlX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xuICAgICAgICB0aGlzLmluZm9fZmluaXNoZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGxzX2ZpbmlzaGVkX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xuICAgICAgICB0aGlzLmluZm9fdG90YWxfcGFnZV9mYXVsdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsX3BhZ2VfZmF1bHRzX3ZhbHVlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xuICAgICAgICB0aGlzLmluZm9fdG90YWxfcGFnZV9oaXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbF9wYWdlX2hpdHNfdmFsdWVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XG5cbiAgICAgICAgdGhpcy5zZWVfY29kZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvZGVfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBoaWRlIGVsZW1lbnRzXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluZm9faXNfZG9uZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgICAgLypcbiAgICAgICAgICogQmluZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGxheV9wYXVzZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheWluZygpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnN0ZXBfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0ZXAoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zdG9wX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zcGVlZF9zbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3BlZWQgPSBwYXJzZUludCh0aGlzLnNwZWVkX3NsaWRlciEudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoU3BlZWQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zZWVfY29kZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1lbnUubWVtb3J5LmFsZ29yaXRobSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtTmFtZSA9IHRoaXMubWVudS5tZW1vcnkuYWxnb3JpdGhtLm5hbWU7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihgaHR0cHM6Ly9naXRodWIuY29tL2JydW4wbmUvc2NoZWR1bGluZy1zaW0vYmxvYi9tYWluL3BhZ2VfcmVwbGFjZW1lbnRfc3JjL2NsYXNzZXMvYWxnb3JpdGhtcy8ke2FsZ29yaXRobU5hbWV9LnRzYCwgXCJfYmxhbmtcIikhLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRJbnRlcnZhbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWZyZXNoU3BlZWQoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogcHJlcGFyZSBIVE1MIHRhYmxlIG9mIHN0YXRlc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0U3RhdGVUYWJsZSgpO1xuICAgIH1cbiAgICB0b2dnbGVQbGF5aW5nKHBsYXlpbmc/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChwbGF5aW5nID09IG51bGwpXG4gICAgICAgICAgICB0aGlzLnBsYXlpbmcgPSAhdGhpcy5wbGF5aW5nO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnBsYXlpbmcgPSBwbGF5aW5nO1xuXG4gICAgICAgIHRoaXMucmVmcmVzaFNwZWVkKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbiEuaW5uZXJIVE1MID0gdGhpcy5wbGF5aW5nID8gXCJQYXVzZVwiIDogXCJQbGF5XCI7XG4gICAgfVxuXG4gICAgdG9nZ2xlVmlzaWJsZSh2aXNpYmxlPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAodmlzaWJsZSA9PSBudWxsKVxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gIXRoaXMudmlzaWJsZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZTtcbiAgICAgICAgICAgIFxuICAgICAgICBpZiAodGhpcy52aXNpYmxlKXtcbiAgICAgICAgICAgIHRoaXMuR1VJIS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgdGhpcy5NRU5VIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgICAgICAgIHRoaXMubWVudS5kaXNwbGF5LnJlc2l6ZUNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0N1cnJlbnRTdGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3Q3VycmVudFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLkdVSSEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgdGhpcy5NRU5VIS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3JlZFNldEludGVydmFsICE9IG51bGwpXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0b3JlZFNldEludGVydmFsKTtcblxuICAgICAgICAgICAgdGhpcy5tZW51LmRpc3BsYXkucmVzaXplQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51LnJlZnJlc2hDYWxscygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZW51LnJlZnJlc2hDYWxscygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnBsYXlfcGF1c2VfYnV0dG9uID09IG51bGwgfHwgdGhpcy5pbmZvX2lzX2RvbmUgPT0gbnVsbCB8fCB0aGlzLnN0ZXBfYnV0dG9uID09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIGluaXQoKSBmaXJzdCFcIik7XG5cbiAgICAgICAgdGhpcy5tZW51Lm1lbW9yeS5pbml0KCk7XG5cbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlX2J1dHRvbi5pbm5lckhUTUwgPSBcIlBsYXlcIjtcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gICAgXG4gICAgICAgIHRoaXMuaW5mb19pc19kb25lLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RlcF9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLmluaXRTdGF0ZVRhYmxlKCk7XG4gICAgfVxuXG4gICAgc3RhcnRBbmltYXRpb24oKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKHRydWUpO1xuICAgIH1cblxuICAgIGRyYXdDdXJyZW50U3RhdGUoKTogdm9pZCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZWZyZXNoIGluZm9cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVmcmVzaEluZm8oKTtcblxuICAgICAgICB0aGlzLmRyYXdDYWxscygpO1xuICAgIH1cblxuICAgIGluaXRTdGF0ZVRhYmxlKCk6IHZvaWQge1xuICAgICAgICAvKiBncmFiIGVsZW1lbnRzICovXG4gICAgICAgIGNvbnN0IHRpbWVfcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfdGltZVwiKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50O1xuICAgICAgICBjb25zdCBjYWxsc19yb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuaW1hdGlvbl90YWJsZV9wYWdlX2NhbGxzXCIpIGFzIEhUTUxUYWJsZVJvd0VsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfYm9keVwiKSBhcyBIVE1MVGFibGVTZWN0aW9uRWxlbWVudDtcblxuICAgICAgICAvKiBjbGVhciB0YWJsZSAqL1xuICAgICAgICB0aW1lX3Jvdy5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBjYWxsc19yb3cuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgICAgICAvKiB0aW1lICovXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVfcm93X2hlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcbiAgICAgICAgICAgIHRpbWVfcm93X2hlYWRlci5pbm5lckhUTUwgPSBcIlRpbWVcIjtcbiAgICAgICAgICAgIHRpbWVfcm93X2hlYWRlci5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyXCIpO1xuICAgICAgICAgICAgdGltZV9yb3cuYXBwZW5kQ2hpbGQodGltZV9yb3dfaGVhZGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGNhbGxzICovXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxzX3Jvd19oZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XG4gICAgICAgICAgICBjYWxsc19yb3dfaGVhZGVyLmlubmVySFRNTCA9IFwiUGFnZSBjYWxsc1wiO1xuICAgICAgICAgICAgY2FsbHNfcm93X2hlYWRlci5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyXCIpO1xuICAgICAgICAgICAgY2FsbHNfcm93LmFwcGVuZENoaWxkKGNhbGxzX3Jvd19oZWFkZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogZnJhbWVzICovXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIHJlbW92ZSBvbGQgcm93cyAqL1xuICAgICAgICAgICAgd2hpbGUgKHRib2R5Lmxhc3RDaGlsZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSAodGJvZHkubGFzdENoaWxkIGFzIEhUTUxFbGVtZW50KS5pZDtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPT0gXCJhbmltYXRpb25fdGFibGVfcGFnZV9jYWxsc1wiKSAvLyBza2lwIHRoZSByb3cgd2l0aCBwYWdlIGNhbGxzXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgdGJvZHkucmVtb3ZlQ2hpbGQodGJvZHkubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogYWRkIGEgcm93IGZvciBlYWNoIGZyYW1lICovXG4gICAgICAgICAgICBjb25zdCBmcmFtZV9yb3dzOiBBcnJheTxIVE1MVGFibGVSb3dFbGVtZW50PiA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbnUubWVtb3J5Lm51bWJlcl9vZl9mcmFtZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lX3JvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lX3Jvd19oZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XG4gICAgICAgICAgICAgICAgZnJhbWVfcm93X2hlYWRlci5pbm5lckhUTUwgPSBgRnJhbWUgJHtpfWA7XG4gICAgICAgICAgICAgICAgZnJhbWVfcm93LmFwcGVuZENoaWxkKGZyYW1lX3Jvd19oZWFkZXIpO1xuXG4gICAgICAgICAgICAgICAgZnJhbWVfcm93cy5wdXNoKGZyYW1lX3Jvdyk7XG4gICAgICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoZnJhbWVfcm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZnJhbWVfcm93cyA9IGZyYW1lX3Jvd3M7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkcmF3Q2FsbHMoU1RBUlRfWD86IG51bWJlciwgU1RBUlRfWT86IG51bWJlciwgV0lEVEg/OiBudW1iZXIsIEhFSUdIVD86IG51bWJlciwgY2FsbHNUb0RyYXc/OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgLyogZ3JhYiBlbGVtZW50cyAqL1xuICAgICAgICBjb25zdCB0aW1lX3JvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW5pbWF0aW9uX3RhYmxlX3RpbWVcIikgYXMgSFRNTFRhYmxlUm93RWxlbWVudDtcbiAgICAgICAgY29uc3QgY2FsbHNfcm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fdGFibGVfcGFnZV9jYWxsc1wiKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50O1xuXG4gICAgICAgIC8qIG9ubHkgYWRkIG9uZSBjb2x1bW4gZm9yIHRoZSBuZXcgc3RhdGUgKi9cbiAgICAgICAgY29uc3QgbmV3Q2FsbCA9IHRoaXMubWVudS5tZW1vcnkucHJldmlvdXNfcGFnZV9jYWxscy5hdCgtMSk7XG4gICAgICAgIGlmIChuZXdDYWxsID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgLyogdGltZSAqL1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0aW1lVGlja0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgICAgICAgICAgdGltZVRpY2tFbC5pbm5lckhUTUwgPSBgJHt0aGlzLm1lbnUubWVtb3J5LnRpbWV9YDtcbiAgICAgICAgICAgIHRpbWVfcm93LmFwcGVuZENoaWxkKHRpbWVUaWNrRWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogY2FsbHMgKi9cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgY2FsbHNUaWNrRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XG4gICAgICAgICAgICBjYWxsc1RpY2tFbC5pbm5lckhUTUwgPSBgJHtuZXdDYWxsLmlkfWA7XG5cbiAgICAgICAgICAgIGNhbGxzX3Jvdy5hcHBlbmRDaGlsZChjYWxsc1RpY2tFbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBmcmFtZXMgKi9cbiAgICAgICAge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbnUubWVtb3J5Lm51bWJlcl9vZl9mcmFtZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lX3JvdyA9IHRoaXMuZnJhbWVfcm93c1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYWdlID0gdGhpcy5tZW51Lm1lbW9yeS5mcmFtZXNbaV0ucGFnZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lVGlja0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgICAgICAgICAgICAgIGZyYW1lVGlja0VsLmlubmVySFRNTCA9IGAke3BhZ2UgIT0gbnVsbCA/IHBhZ2UuaWQgOiBcIlwifWA7XG5cbiAgICAgICAgICAgICAgICAvLyBtYWtlIHBhZ2UgZmF1bHRzIHJlZFxuICAgICAgICAgICAgICAgIGlmIChwYWdlICE9IG51bGwgJiYgcGFnZS5pZCA9PSBuZXdDYWxsLmlkICYmIHRoaXMubWVudS5tZW1vcnkubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCkge1xuICAgICAgICAgICAgICAgICAgICBmcmFtZVRpY2tFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZyYW1lX3Jvdy5hcHBlbmRDaGlsZChmcmFtZVRpY2tFbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiBzY3JvbGwgdG8gdGhlIHJpZ2h0ICovXG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmltYXRpb25fY2FsbF90YWJsZVwiKSBhcyBIVE1MVGFibGVFbGVtZW50O1xuICAgICAgICB0YWJsZS5zY3JvbGxMZWZ0ID0gdGFibGUuc2Nyb2xsV2lkdGg7XG4gICAgfVxuXG4gICAgcmVmcmVzaEluZm8oKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG1lbW9yeSA9IHRoaXMubWVudS5tZW1vcnk7XG4gICAgICAgIGlmIChtZW1vcnkuYWxnb3JpdGhtID09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIHN0YXJ0QW5pbWF0aW9uKCkgZmlyc3QhXCIpO1xuXG4gICAgICAgIHRoaXMuaW5mb19hbGdvcml0aG0hLmlubmVySFRNTCA9IG1lbW9yeS5hbGdvcml0aG0ubmFtZTtcbiAgICAgICAgdGhpcy5pbmZvX3RpbWUhLmlubmVySFRNTCA9IG1lbW9yeS50aW1lLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgaWYgKG1lbW9yeS5pc0ZpbmlzaGVkKCkpXG4gICAgICAgICAgICB0aGlzLmluZm9faXNfZG9uZSEuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICB0aGlzLmluZm9fdG90YWxfcGFnZV9oaXRzIS5pbm5lckhUTUwgPSAobWVtb3J5LnByZXZpb3VzX3BhZ2VfY2FsbHMubGVuZ3RoIC0gIG1lbW9yeS50b3RhbF9wYWdlX2ZhdWx0cykudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5pbmZvX3RvdGFsX3BhZ2VfZmF1bHRzIS5pbm5lckhUTUwgPSBtZW1vcnkudG90YWxfcGFnZV9mYXVsdHMudG9TdHJpbmcoKTtcblxuICAgICAgICB0aGlzLmluZm9faW5fcXVldWUhLmlubmVySFRNTCA9IG1lbW9yeS5wYWdlX2NhbGxfcXVldWUubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuaW5mb19maW5pc2hlZCEuaW5uZXJIVE1MID0gbWVtb3J5LnByZXZpb3VzX3BhZ2VfY2FsbHMubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaFNwZWVkKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5zdG9yZWRTZXRJbnRlcnZhbCAhPSBudWxsKVxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0b3JlZFNldEludGVydmFsKTtcblxuICAgICAgICB0aGlzLnN0b3JlZFNldEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXlpbmcpe1xuICAgICAgICAgICAgICAgIHRoaXMuc3RlcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5iaW5kKHRoaXMpLCAxMDAwIC8gdGhpcy5zcGVlZCk7XG4gICAgfVxuXG4gICAgc3RlcCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubWVudS5tZW1vcnkuaXNGaW5pc2hlZCgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMubWVudS5tZW1vcnkubmV4dFRpY2soKTtcbiAgICAgICAgdGhpcy5kcmF3Q3VycmVudFN0YXRlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMubWVudS5tZW1vcnkuaXNGaW5pc2hlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXlpbmcoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5tZW51Lm1lbW9yeS5kaXNwbGF5UmVzdWx0cyh0aGlzLm1lbnUubWVtb3J5LmdldFJlc3VsdHMoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJEb25lKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZnRlckRvbmUoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmluZm9faXNfZG9uZSA9PSBudWxsIHx8IHRoaXMucGxheV9wYXVzZV9idXR0b24gPT0gbnVsbCB8fCB0aGlzLnN0ZXBfYnV0dG9uID09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWxsIGluaXQoKSBmaXJzdCFcIik7XG5cbiAgICAgICAgdGhpcy5pbmZvX2lzX2RvbmUuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgICB0aGlzLnBsYXlfcGF1c2VfYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdGVwX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxufSIsImltcG9ydCBQYWdlIGZyb20gXCIuL1BhZ2VcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGcmFtZSB7XG4gICAgcGFnZTogUGFnZSB8IG51bGxcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBhZ2UgPSBudWxsO1xuICAgIH1cbn1cbiIsImltcG9ydCBQYWdlIGZyb20gXCIuL1BhZ2VcIlxuaW1wb3J0IEZyYW1lIGZyb20gXCIuL0ZyYW1lXCJcbmltcG9ydCBSZXBsYWNlbWVudEFsZ29yaXRobSwgeyBNZW1vcnlTdGF0ZURhdGEgfSBmcm9tIFwiLi9SZXBsYWNlbWVudEFsZ29yaXRobVwiXG5cbnR5cGUgcmVzdWx0cyA9IHtcbiAgICB0b3RhbF9wYWdlX2ZhdWx0czogbnVtYmVyLFxuICAgIHRvdGFsX3BhZ2VfaGl0czogbnVtYmVyLFxuICAgIHRvdGFsX3BhZ2VfY2FsbHM6IG51bWJlclxufVxuXG4vKipcbiAqIE1lbW9yeSBNYW5hZ2VtZW50IFVuaXRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTU1VIHtcbiAgICBudW1iZXJfb2ZfcGFnZXM6IG51bWJlciA9IDBcbiAgICBudW1iZXJfb2ZfZnJhbWVzOiBudW1iZXIgPSAwXG5cbiAgICBwYWdlX2NhbGxfcG9vbDogQXJyYXk8UGFnZT4gPSBbXVxuICAgIHBhZ2VfY2FsbF9xdWV1ZTogQXJyYXk8UGFnZT4gPSBbXVxuICAgIHByZXZpb3VzX3BhZ2VfY2FsbHM6IEFycmF5PFBhZ2U+ID0gW11cblxuICAgIGZyYW1lczogQXJyYXk8RnJhbWU+ID0gW11cblxuICAgIGFsZ29yaXRobTogUmVwbGFjZW1lbnRBbGdvcml0aG0gfCBudWxsID0gbnVsbFxuICAgIGxhc3RfcmVwbGFjZWRfaW5kZXg6IG51bWJlciA9IC0xXG5cbiAgICB0b3RhbF9wYWdlX2ZhdWx0czogbnVtYmVyXG4gICAgdGltZTogbnVtYmVyXG5cbiAgICBsYXN0X2NhbGxfY2F1c2VkX2ZhdWx0OiBib29sZWFuID0gZmFsc2VcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRpbWUgPSAwO1xuICAgICAgICB0aGlzLnRvdGFsX3BhZ2VfZmF1bHRzID0gMDtcbiAgICB9XG5cbiAgICBpbml0KG51bWJlcl9vZl9wYWdlcz86IG51bWJlciwgbnVtYmVyX29mX2ZyYW1lcz86IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLm51bWJlcl9vZl9wYWdlcyA9IG51bWJlcl9vZl9wYWdlcyA/PyB0aGlzLm51bWJlcl9vZl9wYWdlcztcbiAgICAgICAgdGhpcy5udW1iZXJfb2ZfZnJhbWVzID0gbnVtYmVyX29mX2ZyYW1lcyA/PyB0aGlzLm51bWJlcl9vZl9mcmFtZXM7XG5cbiAgICAgICAgdGhpcy5wYWdlX2NhbGxfcXVldWUgPSBbLi4udGhpcy5wYWdlX2NhbGxfcG9vbF07IC8vIGNvcHkgYXJyYXlcbiAgICAgICAgdGhpcy5mcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcmV2aW91c19wYWdlX2NhbGxzID0gW107XG5cbiAgICAgICAgdGhpcy50aW1lID0gMDtcbiAgICAgICAgdGhpcy50b3RhbF9wYWdlX2ZhdWx0cyA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bWJlcl9vZl9mcmFtZXM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5mcmFtZXMucHVzaChuZXcgRnJhbWUoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRQYWdlQ2FsbFRvUG9vbChwYWdlX2NhbGw6IFBhZ2UpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wYWdlX2NhbGxfcG9vbC5wdXNoKHBhZ2VfY2FsbCk7XG4gICAgfVxuXG4gICAgYWRkUGFnZUNhbGxzVG9Qb29sKHBhZ2VfY2FsbHM6IEFycmF5PG51bWJlcj4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlX2NhbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VfY2FsbF9wb29sLnB1c2gobmV3IFBhZ2UocGFnZV9jYWxsc1tpXSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xlYXJQYWdlQ2FsbFBvb2woKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGFnZV9jYWxsX3Bvb2wgPSBbXTtcbiAgICB9XG5cbiAgICBzZXRBbGdvcml0aG0oYWxnb3JpdGhtOiBSZXBsYWNlbWVudEFsZ29yaXRobSk6IHZvaWQge1xuICAgICAgICB0aGlzLmFsZ29yaXRobSA9IGFsZ29yaXRobTtcbiAgICB9XG5cbiAgICBuZXh0VGljaygpOiB2b2lkIHtcbiAgICAgICAgLyogZW5zdXJlIHRoYXQgYW4gYWxnb3JpdGhtIGlzIHNlbGVjdGVkICovXG4gICAgICAgIGlmICh0aGlzLmFsZ29yaXRobSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhbGdvcml0aG0gc2VsZWN0ZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYWdlX2NhbGwgPSB0aGlzLnBhZ2VfY2FsbF9xdWV1ZS5zaGlmdCgpO1xuXG4gICAgICAgIC8qIG5vIHBhZ2UgY2FsbCBhdCB0aGlzIHRpbWUgKi9cbiAgICAgICAgaWYgKHBhZ2VfY2FsbCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFbXB0eSBwYWdlIGNhbGwgcXVldWUgYnV0IG5vdCBmaW5pc2hlZFwiKTtcbiAgICAgICAgICAgIHRoaXMudGltZSsrO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnByZXZpb3VzX3BhZ2VfY2FsbHMucHVzaChwYWdlX2NhbGwpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlBhZ2UgY2FsbDogXCIgKyBwYWdlX2NhbGwuaWQpO1xuXG4gICAgICAgIGlmIChwYWdlX2NhbGwpIHtcbiAgICAgICAgICAgIHRoaXMuYWxnb3JpdGhtLm9uUGFnZUNhbGw/LihwYWdlX2NhbGwpO1xuXG4gICAgICAgICAgICAvKiBjaGVjayBpZiB0aGVyZSBpcyBhIHBhZ2UgZmF1bHQgKi9cbiAgICAgICAgICAgIGxldCBwYWdlX2ZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mcmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZXNbaV0gPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnJhbWUgaXMgbnVsbFwiKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lc1tpXS5wYWdlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogaW5zZXJ0IGludG8gdGhlIGZpcnN0IGZyZWUgZnJhbWUgKi9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmFtZXNbaV0ucGFnZSA9IHBhZ2VfY2FsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0X3JlcGxhY2VkX2luZGV4ID0gaTtcblxuICAgICAgICAgICAgICAgICAgICAvKiBpbmNyZW1lbnQgdGhlIHRvdGFsIHBhZ2UgZmF1bHRzICovXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxfcGFnZV9mYXVsdHMrKztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0ID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBwYWdlX2ZhdWx0ID0gZmFsc2U7IC8vIHBhZ2UgZmF1bHQgYWxyZWFkeSBoYW5kbGVkXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICgoPFBhZ2U+IHRoaXMuZnJhbWVzW2ldLnBhZ2UpLmlkID09IHBhZ2VfY2FsbC5pZCkge1xuICAgICAgICAgICAgICAgICAgICAvKiBwYWdlIGlzIGFscmVhZHkgaW4gbWVtb3J5ICovXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxnb3JpdGhtLm9uUGFnZUFscmVhZHlJbk1lbW9yeT8uKHBhZ2VfY2FsbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0X2NhbGxfY2F1c2VkX2ZhdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VfZmF1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBoYW5kbGUgcGFnZSBmYXVsdCAqL1xuICAgICAgICAgICAgaWYgKHBhZ2VfZmF1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhZ2UgZmF1bHQ6IFwiICsgcGFnZV9jYWxsLmlkKTtcblxuICAgICAgICAgICAgICAgIC8qIGVuc3VyZSB0aGF0IHRoZXJlIGFyZSBubyBmcmVlIGZyYW1lcyAqL1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lcy5maW5kKGZyYW1lID0+IGZyYW1lLnBhZ2UgPT0gbnVsbCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbml0aWFsIHBhZ2UgZmlsbCBub3QgaGFuZGxlZCBwcm9wZXJseVwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKiBpbmNyZW1lbnQgdGhlIHRvdGFsIHBhZ2UgZmF1bHRzICovXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlX2ZhdWx0cysrO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdF9jYWxsX2NhdXNlZF9mYXVsdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAvKiByZXBsYWNlIGEgcGFnZSAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGE6IE1lbW9yeVN0YXRlRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZV9jYWxsOiBwYWdlX2NhbGwsXG4gICAgICAgICAgICAgICAgICAgIGxhc3RfcmVwbGFjZWRfaW5kZXg6IHRoaXMubGFzdF9yZXBsYWNlZF9pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9mcmFtZXM6IHRoaXMuZnJhbWVzLFxuICAgICAgICAgICAgICAgICAgICBmdXR1cmVfcGFnZV9jYWxsczogdGhpcy5wYWdlX2NhbGxfcXVldWUsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzX3BhZ2VfY2FsbHM6IHRoaXMucHJldmlvdXNfcGFnZV9jYWxsc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhfdG9fcmVwbGFjZSA9IHRoaXMuYWxnb3JpdGhtLmhhbmRsZVBhZ2VGYXVsdChkYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lc1tpbmRleF90b19yZXBsYWNlXS5wYWdlID0gcGFnZV9jYWxsO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0X3JlcGxhY2VkX2luZGV4ID0gaW5kZXhfdG9fcmVwbGFjZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogZW5zdXJlIHRoYXQgdGhlIHBhZ2UgaXMgbm93IGluIG1lbW9yeSAqL1xuICAgICAgICAgICAgbGV0IHBhZ2VfaW5fbWVtb3J5ID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZyYW1lIG9mIHRoaXMuZnJhbWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lLnBhZ2UgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBpZiAoKDxQYWdlPiBmcmFtZS5wYWdlKS5pZCA9PSBwYWdlX2NhbGwuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogcGFnZSBpcyBpbiBtZW1vcnkgKi9cbiAgICAgICAgICAgICAgICAgICAgcGFnZV9pbl9tZW1vcnkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBhZ2VfaW5fbWVtb3J5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFnZSBmYXVsdCBub3QgaGFuZGxlZCBwcm9wZXJseSAtIHBhZ2Ugbm90IGluIG1lbW9yeVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogY2FsbCB0aGUgcGFnZSAqL1xuICAgICAgICAgICAgcGFnZV9jYWxsLmNhbGwodGhpcy50aW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGltZSsrO1xuICAgIH1cblxuICAgIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhZ2VfY2FsbF9xdWV1ZS5sZW5ndGggPT0gMDtcbiAgICB9XG5cbiAgICBzaW11bGF0ZSgpOiByZXN1bHRzIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG5cbiAgICAgICAgd2hpbGUgKCF0aGlzLmlzRmluaXNoZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5uZXh0VGljaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzdWx0cygpO1xuICAgIH1cblxuICAgIGdldFJlc3VsdHMoKTogcmVzdWx0cyB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3RhbF9wYWdlX2ZhdWx0czogdGhpcy50b3RhbF9wYWdlX2ZhdWx0cyxcbiAgICAgICAgICAgIHRvdGFsX3BhZ2VfaGl0czogdGhpcy5wcmV2aW91c19wYWdlX2NhbGxzLmxlbmd0aCAtIHRoaXMudG90YWxfcGFnZV9mYXVsdHMsXG4gICAgICAgICAgICB0b3RhbF9wYWdlX2NhbGxzOiB0aGlzLnByZXZpb3VzX3BhZ2VfY2FsbHMubGVuZ3RoXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdmlzdWFsaXphdGlvbiAmIG91dHB1dFxuICAgICAqL1xuXG4gICAgcHJpbnRGcmFtZXMoKTogdm9pZCB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRnJhbWVzOlwiKTtcbiAgICAgICAgZm9yIChjb25zdCBmcmFtZSBvZiB0aGlzLmZyYW1lcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZnJhbWUucGFnZSA/IGZyYW1lLnBhZ2UuaWQgOiBcIm51bGxcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNwbGF5UmVzdWx0cyhyZXN1bHRzOiByZXN1bHRzLCBhbGdTdHI6IHN0cmluZyA9ICg8QWxnb3JpdGhtPiB0aGlzLmFsZ29yaXRobSkubmFtZSk6IHZvaWQge1xuICAgICAgICBjb25zdCByZXN1bHRzX3dyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNfd3JhcHBlclwiKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgcmVzdWx0c193cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcblxuICAgICAgICBjb25zdCByZXN1bHRzX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzXCIpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICByZXN1bHRzX2VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgQWxnb3JpdGhtOiAke2FsZ1N0ci50b1VwcGVyQ2FzZSgpfVxuXG4gICAgICAgIFRvdGFsIHBhZ2UgZmF1bHRzOiA8YiBzdHlsZT0nY29sb3I6IHJlZCc+JHtyZXN1bHRzLnRvdGFsX3BhZ2VfZmF1bHRzLnRvRml4ZWQoMCl9PC9iPlxuICAgICAgICBUb3RhbCBwYWdlIGhpdHM6IDxiIHN0eWxlPSdjb2xvcjogbGltZSc+JHtyZXN1bHRzLnRvdGFsX3BhZ2VfaGl0cy50b0ZpeGVkKDApfTwvYj5cbiAgICAgICAgVG90YWwgcGFnZSBjYWxsczogPGI+JHtyZXN1bHRzLnRvdGFsX3BhZ2VfY2FsbHMudG9GaXhlZCgwKX08L2I+XG4gICAgICAgIGAucmVwbGFjZShSZWdFeHAoXCJcXG5cIiwgXCJnXCIpLCBcIjxiciAvPlwiKTtcbiAgICB9XG5cbiAgICBjb21wYXJlQWxsQW5kRGlzcGxheVJlc3VsdHMoYWxnb3JpdGhtczogQXJyYXk8UmVwbGFjZW1lbnRBbGdvcml0aG0+KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHNfd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c193cmFwcGVyXCIpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICByZXN1bHRzX3dyYXBwZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdHNfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNcIikgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHJlc3VsdHNfZWwuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsZ29yaXRobXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QWxnb3JpdGhtKGFsZ29yaXRobXNbaV0pO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0czogcmVzdWx0cyA9IHRoaXMuc2ltdWxhdGUoKTtcblxuICAgICAgICAgICAgcmVzdWx0c19lbC5pbm5lckhUTUwgKz0gYFxuICAgICAgICAgICAgQWxnb3JpdGhtOiAke2FsZ29yaXRobXNbaV0ubmFtZS50b1VwcGVyQ2FzZSgpfVxuICAgICAgICAgICAgVG90YWwgcGFnZSBmYXVsdHM6IDxiIHN0eWxlPSdjb2xvcjogcmVkJz4ke3Jlc3VsdHMudG90YWxfcGFnZV9mYXVsdHMudG9GaXhlZCgwKX08L2I+XG4gICAgICAgICAgICBUb3RhbCBwYWdlIGhpdHM6IDxiIHN0eWxlPSdjb2xvcjogbGltZSc+JHtyZXN1bHRzLnRvdGFsX3BhZ2VfaGl0cy50b0ZpeGVkKDApfTwvYj5cbiAgICAgICAgICAgIFRvdGFsIHBhZ2UgY2FsbHM6IDxiPiR7cmVzdWx0cy50b3RhbF9wYWdlX2NhbGxzLnRvRml4ZWQoMCl9PC9iPlxuICAgICAgICAgICAgYC5yZXBsYWNlKFJlZ0V4cChcIlxcblwiLCBcImdcIiksIFwiPGJyIC8+XCIpO1xuXG4gICAgICAgICAgICByZXN1bHRzX2VsLmlubmVySFRNTCArPSBcIjxiciAvPlwiO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBJTWVudSBmcm9tIFwiLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvSU1lbnVcIjtcbmltcG9ydCBEaXNwbGF5IGZyb20gXCIuLi8uLi9zaGFyZWQvY2xhc3Nlcy9EaXNwbGF5XCI7XG5cbmltcG9ydCBBbmltYXRpb25HVUkgZnJvbSBcIi4vQW5pbWF0aW9uR1VJXCI7XG5pbXBvcnQgTU1VIGZyb20gXCIuL01NVVwiO1xuaW1wb3J0IFBhZ2UgZnJvbSBcIi4vUGFnZVwiO1xuXG5pbXBvcnQgRklGTyBmcm9tIFwiLi9hbGdvcml0aG1zL0ZJRk9cIjtcbmltcG9ydCBPUFQgZnJvbSBcIi4vYWxnb3JpdGhtcy9PUFRcIjtcbmltcG9ydCBMUlUgZnJvbSBcIi4vYWxnb3JpdGhtcy9MUlVcIjtcbmltcG9ydCBBTFJVIGZyb20gXCIuL2FsZ29yaXRobXMvQUxSVVwiO1xuaW1wb3J0IFJBTkQgZnJvbSBcIi4vYWxnb3JpdGhtcy9SQU5EXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lbnUgaW1wbGVtZW50cyBJTWVudSB7XG4gICAgZGlzcGxheTogRGlzcGxheVxuICAgIG1lbW9yeTogTU1VXG4gICAgYW5pbWF0aW9uR1VJOiBBbmltYXRpb25HVUlcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheSgpO1xuICAgICAgICB0aGlzLm1lbW9yeSA9IG5ldyBNTVUoKTtcblxuICAgICAgICB0aGlzLmFuaW1hdGlvbkdVSSA9IG5ldyBBbmltYXRpb25HVUkodGhpcyk7XG4gICAgfVxuXG4gICAgaW5pdCgpOiB2b2lkIHsgIFxuICAgICAgICBjb25zdCBydW5fYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJydW5fYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBydW5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMucnVuKCkgfSk7XG5cbiAgICAgICAgY29uc3QgcnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgcnVuX3dpdGhfYW5pbWF0aW9uX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLnJ1bih0cnVlKSB9KTtcblxuICAgICAgICBjb25zdCBhZGRfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRfYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBhZGRfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuYWRkQ2FsbHMoKSB9KTtcblxuICAgICAgICBjb25zdCBjbGVhcl9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsZWFyX2J1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgY2xlYXJfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IHRoaXMuY2xlYXJDYWxscygpIH0pO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIGluaXQgXG4gICAgICAgICAqIHNldCBjYWxsYmFjayBmb3IgcmVzaXplXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1lbW9yeS5pbml0KDUsIDMpO1xuICAgICAgICB0aGlzLmRpc3BsYXkuaW5pdChcIm1haW5fY2FudmFzXCIpO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkdVSS5pbml0KCk7XG4gICAgICAgIHRoaXMuZGlzcGxheS5zZXRSZXNpemVDYWxsYmFjaygoKSA9PiB7IHRoaXMucmVmcmVzaENhbGxzKCkgfSk7XG5cbiAgICAgICAgLyoqIFxuICAgICAgICAgKiBiYXNpYyBzZXR0aW5nc1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgbnVtYmVyX29mX3BhZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzX3BhZ2VfY291bnRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgbnVtYmVyX29mX3BhZ2VzLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdfdmFsID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PiBlLnRhcmdldCkudmFsdWUpO1xuXG4gICAgICAgICAgICBpZiAoaXNOYU4obmV3X3ZhbCkgfHwgbmV3X3ZhbCA8IDEpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkludmFsaWQgbnVtYmVyIG9mIHBhZ2VzXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5tZW1vcnkuaW5pdChuZXdfdmFsLCB0aGlzLm1lbW9yeS5udW1iZXJfb2ZfZnJhbWVzKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDYWxscygpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbnVtYmVyX29mX2ZyYW1lcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic19mcmFtZV9jb3VudFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBudW1iZXJfb2ZfZnJhbWVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdfdmFsID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PiBlLnRhcmdldCkudmFsdWUpO1xuXG4gICAgICAgICAgICBpZiAoaXNOYU4obmV3X3ZhbCkgfHwgbmV3X3ZhbCA8IDEpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkludmFsaWQgbnVtYmVyIG9mIGZyYW1lc1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubWVtb3J5LmluaXQodGhpcy5tZW1vcnkubnVtYmVyX29mX3BhZ2VzLCBuZXdfdmFsKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkaXN0cmlidXRpb24gc2VsZWN0XG4gICAgICAgICAqIC0+IHNob3cvaGlkZSBzcGVjaWZpYyBvcHRpb25zXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBkaXN0cmlidXRpb25fc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjX2Rpc3RyaWJ1dGlvblwiKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICAgICAgZGlzdHJpYnV0aW9uX3NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGlzdHJpYnV0aW9uID0gKDxIVE1MU2VsZWN0RWxlbWVudD4gZS50YXJnZXQpLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHdpbmRvd19zaXplX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjX3dpbmRvd19zaXplX2FsbFwiKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHdpbmRvd19kZWx0YV9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY193aW5kb3dfZGVsdGFfYWxsXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGRpc3RyaWJ1dGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ1bmlmb3JtXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3dfc2l6ZV9lbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd19kZWx0YV9lbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwibG9jYWxpdHlcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd19zaXplX2VsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd19kZWx0YV9lbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiSW52YWxpZCBkaXN0cmlidXRpb25cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogYWxnb3JpdGhtIHNlbGVjdFxuICAgICAgICAgKiAtPiBkaXNhYmxlIHJ1bm5pbmcgd2l0aCBhbmltYXRpb24gaWYgY29tcGFyZV9hbGxcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGFsZ29yaXRobV9zZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFfdHlwZVwiKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICAgICAgYWxnb3JpdGhtX3NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlOiBFdmVudCkgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCg8SFRNTFNlbGVjdEVsZW1lbnQ+IGUudGFyZ2V0KS52YWx1ZS50b0xvd2VyQ2FzZSgpID09PSBcImNvbXBhcmVfYWxsXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgKDxIVE1MQnV0dG9uRWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJydW5fd2l0aF9hbmltYXRpb25fYnV0dG9uXCIpKS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgKDxIVE1MQnV0dG9uRWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJydW5fd2l0aF9hbmltYXRpb25fYnV0dG9uXCIpKS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogXG4gICAgICAgICAqIHJlc3VsdHMgYnV0dG9uc1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgcmVzdWx0c19jbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0c19jbG9zZVwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgcmVzdWx0c19jbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgKDxIVE1MRGl2RWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRzX3dyYXBwZXJcIikpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLypcbiAgICAgICAgICogcmVmcmVzaCBjYWxscyBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVmcmVzaENhbGxzKCk7XG4gICAgfSBcblxuICAgIGFkZENhbGxzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBkaXN0cmlidXRpb24gPSAoPEhUTUxJbnB1dEVsZW1lbnQ+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY19kaXN0cmlidXRpb25cIikpLnZhbHVlO1xuICAgICAgICBjb25zdCBjYWxsX2NvdW50ID0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNfY291bnRcIikpLnZhbHVlKTtcblxuICAgICAgICBzd2l0Y2ggKGRpc3RyaWJ1dGlvbikge1xuICAgICAgICAgICAgY2FzZSBcInVuaWZvcm1cIjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvKiBnZW5lcmF0ZSBjYWxscyAqL1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FsbF9jb3VudDsgaSsrKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuYWRkUGFnZUNhbGxzVG9Qb29sKFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLm1lbW9yeS5udW1iZXJfb2ZfcGFnZXMpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImxvY2FsaXR5XCI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2luZG93X3NpemUgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY193aW5kb3dfc2l6ZVwiKSkudmFsdWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdpbmRvd19kZWx0YSA9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjX3dpbmRvd19kZWx0YVwiKSkudmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgLyogdmFsaWRhdGUgaW5wdXQgKi9cbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4od2luZG93X3NpemUpIHx8IGlzTmFOKHdpbmRvd19kZWx0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJJbnZhbGlkIGlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3dfc2l6ZSA+IHRoaXMubWVtb3J5Lm51bWJlcl9vZl9wYWdlcykge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIldpbmRvdyBzaXplIGlzIGJpZ2dlciB0aGFuIG51bWJlciBvZiBwYWdlc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAod2luZG93X2RlbHRhID4gdGhpcy5tZW1vcnkubnVtYmVyX29mX3BhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiV2luZG93IGRlbHRhIGlzIGJpZ2dlciB0aGFuIG51bWJlciBvZiBwYWdlc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qIGdlbmVyYXRlIGNhbGxzICovXG4gICAgICAgICAgICAgICAgbGV0IHdpbmRvd19zdGFydCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0aGlzLm1lbW9yeS5udW1iZXJfb2ZfcGFnZXMgLSB3aW5kb3dfc2l6ZSkpO1xuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjYWxsX2NvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZV9pZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpbmRvd19zaXplKSArIHdpbmRvd19zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuYWRkUGFnZUNhbGxzVG9Qb29sKFtwYWdlX2lkXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLyogbW92ZSB3aW5kb3cgYnkgZGVsdGEgaW4gcmFuZ2UgWy13aW5kb3dfZGVsdGEsIHdpbmRvd19kZWx0YV0gKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAod2luZG93X2RlbHRhICogMiArIDEpKSAtIHdpbmRvd19kZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93X3N0YXJ0ID0gKHdpbmRvd19zdGFydCArIGRlbHRhKSAlICh0aGlzLm1lbW9yeS5udW1iZXJfb2ZfcGFnZXMgLSB3aW5kb3dfc2l6ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLyogYXZvaWQgMCAlIDAgKi9cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVtb3J5Lm51bWJlcl9vZl9wYWdlcyAtIHdpbmRvd19zaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dfc3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLyogbWFrZSBzdXJlIHdpbmRvd19zdGFydCBpcyBpbiByYW5nZSBbMCwgbnVtYmVyX29mX3BhZ2VzIC0gd2luZG93X3NpemVdICovXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3dfc3RhcnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dfc3RhcnQgKz0gdGhpcy5tZW1vcnkubnVtYmVyX29mX3BhZ2VzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiSW52YWxpZCBkaXN0cmlidXRpb25cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbHMoKTtcbiAgICB9XG5cbiAgICBjbGVhckNhbGxzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm1lbW9yeS5jbGVhclBhZ2VDYWxsUG9vbCgpO1xuICAgICAgICB0aGlzLnJlZnJlc2hDYWxscygpO1xuICAgIH1cblxuICAgIHJlZnJlc2hDYWxscygpOiB2b2lkIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDYWxscyBpbiBwb29sOiBcIiArIHRoaXMubWVtb3J5LnBhZ2VfY2FsbF9wb29sLmxlbmd0aCk7XG5cbiAgICAgICAgY29uc3QgY3VycmVudF9jb3VudF9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicF9jdXJyZW50X2NvdW50XCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xuICAgICAgICBjdXJyZW50X2NvdW50X2VsLmlubmVySFRNTCA9IGAoJHt0aGlzLm1lbW9yeS5wYWdlX2NhbGxfcG9vbC5sZW5ndGgudG9TdHJpbmcoKX0pYDtcblxuICAgICAgICBjb25zdCBjdXJyZW50X3BhZ2VfY2FsbHNfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImN1cnJlbnRfcGFnZV9jYWxsc192YWxcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XG4gICAgICAgIGN1cnJlbnRfcGFnZV9jYWxsc19lbC5pbm5lckhUTUwgPSB0aGlzLm1lbW9yeS5wYWdlX2NhbGxfcG9vbC5yZWR1Y2UoKGFjYzogc3RyaW5nLCBwYWdlX2NhbGw6IFBhZ2UpID0+IGFjYyArIHBhZ2VfY2FsbC5pZC50b1N0cmluZygpICsgXCIsIFwiLCBcIlwiKS5zbGljZSgwLCAtMik7XG5cbiAgICAgICAgaWYodGhpcy5tZW1vcnkucGFnZV9jYWxsX3Bvb2wubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGN1cnJlbnRfcGFnZV9jYWxsc19lbC5pbm5lckhUTUwgPSBcIjxzcGFuIHN0eWxlPSdjb2xvcjogeWVsbG93Jz5lbXB0eTwvc3Bhbj5cIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJ1bihhbmltYXRpb24/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFsZ1N0ciA9ICg8SFRNTElucHV0RWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhX3R5cGVcIikpLnZhbHVlO1xuICAgICAgICBsZXQgY29tcGFyZV9hbGw6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgICAgICBzd2l0Y2goYWxnU3RyLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJmaWZvXCI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkuc2V0QWxnb3JpdGhtKG5ldyBGSUZPKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcIm9wdFwiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMubWVtb3J5LnNldEFsZ29yaXRobShuZXcgT1BUKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImxydVwiOlxuICAgICAgICAgICAgeyAgIFxuICAgICAgICAgICAgICAgIHRoaXMubWVtb3J5LnNldEFsZ29yaXRobShuZXcgTFJVKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImFscnVcIjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9yeS5zZXRBbGdvcml0aG0obmV3IEFMUlUoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwicmFuZFwiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMubWVtb3J5LnNldEFsZ29yaXRobShuZXcgUkFORCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJjb21wYXJlX2FsbFwiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbXBhcmVfYWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJJbnZhbGlkIGFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb21wYXJlX2FsbCkge1xuICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtcyA9IFtcbiAgICAgICAgICAgICAgICBuZXcgRklGTygpLFxuICAgICAgICAgICAgICAgIG5ldyBPUFQoKSxcbiAgICAgICAgICAgICAgICBuZXcgTFJVKCksXG4gICAgICAgICAgICAgICAgbmV3IEFMUlUoKSxcbiAgICAgICAgICAgICAgICBuZXcgUkFORCgpXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5jb21wYXJlQWxsQW5kRGlzcGxheVJlc3VsdHMoYWxnb3JpdGhtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkdVSS5zdGFydEFuaW1hdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMubWVtb3J5LnNpbXVsYXRlKCk7XG4gICAgICAgICAgICB0aGlzLm1lbW9yeS5kaXNwbGF5UmVzdWx0cyhyZXN1bHRzKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlIHtcbiAgICBpZDogbnVtYmVyXG4gICAgbGFzdF9jYWxsX3RpbWU6IG51bWJlclxuXG4gICAgY29uc3RydWN0b3IoaWQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMubGFzdF9jYWxsX3RpbWUgPSAwO1xuICAgIH1cblxuICAgIGNhbGwodGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGFzdF9jYWxsX3RpbWUgPSB0aW1lO1xuICAgIH1cbn0iLCJpbXBvcnQgUmVwbGFjZW1lbnRBbGdvcml0aG0sIHsgTWVtb3J5U3RhdGVEYXRhIH0gZnJvbSBcIi4uL1JlcGxhY2VtZW50QWxnb3JpdGhtXCI7XG5cbmltcG9ydCBQYWdlIGZyb20gXCIuLi9QYWdlXCI7XG5cbi8qKlxuICogQXBwcm94aW1hdGUgTGVhc3QgUmVjZW50bHkgVXNlZCAoQUxSVSlcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQUxSVSBpbXBsZW1lbnRzIFJlcGxhY2VtZW50QWxnb3JpdGhtIHtcbiAgICBuYW1lOiBzdHJpbmcgPSBcIkFMUlVcIlxuXG4gICAgYml0X2FycmF5OiBBcnJheTxib29sZWFuPiA9IFtdO1xuXG4gICAgb25QYWdlQ2FsbChwYWdlX2NhbGw6IFJlYWRvbmx5PFBhZ2U+KSB7XG4gICAgICAgIC8qIGluaXRpYWxpemUgdGhlIFwic2Vjb25kIGNoYW5jZVwiIGJpdCB0byAxICovXG4gICAgICAgIGlmICh0aGlzLmJpdF9hcnJheVtwYWdlX2NhbGwuaWRdID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuYml0X2FycmF5W3BhZ2VfY2FsbC5pZF0gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uUGFnZUFscmVhZHlJbk1lbW9yeShwYWdlX2NhbGw6IFJlYWRvbmx5PFBhZ2U+KSB7XG4gICAgICAgIC8qIHNldCB0aGUgXCJzZWNvbmQgY2hhbmNlXCIgYml0IHRvIDEgKi9cbiAgICAgICAgdGhpcy5iaXRfYXJyYXlbcGFnZV9jYWxsLmlkXSA9IHRydWU7XG4gICAgfVxuXG4gICAgaGFuZGxlUGFnZUZhdWx0KGRhdGE6IE1lbW9yeVN0YXRlRGF0YSk6IG51bWJlciB7XG4gICAgICAgIC8qIGZpbmQgdGhlIGZpcnQgZnJhbWUgdGhhdCBoYXMgdGhlIFwic2Vjb25kIGNoYW5jZVwiIGJpdCBzZXQgdG8gMCAqL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuY3VycmVudF9mcmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gZGF0YS5jdXJyZW50X2ZyYW1lc1tpXTtcbiAgICAgICAgICAgIGlmIChmcmFtZS5wYWdlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGcmFtZSBpcyBlbXB0eSAtIHRoaXMgc2hvdWxkIGJlIGVuc3VyZWQgbm90IHRvIGhhcHBlbiBieSB0aGUgY2FsbGVyXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiB0aGUgXCJzZWNvbmQgY2hhbmNlXCIgYml0IGlzIDAsIHNvIHdlIGNhbiByZXBsYWNlIHRoaXMgZnJhbWUgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmJpdF9hcnJheVtmcmFtZS5wYWdlLmlkXSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBzZXQgdGhlIFwic2Vjb25kIGNoYW5jZVwiIGJpdCB0byAwICovXG4gICAgICAgICAgICB0aGlzLmJpdF9hcnJheVtmcmFtZS5wYWdlLmlkXSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogaWYgd2UgZ2V0IGhlcmUsIGFsbCBmcmFtZXMgaGFkIHRoZSBcInNlY29uZCBjaGFuY2VcIiBiaXQgc2V0IHRvIDEsIHNvIHdlIHJlcGxhY2UgdGhlIGZpcnN0IGZyYW1lICovXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXBsYWNlbWVudEFsZ29yaXRobSwgeyBNZW1vcnlTdGF0ZURhdGEgfSBmcm9tIFwiLi4vUmVwbGFjZW1lbnRBbGdvcml0aG1cIjtcblxuLyoqXG4gKiBGaXJzdCBJbiBGaXJzdCBPdXQgKEZJRk8pXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZJRk8gaW1wbGVtZW50cyBSZXBsYWNlbWVudEFsZ29yaXRobSB7XG4gICAgbmFtZTogc3RyaW5nID0gXCJGSUZPXCI7XG5cbiAgICBoYW5kbGVQYWdlRmF1bHQoZGF0YTogTWVtb3J5U3RhdGVEYXRhKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIChkYXRhLmxhc3RfcmVwbGFjZWRfaW5kZXggKyAxKSAlIGRhdGEuY3VycmVudF9mcmFtZXMubGVuZ3RoO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXBsYWNlbWVudEFsZ29yaXRobSwgeyBNZW1vcnlTdGF0ZURhdGEgfSBmcm9tIFwiLi4vUmVwbGFjZW1lbnRBbGdvcml0aG1cIjtcblxuLyoqXG4gKiBMZWFzdCBSZWNlbnRseSBVc2VkIChMUlUpXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExSVSBpbXBsZW1lbnRzIFJlcGxhY2VtZW50QWxnb3JpdGhtIHtcbiAgICBuYW1lOiBzdHJpbmcgPSBcIkxSVVwiXG5cbiAgICBoYW5kbGVQYWdlRmF1bHQoZGF0YTogTWVtb3J5U3RhdGVEYXRhKTogbnVtYmVyIHsgXG4gICAgICAgIC8qIGZpbmQgdGhlIHBhZ2UgdGhhdCB3YXMgdXNlZCB0aGUgbG9uZ2VzdCBhZ28gKi9cbiAgICAgICAgbGV0IGZyYW1lX3RvX3JlcGxhY2VfaW5kZXggPSAtMTtcbiAgICAgICAgbGV0IGxlYXN0X3JlY2VudGx5X3VzZWRfcGFnZV9pbmRleCA9IC0xO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jdXJyZW50X2ZyYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZnJhbWUgPSBkYXRhLmN1cnJlbnRfZnJhbWVzW2ldO1xuICAgICAgICAgICAgaWYgKGZyYW1lLnBhZ2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZyYW1lIGlzIGVtcHR5IC0gdGhpcyBzaG91bGQgYmUgZW5zdXJlZCBub3QgdG8gaGFwcGVuIGJ5IHRoZSBjYWxsZXJcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwYWdlX2luZGV4ID0gLTE7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gZGF0YS5wcmV2aW91c19wYWdlX2NhbGxzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNfcGFnZV9jYWxsID0gZGF0YS5wcmV2aW91c19wYWdlX2NhbGxzW2pdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzX3BhZ2VfY2FsbC5pZCA9PSBmcmFtZS5wYWdlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VfaW5kZXggPSBqO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChwYWdlX2luZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgLyogcGFnZSB3YXMgbmV2ZXIgdXNlZCBiZWZvcmUgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhZ2VfaW5kZXggPCBsZWFzdF9yZWNlbnRseV91c2VkX3BhZ2VfaW5kZXggfHwgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgLyogcGFnZSB3YXMgdXNlZCBsb25nZXIgYWdvICovXG4gICAgICAgICAgICAgICAgZnJhbWVfdG9fcmVwbGFjZV9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgbGVhc3RfcmVjZW50bHlfdXNlZF9wYWdlX2luZGV4ID0gcGFnZV9pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmcmFtZV90b19yZXBsYWNlX2luZGV4O1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXBsYWNlbWVudEFsZ29yaXRobSwgeyBNZW1vcnlTdGF0ZURhdGEgfSBmcm9tIFwiLi4vUmVwbGFjZW1lbnRBbGdvcml0aG1cIjtcblxuLyoqXG4gKiBPcHRpbWFsIChPUFQpXG4gKiBOb3QgcG9zc2libGUgdG8gaW1wbGVtZW50IGluIHByYWN0aWNlICh3aXRob3V0IHRoZSBrbm93bGVkZ2Ugb2YgdGhlIGZ1dHVyZSBjYWxscylcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT1BUIGltcGxlbWVudHMgUmVwbGFjZW1lbnRBbGdvcml0aG0ge1xuICAgIG5hbWU6IHN0cmluZyA9IFwiT1BUXCJcblxuICAgIGhhbmRsZVBhZ2VGYXVsdChkYXRhOiBNZW1vcnlTdGF0ZURhdGEpOiBudW1iZXIge1xuICAgICAgICAvKiBmaW5kIHRoZSBwYWdlIHRoYXQgd2lsbCBiZSB1c2VkIHRoZSBmYXJ0aGVzdCBpbiB0aGUgZnV0dXJlICovXG4gICAgICAgIGxldCBmcmFtZV90b19yZXBsYWNlX2luZGV4ID0gLTE7XG4gICAgICAgIGxldCBmYXJ0aGVzdF9wYWdlX2luZGV4ID0gLTE7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmN1cnJlbnRfZnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IGRhdGEuY3VycmVudF9mcmFtZXNbaV07XG4gICAgICAgICAgICBpZiAoZnJhbWUucGFnZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRnJhbWUgaXMgZW1wdHkgLSB0aGlzIHNob3VsZCBiZSBlbnN1cmVkIG5vdCB0byBoYXBwZW4gYnkgdGhlIGNhbGxlclwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHBhZ2VfaW5kZXggPSAtMTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGF0YS5mdXR1cmVfcGFnZV9jYWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZ1dHVyZV9wYWdlX2NhbGwgPSBkYXRhLmZ1dHVyZV9wYWdlX2NhbGxzW2pdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZ1dHVyZV9wYWdlX2NhbGwuaWQgPT0gZnJhbWUucGFnZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICBwYWdlX2luZGV4ID0gajtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocGFnZV9pbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIC8qIHBhZ2UgaXMgbm90IHVzZWQgaW4gdGhlIGZ1dHVyZSAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGFnZV9pbmRleCA+IGZhcnRoZXN0X3BhZ2VfaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAvKiBwYWdlIGlzIHVzZWQgZnVydGhlciBpbiB0aGUgZnV0dXJlICovXG4gICAgICAgICAgICAgICAgZnJhbWVfdG9fcmVwbGFjZV9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgZmFydGhlc3RfcGFnZV9pbmRleCA9IHBhZ2VfaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnJhbWVfdG9fcmVwbGFjZV9pbmRleDtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVwbGFjZW1lbnRBbGdvcml0aG0sIHsgTWVtb3J5U3RhdGVEYXRhIH0gZnJvbSBcIi4uL1JlcGxhY2VtZW50QWxnb3JpdGhtXCI7XG5cbi8qKlxuICogUmFuZG9tIChSQU5EKVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSQU5EIGltcGxlbWVudHMgUmVwbGFjZW1lbnRBbGdvcml0aG0ge1xuICAgIG5hbWU6IHN0cmluZyA9IFwiUkFORFwiXG5cbiAgICBoYW5kbGVQYWdlRmF1bHQoZGF0YTogTWVtb3J5U3RhdGVEYXRhKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRhdGEuY3VycmVudF9mcmFtZXMubGVuZ3RoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgTWVudSBmcm9tIFwiLi9jbGFzc2VzL01lbnVcIjtcblxuaW1wb3J0IE1NVSBmcm9tIFwiLi9jbGFzc2VzL01NVVwiO1xuaW1wb3J0IFBhZ2UgZnJvbSBcIi4vY2xhc3Nlcy9QYWdlXCI7XG5cbmltcG9ydCBGSUZPIGZyb20gXCIuL2NsYXNzZXMvYWxnb3JpdGhtcy9GSUZPXCI7XG5pbXBvcnQgT1BUIGZyb20gXCIuL2NsYXNzZXMvYWxnb3JpdGhtcy9PUFRcIjtcbmltcG9ydCBMUlUgZnJvbSBcIi4vY2xhc3Nlcy9hbGdvcml0aG1zL0xSVVwiO1xuaW1wb3J0IEFMUlUgZnJvbSBcIi4vY2xhc3Nlcy9hbGdvcml0aG1zL0FMUlVcIjtcbmltcG9ydCBSQU5EIGZyb20gXCIuL2NsYXNzZXMvYWxnb3JpdGhtcy9SQU5EXCI7XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgICAgICAgbWVudS5pbml0KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvKlxuICAgICAgICAqIHJ1biB3aXRoOiB0c2MgJiYgbm9kZSAuXFxkaXN0XFxwYWdlX3JlcGxhY2VtZW50X3NyY1xcbWFpbi5qc1xuICAgICAgICAqL1xuXG4gICAgICAgIGNvbnN0IG1lbW9yeSA9IG5ldyBNTVUoKTtcbiAgICAgICAgbWVtb3J5LmluaXQoNSwgMyk7XG4gICAgICAgIG1lbW9yeS5hZGRQYWdlQ2FsbHNUb1Bvb2woWzEsIDIsIDMsIDQsIDEsIDIsIDUsIDEsIDIsIDMsIDQsIDVdKTtcbiAgICAgICAgbWVtb3J5LnNldEFsZ29yaXRobShuZXcgQUxSVSgpKTtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlIChtZW1vcnkucGFnZV9jYWxsX3F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG1lbW9yeS5uZXh0VGljaygpO1xuICAgICAgICAgICAgbWVtb3J5LnByaW50RnJhbWVzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhcIlRvdGFsIHBhZ2UgZmF1bHRzOiBcIiArIG1lbW9yeS50b3RhbF9wYWdlX2ZhdWx0cyk7XG4gICAgfVxufVxuXG5tYWluKCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEaXNwbGF5IHtcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IG51bGwgPSBudWxsXG4gICAgcmVzaXplQ2FsbGJhY2s6ICgoKSA9PiB2b2lkKSB8IG51bGxcblxuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMucmVzaXplQ2FsbGJhY2sgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICBpbml0KGVsZW1faWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtX2lkKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICAgICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemVUb0ZpdC5iaW5kKHRoaXMpKTtcblxuICAgICAgICB0aGlzLnJlc2l6ZVRvRml0KCk7XG4gICAgfVxuXG4gICAgcmVzaXplVG9GaXQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmN0eCA9PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZUNhbGxiYWNrICE9IG51bGwpe1xuICAgICAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0UmVzaXplQ2FsbGJhY2soY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXNpemVDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2NSk7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJtZW51IiwidmlzaWJsZSIsInBsYXlpbmciLCJzcGVlZCIsIkdVSSIsIk1FTlUiLCJwbGF5X3BhdXNlX2J1dHRvbiIsInN0ZXBfYnV0dG9uIiwic3RvcF9idXR0b24iLCJzcGVlZF9zbGlkZXIiLCJpbmZvX2FsZ29yaXRobSIsImluZm9fdGltZSIsImluZm9faXNfZG9uZSIsImluZm9faW5fcXVldWUiLCJpbmZvX2ZpbmlzaGVkIiwiaW5mb190b3RhbF9wYWdlX2ZhdWx0cyIsImluZm9fdG90YWxfcGFnZV9oaXRzIiwiZnJhbWVfcm93cyIsInNlZV9jb2RlX2J1dHRvbiIsInN0b3JlZFNldEludGVydmFsIiwidGhpcyIsImluaXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJkaXNwbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZVBsYXlpbmciLCJzdGVwIiwidG9nZ2xlVmlzaWJsZSIsInBhcnNlSW50IiwidmFsdWUiLCJyZWZyZXNoU3BlZWQiLCJtZW1vcnkiLCJhbGdvcml0aG0iLCJhbGdvcml0aG1OYW1lIiwibmFtZSIsIndpbmRvdyIsIm9wZW4iLCJmb2N1cyIsImluaXRTdGF0ZVRhYmxlIiwiaW5uZXJIVE1MIiwicmVzaXplQ2FsbGJhY2siLCJkcmF3Q3VycmVudFN0YXRlIiwiY2xlYXJJbnRlcnZhbCIsInJlZnJlc2hDYWxscyIsInJlc2V0IiwiRXJyb3IiLCJkaXNhYmxlZCIsInN0YXJ0QW5pbWF0aW9uIiwicmVmcmVzaEluZm8iLCJkcmF3Q2FsbHMiLCJ0aW1lX3JvdyIsImNhbGxzX3JvdyIsInRib2R5IiwidGltZV9yb3dfaGVhZGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiY2FsbHNfcm93X2hlYWRlciIsImxhc3RDaGlsZCIsImlkIiwicmVtb3ZlQ2hpbGQiLCJpIiwibnVtYmVyX29mX2ZyYW1lcyIsImZyYW1lX3JvdyIsImZyYW1lX3Jvd19oZWFkZXIiLCJwdXNoIiwiU1RBUlRfWCIsIlNUQVJUX1kiLCJXSURUSCIsIkhFSUdIVCIsImNhbGxzVG9EcmF3IiwibmV3Q2FsbCIsInByZXZpb3VzX3BhZ2VfY2FsbHMiLCJhdCIsInRpbWVUaWNrRWwiLCJ0aW1lIiwiY2FsbHNUaWNrRWwiLCJwYWdlIiwiZnJhbWVzIiwiZnJhbWVUaWNrRWwiLCJsYXN0X2NhbGxfY2F1c2VkX2ZhdWx0IiwiYmFja2dyb3VuZENvbG9yIiwidGFibGUiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsV2lkdGgiLCJ0b1N0cmluZyIsImlzRmluaXNoZWQiLCJsZW5ndGgiLCJ0b3RhbF9wYWdlX2ZhdWx0cyIsInBhZ2VfY2FsbF9xdWV1ZSIsInNldEludGVydmFsIiwiYmluZCIsIm5leHRUaWNrIiwiZGlzcGxheVJlc3VsdHMiLCJnZXRSZXN1bHRzIiwiYWZ0ZXJEb25lIiwibnVtYmVyX29mX3BhZ2VzIiwicGFnZV9jYWxsX3Bvb2wiLCJsYXN0X3JlcGxhY2VkX2luZGV4IiwiYWRkUGFnZUNhbGxUb1Bvb2wiLCJwYWdlX2NhbGwiLCJhZGRQYWdlQ2FsbHNUb1Bvb2wiLCJwYWdlX2NhbGxzIiwiY2xlYXJQYWdlQ2FsbFBvb2wiLCJzZXRBbGdvcml0aG0iLCJzaGlmdCIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwib25QYWdlQ2FsbCIsInBhZ2VfZmF1bHQiLCJvblBhZ2VBbHJlYWR5SW5NZW1vcnkiLCJmaW5kIiwiZnJhbWUiLCJkYXRhIiwiY3VycmVudF9mcmFtZXMiLCJmdXR1cmVfcGFnZV9jYWxscyIsImluZGV4X3RvX3JlcGxhY2UiLCJoYW5kbGVQYWdlRmF1bHQiLCJwYWdlX2luX21lbW9yeSIsImNhbGwiLCJzaW11bGF0ZSIsInRvdGFsX3BhZ2VfaGl0cyIsInRvdGFsX3BhZ2VfY2FsbHMiLCJwcmludEZyYW1lcyIsInJlc3VsdHMiLCJhbGdTdHIiLCJ0b1VwcGVyQ2FzZSIsInRvRml4ZWQiLCJyZXBsYWNlIiwiUmVnRXhwIiwiY29tcGFyZUFsbEFuZERpc3BsYXlSZXN1bHRzIiwiYWxnb3JpdGhtcyIsInJlc3VsdHNfZWwiLCJhbmltYXRpb25HVUkiLCJydW4iLCJhZGRDYWxscyIsImNsZWFyQ2FsbHMiLCJzZXRSZXNpemVDYWxsYmFjayIsImUiLCJuZXdfdmFsIiwidGFyZ2V0IiwiaXNOYU4iLCJhbGVydCIsImRpc3RyaWJ1dGlvbiIsInRvTG93ZXJDYXNlIiwid2luZG93X3NpemVfZWwiLCJ3aW5kb3dfZGVsdGFfZWwiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjYWxsX2NvdW50IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwid2luZG93X3NpemUiLCJ3aW5kb3dfZGVsdGEiLCJ3aW5kb3dfc3RhcnQiLCJwYWdlX2lkIiwiY3VycmVudF9wYWdlX2NhbGxzX2VsIiwicmVkdWNlIiwiYWNjIiwic2xpY2UiLCJhbmltYXRpb24iLCJjb21wYXJlX2FsbCIsImxhc3RfY2FsbF90aW1lIiwiYml0X2FycmF5IiwiZnJhbWVfdG9fcmVwbGFjZV9pbmRleCIsImxlYXN0X3JlY2VudGx5X3VzZWRfcGFnZV9pbmRleCIsInBhZ2VfaW5kZXgiLCJqIiwiZmFydGhlc3RfcGFnZV9pbmRleCIsIm1haW4iLCJjdHgiLCJlbGVtX2lkIiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsInJlc2l6ZVRvRml0Iiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjYWxsYmFjayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sInNvdXJjZVJvb3QiOiIifQ==